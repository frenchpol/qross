var ED=Object.defineProperty;var lb=e=>{throw TypeError(e)};var PD=(e,t,i)=>t in e?ED(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var cb=(e,t,i)=>PD(e,typeof t!="symbol"?t+"":t,i),uv=(e,t,i)=>t.has(e)||lb("Cannot "+i);var Oe=(e,t,i)=>(uv(e,t,"read from private field"),i?i.call(e):t.get(e)),sn=(e,t,i)=>t.has(e)?lb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Ut=(e,t,i,o)=>(uv(e,t,"write to private field"),o?o.call(e,i):t.set(e,i),i),Yr=(e,t,i)=>(uv(e,t,"access private method"),i);var zf=(e,t,i,o)=>({set _(u){Ut(e,t,u,i)},get _(){return Oe(e,t,o)}});function kD(e,t){for(var i=0;i<t.length;i++){const o=t[i];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const p=Object.getOwnPropertyDescriptor(o,u);p&&Object.defineProperty(e,u,p.get?p:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function i(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(u){if(u.ep)return;u.ep=!0;const p=i(u);fetch(u.href,p)}})();var AD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IT={exports:{}},vg={},DT={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp=Symbol.for("react.element"),MD=Symbol.for("react.portal"),ID=Symbol.for("react.fragment"),DD=Symbol.for("react.strict_mode"),LD=Symbol.for("react.profiler"),zD=Symbol.for("react.provider"),RD=Symbol.for("react.context"),FD=Symbol.for("react.forward_ref"),OD=Symbol.for("react.suspense"),BD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),ub=Symbol.iterator;function VD(e){return e===null||typeof e!="object"?null:(e=ub&&e[ub]||e["@@iterator"],typeof e=="function"?e:null)}var LT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zT=Object.assign,RT={};function Xu(e,t,i){this.props=e,this.context=t,this.refs=RT,this.updater=i||LT}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function FT(){}FT.prototype=Xu.prototype;function O_(e,t,i){this.props=e,this.context=t,this.refs=RT,this.updater=i||LT}var B_=O_.prototype=new FT;B_.constructor=O_;zT(B_,Xu.prototype);B_.isPureReactComponent=!0;var hb=Array.isArray,OT=Object.prototype.hasOwnProperty,N_={current:null},BT={key:!0,ref:!0,__self:!0,__source:!0};function NT(e,t,i){var o,u={},p=null,y=null;if(t!=null)for(o in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(p=""+t.key),t)OT.call(t,o)&&!BT.hasOwnProperty(o)&&(u[o]=t[o]);var l=arguments.length-2;if(l===1)u.children=i;else if(1<l){for(var S=Array(l),w=0;w<l;w++)S[w]=arguments[w+2];u.children=S}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)u[o]===void 0&&(u[o]=l[o]);return{$$typeof:mp,type:e,key:p,ref:y,props:u,_owner:N_.current}}function jD(e,t){return{$$typeof:mp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V_(e){return typeof e=="object"&&e!==null&&e.$$typeof===mp}function UD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var db=/\/+/g;function hv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?UD(""+e.key):t.toString(36)}function dm(e,t,i,o,u){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(p){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case mp:case MD:y=!0}}if(y)return y=e,u=u(y),e=o===""?"."+hv(y,0):o,hb(u)?(i="",e!=null&&(i=e.replace(db,"$&/")+"/"),dm(u,t,i,"",function(w){return w})):u!=null&&(V_(u)&&(u=jD(u,i+(!u.key||y&&y.key===u.key?"":(""+u.key).replace(db,"$&/")+"/")+e)),t.push(u)),1;if(y=0,o=o===""?".":o+":",hb(e))for(var l=0;l<e.length;l++){p=e[l];var S=o+hv(p,l);y+=dm(p,t,i,S,u)}else if(S=VD(e),typeof S=="function")for(e=S.call(e),l=0;!(p=e.next()).done;)p=p.value,S=o+hv(p,l++),y+=dm(p,t,i,S,u);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Rf(e,t,i){if(e==null)return e;var o=[],u=0;return dm(e,o,"","",function(p){return t.call(i,p,u++)}),o}function $D(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ci={current:null},pm={transition:null},GD={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:pm,ReactCurrentOwner:N_};function VT(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:Rf,forEach:function(e,t,i){Rf(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Rf(e,function(){t++}),t},toArray:function(e){return Rf(e,function(t){return t})||[]},only:function(e){if(!V_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wt.Component=Xu;Wt.Fragment=ID;Wt.Profiler=LD;Wt.PureComponent=O_;Wt.StrictMode=DD;Wt.Suspense=OD;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GD;Wt.act=VT;Wt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=zT({},e.props),u=e.key,p=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,y=N_.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(S in t)OT.call(t,S)&&!BT.hasOwnProperty(S)&&(o[S]=t[S]===void 0&&l!==void 0?l[S]:t[S])}var S=arguments.length-2;if(S===1)o.children=i;else if(1<S){l=Array(S);for(var w=0;w<S;w++)l[w]=arguments[w+2];o.children=l}return{$$typeof:mp,type:e.type,key:u,ref:p,props:o,_owner:y}};Wt.createContext=function(e){return e={$$typeof:RD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zD,_context:e},e.Consumer=e};Wt.createElement=NT;Wt.createFactory=function(e){var t=NT.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:FD,render:e}};Wt.isValidElement=V_;Wt.lazy=function(e){return{$$typeof:ND,_payload:{_status:-1,_result:e},_init:$D}};Wt.memo=function(e,t){return{$$typeof:BD,type:e,compare:t===void 0?null:t}};Wt.startTransition=function(e){var t=pm.transition;pm.transition={};try{e()}finally{pm.transition=t}};Wt.unstable_act=VT;Wt.useCallback=function(e,t){return Ci.current.useCallback(e,t)};Wt.useContext=function(e){return Ci.current.useContext(e)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(e){return Ci.current.useDeferredValue(e)};Wt.useEffect=function(e,t){return Ci.current.useEffect(e,t)};Wt.useId=function(){return Ci.current.useId()};Wt.useImperativeHandle=function(e,t,i){return Ci.current.useImperativeHandle(e,t,i)};Wt.useInsertionEffect=function(e,t){return Ci.current.useInsertionEffect(e,t)};Wt.useLayoutEffect=function(e,t){return Ci.current.useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return Ci.current.useMemo(e,t)};Wt.useReducer=function(e,t,i){return Ci.current.useReducer(e,t,i)};Wt.useRef=function(e){return Ci.current.useRef(e)};Wt.useState=function(e){return Ci.current.useState(e)};Wt.useSyncExternalStore=function(e,t,i){return Ci.current.useSyncExternalStore(e,t,i)};Wt.useTransition=function(){return Ci.current.useTransition()};Wt.version="18.3.1";DT.exports=Wt;var $=DT.exports;const tt=F_($),jT=kD({__proto__:null,default:tt},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qD=$,ZD=Symbol.for("react.element"),WD=Symbol.for("react.fragment"),HD=Object.prototype.hasOwnProperty,KD=qD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XD={key:!0,ref:!0,__self:!0,__source:!0};function UT(e,t,i){var o,u={},p=null,y=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(y=t.ref);for(o in t)HD.call(t,o)&&!XD.hasOwnProperty(o)&&(u[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)u[o]===void 0&&(u[o]=t[o]);return{$$typeof:ZD,type:e,key:p,ref:y,props:u,_owner:KD.current}}vg.Fragment=WD;vg.jsx=UT;vg.jsxs=UT;IT.exports=vg;var oe=IT.exports,$T={exports:{}},as={},GT={exports:{}},qT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Pe,We){var yt=Pe.length;Pe.push(We);e:for(;0<yt;){var ot=yt-1>>>1,_t=Pe[ot];if(0<u(_t,We))Pe[ot]=We,Pe[yt]=_t,yt=ot;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function o(Pe){if(Pe.length===0)return null;var We=Pe[0],yt=Pe.pop();if(yt!==We){Pe[0]=yt;e:for(var ot=0,_t=Pe.length,vt=_t>>>1;ot<vt;){var Nt=2*(ot+1)-1,Dn=Pe[Nt],Gt=Nt+1,sr=Pe[Gt];if(0>u(Dn,yt))Gt<_t&&0>u(sr,Dn)?(Pe[ot]=sr,Pe[Gt]=yt,ot=Gt):(Pe[ot]=Dn,Pe[Nt]=yt,ot=Nt);else if(Gt<_t&&0>u(sr,yt))Pe[ot]=sr,Pe[Gt]=yt,ot=Gt;else break e}}return We}function u(Pe,We){var yt=Pe.sortIndex-We.sortIndex;return yt!==0?yt:Pe.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var S=[],w=[],M=1,I=null,k=3,j=!1,X=!1,O=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(Pe){for(var We=i(w);We!==null;){if(We.callback===null)o(w);else if(We.startTime<=Pe)o(w),We.sortIndex=We.expirationTime,t(S,We);else break;We=i(w)}}function ne(Pe){if(O=!1,Z(Pe),!X)if(i(S)!==null)X=!0,mt(de);else{var We=i(w);We!==null&&Pt(ne,We.startTime-Pe)}}function de(Pe,We){X=!1,O&&(O=!1,B(we),we=-1),j=!0;var yt=k;try{for(Z(We),I=i(S);I!==null&&(!(I.expirationTime>We)||Pe&&!pt());){var ot=I.callback;if(typeof ot=="function"){I.callback=null,k=I.priorityLevel;var _t=ot(I.expirationTime<=We);We=e.unstable_now(),typeof _t=="function"?I.callback=_t:I===i(S)&&o(S),Z(We)}else o(S);I=i(S)}if(I!==null)var vt=!0;else{var Nt=i(w);Nt!==null&&Pt(ne,Nt.startTime-We),vt=!1}return vt}finally{I=null,k=yt,j=!1}}var Se=!1,ke=null,we=-1,Ye=5,Fe=-1;function pt(){return!(e.unstable_now()-Fe<Ye)}function nt(){if(ke!==null){var Pe=e.unstable_now();Fe=Pe;var We=!0;try{We=ke(!0,Pe)}finally{We?Et():(Se=!1,ke=null)}}else Se=!1}var Et;if(typeof V=="function")Et=function(){V(nt)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,dt=Ze.port2;Ze.port1.onmessage=nt,Et=function(){dt.postMessage(null)}}else Et=function(){H(nt,0)};function mt(Pe){ke=Pe,Se||(Se=!0,Et())}function Pt(Pe,We){we=H(function(){Pe(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){X||j||(X=!0,mt(de))},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(Pe){switch(k){case 1:case 2:case 3:var We=3;break;default:We=k}var yt=k;k=We;try{return Pe()}finally{k=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Pe,We){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var yt=k;k=Pe;try{return We()}finally{k=yt}},e.unstable_scheduleCallback=function(Pe,We,yt){var ot=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?ot+yt:ot):yt=ot,Pe){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=yt+_t,Pe={id:M++,callback:We,priorityLevel:Pe,startTime:yt,expirationTime:_t,sortIndex:-1},yt>ot?(Pe.sortIndex=yt,t(w,Pe),i(S)===null&&Pe===i(w)&&(O?(B(we),we=-1):O=!0,Pt(ne,yt-ot))):(Pe.sortIndex=_t,t(S,Pe),X||j||(X=!0,mt(de))),Pe},e.unstable_shouldYield=pt,e.unstable_wrapCallback=function(Pe){var We=k;return function(){var yt=k;k=We;try{return Pe.apply(this,arguments)}finally{k=yt}}}})(qT);GT.exports=qT;var YD=GT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD=$,ss=YD;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZT=new Set,jd={};function lc(e,t){Fu(e,t),Fu(e+"Capture",t)}function Fu(e,t){for(jd[e]=t,e=0;e<t.length;e++)ZT.add(t[e])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u0=Object.prototype.hasOwnProperty,JD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pb={},fb={};function e5(e){return u0.call(fb,e)?!0:u0.call(pb,e)?!1:JD.test(e)?fb[e]=!0:(pb[e]=!0,!1)}function t5(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n5(e,t,i,o){if(t===null||typeof t>"u"||t5(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(e,t,i,o,u,p,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=y}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vr[e]=new Ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vr[t]=new Ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vr[e]=new Ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vr[e]=new Ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vr[e]=new Ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vr[e]=new Ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vr[e]=new Ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vr[e]=new Ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vr[e]=new Ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var j_=/[\-:]([a-z])/g;function U_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j_,U_);Vr[t]=new Ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j_,U_);Vr[t]=new Ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j_,U_);Vr[t]=new Ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vr[e]=new Ei(e,1,!1,e.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vr[e]=new Ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function $_(e,t,i,o){var u=Vr.hasOwnProperty(t)?Vr[t]:null;(u!==null?u.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(n5(t,i,u,o)&&(i=null),o||u===null?e5(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,o=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var na=QD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=Symbol.for("react.element"),tu=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),G_=Symbol.for("react.strict_mode"),h0=Symbol.for("react.profiler"),WT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),q_=Symbol.for("react.forward_ref"),d0=Symbol.for("react.suspense"),p0=Symbol.for("react.suspense_list"),Z_=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),KT=Symbol.for("react.offscreen"),mb=Symbol.iterator;function ud(e){return e===null||typeof e!="object"?null:(e=mb&&e[mb]||e["@@iterator"],typeof e=="function"?e:null)}var jn=Object.assign,dv;function wd(e){if(dv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);dv=t&&t[1]||""}return`
`+dv+e}var pv=!1;function fv(e,t){if(!e||pv)return"";pv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var u=w.stack.split(`
`),p=o.stack.split(`
`),y=u.length-1,l=p.length-1;1<=y&&0<=l&&u[y]!==p[l];)l--;for(;1<=y&&0<=l;y--,l--)if(u[y]!==p[l]){if(y!==1||l!==1)do if(y--,l--,0>l||u[y]!==p[l]){var S=`
`+u[y].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=y&&0<=l);break}}}finally{pv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?wd(e):""}function r5(e){switch(e.tag){case 5:return wd(e.type);case 16:return wd("Lazy");case 13:return wd("Suspense");case 19:return wd("SuspenseList");case 0:case 2:case 15:return e=fv(e.type,!1),e;case 11:return e=fv(e.type.render,!1),e;case 1:return e=fv(e.type,!0),e;default:return""}}function f0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nu:return"Fragment";case tu:return"Portal";case h0:return"Profiler";case G_:return"StrictMode";case d0:return"Suspense";case p0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HT:return(e.displayName||"Context")+".Consumer";case WT:return(e._context.displayName||"Context")+".Provider";case q_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z_:return t=e.displayName||null,t!==null?t:f0(e.type)||"Memo";case Aa:t=e._payload,e=e._init;try{return f0(e(t))}catch{}}return null}function i5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f0(t);case 8:return t===G_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function XT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function s5(e){var t=XT(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(y){o=""+y,p.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Of(e){e._valueTracker||(e._valueTracker=s5(e))}function YT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=XT(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Dm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function m0(e,t){var i=t.checked;return jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function gb(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=Qa(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function QT(e,t){t=t.checked,t!=null&&$_(e,"checked",t,!1)}function g0(e,t){QT(e,t);var i=Qa(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?y0(e,t.type,i):t.hasOwnProperty("defaultValue")&&y0(e,t.type,Qa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function y0(e,t,i){(t!=="number"||Dm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var bd=Array.isArray;function yu(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Qa(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function v0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ge(92));if(bd(i)){if(1<i.length)throw Error(Ge(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Qa(i)}}function JT(e,t){var i=Qa(t.value),o=Qa(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function _b(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bf,tC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,o,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bf=Bf||document.createElement("div"),Bf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ud(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o5=["Webkit","ms","Moz","O"];Object.keys(Pd).forEach(function(e){o5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pd[t]=Pd[e]})});function nC(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Pd.hasOwnProperty(e)&&Pd[e]?(""+t).trim():t+"px"}function rC(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,u=nC(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,u):e[i]=u}}var a5=jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x0(e,t){if(t){if(a5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function w0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b0=null;function W_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var S0=null,vu=null,_u=null;function xb(e){if(e=vp(e)){if(typeof S0!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=Sg(t),S0(e.stateNode,e.type,t))}}function iC(e){vu?_u?_u.push(e):_u=[e]:vu=e}function sC(){if(vu){var e=vu,t=_u;if(_u=vu=null,xb(e),t)for(e=0;e<t.length;e++)xb(t[e])}}function oC(e,t){return e(t)}function aC(){}var mv=!1;function lC(e,t,i){if(mv)return e(t,i);mv=!0;try{return oC(e,t,i)}finally{mv=!1,(vu!==null||_u!==null)&&(aC(),sC())}}function $d(e,t){var i=e.stateNode;if(i===null)return null;var o=Sg(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ge(231,t,typeof i));return i}var T0=!1;if(Ko)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){T0=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{T0=!1}function l5(e,t,i,o,u,p,y,l,S){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(M){this.onError(M)}}var kd=!1,Lm=null,zm=!1,C0=null,c5={onError:function(e){kd=!0,Lm=e}};function u5(e,t,i,o,u,p,y,l,S){kd=!1,Lm=null,l5.apply(c5,arguments)}function h5(e,t,i,o,u,p,y,l,S){if(u5.apply(this,arguments),kd){if(kd){var w=Lm;kd=!1,Lm=null}else throw Error(Ge(198));zm||(zm=!0,C0=w)}}function cc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function cC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wb(e){if(cc(e)!==e)throw Error(Ge(188))}function d5(e){var t=e.alternate;if(!t){if(t=cc(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var p=u.alternate;if(p===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===i)return wb(u),e;if(p===o)return wb(u),t;p=p.sibling}throw Error(Ge(188))}if(i.return!==o.return)i=u,o=p;else{for(var y=!1,l=u.child;l;){if(l===i){y=!0,i=u,o=p;break}if(l===o){y=!0,o=u,i=p;break}l=l.sibling}if(!y){for(l=p.child;l;){if(l===i){y=!0,i=p,o=u;break}if(l===o){y=!0,o=p,i=u;break}l=l.sibling}if(!y)throw Error(Ge(189))}}if(i.alternate!==o)throw Error(Ge(190))}if(i.tag!==3)throw Error(Ge(188));return i.stateNode.current===i?e:t}function uC(e){return e=d5(e),e!==null?hC(e):null}function hC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hC(e);if(t!==null)return t;e=e.sibling}return null}var dC=ss.unstable_scheduleCallback,bb=ss.unstable_cancelCallback,p5=ss.unstable_shouldYield,f5=ss.unstable_requestPaint,ir=ss.unstable_now,m5=ss.unstable_getCurrentPriorityLevel,H_=ss.unstable_ImmediatePriority,pC=ss.unstable_UserBlockingPriority,Rm=ss.unstable_NormalPriority,g5=ss.unstable_LowPriority,fC=ss.unstable_IdlePriority,_g=null,go=null;function y5(e){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(_g,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:x5,v5=Math.log,_5=Math.LN2;function x5(e){return e>>>=0,e===0?32:31-(v5(e)/_5|0)|0}var Nf=64,Vf=4194304;function Sd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fm(e,t){var i=e.pendingLanes;if(i===0)return 0;var o=0,u=e.suspendedLanes,p=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~u;l!==0?o=Sd(l):(p&=y,p!==0&&(o=Sd(p)))}else y=i&~u,y!==0?o=Sd(y):p!==0&&(o=Sd(p));if(o===0)return 0;if(t!==0&&t!==o&&!(t&u)&&(u=o&-o,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if(o&4&&(o|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-Ws(t),u=1<<i,o|=e[i],t&=~u;return o}function w5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b5(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var y=31-Ws(p),l=1<<y,S=u[y];S===-1?(!(l&i)||l&o)&&(u[y]=w5(l,t)):S<=t&&(e.expiredLanes|=l),p&=~l}}function E0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mC(){var e=Nf;return Nf<<=1,!(Nf&4194240)&&(Nf=64),e}function gv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function gp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=i}function S5(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-Ws(i),p=1<<u;t[u]=0,o[u]=-1,e[u]=-1,i&=~p}}function K_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Ws(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}var ln=0;function gC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yC,X_,vC,_C,xC,P0=!1,jf=[],Ua=null,$a=null,Ga=null,Gd=new Map,qd=new Map,Da=[],T5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Gd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(t.pointerId)}}function dd(e,t,i,o,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:p,targetContainers:[u]},t!==null&&(t=vp(t),t!==null&&X_(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function C5(e,t,i,o,u){switch(t){case"focusin":return Ua=dd(Ua,e,t,i,o,u),!0;case"dragenter":return $a=dd($a,e,t,i,o,u),!0;case"mouseover":return Ga=dd(Ga,e,t,i,o,u),!0;case"pointerover":var p=u.pointerId;return Gd.set(p,dd(Gd.get(p)||null,e,t,i,o,u)),!0;case"gotpointercapture":return p=u.pointerId,qd.set(p,dd(qd.get(p)||null,e,t,i,o,u)),!0}return!1}function wC(e){var t=Ul(e.target);if(t!==null){var i=cc(t);if(i!==null){if(t=i.tag,t===13){if(t=cC(i),t!==null){e.blockedOn=t,xC(e.priority,function(){vC(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=k0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);b0=o,i.target.dispatchEvent(o),b0=null}else return t=vp(i),t!==null&&X_(t),e.blockedOn=i,!1;t.shift()}return!0}function Tb(e,t,i){fm(e)&&i.delete(t)}function E5(){P0=!1,Ua!==null&&fm(Ua)&&(Ua=null),$a!==null&&fm($a)&&($a=null),Ga!==null&&fm(Ga)&&(Ga=null),Gd.forEach(Tb),qd.forEach(Tb)}function pd(e,t){e.blockedOn===t&&(e.blockedOn=null,P0||(P0=!0,ss.unstable_scheduleCallback(ss.unstable_NormalPriority,E5)))}function Zd(e){function t(u){return pd(u,e)}if(0<jf.length){pd(jf[0],e);for(var i=1;i<jf.length;i++){var o=jf[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Ua!==null&&pd(Ua,e),$a!==null&&pd($a,e),Ga!==null&&pd(Ga,e),Gd.forEach(t),qd.forEach(t),i=0;i<Da.length;i++)o=Da[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Da.length&&(i=Da[0],i.blockedOn===null);)wC(i),i.blockedOn===null&&Da.shift()}var xu=na.ReactCurrentBatchConfig,Om=!0;function P5(e,t,i,o){var u=ln,p=xu.transition;xu.transition=null;try{ln=1,Y_(e,t,i,o)}finally{ln=u,xu.transition=p}}function k5(e,t,i,o){var u=ln,p=xu.transition;xu.transition=null;try{ln=4,Y_(e,t,i,o)}finally{ln=u,xu.transition=p}}function Y_(e,t,i,o){if(Om){var u=k0(e,t,i,o);if(u===null)Ev(e,t,o,Bm,i),Sb(e,o);else if(C5(u,e,t,i,o))o.stopPropagation();else if(Sb(e,o),t&4&&-1<T5.indexOf(e)){for(;u!==null;){var p=vp(u);if(p!==null&&yC(p),p=k0(e,t,i,o),p===null&&Ev(e,t,o,Bm,i),p===u)break;u=p}u!==null&&o.stopPropagation()}else Ev(e,t,o,null,i)}}var Bm=null;function k0(e,t,i,o){if(Bm=null,e=W_(o),e=Ul(e),e!==null)if(t=cc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=cC(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bm=e,null}function bC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m5()){case H_:return 1;case pC:return 4;case Rm:case g5:return 16;case fC:return 536870912;default:return 16}default:return 16}}var Na=null,Q_=null,mm=null;function SC(){if(mm)return mm;var e,t=Q_,i=t.length,o,u="value"in Na?Na.value:Na.textContent,p=u.length;for(e=0;e<i&&t[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&t[i-o]===u[p-o];o++);return mm=u.slice(e,1<o?1-o:void 0)}function gm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Uf(){return!0}function Cb(){return!1}function ls(e){function t(i,o,u,p,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(p):p[l]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Uf:Cb,this.isPropagationStopped=Cb,this}return jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Uf)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Uf)},persist:function(){},isPersistent:Uf}),t}var Yu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J_=ls(Yu),yp=jn({},Yu,{view:0,detail:0}),A5=ls(yp),yv,vv,fd,xg=jn({},yp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ex,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fd&&(fd&&e.type==="mousemove"?(yv=e.screenX-fd.screenX,vv=e.screenY-fd.screenY):vv=yv=0,fd=e),yv)},movementY:function(e){return"movementY"in e?e.movementY:vv}}),Eb=ls(xg),M5=jn({},xg,{dataTransfer:0}),I5=ls(M5),D5=jn({},yp,{relatedTarget:0}),_v=ls(D5),L5=jn({},Yu,{animationName:0,elapsedTime:0,pseudoElement:0}),z5=ls(L5),R5=jn({},Yu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F5=ls(R5),O5=jn({},Yu,{data:0}),Pb=ls(O5),B5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=V5[e])?!!t[e]:!1}function ex(){return j5}var U5=jn({},yp,{key:function(e){if(e.key){var t=B5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ex,charCode:function(e){return e.type==="keypress"?gm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$5=ls(U5),G5=jn({},xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kb=ls(G5),q5=jn({},yp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ex}),Z5=ls(q5),W5=jn({},Yu,{propertyName:0,elapsedTime:0,pseudoElement:0}),H5=ls(W5),K5=jn({},xg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X5=ls(K5),Y5=[9,13,27,32],tx=Ko&&"CompositionEvent"in window,Ad=null;Ko&&"documentMode"in document&&(Ad=document.documentMode);var Q5=Ko&&"TextEvent"in window&&!Ad,TC=Ko&&(!tx||Ad&&8<Ad&&11>=Ad),Ab=" ",Mb=!1;function CC(e,t){switch(e){case"keyup":return Y5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ru=!1;function J5(e,t){switch(e){case"compositionend":return EC(t);case"keypress":return t.which!==32?null:(Mb=!0,Ab);case"textInput":return e=t.data,e===Ab&&Mb?null:e;default:return null}}function e4(e,t){if(ru)return e==="compositionend"||!tx&&CC(e,t)?(e=SC(),mm=Q_=Na=null,ru=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TC&&t.locale!=="ko"?null:t.data;default:return null}}var t4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ib(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t4[e.type]:t==="textarea"}function PC(e,t,i,o){iC(o),t=Nm(t,"onChange"),0<t.length&&(i=new J_("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Md=null,Wd=null;function n4(e){BC(e,0)}function wg(e){var t=ou(e);if(YT(t))return e}function r4(e,t){if(e==="change")return t}var kC=!1;if(Ko){var xv;if(Ko){var wv="oninput"in document;if(!wv){var Db=document.createElement("div");Db.setAttribute("oninput","return;"),wv=typeof Db.oninput=="function"}xv=wv}else xv=!1;kC=xv&&(!document.documentMode||9<document.documentMode)}function Lb(){Md&&(Md.detachEvent("onpropertychange",AC),Wd=Md=null)}function AC(e){if(e.propertyName==="value"&&wg(Wd)){var t=[];PC(t,Wd,e,W_(e)),lC(n4,t)}}function i4(e,t,i){e==="focusin"?(Lb(),Md=t,Wd=i,Md.attachEvent("onpropertychange",AC)):e==="focusout"&&Lb()}function s4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wg(Wd)}function o4(e,t){if(e==="click")return wg(t)}function a4(e,t){if(e==="input"||e==="change")return wg(t)}function l4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ks=typeof Object.is=="function"?Object.is:l4;function Hd(e,t){if(Ks(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!u0.call(t,u)||!Ks(e[u],t[u]))return!1}return!0}function zb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rb(e,t){var i=zb(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=zb(i)}}function MC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IC(){for(var e=window,t=Dm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Dm(e.document)}return t}function nx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function c4(e){var t=IC(),i=e.focusedElem,o=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&MC(i.ownerDocument.documentElement,i)){if(o!==null&&nx(i)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,p=Math.min(o.start,u);o=o.end===void 0?p:Math.min(o.end,u),!e.extend&&p>o&&(u=o,o=p,p=u),u=Rb(i,p);var y=Rb(i,o);u&&y&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u4=Ko&&"documentMode"in document&&11>=document.documentMode,iu=null,A0=null,Id=null,M0=!1;function Fb(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;M0||iu==null||iu!==Dm(o)||(o=iu,"selectionStart"in o&&nx(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Id&&Hd(Id,o)||(Id=o,o=Nm(A0,"onSelect"),0<o.length&&(t=new J_("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=iu)))}function $f(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var su={animationend:$f("Animation","AnimationEnd"),animationiteration:$f("Animation","AnimationIteration"),animationstart:$f("Animation","AnimationStart"),transitionend:$f("Transition","TransitionEnd")},bv={},DC={};Ko&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete su.animationend.animation,delete su.animationiteration.animation,delete su.animationstart.animation),"TransitionEvent"in window||delete su.transitionend.transition);function bg(e){if(bv[e])return bv[e];if(!su[e])return e;var t=su[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in DC)return bv[e]=t[i];return e}var LC=bg("animationend"),zC=bg("animationiteration"),RC=bg("animationstart"),FC=bg("transitionend"),OC=new Map,Ob="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ll(e,t){OC.set(e,t),lc(t,[e])}for(var Sv=0;Sv<Ob.length;Sv++){var Tv=Ob[Sv],h4=Tv.toLowerCase(),d4=Tv[0].toUpperCase()+Tv.slice(1);ll(h4,"on"+d4)}ll(LC,"onAnimationEnd");ll(zC,"onAnimationIteration");ll(RC,"onAnimationStart");ll("dblclick","onDoubleClick");ll("focusin","onFocus");ll("focusout","onBlur");ll(FC,"onTransitionEnd");Fu("onMouseEnter",["mouseout","mouseover"]);Fu("onMouseLeave",["mouseout","mouseover"]);Fu("onPointerEnter",["pointerout","pointerover"]);Fu("onPointerLeave",["pointerout","pointerover"]);lc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lc("onBeforeInput",["compositionend","keypress","textInput","paste"]);lc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function Bb(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,h5(o,t,void 0,e),e.currentTarget=null}function BC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var p=void 0;if(t)for(var y=o.length-1;0<=y;y--){var l=o[y],S=l.instance,w=l.currentTarget;if(l=l.listener,S!==p&&u.isPropagationStopped())break e;Bb(u,l,w),p=S}else for(y=0;y<o.length;y++){if(l=o[y],S=l.instance,w=l.currentTarget,l=l.listener,S!==p&&u.isPropagationStopped())break e;Bb(u,l,w),p=S}}}if(zm)throw e=C0,zm=!1,C0=null,e}function Cn(e,t){var i=t[R0];i===void 0&&(i=t[R0]=new Set);var o=e+"__bubble";i.has(o)||(NC(t,e,2,!1),i.add(o))}function Cv(e,t,i){var o=0;t&&(o|=4),NC(i,e,o,t)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[Gf]){e[Gf]=!0,ZT.forEach(function(i){i!=="selectionchange"&&(p4.has(i)||Cv(i,!1,e),Cv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gf]||(t[Gf]=!0,Cv("selectionchange",!1,t))}}function NC(e,t,i,o){switch(bC(t)){case 1:var u=P5;break;case 4:u=k5;break;default:u=Y_}i=u.bind(null,t,i,e),u=void 0,!T0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Ev(e,t,i,o,u){var p=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var l=o.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(y===4)for(y=o.return;y!==null;){var S=y.tag;if((S===3||S===4)&&(S=y.stateNode.containerInfo,S===u||S.nodeType===8&&S.parentNode===u))return;y=y.return}for(;l!==null;){if(y=Ul(l),y===null)return;if(S=y.tag,S===5||S===6){o=p=y;continue e}l=l.parentNode}}o=o.return}lC(function(){var w=p,M=W_(i),I=[];e:{var k=OC.get(e);if(k!==void 0){var j=J_,X=e;switch(e){case"keypress":if(gm(i)===0)break e;case"keydown":case"keyup":j=$5;break;case"focusin":X="focus",j=_v;break;case"focusout":X="blur",j=_v;break;case"beforeblur":case"afterblur":j=_v;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=I5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Z5;break;case LC:case zC:case RC:j=z5;break;case FC:j=H5;break;case"scroll":j=A5;break;case"wheel":j=X5;break;case"copy":case"cut":case"paste":j=F5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=kb}var O=(t&4)!==0,H=!O&&e==="scroll",B=O?k!==null?k+"Capture":null:k;O=[];for(var V=w,Z;V!==null;){Z=V;var ne=Z.stateNode;if(Z.tag===5&&ne!==null&&(Z=ne,B!==null&&(ne=$d(V,B),ne!=null&&O.push(Xd(V,ne,Z)))),H)break;V=V.return}0<O.length&&(k=new j(k,X,null,i,M),I.push({event:k,listeners:O}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",k&&i!==b0&&(X=i.relatedTarget||i.fromElement)&&(Ul(X)||X[Xo]))break e;if((j||k)&&(k=M.window===M?M:(k=M.ownerDocument)?k.defaultView||k.parentWindow:window,j?(X=i.relatedTarget||i.toElement,j=w,X=X?Ul(X):null,X!==null&&(H=cc(X),X!==H||X.tag!==5&&X.tag!==6)&&(X=null)):(j=null,X=w),j!==X)){if(O=Eb,ne="onMouseLeave",B="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(O=kb,ne="onPointerLeave",B="onPointerEnter",V="pointer"),H=j==null?k:ou(j),Z=X==null?k:ou(X),k=new O(ne,V+"leave",j,i,M),k.target=H,k.relatedTarget=Z,ne=null,Ul(M)===w&&(O=new O(B,V+"enter",X,i,M),O.target=Z,O.relatedTarget=H,ne=O),H=ne,j&&X)t:{for(O=j,B=X,V=0,Z=O;Z;Z=Xc(Z))V++;for(Z=0,ne=B;ne;ne=Xc(ne))Z++;for(;0<V-Z;)O=Xc(O),V--;for(;0<Z-V;)B=Xc(B),Z--;for(;V--;){if(O===B||B!==null&&O===B.alternate)break t;O=Xc(O),B=Xc(B)}O=null}else O=null;j!==null&&Nb(I,k,j,O,!1),X!==null&&H!==null&&Nb(I,H,X,O,!0)}}e:{if(k=w?ou(w):window,j=k.nodeName&&k.nodeName.toLowerCase(),j==="select"||j==="input"&&k.type==="file")var de=r4;else if(Ib(k))if(kC)de=a4;else{de=s4;var Se=i4}else(j=k.nodeName)&&j.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(de=o4);if(de&&(de=de(e,w))){PC(I,de,i,M);break e}Se&&Se(e,k,w),e==="focusout"&&(Se=k._wrapperState)&&Se.controlled&&k.type==="number"&&y0(k,"number",k.value)}switch(Se=w?ou(w):window,e){case"focusin":(Ib(Se)||Se.contentEditable==="true")&&(iu=Se,A0=w,Id=null);break;case"focusout":Id=A0=iu=null;break;case"mousedown":M0=!0;break;case"contextmenu":case"mouseup":case"dragend":M0=!1,Fb(I,i,M);break;case"selectionchange":if(u4)break;case"keydown":case"keyup":Fb(I,i,M)}var ke;if(tx)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else ru?CC(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(TC&&i.locale!=="ko"&&(ru||we!=="onCompositionStart"?we==="onCompositionEnd"&&ru&&(ke=SC()):(Na=M,Q_="value"in Na?Na.value:Na.textContent,ru=!0)),Se=Nm(w,we),0<Se.length&&(we=new Pb(we,e,null,i,M),I.push({event:we,listeners:Se}),ke?we.data=ke:(ke=EC(i),ke!==null&&(we.data=ke)))),(ke=Q5?J5(e,i):e4(e,i))&&(w=Nm(w,"onBeforeInput"),0<w.length&&(M=new Pb("onBeforeInput","beforeinput",null,i,M),I.push({event:M,listeners:w}),M.data=ke))}BC(I,t)})}function Xd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Nm(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=$d(e,i),p!=null&&o.unshift(Xd(e,p,u)),p=$d(e,t),p!=null&&o.push(Xd(e,p,u))),e=e.return}return o}function Xc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nb(e,t,i,o,u){for(var p=t._reactName,y=[];i!==null&&i!==o;){var l=i,S=l.alternate,w=l.stateNode;if(S!==null&&S===o)break;l.tag===5&&w!==null&&(l=w,u?(S=$d(i,p),S!=null&&y.unshift(Xd(i,S,l))):u||(S=$d(i,p),S!=null&&y.push(Xd(i,S,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var f4=/\r\n?/g,m4=/\u0000|\uFFFD/g;function Vb(e){return(typeof e=="string"?e:""+e).replace(f4,`
`).replace(m4,"")}function qf(e,t,i){if(t=Vb(t),Vb(e)!==t&&i)throw Error(Ge(425))}function Vm(){}var I0=null,D0=null;function L0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z0=typeof setTimeout=="function"?setTimeout:void 0,g4=typeof clearTimeout=="function"?clearTimeout:void 0,jb=typeof Promise=="function"?Promise:void 0,y4=typeof queueMicrotask=="function"?queueMicrotask:typeof jb<"u"?function(e){return jb.resolve(null).then(e).catch(v4)}:z0;function v4(e){setTimeout(function(){throw e})}function Pv(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(o===0){e.removeChild(u),Zd(t);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=u}while(i);Zd(t)}function qa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ub(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Qu=Math.random().toString(36).slice(2),fo="__reactFiber$"+Qu,Yd="__reactProps$"+Qu,Xo="__reactContainer$"+Qu,R0="__reactEvents$"+Qu,_4="__reactListeners$"+Qu,x4="__reactHandles$"+Qu;function Ul(e){var t=e[fo];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xo]||i[fo]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Ub(e);e!==null;){if(i=e[fo])return i;e=Ub(e)}return t}e=i,i=e.parentNode}return null}function vp(e){return e=e[fo]||e[Xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ou(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function Sg(e){return e[Yd]||null}var F0=[],au=-1;function cl(e){return{current:e}}function Pn(e){0>au||(e.current=F0[au],F0[au]=null,au--)}function xn(e,t){au++,F0[au]=e.current,e.current=t}var Ja={},si=cl(Ja),Vi=cl(!1),tc=Ja;function Ou(e,t){var i=e.type.contextTypes;if(!i)return Ja;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in i)u[p]=t[p];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function ji(e){return e=e.childContextTypes,e!=null}function jm(){Pn(Vi),Pn(si)}function $b(e,t,i){if(si.current!==Ja)throw Error(Ge(168));xn(si,t),xn(Vi,i)}function VC(e,t,i){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var u in o)if(!(u in t))throw Error(Ge(108,i5(e)||"Unknown",u));return jn({},i,o)}function Um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ja,tc=si.current,xn(si,e),xn(Vi,Vi.current),!0}function Gb(e,t,i){var o=e.stateNode;if(!o)throw Error(Ge(169));i?(e=VC(e,t,tc),o.__reactInternalMemoizedMergedChildContext=e,Pn(Vi),Pn(si),xn(si,e)):Pn(Vi),xn(Vi,i)}var jo=null,Tg=!1,kv=!1;function jC(e){jo===null?jo=[e]:jo.push(e)}function w4(e){Tg=!0,jC(e)}function ul(){if(!kv&&jo!==null){kv=!0;var e=0,t=ln;try{var i=jo;for(ln=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}jo=null,Tg=!1}catch(u){throw jo!==null&&(jo=jo.slice(e+1)),dC(H_,ul),u}finally{ln=t,kv=!1}}return null}var lu=[],cu=0,$m=null,Gm=0,bs=[],Ss=0,nc=null,Uo=1,$o="";function Bl(e,t){lu[cu++]=Gm,lu[cu++]=$m,$m=e,Gm=t}function UC(e,t,i){bs[Ss++]=Uo,bs[Ss++]=$o,bs[Ss++]=nc,nc=e;var o=Uo;e=$o;var u=32-Ws(o)-1;o&=~(1<<u),i+=1;var p=32-Ws(t)+u;if(30<p){var y=u-u%5;p=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Uo=1<<32-Ws(t)+u|i<<u|o,$o=p+e}else Uo=1<<p|i<<u|o,$o=e}function rx(e){e.return!==null&&(Bl(e,1),UC(e,1,0))}function ix(e){for(;e===$m;)$m=lu[--cu],lu[cu]=null,Gm=lu[--cu],lu[cu]=null;for(;e===nc;)nc=bs[--Ss],bs[Ss]=null,$o=bs[--Ss],bs[Ss]=null,Uo=bs[--Ss],bs[Ss]=null}var ns=null,ts=null,In=!1,qs=null;function $C(e,t){var i=Ts(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function qb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,ts=qa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=nc!==null?{id:Uo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ts(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,ns=e,ts=null,!0):!1;default:return!1}}function O0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function B0(e){if(In){var t=ts;if(t){var i=t;if(!qb(e,t)){if(O0(e))throw Error(Ge(418));t=qa(i.nextSibling);var o=ns;t&&qb(e,t)?$C(o,i):(e.flags=e.flags&-4097|2,In=!1,ns=e)}}else{if(O0(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,In=!1,ns=e}}}function Zb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function Zf(e){if(e!==ns)return!1;if(!In)return Zb(e),In=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!L0(e.type,e.memoizedProps)),t&&(t=ts)){if(O0(e))throw GC(),Error(Ge(418));for(;t;)$C(e,t),t=qa(t.nextSibling)}if(Zb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ts=qa(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ts=null}}else ts=ns?qa(e.stateNode.nextSibling):null;return!0}function GC(){for(var e=ts;e;)e=qa(e.nextSibling)}function Bu(){ts=ns=null,In=!1}function sx(e){qs===null?qs=[e]:qs.push(e)}var b4=na.ReactCurrentBatchConfig;function md(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ge(309));var o=i.stateNode}if(!o)throw Error(Ge(147,e));var u=o,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(y){var l=u.refs;y===null?delete l[p]:l[p]=y},t._stringRef=p,t)}if(typeof e!="string")throw Error(Ge(284));if(!i._owner)throw Error(Ge(290,e))}return e}function Wf(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wb(e){var t=e._init;return t(e._payload)}function qC(e){function t(B,V){if(e){var Z=B.deletions;Z===null?(B.deletions=[V],B.flags|=16):Z.push(V)}}function i(B,V){if(!e)return null;for(;V!==null;)t(B,V),V=V.sibling;return null}function o(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function u(B,V){return B=Ka(B,V),B.index=0,B.sibling=null,B}function p(B,V,Z){return B.index=Z,e?(Z=B.alternate,Z!==null?(Z=Z.index,Z<V?(B.flags|=2,V):Z):(B.flags|=2,V)):(B.flags|=1048576,V)}function y(B){return e&&B.alternate===null&&(B.flags|=2),B}function l(B,V,Z,ne){return V===null||V.tag!==6?(V=Rv(Z,B.mode,ne),V.return=B,V):(V=u(V,Z),V.return=B,V)}function S(B,V,Z,ne){var de=Z.type;return de===nu?M(B,V,Z.props.children,ne,Z.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Aa&&Wb(de)===V.type)?(ne=u(V,Z.props),ne.ref=md(B,V,Z),ne.return=B,ne):(ne=Sm(Z.type,Z.key,Z.props,null,B.mode,ne),ne.ref=md(B,V,Z),ne.return=B,ne)}function w(B,V,Z,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=Fv(Z,B.mode,ne),V.return=B,V):(V=u(V,Z.children||[]),V.return=B,V)}function M(B,V,Z,ne,de){return V===null||V.tag!==7?(V=Ql(Z,B.mode,ne,de),V.return=B,V):(V=u(V,Z),V.return=B,V)}function I(B,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Rv(""+V,B.mode,Z),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ff:return Z=Sm(V.type,V.key,V.props,null,B.mode,Z),Z.ref=md(B,null,V),Z.return=B,Z;case tu:return V=Fv(V,B.mode,Z),V.return=B,V;case Aa:var ne=V._init;return I(B,ne(V._payload),Z)}if(bd(V)||ud(V))return V=Ql(V,B.mode,Z,null),V.return=B,V;Wf(B,V)}return null}function k(B,V,Z,ne){var de=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return de!==null?null:l(B,V,""+Z,ne);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ff:return Z.key===de?S(B,V,Z,ne):null;case tu:return Z.key===de?w(B,V,Z,ne):null;case Aa:return de=Z._init,k(B,V,de(Z._payload),ne)}if(bd(Z)||ud(Z))return de!==null?null:M(B,V,Z,ne,null);Wf(B,Z)}return null}function j(B,V,Z,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return B=B.get(Z)||null,l(V,B,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ff:return B=B.get(ne.key===null?Z:ne.key)||null,S(V,B,ne,de);case tu:return B=B.get(ne.key===null?Z:ne.key)||null,w(V,B,ne,de);case Aa:var Se=ne._init;return j(B,V,Z,Se(ne._payload),de)}if(bd(ne)||ud(ne))return B=B.get(Z)||null,M(V,B,ne,de,null);Wf(V,ne)}return null}function X(B,V,Z,ne){for(var de=null,Se=null,ke=V,we=V=0,Ye=null;ke!==null&&we<Z.length;we++){ke.index>we?(Ye=ke,ke=null):Ye=ke.sibling;var Fe=k(B,ke,Z[we],ne);if(Fe===null){ke===null&&(ke=Ye);break}e&&ke&&Fe.alternate===null&&t(B,ke),V=p(Fe,V,we),Se===null?de=Fe:Se.sibling=Fe,Se=Fe,ke=Ye}if(we===Z.length)return i(B,ke),In&&Bl(B,we),de;if(ke===null){for(;we<Z.length;we++)ke=I(B,Z[we],ne),ke!==null&&(V=p(ke,V,we),Se===null?de=ke:Se.sibling=ke,Se=ke);return In&&Bl(B,we),de}for(ke=o(B,ke);we<Z.length;we++)Ye=j(ke,B,we,Z[we],ne),Ye!==null&&(e&&Ye.alternate!==null&&ke.delete(Ye.key===null?we:Ye.key),V=p(Ye,V,we),Se===null?de=Ye:Se.sibling=Ye,Se=Ye);return e&&ke.forEach(function(pt){return t(B,pt)}),In&&Bl(B,we),de}function O(B,V,Z,ne){var de=ud(Z);if(typeof de!="function")throw Error(Ge(150));if(Z=de.call(Z),Z==null)throw Error(Ge(151));for(var Se=de=null,ke=V,we=V=0,Ye=null,Fe=Z.next();ke!==null&&!Fe.done;we++,Fe=Z.next()){ke.index>we?(Ye=ke,ke=null):Ye=ke.sibling;var pt=k(B,ke,Fe.value,ne);if(pt===null){ke===null&&(ke=Ye);break}e&&ke&&pt.alternate===null&&t(B,ke),V=p(pt,V,we),Se===null?de=pt:Se.sibling=pt,Se=pt,ke=Ye}if(Fe.done)return i(B,ke),In&&Bl(B,we),de;if(ke===null){for(;!Fe.done;we++,Fe=Z.next())Fe=I(B,Fe.value,ne),Fe!==null&&(V=p(Fe,V,we),Se===null?de=Fe:Se.sibling=Fe,Se=Fe);return In&&Bl(B,we),de}for(ke=o(B,ke);!Fe.done;we++,Fe=Z.next())Fe=j(ke,B,we,Fe.value,ne),Fe!==null&&(e&&Fe.alternate!==null&&ke.delete(Fe.key===null?we:Fe.key),V=p(Fe,V,we),Se===null?de=Fe:Se.sibling=Fe,Se=Fe);return e&&ke.forEach(function(nt){return t(B,nt)}),In&&Bl(B,we),de}function H(B,V,Z,ne){if(typeof Z=="object"&&Z!==null&&Z.type===nu&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ff:e:{for(var de=Z.key,Se=V;Se!==null;){if(Se.key===de){if(de=Z.type,de===nu){if(Se.tag===7){i(B,Se.sibling),V=u(Se,Z.props.children),V.return=B,B=V;break e}}else if(Se.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Aa&&Wb(de)===Se.type){i(B,Se.sibling),V=u(Se,Z.props),V.ref=md(B,Se,Z),V.return=B,B=V;break e}i(B,Se);break}else t(B,Se);Se=Se.sibling}Z.type===nu?(V=Ql(Z.props.children,B.mode,ne,Z.key),V.return=B,B=V):(ne=Sm(Z.type,Z.key,Z.props,null,B.mode,ne),ne.ref=md(B,V,Z),ne.return=B,B=ne)}return y(B);case tu:e:{for(Se=Z.key;V!==null;){if(V.key===Se)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){i(B,V.sibling),V=u(V,Z.children||[]),V.return=B,B=V;break e}else{i(B,V);break}else t(B,V);V=V.sibling}V=Fv(Z,B.mode,ne),V.return=B,B=V}return y(B);case Aa:return Se=Z._init,H(B,V,Se(Z._payload),ne)}if(bd(Z))return X(B,V,Z,ne);if(ud(Z))return O(B,V,Z,ne);Wf(B,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,V!==null&&V.tag===6?(i(B,V.sibling),V=u(V,Z),V.return=B,B=V):(i(B,V),V=Rv(Z,B.mode,ne),V.return=B,B=V),y(B)):i(B,V)}return H}var Nu=qC(!0),ZC=qC(!1),qm=cl(null),Zm=null,uu=null,ox=null;function ax(){ox=uu=Zm=null}function lx(e){var t=qm.current;Pn(qm),e._currentValue=t}function N0(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function wu(e,t){Zm=e,ox=uu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ni=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(ox!==e)if(e={context:e,memoizedValue:t,next:null},uu===null){if(Zm===null)throw Error(Ge(308));uu=e,Zm.dependencies={lanes:0,firstContext:e}}else uu=uu.next=e;return t}var $l=null;function cx(e){$l===null?$l=[e]:$l.push(e)}function WC(e,t,i,o){var u=t.interleaved;return u===null?(i.next=i,cx(t)):(i.next=u.next,u.next=i),t.interleaved=i,Yo(e,o)}function Yo(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ma=!1;function ux(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Za(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Jt&2){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,Yo(e,i)}return u=o.interleaved,u===null?(t.next=t,cx(o)):(t.next=u.next,u.next=t),o.interleaved=t,Yo(e,i)}function ym(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,K_(e,i)}}function Hb(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?u=p=y:p=p.next=y,i=i.next}while(i!==null);p===null?u=p=t:p=p.next=t}else u=p=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Wm(e,t,i,o){var u=e.updateQueue;Ma=!1;var p=u.firstBaseUpdate,y=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var S=l,w=S.next;S.next=null,y===null?p=w:y.next=w,y=S;var M=e.alternate;M!==null&&(M=M.updateQueue,l=M.lastBaseUpdate,l!==y&&(l===null?M.firstBaseUpdate=w:l.next=w,M.lastBaseUpdate=S))}if(p!==null){var I=u.baseState;y=0,M=w=S=null,l=p;do{var k=l.lane,j=l.eventTime;if((o&k)===k){M!==null&&(M=M.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var X=e,O=l;switch(k=t,j=i,O.tag){case 1:if(X=O.payload,typeof X=="function"){I=X.call(j,I,k);break e}I=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=O.payload,k=typeof X=="function"?X.call(j,I,k):X,k==null)break e;I=jn({},I,k);break e;case 2:Ma=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=u.effects,k===null?u.effects=[l]:k.push(l))}else j={eventTime:j,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},M===null?(w=M=j,S=I):M=M.next=j,y|=k;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;k=l,l=k.next,k.next=null,u.lastBaseUpdate=k,u.shared.pending=null}}while(!0);if(M===null&&(S=I),u.baseState=S,u.firstBaseUpdate=w,u.lastBaseUpdate=M,t=u.shared.interleaved,t!==null){u=t;do y|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);ic|=y,e.lanes=y,e.memoizedState=I}}function Kb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],u=o.callback;if(u!==null){if(o.callback=null,o=i,typeof u!="function")throw Error(Ge(191,u));u.call(o)}}}var _p={},yo=cl(_p),Qd=cl(_p),Jd=cl(_p);function Gl(e){if(e===_p)throw Error(Ge(174));return e}function hx(e,t){switch(xn(Jd,t),xn(Qd,e),xn(yo,_p),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_0(t,e)}Pn(yo),xn(yo,t)}function Vu(){Pn(yo),Pn(Qd),Pn(Jd)}function KC(e){Gl(Jd.current);var t=Gl(yo.current),i=_0(t,e.type);t!==i&&(xn(Qd,e),xn(yo,i))}function dx(e){Qd.current===e&&(Pn(yo),Pn(Qd))}var Bn=cl(0);function Hm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Av=[];function px(){for(var e=0;e<Av.length;e++)Av[e]._workInProgressVersionPrimary=null;Av.length=0}var vm=na.ReactCurrentDispatcher,Mv=na.ReactCurrentBatchConfig,rc=0,Vn=null,mr=null,Er=null,Km=!1,Dd=!1,ep=0,S4=0;function Qr(){throw Error(Ge(321))}function fx(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ks(e[i],t[i]))return!1;return!0}function mx(e,t,i,o,u,p){if(rc=p,Vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vm.current=e===null||e.memoizedState===null?P4:k4,e=i(o,u),Dd){p=0;do{if(Dd=!1,ep=0,25<=p)throw Error(Ge(301));p+=1,Er=mr=null,t.updateQueue=null,vm.current=A4,e=i(o,u)}while(Dd)}if(vm.current=Xm,t=mr!==null&&mr.next!==null,rc=0,Er=mr=Vn=null,Km=!1,t)throw Error(Ge(300));return e}function gx(){var e=ep!==0;return ep=0,e}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Vn.memoizedState=Er=e:Er=Er.next=e,Er}function Ps(){if(mr===null){var e=Vn.alternate;e=e!==null?e.memoizedState:null}else e=mr.next;var t=Er===null?Vn.memoizedState:Er.next;if(t!==null)Er=t,mr=e;else{if(e===null)throw Error(Ge(310));mr=e,e={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Er===null?Vn.memoizedState=Er=e:Er=Er.next=e}return Er}function tp(e,t){return typeof t=="function"?t(e):t}function Iv(e){var t=Ps(),i=t.queue;if(i===null)throw Error(Ge(311));i.lastRenderedReducer=e;var o=mr,u=o.baseQueue,p=i.pending;if(p!==null){if(u!==null){var y=u.next;u.next=p.next,p.next=y}o.baseQueue=u=p,i.pending=null}if(u!==null){p=u.next,o=o.baseState;var l=y=null,S=null,w=p;do{var M=w.lane;if((rc&M)===M)S!==null&&(S=S.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var I={lane:M,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};S===null?(l=S=I,y=o):S=S.next=I,Vn.lanes|=M,ic|=M}w=w.next}while(w!==null&&w!==p);S===null?y=o:S.next=l,Ks(o,t.memoizedState)||(Ni=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=S,i.lastRenderedState=o}if(e=i.interleaved,e!==null){u=e;do p=u.lane,Vn.lanes|=p,ic|=p,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Dv(e){var t=Ps(),i=t.queue;if(i===null)throw Error(Ge(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,p=t.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do p=e(p,y.action),y=y.next;while(y!==u);Ks(p,t.memoizedState)||(Ni=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,o]}function XC(){}function YC(e,t){var i=Vn,o=Ps(),u=t(),p=!Ks(o.memoizedState,u);if(p&&(o.memoizedState=u,Ni=!0),o=o.queue,yx(eE.bind(null,i,o,e),[e]),o.getSnapshot!==t||p||Er!==null&&Er.memoizedState.tag&1){if(i.flags|=2048,np(9,JC.bind(null,i,o,u,t),void 0,null),Pr===null)throw Error(Ge(349));rc&30||QC(i,t,u)}return u}function QC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function JC(e,t,i,o){t.value=i,t.getSnapshot=o,tE(t)&&nE(e)}function eE(e,t,i){return i(function(){tE(t)&&nE(e)})}function tE(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ks(e,i)}catch{return!0}}function nE(e){var t=Yo(e,1);t!==null&&Hs(t,e,1,-1)}function Xb(e){var t=co();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:e},t.queue=e,e=e.dispatch=E4.bind(null,Vn,e),[t.memoizedState,e]}function np(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function rE(){return Ps().memoizedState}function _m(e,t,i,o){var u=co();Vn.flags|=e,u.memoizedState=np(1|t,i,void 0,o===void 0?null:o)}function Cg(e,t,i,o){var u=Ps();o=o===void 0?null:o;var p=void 0;if(mr!==null){var y=mr.memoizedState;if(p=y.destroy,o!==null&&fx(o,y.deps)){u.memoizedState=np(t,i,p,o);return}}Vn.flags|=e,u.memoizedState=np(1|t,i,p,o)}function Yb(e,t){return _m(8390656,8,e,t)}function yx(e,t){return Cg(2048,8,e,t)}function iE(e,t){return Cg(4,2,e,t)}function sE(e,t){return Cg(4,4,e,t)}function oE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aE(e,t,i){return i=i!=null?i.concat([e]):null,Cg(4,4,oE.bind(null,t,e),i)}function vx(){}function lE(e,t){var i=Ps();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&fx(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function cE(e,t){var i=Ps();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&fx(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function uE(e,t,i){return rc&21?(Ks(i,t)||(i=mC(),Vn.lanes|=i,ic|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ni=!0),e.memoizedState=i)}function T4(e,t){var i=ln;ln=i!==0&&4>i?i:4,e(!0);var o=Mv.transition;Mv.transition={};try{e(!1),t()}finally{ln=i,Mv.transition=o}}function hE(){return Ps().memoizedState}function C4(e,t,i){var o=Ha(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},dE(e))pE(t,i);else if(i=WC(e,t,i,o),i!==null){var u=Ti();Hs(i,e,o,u),fE(i,t,o)}}function E4(e,t,i){var o=Ha(e),u={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(dE(e))pE(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var y=t.lastRenderedState,l=p(y,i);if(u.hasEagerState=!0,u.eagerState=l,Ks(l,y)){var S=t.interleaved;S===null?(u.next=u,cx(t)):(u.next=S.next,S.next=u),t.interleaved=u;return}}catch{}finally{}i=WC(e,t,u,o),i!==null&&(u=Ti(),Hs(i,e,o,u),fE(i,t,o))}}function dE(e){var t=e.alternate;return e===Vn||t!==null&&t===Vn}function pE(e,t){Dd=Km=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function fE(e,t,i){if(i&4194240){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,K_(e,i)}}var Xm={readContext:Es,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},P4={readContext:Es,useCallback:function(e,t){return co().memoizedState=[e,t===void 0?null:t],e},useContext:Es,useEffect:Yb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,_m(4194308,4,oE.bind(null,t,e),i)},useLayoutEffect:function(e,t){return _m(4194308,4,e,t)},useInsertionEffect:function(e,t){return _m(4,2,e,t)},useMemo:function(e,t){var i=co();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=co();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=C4.bind(null,Vn,e),[o.memoizedState,e]},useRef:function(e){var t=co();return e={current:e},t.memoizedState=e},useState:Xb,useDebugValue:vx,useDeferredValue:function(e){return co().memoizedState=e},useTransition:function(){var e=Xb(!1),t=e[0];return e=T4.bind(null,e[1]),co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var o=Vn,u=co();if(In){if(i===void 0)throw Error(Ge(407));i=i()}else{if(i=t(),Pr===null)throw Error(Ge(349));rc&30||QC(o,t,i)}u.memoizedState=i;var p={value:i,getSnapshot:t};return u.queue=p,Yb(eE.bind(null,o,p,e),[e]),o.flags|=2048,np(9,JC.bind(null,o,p,i,t),void 0,null),i},useId:function(){var e=co(),t=Pr.identifierPrefix;if(In){var i=$o,o=Uo;i=(o&~(1<<32-Ws(o)-1)).toString(32)+i,t=":"+t+"R"+i,i=ep++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=S4++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},k4={readContext:Es,useCallback:lE,useContext:Es,useEffect:yx,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:cE,useReducer:Iv,useRef:rE,useState:function(){return Iv(tp)},useDebugValue:vx,useDeferredValue:function(e){var t=Ps();return uE(t,mr.memoizedState,e)},useTransition:function(){var e=Iv(tp)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:YC,useId:hE,unstable_isNewReconciler:!1},A4={readContext:Es,useCallback:lE,useContext:Es,useEffect:yx,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:sE,useMemo:cE,useReducer:Dv,useRef:rE,useState:function(){return Dv(tp)},useDebugValue:vx,useDeferredValue:function(e){var t=Ps();return mr===null?t.memoizedState=e:uE(t,mr.memoizedState,e)},useTransition:function(){var e=Dv(tp)[0],t=Ps().memoizedState;return[e,t]},useMutableSource:XC,useSyncExternalStore:YC,useId:hE,unstable_isNewReconciler:!1};function js(e,t){if(e&&e.defaultProps){t=jn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function V0(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:jn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Eg={isMounted:function(e){return(e=e._reactInternals)?cc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=Ti(),u=Ha(e),p=qo(o,u);p.payload=t,i!=null&&(p.callback=i),t=Za(e,p,u),t!==null&&(Hs(t,e,u,o),ym(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=Ti(),u=Ha(e),p=qo(o,u);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=Za(e,p,u),t!==null&&(Hs(t,e,u,o),ym(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ti(),o=Ha(e),u=qo(i,o);u.tag=2,t!=null&&(u.callback=t),t=Za(e,u,o),t!==null&&(Hs(t,e,o,i),ym(t,e,o))}};function Qb(e,t,i,o,u,p,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,y):t.prototype&&t.prototype.isPureReactComponent?!Hd(i,o)||!Hd(u,p):!0}function mE(e,t,i){var o=!1,u=Ja,p=t.contextType;return typeof p=="object"&&p!==null?p=Es(p):(u=ji(t)?tc:si.current,o=t.contextTypes,p=(o=o!=null)?Ou(e,u):Ja),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Eg,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function Jb(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Eg.enqueueReplaceState(t,t.state,null)}function j0(e,t,i,o){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs={},ux(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=Es(p):(p=ji(t)?tc:si.current,u.context=Ou(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(V0(e,t,p,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Eg.enqueueReplaceState(u,u.state,null),Wm(e,i,u,o),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function ju(e,t){try{var i="",o=t;do i+=r5(o),o=o.return;while(o);var u=i}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function Lv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function U0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var M4=typeof WeakMap=="function"?WeakMap:Map;function gE(e,t,i){i=qo(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){Qm||(Qm=!0,Q0=o),U0(e,t)},i}function yE(e,t,i){i=qo(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var u=t.value;i.payload=function(){return o(u)},i.callback=function(){U0(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){U0(e,t),typeof o!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function e2(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new M4;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(u.add(i),e=G4.bind(null,e,t,i),t.then(e,e))}function t2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function n2(e,t,i,o,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=qo(-1,1),t.tag=2,Za(i,t,1))),i.lanes|=1),e)}var I4=na.ReactCurrentOwner,Ni=!1;function bi(e,t,i,o){t.child=e===null?ZC(t,null,i,o):Nu(t,e.child,i,o)}function r2(e,t,i,o,u){i=i.render;var p=t.ref;return wu(t,u),o=mx(e,t,i,o,p,u),i=gx(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qo(e,t,u)):(In&&i&&rx(t),t.flags|=1,bi(e,t,o,u),t.child)}function i2(e,t,i,o,u){if(e===null){var p=i.type;return typeof p=="function"&&!Ex(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,vE(e,t,p,o,u)):(e=Sm(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&u)){var y=p.memoizedProps;if(i=i.compare,i=i!==null?i:Hd,i(y,o)&&e.ref===t.ref)return Qo(e,t,u)}return t.flags|=1,e=Ka(p,o),e.ref=t.ref,e.return=t,t.child=e}function vE(e,t,i,o,u){if(e!==null){var p=e.memoizedProps;if(Hd(p,o)&&e.ref===t.ref)if(Ni=!1,t.pendingProps=o=p,(e.lanes&u)!==0)e.flags&131072&&(Ni=!0);else return t.lanes=e.lanes,Qo(e,t,u)}return $0(e,t,i,o,u)}function _E(e,t,i){var o=t.pendingProps,u=o.children,p=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(du,Ji),Ji|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn(du,Ji),Ji|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=p!==null?p.baseLanes:i,xn(du,Ji),Ji|=o}else p!==null?(o=p.baseLanes|i,t.memoizedState=null):o=i,xn(du,Ji),Ji|=o;return bi(e,t,u,i),t.child}function xE(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function $0(e,t,i,o,u){var p=ji(i)?tc:si.current;return p=Ou(t,p),wu(t,u),i=mx(e,t,i,o,p,u),o=gx(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qo(e,t,u)):(In&&o&&rx(t),t.flags|=1,bi(e,t,i,u),t.child)}function s2(e,t,i,o,u){if(ji(i)){var p=!0;Um(t)}else p=!1;if(wu(t,u),t.stateNode===null)xm(e,t),mE(t,i,o),j0(t,i,o,u),o=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var S=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=Es(w):(w=ji(i)?tc:si.current,w=Ou(t,w));var M=i.getDerivedStateFromProps,I=typeof M=="function"||typeof y.getSnapshotBeforeUpdate=="function";I||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==o||S!==w)&&Jb(t,y,o,w),Ma=!1;var k=t.memoizedState;y.state=k,Wm(t,o,y,u),S=t.memoizedState,l!==o||k!==S||Vi.current||Ma?(typeof M=="function"&&(V0(t,i,M,o),S=t.memoizedState),(l=Ma||Qb(t,i,l,o,k,S,w))?(I||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=S),y.props=o,y.state=S,y.context=w,o=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,HC(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:js(t.type,l),y.props=w,I=t.pendingProps,k=y.context,S=i.contextType,typeof S=="object"&&S!==null?S=Es(S):(S=ji(i)?tc:si.current,S=Ou(t,S));var j=i.getDerivedStateFromProps;(M=typeof j=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==I||k!==S)&&Jb(t,y,o,S),Ma=!1,k=t.memoizedState,y.state=k,Wm(t,o,y,u);var X=t.memoizedState;l!==I||k!==X||Vi.current||Ma?(typeof j=="function"&&(V0(t,i,j,o),X=t.memoizedState),(w=Ma||Qb(t,i,w,o,k,X,S)||!1)?(M||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,X,S),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,X,S)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=X),y.props=o,y.state=X,y.context=S,o=w):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),o=!1)}return G0(e,t,i,o,p,u)}function G0(e,t,i,o,u,p){xE(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return u&&Gb(t,i,!1),Qo(e,t,p);o=t.stateNode,I4.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=Nu(t,e.child,null,p),t.child=Nu(t,null,l,p)):bi(e,t,l,p),t.memoizedState=o.state,u&&Gb(t,i,!0),t.child}function wE(e){var t=e.stateNode;t.pendingContext?$b(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$b(e,t.context,!1),hx(e,t.containerInfo)}function o2(e,t,i,o,u){return Bu(),sx(u),t.flags|=256,bi(e,t,i,o),t.child}var q0={dehydrated:null,treeContext:null,retryLane:0};function Z0(e){return{baseLanes:e,cachePool:null,transitions:null}}function bE(e,t,i){var o=t.pendingProps,u=Bn.current,p=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),xn(Bn,u&1),e===null)return B0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=o.children,e=o.fallback,p?(o=t.mode,p=t.child,y={mode:"hidden",children:y},!(o&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=Ag(y,o,0,null),e=Ql(e,o,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Z0(i),t.memoizedState=q0,e):_x(t,y));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return D4(e,t,y,o,l,u,i);if(p){p=o.fallback,y=t.mode,u=e.child,l=u.sibling;var S={mode:"hidden",children:o.children};return!(y&1)&&t.child!==u?(o=t.child,o.childLanes=0,o.pendingProps=S,t.deletions=null):(o=Ka(u,S),o.subtreeFlags=u.subtreeFlags&14680064),l!==null?p=Ka(l,p):(p=Ql(p,y,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,o=p,p=t.child,y=e.child.memoizedState,y=y===null?Z0(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=e.childLanes&~i,t.memoizedState=q0,o}return p=e.child,e=p.sibling,o=Ka(p,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=i),o.return=t,o.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function _x(e,t){return t=Ag({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hf(e,t,i,o){return o!==null&&sx(o),Nu(t,e.child,null,i),e=_x(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function D4(e,t,i,o,u,p,y){if(i)return t.flags&256?(t.flags&=-257,o=Lv(Error(Ge(422))),Hf(e,t,y,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=o.fallback,u=t.mode,o=Ag({mode:"visible",children:o.children},u,0,null),p=Ql(p,u,y,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,t.mode&1&&Nu(t,e.child,null,y),t.child.memoizedState=Z0(y),t.memoizedState=q0,p);if(!(t.mode&1))return Hf(e,t,y,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var l=o.dgst;return o=l,p=Error(Ge(419)),o=Lv(p,o,void 0),Hf(e,t,y,o)}if(l=(y&e.childLanes)!==0,Ni||l){if(o=Pr,o!==null){switch(y&-y){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|y)?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,Yo(e,u),Hs(o,e,u,-1))}return Cx(),o=Lv(Error(Ge(421))),Hf(e,t,y,o)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=q4.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,ts=qa(u.nextSibling),ns=t,In=!0,qs=null,e!==null&&(bs[Ss++]=Uo,bs[Ss++]=$o,bs[Ss++]=nc,Uo=e.id,$o=e.overflow,nc=t),t=_x(t,o.children),t.flags|=4096,t)}function a2(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),N0(e.return,t,i)}function zv(e,t,i,o,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=i,p.tailMode=u)}function SE(e,t,i){var o=t.pendingProps,u=o.revealOrder,p=o.tail;if(bi(e,t,o.children,i),o=Bn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a2(e,i,t);else if(e.tag===19)a2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(xn(Bn,o),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&Hm(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),zv(t,!1,u,i,p);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Hm(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}zv(t,!0,i,null,p);break;case"together":zv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ic|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,i=Ka(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ka(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function L4(e,t,i){switch(t.tag){case 3:wE(t),Bu();break;case 5:KC(t);break;case 1:ji(t.type)&&Um(t);break;case 4:hx(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,u=t.memoizedProps.value;xn(qm,o._currentValue),o._currentValue=u;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(xn(Bn,Bn.current&1),t.flags|=128,null):i&t.child.childLanes?bE(e,t,i):(xn(Bn,Bn.current&1),e=Qo(e,t,i),e!==null?e.sibling:null);xn(Bn,Bn.current&1);break;case 19:if(o=(i&t.childLanes)!==0,e.flags&128){if(o)return SE(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),xn(Bn,Bn.current),o)break;return null;case 22:case 23:return t.lanes=0,_E(e,t,i)}return Qo(e,t,i)}var TE,W0,CE,EE;TE=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};W0=function(){};CE=function(e,t,i,o){var u=e.memoizedProps;if(u!==o){e=t.stateNode,Gl(yo.current);var p=null;switch(i){case"input":u=m0(e,u),o=m0(e,o),p=[];break;case"select":u=jn({},u,{value:void 0}),o=jn({},o,{value:void 0}),p=[];break;case"textarea":u=v0(e,u),o=v0(e,o),p=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Vm)}x0(i,o);var y;i=null;for(w in u)if(!o.hasOwnProperty(w)&&u.hasOwnProperty(w)&&u[w]!=null)if(w==="style"){var l=u[w];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(jd.hasOwnProperty(w)?p||(p=[]):(p=p||[]).push(w,null));for(w in o){var S=o[w];if(l=u!=null?u[w]:void 0,o.hasOwnProperty(w)&&S!==l&&(S!=null||l!=null))if(w==="style")if(l){for(y in l)!l.hasOwnProperty(y)||S&&S.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in S)S.hasOwnProperty(y)&&l[y]!==S[y]&&(i||(i={}),i[y]=S[y])}else i||(p||(p=[]),p.push(w,i)),i=S;else w==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,l=l?l.__html:void 0,S!=null&&l!==S&&(p=p||[]).push(w,S)):w==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(w,""+S):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(jd.hasOwnProperty(w)?(S!=null&&w==="onScroll"&&Cn("scroll",e),p||l===S||(p=[])):(p=p||[]).push(w,S))}i&&(p=p||[]).push("style",i);var w=p;(t.updateQueue=w)&&(t.flags|=4)}};EE=function(e,t,i,o){i!==o&&(t.flags|=4)};function gd(e,t){if(!In)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function z4(e,t,i){var o=t.pendingProps;switch(ix(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(t),null;case 1:return ji(t.type)&&jm(),Jr(t),null;case 3:return o=t.stateNode,Vu(),Pn(Vi),Pn(si),px(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Zf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qs!==null&&(t_(qs),qs=null))),W0(e,t),Jr(t),null;case 5:dx(t);var u=Gl(Jd.current);if(i=t.type,e!==null&&t.stateNode!=null)CE(e,t,i,o,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ge(166));return Jr(t),null}if(e=Gl(yo.current),Zf(t)){o=t.stateNode,i=t.type;var p=t.memoizedProps;switch(o[fo]=t,o[Yd]=p,e=(t.mode&1)!==0,i){case"dialog":Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":case"embed":Cn("load",o);break;case"video":case"audio":for(u=0;u<Td.length;u++)Cn(Td[u],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"input":gb(o,p),Cn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Cn("invalid",o);break;case"textarea":vb(o,p),Cn("invalid",o)}x0(i,p),u=null;for(var y in p)if(p.hasOwnProperty(y)){var l=p[y];y==="children"?typeof l=="string"?o.textContent!==l&&(p.suppressHydrationWarning!==!0&&qf(o.textContent,l,e),u=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(p.suppressHydrationWarning!==!0&&qf(o.textContent,l,e),u=["children",""+l]):jd.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&Cn("scroll",o)}switch(i){case"input":Of(o),yb(o,p,!0);break;case"textarea":Of(o),_b(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(o.onclick=Vm)}o=u,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eC(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(i,{is:o.is}):(e=y.createElement(i),i==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,i),e[fo]=t,e[Yd]=o,TE(e,t,!1,!1),t.stateNode=e;e:{switch(y=w0(i,o),i){case"dialog":Cn("cancel",e),Cn("close",e),u=o;break;case"iframe":case"object":case"embed":Cn("load",e),u=o;break;case"video":case"audio":for(u=0;u<Td.length;u++)Cn(Td[u],e);u=o;break;case"source":Cn("error",e),u=o;break;case"img":case"image":case"link":Cn("error",e),Cn("load",e),u=o;break;case"details":Cn("toggle",e),u=o;break;case"input":gb(e,o),u=m0(e,o),Cn("invalid",e);break;case"option":u=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=jn({},o,{value:void 0}),Cn("invalid",e);break;case"textarea":vb(e,o),u=v0(e,o),Cn("invalid",e);break;default:u=o}x0(i,u),l=u;for(p in l)if(l.hasOwnProperty(p)){var S=l[p];p==="style"?rC(e,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&tC(e,S)):p==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&Ud(e,S):typeof S=="number"&&Ud(e,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(jd.hasOwnProperty(p)?S!=null&&p==="onScroll"&&Cn("scroll",e):S!=null&&$_(e,p,S,y))}switch(i){case"input":Of(e),yb(e,o,!1);break;case"textarea":Of(e),_b(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Qa(o.value));break;case"select":e.multiple=!!o.multiple,p=o.value,p!=null?yu(e,!!o.multiple,p,!1):o.defaultValue!=null&&yu(e,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Vm)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jr(t),null;case 6:if(e&&t.stateNode!=null)EE(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ge(166));if(i=Gl(Jd.current),Gl(yo.current),Zf(t)){if(o=t.stateNode,i=t.memoizedProps,o[fo]=t,(p=o.nodeValue!==i)&&(e=ns,e!==null))switch(e.tag){case 3:qf(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qf(o.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[fo]=t,t.stateNode=o}return Jr(t),null;case 13:if(Pn(Bn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(In&&ts!==null&&t.mode&1&&!(t.flags&128))GC(),Bu(),t.flags|=98560,p=!1;else if(p=Zf(t),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(Ge(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Ge(317));p[fo]=t}else Bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jr(t),p=!1}else qs!==null&&(t_(qs),qs=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Bn.current&1?gr===0&&(gr=3):Cx())),t.updateQueue!==null&&(t.flags|=4),Jr(t),null);case 4:return Vu(),W0(e,t),e===null&&Kd(t.stateNode.containerInfo),Jr(t),null;case 10:return lx(t.type._context),Jr(t),null;case 17:return ji(t.type)&&jm(),Jr(t),null;case 19:if(Pn(Bn),p=t.memoizedState,p===null)return Jr(t),null;if(o=(t.flags&128)!==0,y=p.rendering,y===null)if(o)gd(p,!1);else{if(gr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Hm(e),y!==null){for(t.flags|=128,gd(p,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;i!==null;)p=i,e=o,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,e=y.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return xn(Bn,Bn.current&1|2),t.child}e=e.sibling}p.tail!==null&&ir()>Uu&&(t.flags|=128,o=!0,gd(p,!1),t.lanes=4194304)}else{if(!o)if(e=Hm(y),e!==null){if(t.flags|=128,o=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),gd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!In)return Jr(t),null}else 2*ir()-p.renderingStartTime>Uu&&i!==1073741824&&(t.flags|=128,o=!0,gd(p,!1),t.lanes=4194304);p.isBackwards?(y.sibling=t.child,t.child=y):(i=p.last,i!==null?i.sibling=y:t.child=y,p.last=y)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=ir(),t.sibling=null,i=Bn.current,xn(Bn,o?i&1|2:i&1),t):(Jr(t),null);case 22:case 23:return Tx(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ji&1073741824&&(Jr(t),t.subtreeFlags&6&&(t.flags|=8192)):Jr(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function R4(e,t){switch(ix(t),t.tag){case 1:return ji(t.type)&&jm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vu(),Pn(Vi),Pn(si),px(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dx(t),null;case 13:if(Pn(Bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pn(Bn),null;case 4:return Vu(),null;case 10:return lx(t.type._context),null;case 22:case 23:return Tx(),null;case 24:return null;default:return null}}var Kf=!1,ni=!1,F4=typeof WeakSet=="function"?WeakSet:Set,gt=null;function hu(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){Hn(e,t,o)}else i.current=null}function H0(e,t,i){try{i()}catch(o){Hn(e,t,o)}}var l2=!1;function O4(e,t){if(I0=Om,e=IC(),nx(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var y=0,l=-1,S=-1,w=0,M=0,I=e,k=null;t:for(;;){for(var j;I!==i||u!==0&&I.nodeType!==3||(l=y+u),I!==p||o!==0&&I.nodeType!==3||(S=y+o),I.nodeType===3&&(y+=I.nodeValue.length),(j=I.firstChild)!==null;)k=I,I=j;for(;;){if(I===e)break t;if(k===i&&++w===u&&(l=y),k===p&&++M===o&&(S=y),(j=I.nextSibling)!==null)break;I=k,k=I.parentNode}I=j}i=l===-1||S===-1?null:{start:l,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(D0={focusedElem:e,selectionRange:i},Om=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var X=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var O=X.memoizedProps,H=X.memoizedState,B=t.stateNode,V=B.getSnapshotBeforeUpdate(t.elementType===t.type?O:js(t.type,O),H);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(ne){Hn(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return X=l2,l2=!1,X}function Ld(e,t,i){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&H0(t,i,p)}u=u.next}while(u!==o)}}function Pg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function K0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function PE(e){var t=e.alternate;t!==null&&(e.alternate=null,PE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fo],delete t[Yd],delete t[R0],delete t[_4],delete t[x4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kE(e){return e.tag===5||e.tag===3||e.tag===4}function c2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X0(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Vm));else if(o!==4&&(e=e.child,e!==null))for(X0(e,t,i),e=e.sibling;e!==null;)X0(e,t,i),e=e.sibling}function Y0(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Y0(e,t,i),e=e.sibling;e!==null;)Y0(e,t,i),e=e.sibling}var Fr=null,Gs=!1;function Sa(e,t,i){for(i=i.child;i!==null;)AE(e,t,i),i=i.sibling}function AE(e,t,i){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(_g,i)}catch{}switch(i.tag){case 5:ni||hu(i,t);case 6:var o=Fr,u=Gs;Fr=null,Sa(e,t,i),Fr=o,Gs=u,Fr!==null&&(Gs?(e=Fr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Fr.removeChild(i.stateNode));break;case 18:Fr!==null&&(Gs?(e=Fr,i=i.stateNode,e.nodeType===8?Pv(e.parentNode,i):e.nodeType===1&&Pv(e,i),Zd(e)):Pv(Fr,i.stateNode));break;case 4:o=Fr,u=Gs,Fr=i.stateNode.containerInfo,Gs=!0,Sa(e,t,i),Fr=o,Gs=u;break;case 0:case 11:case 14:case 15:if(!ni&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var p=u,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&H0(i,t,y),u=u.next}while(u!==o)}Sa(e,t,i);break;case 1:if(!ni&&(hu(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(l){Hn(i,t,l)}Sa(e,t,i);break;case 21:Sa(e,t,i);break;case 22:i.mode&1?(ni=(o=ni)||i.memoizedState!==null,Sa(e,t,i),ni=o):Sa(e,t,i);break;default:Sa(e,t,i)}}function u2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new F4),t.forEach(function(o){var u=Z4.bind(null,e,o);i.has(o)||(i.add(o),o.then(u,u))})}}function Vs(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];try{var p=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Fr=l.stateNode,Gs=!1;break e;case 3:Fr=l.stateNode.containerInfo,Gs=!0;break e;case 4:Fr=l.stateNode.containerInfo,Gs=!0;break e}l=l.return}if(Fr===null)throw Error(Ge(160));AE(p,y,u),Fr=null,Gs=!1;var S=u.alternate;S!==null&&(S.return=null),u.return=null}catch(w){Hn(u,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ME(t,e),t=t.sibling}function ME(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vs(t,e),lo(e),o&4){try{Ld(3,e,e.return),Pg(3,e)}catch(O){Hn(e,e.return,O)}try{Ld(5,e,e.return)}catch(O){Hn(e,e.return,O)}}break;case 1:Vs(t,e),lo(e),o&512&&i!==null&&hu(i,i.return);break;case 5:if(Vs(t,e),lo(e),o&512&&i!==null&&hu(i,i.return),e.flags&32){var u=e.stateNode;try{Ud(u,"")}catch(O){Hn(e,e.return,O)}}if(o&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,y=i!==null?i.memoizedProps:p,l=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{l==="input"&&p.type==="radio"&&p.name!=null&&QT(u,p),w0(l,y);var w=w0(l,p);for(y=0;y<S.length;y+=2){var M=S[y],I=S[y+1];M==="style"?rC(u,I):M==="dangerouslySetInnerHTML"?tC(u,I):M==="children"?Ud(u,I):$_(u,M,I,w)}switch(l){case"input":g0(u,p);break;case"textarea":JT(u,p);break;case"select":var k=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var j=p.value;j!=null?yu(u,!!p.multiple,j,!1):k!==!!p.multiple&&(p.defaultValue!=null?yu(u,!!p.multiple,p.defaultValue,!0):yu(u,!!p.multiple,p.multiple?[]:"",!1))}u[Yd]=p}catch(O){Hn(e,e.return,O)}}break;case 6:if(Vs(t,e),lo(e),o&4){if(e.stateNode===null)throw Error(Ge(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(O){Hn(e,e.return,O)}}break;case 3:if(Vs(t,e),lo(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Zd(t.containerInfo)}catch(O){Hn(e,e.return,O)}break;case 4:Vs(t,e),lo(e);break;case 13:Vs(t,e),lo(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||(bx=ir())),o&4&&u2(e);break;case 22:if(M=i!==null&&i.memoizedState!==null,e.mode&1?(ni=(w=ni)||M,Vs(t,e),ni=w):Vs(t,e),lo(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!M&&e.mode&1)for(gt=e,M=e.child;M!==null;){for(I=gt=M;gt!==null;){switch(k=gt,j=k.child,k.tag){case 0:case 11:case 14:case 15:Ld(4,k,k.return);break;case 1:hu(k,k.return);var X=k.stateNode;if(typeof X.componentWillUnmount=="function"){o=k,i=k.return;try{t=o,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(O){Hn(o,i,O)}}break;case 5:hu(k,k.return);break;case 22:if(k.memoizedState!==null){d2(I);continue}}j!==null?(j.return=k,gt=j):d2(I)}M=M.sibling}e:for(M=null,I=e;;){if(I.tag===5){if(M===null){M=I;try{u=I.stateNode,w?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(l=I.stateNode,S=I.memoizedProps.style,y=S!=null&&S.hasOwnProperty("display")?S.display:null,l.style.display=nC("display",y))}catch(O){Hn(e,e.return,O)}}}else if(I.tag===6){if(M===null)try{I.stateNode.nodeValue=w?"":I.memoizedProps}catch(O){Hn(e,e.return,O)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;M===I&&(M=null),I=I.return}M===I&&(M=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:Vs(t,e),lo(e),o&4&&u2(e);break;case 21:break;default:Vs(t,e),lo(e)}}function lo(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(kE(i)){var o=i;break e}i=i.return}throw Error(Ge(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(Ud(u,""),o.flags&=-33);var p=c2(e);Y0(e,p,u);break;case 3:case 4:var y=o.stateNode.containerInfo,l=c2(e);X0(e,l,y);break;default:throw Error(Ge(161))}}catch(S){Hn(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function B4(e,t,i){gt=e,IE(e)}function IE(e,t,i){for(var o=(e.mode&1)!==0;gt!==null;){var u=gt,p=u.child;if(u.tag===22&&o){var y=u.memoizedState!==null||Kf;if(!y){var l=u.alternate,S=l!==null&&l.memoizedState!==null||ni;l=Kf;var w=ni;if(Kf=y,(ni=S)&&!w)for(gt=u;gt!==null;)y=gt,S=y.child,y.tag===22&&y.memoizedState!==null?p2(u):S!==null?(S.return=y,gt=S):p2(u);for(;p!==null;)gt=p,IE(p),p=p.sibling;gt=u,Kf=l,ni=w}h2(e)}else u.subtreeFlags&8772&&p!==null?(p.return=u,gt=p):h2(e)}}function h2(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ni||Pg(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!ni)if(i===null)o.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:js(t.type,i.memoizedProps);o.componentDidUpdate(u,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Kb(t,p,o);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Kb(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var M=w.memoizedState;if(M!==null){var I=M.dehydrated;I!==null&&Zd(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}ni||t.flags&512&&K0(t)}catch(k){Hn(t,t.return,k)}}if(t===e){gt=null;break}if(i=t.sibling,i!==null){i.return=t.return,gt=i;break}gt=t.return}}function d2(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,gt=i;break}gt=t.return}}function p2(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Pg(4,t)}catch(S){Hn(t,i,S)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var u=t.return;try{o.componentDidMount()}catch(S){Hn(t,u,S)}}var p=t.return;try{K0(t)}catch(S){Hn(t,p,S)}break;case 5:var y=t.return;try{K0(t)}catch(S){Hn(t,y,S)}}}catch(S){Hn(t,t.return,S)}if(t===e){gt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,gt=l;break}gt=t.return}}var N4=Math.ceil,Ym=na.ReactCurrentDispatcher,xx=na.ReactCurrentOwner,Cs=na.ReactCurrentBatchConfig,Jt=0,Pr=null,ar=null,Br=0,Ji=0,du=cl(0),gr=0,rp=null,ic=0,kg=0,wx=0,zd=null,Bi=null,bx=0,Uu=1/0,Vo=null,Qm=!1,Q0=null,Wa=null,Xf=!1,Va=null,Jm=0,Rd=0,J0=null,wm=-1,bm=0;function Ti(){return Jt&6?ir():wm!==-1?wm:wm=ir()}function Ha(e){return e.mode&1?Jt&2&&Br!==0?Br&-Br:b4.transition!==null?(bm===0&&(bm=mC()),bm):(e=ln,e!==0||(e=window.event,e=e===void 0?16:bC(e.type)),e):1}function Hs(e,t,i,o){if(50<Rd)throw Rd=0,J0=null,Error(Ge(185));gp(e,i,o),(!(Jt&2)||e!==Pr)&&(e===Pr&&(!(Jt&2)&&(kg|=i),gr===4&&La(e,Br)),Ui(e,o),i===1&&Jt===0&&!(t.mode&1)&&(Uu=ir()+500,Tg&&ul()))}function Ui(e,t){var i=e.callbackNode;b5(e,t);var o=Fm(e,e===Pr?Br:0);if(o===0)i!==null&&bb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(i!=null&&bb(i),t===1)e.tag===0?w4(f2.bind(null,e)):jC(f2.bind(null,e)),y4(function(){!(Jt&6)&&ul()}),i=null;else{switch(gC(o)){case 1:i=H_;break;case 4:i=pC;break;case 16:i=Rm;break;case 536870912:i=fC;break;default:i=Rm}i=NE(i,DE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function DE(e,t){if(wm=-1,bm=0,Jt&6)throw Error(Ge(327));var i=e.callbackNode;if(bu()&&e.callbackNode!==i)return null;var o=Fm(e,e===Pr?Br:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=eg(e,o);else{t=o;var u=Jt;Jt|=2;var p=zE();(Pr!==e||Br!==t)&&(Vo=null,Uu=ir()+500,Yl(e,t));do try{U4();break}catch(l){LE(e,l)}while(!0);ax(),Ym.current=p,Jt=u,ar!==null?t=0:(Pr=null,Br=0,t=gr)}if(t!==0){if(t===2&&(u=E0(e),u!==0&&(o=u,t=e_(e,u))),t===1)throw i=rp,Yl(e,0),La(e,o),Ui(e,ir()),i;if(t===6)La(e,o);else{if(u=e.current.alternate,!(o&30)&&!V4(u)&&(t=eg(e,o),t===2&&(p=E0(e),p!==0&&(o=p,t=e_(e,p))),t===1))throw i=rp,Yl(e,0),La(e,o),Ui(e,ir()),i;switch(e.finishedWork=u,e.finishedLanes=o,t){case 0:case 1:throw Error(Ge(345));case 2:Nl(e,Bi,Vo);break;case 3:if(La(e,o),(o&130023424)===o&&(t=bx+500-ir(),10<t)){if(Fm(e,0)!==0)break;if(u=e.suspendedLanes,(u&o)!==o){Ti(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=z0(Nl.bind(null,e,Bi,Vo),t);break}Nl(e,Bi,Vo);break;case 4:if(La(e,o),(o&4194240)===o)break;for(t=e.eventTimes,u=-1;0<o;){var y=31-Ws(o);p=1<<y,y=t[y],y>u&&(u=y),o&=~p}if(o=u,o=ir()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*N4(o/1960))-o,10<o){e.timeoutHandle=z0(Nl.bind(null,e,Bi,Vo),o);break}Nl(e,Bi,Vo);break;case 5:Nl(e,Bi,Vo);break;default:throw Error(Ge(329))}}}return Ui(e,ir()),e.callbackNode===i?DE.bind(null,e):null}function e_(e,t){var i=zd;return e.current.memoizedState.isDehydrated&&(Yl(e,t).flags|=256),e=eg(e,t),e!==2&&(t=Bi,Bi=i,t!==null&&t_(t)),e}function t_(e){Bi===null?Bi=e:Bi.push.apply(Bi,e)}function V4(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var u=i[o],p=u.getSnapshot;u=u.value;try{if(!Ks(p(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~wx,t&=~kg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ws(t),o=1<<i;e[i]=-1,t&=~o}}function f2(e){if(Jt&6)throw Error(Ge(327));bu();var t=Fm(e,0);if(!(t&1))return Ui(e,ir()),null;var i=eg(e,t);if(e.tag!==0&&i===2){var o=E0(e);o!==0&&(t=o,i=e_(e,o))}if(i===1)throw i=rp,Yl(e,0),La(e,t),Ui(e,ir()),i;if(i===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e,Bi,Vo),Ui(e,ir()),null}function Sx(e,t){var i=Jt;Jt|=1;try{return e(t)}finally{Jt=i,Jt===0&&(Uu=ir()+500,Tg&&ul())}}function sc(e){Va!==null&&Va.tag===0&&!(Jt&6)&&bu();var t=Jt;Jt|=1;var i=Cs.transition,o=ln;try{if(Cs.transition=null,ln=1,e)return e()}finally{ln=o,Cs.transition=i,Jt=t,!(Jt&6)&&ul()}}function Tx(){Ji=du.current,Pn(du)}function Yl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,g4(i)),ar!==null)for(i=ar.return;i!==null;){var o=i;switch(ix(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&jm();break;case 3:Vu(),Pn(Vi),Pn(si),px();break;case 5:dx(o);break;case 4:Vu();break;case 13:Pn(Bn);break;case 19:Pn(Bn);break;case 10:lx(o.type._context);break;case 22:case 23:Tx()}i=i.return}if(Pr=e,ar=e=Ka(e.current,null),Br=Ji=t,gr=0,rp=null,wx=kg=ic=0,Bi=zd=null,$l!==null){for(t=0;t<$l.length;t++)if(i=$l[t],o=i.interleaved,o!==null){i.interleaved=null;var u=o.next,p=i.pending;if(p!==null){var y=p.next;p.next=u,o.next=y}i.pending=o}$l=null}return e}function LE(e,t){do{var i=ar;try{if(ax(),vm.current=Xm,Km){for(var o=Vn.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Km=!1}if(rc=0,Er=mr=Vn=null,Dd=!1,ep=0,xx.current=null,i===null||i.return===null){gr=1,rp=t,ar=null;break}e:{var p=e,y=i.return,l=i,S=t;if(t=Br,l.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var w=S,M=l,I=M.tag;if(!(M.mode&1)&&(I===0||I===11||I===15)){var k=M.alternate;k?(M.updateQueue=k.updateQueue,M.memoizedState=k.memoizedState,M.lanes=k.lanes):(M.updateQueue=null,M.memoizedState=null)}var j=t2(y);if(j!==null){j.flags&=-257,n2(j,y,l,p,t),j.mode&1&&e2(p,w,t),t=j,S=w;var X=t.updateQueue;if(X===null){var O=new Set;O.add(S),t.updateQueue=O}else X.add(S);break e}else{if(!(t&1)){e2(p,w,t),Cx();break e}S=Error(Ge(426))}}else if(In&&l.mode&1){var H=t2(y);if(H!==null){!(H.flags&65536)&&(H.flags|=256),n2(H,y,l,p,t),sx(ju(S,l));break e}}p=S=ju(S,l),gr!==4&&(gr=2),zd===null?zd=[p]:zd.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var B=gE(p,S,t);Hb(p,B);break e;case 1:l=S;var V=p.type,Z=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Wa===null||!Wa.has(Z)))){p.flags|=65536,t&=-t,p.lanes|=t;var ne=yE(p,l,t);Hb(p,ne);break e}}p=p.return}while(p!==null)}FE(i)}catch(de){t=de,ar===i&&i!==null&&(ar=i=i.return);continue}break}while(!0)}function zE(){var e=Ym.current;return Ym.current=Xm,e===null?Xm:e}function Cx(){(gr===0||gr===3||gr===2)&&(gr=4),Pr===null||!(ic&268435455)&&!(kg&268435455)||La(Pr,Br)}function eg(e,t){var i=Jt;Jt|=2;var o=zE();(Pr!==e||Br!==t)&&(Vo=null,Yl(e,t));do try{j4();break}catch(u){LE(e,u)}while(!0);if(ax(),Jt=i,Ym.current=o,ar!==null)throw Error(Ge(261));return Pr=null,Br=0,gr}function j4(){for(;ar!==null;)RE(ar)}function U4(){for(;ar!==null&&!p5();)RE(ar)}function RE(e){var t=BE(e.alternate,e,Ji);e.memoizedProps=e.pendingProps,t===null?FE(e):ar=t,xx.current=null}function FE(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=R4(i,t),i!==null){i.flags&=32767,ar=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gr=6,ar=null;return}}else if(i=z4(i,t,Ji),i!==null){ar=i;return}if(t=t.sibling,t!==null){ar=t;return}ar=t=e}while(t!==null);gr===0&&(gr=5)}function Nl(e,t,i){var o=ln,u=Cs.transition;try{Cs.transition=null,ln=1,$4(e,t,i,o)}finally{Cs.transition=u,ln=o}return null}function $4(e,t,i,o){do bu();while(Va!==null);if(Jt&6)throw Error(Ge(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(S5(e,p),e===Pr&&(ar=Pr=null,Br=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Xf||(Xf=!0,NE(Rm,function(){return bu(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=Cs.transition,Cs.transition=null;var y=ln;ln=1;var l=Jt;Jt|=4,xx.current=null,O4(e,i),ME(i,e),c4(D0),Om=!!I0,D0=I0=null,e.current=i,B4(i),f5(),Jt=l,ln=y,Cs.transition=p}else e.current=i;if(Xf&&(Xf=!1,Va=e,Jm=u),p=e.pendingLanes,p===0&&(Wa=null),y5(i.stateNode),Ui(e,ir()),t!==null)for(o=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],o(u.value,{componentStack:u.stack,digest:u.digest});if(Qm)throw Qm=!1,e=Q0,Q0=null,e;return Jm&1&&e.tag!==0&&bu(),p=e.pendingLanes,p&1?e===J0?Rd++:(Rd=0,J0=e):Rd=0,ul(),null}function bu(){if(Va!==null){var e=gC(Jm),t=Cs.transition,i=ln;try{if(Cs.transition=null,ln=16>e?16:e,Va===null)var o=!1;else{if(e=Va,Va=null,Jm=0,Jt&6)throw Error(Ge(331));var u=Jt;for(Jt|=4,gt=e.current;gt!==null;){var p=gt,y=p.child;if(gt.flags&16){var l=p.deletions;if(l!==null){for(var S=0;S<l.length;S++){var w=l[S];for(gt=w;gt!==null;){var M=gt;switch(M.tag){case 0:case 11:case 15:Ld(8,M,p)}var I=M.child;if(I!==null)I.return=M,gt=I;else for(;gt!==null;){M=gt;var k=M.sibling,j=M.return;if(PE(M),M===w){gt=null;break}if(k!==null){k.return=j,gt=k;break}gt=j}}}var X=p.alternate;if(X!==null){var O=X.child;if(O!==null){X.child=null;do{var H=O.sibling;O.sibling=null,O=H}while(O!==null)}}gt=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,gt=y;else e:for(;gt!==null;){if(p=gt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Ld(9,p,p.return)}var B=p.sibling;if(B!==null){B.return=p.return,gt=B;break e}gt=p.return}}var V=e.current;for(gt=V;gt!==null;){y=gt;var Z=y.child;if(y.subtreeFlags&2064&&Z!==null)Z.return=y,gt=Z;else e:for(y=V;gt!==null;){if(l=gt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pg(9,l)}}catch(de){Hn(l,l.return,de)}if(l===y){gt=null;break e}var ne=l.sibling;if(ne!==null){ne.return=l.return,gt=ne;break e}gt=l.return}}if(Jt=u,ul(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(_g,e)}catch{}o=!0}return o}finally{ln=i,Cs.transition=t}}return!1}function m2(e,t,i){t=ju(i,t),t=gE(e,t,1),e=Za(e,t,1),t=Ti(),e!==null&&(gp(e,1,t),Ui(e,t))}function Hn(e,t,i){if(e.tag===3)m2(e,e,i);else for(;t!==null;){if(t.tag===3){m2(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Wa===null||!Wa.has(o))){e=ju(i,e),e=yE(t,e,1),t=Za(t,e,1),e=Ti(),t!==null&&(gp(t,1,e),Ui(t,e));break}}t=t.return}}function G4(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=Ti(),e.pingedLanes|=e.suspendedLanes&i,Pr===e&&(Br&i)===i&&(gr===4||gr===3&&(Br&130023424)===Br&&500>ir()-bx?Yl(e,0):wx|=i),Ui(e,t)}function OE(e,t){t===0&&(e.mode&1?(t=Vf,Vf<<=1,!(Vf&130023424)&&(Vf=4194304)):t=1);var i=Ti();e=Yo(e,t),e!==null&&(gp(e,t,i),Ui(e,i))}function q4(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),OE(e,i)}function Z4(e,t){var i=0;switch(e.tag){case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ge(314))}o!==null&&o.delete(t),OE(e,i)}var BE;BE=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vi.current)Ni=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ni=!1,L4(e,t,i);Ni=!!(e.flags&131072)}else Ni=!1,In&&t.flags&1048576&&UC(t,Gm,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;xm(e,t),e=t.pendingProps;var u=Ou(t,si.current);wu(t,i),u=mx(null,t,o,e,u,i);var p=gx();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(o)?(p=!0,Um(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ux(t),u.updater=Eg,t.stateNode=u,u._reactInternals=t,j0(t,o,e,i),t=G0(null,t,o,!0,p,i)):(t.tag=0,In&&p&&rx(t),bi(null,t,u,i),t=t.child),t;case 16:o=t.elementType;e:{switch(xm(e,t),e=t.pendingProps,u=o._init,o=u(o._payload),t.type=o,u=t.tag=H4(o),e=js(o,e),u){case 0:t=$0(null,t,o,e,i);break e;case 1:t=s2(null,t,o,e,i);break e;case 11:t=r2(null,t,o,e,i);break e;case 14:t=i2(null,t,o,js(o.type,e),i);break e}throw Error(Ge(306,o,""))}return t;case 0:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:js(o,u),$0(e,t,o,u,i);case 1:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:js(o,u),s2(e,t,o,u,i);case 3:e:{if(wE(t),e===null)throw Error(Ge(387));o=t.pendingProps,p=t.memoizedState,u=p.element,HC(e,t),Wm(t,o,null,i);var y=t.memoizedState;if(o=y.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=ju(Error(Ge(423)),t),t=o2(e,t,o,i,u);break e}else if(o!==u){u=ju(Error(Ge(424)),t),t=o2(e,t,o,i,u);break e}else for(ts=qa(t.stateNode.containerInfo.firstChild),ns=t,In=!0,qs=null,i=ZC(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Bu(),o===u){t=Qo(e,t,i);break e}bi(e,t,o,i)}t=t.child}return t;case 5:return KC(t),e===null&&B0(t),o=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,y=u.children,L0(o,u)?y=null:p!==null&&L0(o,p)&&(t.flags|=32),xE(e,t),bi(e,t,y,i),t.child;case 6:return e===null&&B0(t),null;case 13:return bE(e,t,i);case 4:return hx(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Nu(t,null,o,i):bi(e,t,o,i),t.child;case 11:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:js(o,u),r2(e,t,o,u,i);case 7:return bi(e,t,t.pendingProps,i),t.child;case 8:return bi(e,t,t.pendingProps.children,i),t.child;case 12:return bi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(o=t.type._context,u=t.pendingProps,p=t.memoizedProps,y=u.value,xn(qm,o._currentValue),o._currentValue=y,p!==null)if(Ks(p.value,y)){if(p.children===u.children&&!Vi.current){t=Qo(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var l=p.dependencies;if(l!==null){y=p.child;for(var S=l.firstContext;S!==null;){if(S.context===o){if(p.tag===1){S=qo(-1,i&-i),S.tag=2;var w=p.updateQueue;if(w!==null){w=w.shared;var M=w.pending;M===null?S.next=S:(S.next=M.next,M.next=S),w.pending=S}}p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),N0(p.return,i,t),l.lanes|=i;break}S=S.next}}else if(p.tag===10)y=p.type===t.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(Ge(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),N0(y,i,t),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===t){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}bi(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,o=t.pendingProps.children,wu(t,i),u=Es(u),o=o(u),t.flags|=1,bi(e,t,o,i),t.child;case 14:return o=t.type,u=js(o,t.pendingProps),u=js(o.type,u),i2(e,t,o,u,i);case 15:return vE(e,t,t.type,t.pendingProps,i);case 17:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:js(o,u),xm(e,t),t.tag=1,ji(o)?(e=!0,Um(t)):e=!1,wu(t,i),mE(t,o,u),j0(t,o,u,i),G0(null,t,o,!0,e,i);case 19:return SE(e,t,i);case 22:return _E(e,t,i)}throw Error(Ge(156,t.tag))};function NE(e,t){return dC(e,t)}function W4(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,i,o){return new W4(e,t,i,o)}function Ex(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H4(e){if(typeof e=="function")return Ex(e)?1:0;if(e!=null){if(e=e.$$typeof,e===q_)return 11;if(e===Z_)return 14}return 2}function Ka(e,t){var i=e.alternate;return i===null?(i=Ts(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Sm(e,t,i,o,u,p){var y=2;if(o=e,typeof e=="function")Ex(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case nu:return Ql(i.children,u,p,t);case G_:y=8,u|=8;break;case h0:return e=Ts(12,i,t,u|2),e.elementType=h0,e.lanes=p,e;case d0:return e=Ts(13,i,t,u),e.elementType=d0,e.lanes=p,e;case p0:return e=Ts(19,i,t,u),e.elementType=p0,e.lanes=p,e;case KT:return Ag(i,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WT:y=10;break e;case HT:y=9;break e;case q_:y=11;break e;case Z_:y=14;break e;case Aa:y=16,o=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=Ts(y,i,t,u),t.elementType=e,t.type=o,t.lanes=p,t}function Ql(e,t,i,o){return e=Ts(7,e,o,t),e.lanes=i,e}function Ag(e,t,i,o){return e=Ts(22,e,o,t),e.elementType=KT,e.lanes=i,e.stateNode={isHidden:!1},e}function Rv(e,t,i){return e=Ts(6,e,null,t),e.lanes=i,e}function Fv(e,t,i){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function K4(e,t,i,o,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gv(0),this.expirationTimes=gv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gv(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Px(e,t,i,o,u,p,y,l,S){return e=new K4(e,t,i,l,S),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Ts(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ux(p),e}function X4(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function VE(e){if(!e)return Ja;e=e._reactInternals;e:{if(cc(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var i=e.type;if(ji(i))return VC(e,i,t)}return t}function jE(e,t,i,o,u,p,y,l,S){return e=Px(i,o,!0,e,u,p,y,l,S),e.context=VE(null),i=e.current,o=Ti(),u=Ha(i),p=qo(o,u),p.callback=t??null,Za(i,p,u),e.current.lanes=u,gp(e,u,o),Ui(e,o),e}function Mg(e,t,i,o){var u=t.current,p=Ti(),y=Ha(u);return i=VE(i),t.context===null?t.context=i:t.pendingContext=i,t=qo(p,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Za(u,t,y),e!==null&&(Hs(e,u,y,p),ym(e,u,y)),y}function tg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function g2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function kx(e,t){g2(e,t),(e=e.alternate)&&g2(e,t)}function Y4(){return null}var UE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ax(e){this._internalRoot=e}Ig.prototype.render=Ax.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Mg(e,t,null,null)};Ig.prototype.unmount=Ax.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sc(function(){Mg(null,e,null,null)}),t[Xo]=null}};function Ig(e){this._internalRoot=e}Ig.prototype.unstable_scheduleHydration=function(e){if(e){var t=_C();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Da.length&&t!==0&&t<Da[i].priority;i++);Da.splice(i,0,e),i===0&&wC(e)}};function Mx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function y2(){}function Q4(e,t,i,o,u){if(u){if(typeof o=="function"){var p=o;o=function(){var w=tg(y);p.call(w)}}var y=jE(t,o,e,0,null,!1,!1,"",y2);return e._reactRootContainer=y,e[Xo]=y.current,Kd(e.nodeType===8?e.parentNode:e),sc(),y}for(;u=e.lastChild;)e.removeChild(u);if(typeof o=="function"){var l=o;o=function(){var w=tg(S);l.call(w)}}var S=Px(e,0,!1,null,null,!1,!1,"",y2);return e._reactRootContainer=S,e[Xo]=S.current,Kd(e.nodeType===8?e.parentNode:e),sc(function(){Mg(t,S,i,o)}),S}function Lg(e,t,i,o,u){var p=i._reactRootContainer;if(p){var y=p;if(typeof u=="function"){var l=u;u=function(){var S=tg(y);l.call(S)}}Mg(t,y,e,u)}else y=Q4(i,t,e,u,o);return tg(y)}yC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Sd(t.pendingLanes);i!==0&&(K_(t,i|1),Ui(t,ir()),!(Jt&6)&&(Uu=ir()+500,ul()))}break;case 13:sc(function(){var o=Yo(e,1);if(o!==null){var u=Ti();Hs(o,e,1,u)}}),kx(e,1)}};X_=function(e){if(e.tag===13){var t=Yo(e,134217728);if(t!==null){var i=Ti();Hs(t,e,134217728,i)}kx(e,134217728)}};vC=function(e){if(e.tag===13){var t=Ha(e),i=Yo(e,t);if(i!==null){var o=Ti();Hs(i,e,t,o)}kx(e,t)}};_C=function(){return ln};xC=function(e,t){var i=ln;try{return ln=e,t()}finally{ln=i}};S0=function(e,t,i){switch(t){case"input":if(g0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=Sg(o);if(!u)throw Error(Ge(90));YT(o),g0(o,u)}}}break;case"textarea":JT(e,i);break;case"select":t=i.value,t!=null&&yu(e,!!i.multiple,t,!1)}};oC=Sx;aC=sc;var J4={usingClientEntryPoint:!1,Events:[vp,ou,Sg,iC,sC,Sx]},yd={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eL={bundleType:yd.bundleType,version:yd.version,rendererPackageName:yd.rendererPackageName,rendererConfig:yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uC(e),e===null?null:e.stateNode},findFiberByHostInstance:yd.findFiberByHostInstance||Y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{_g=Yf.inject(eL),go=Yf}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J4;as.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mx(t))throw Error(Ge(200));return X4(e,t,null,i)};as.createRoot=function(e,t){if(!Mx(e))throw Error(Ge(299));var i=!1,o="",u=UE;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Px(e,1,!1,null,null,i,!1,o,u),e[Xo]=t.current,Kd(e.nodeType===8?e.parentNode:e),new Ax(t)};as.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=uC(t),e=e===null?null:e.stateNode,e};as.flushSync=function(e){return sc(e)};as.hydrate=function(e,t,i){if(!Dg(t))throw Error(Ge(200));return Lg(null,e,t,!0,i)};as.hydrateRoot=function(e,t,i){if(!Mx(e))throw Error(Ge(405));var o=i!=null&&i.hydratedSources||null,u=!1,p="",y=UE;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=jE(t,null,e,1,i??null,u,!1,p,y),e[Xo]=t.current,Kd(e),o)for(e=0;e<o.length;e++)i=o[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new Ig(t)};as.render=function(e,t,i){if(!Dg(t))throw Error(Ge(200));return Lg(null,e,t,!1,i)};as.unmountComponentAtNode=function(e){if(!Dg(e))throw Error(Ge(40));return e._reactRootContainer?(sc(function(){Lg(null,null,e,!1,function(){e._reactRootContainer=null,e[Xo]=null})}),!0):!1};as.unstable_batchedUpdates=Sx;as.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!Dg(i))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return Lg(e,t,i,!1,o)};as.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(e){console.error(e)}}$E(),$T.exports=as;var xp=$T.exports;const GE=F_(xp);var qE,v2=xp;qE=v2.createRoot,v2.hydrateRoot;const tL=1,nL=1e6;let Ov=0;function rL(){return Ov=(Ov+1)%Number.MAX_SAFE_INTEGER,Ov.toString()}const Bv=new Map,_2=e=>{if(Bv.has(e))return;const t=setTimeout(()=>{Bv.delete(e),Fd({type:"REMOVE_TOAST",toastId:e})},nL);Bv.set(e,t)},iL=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,tL)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=t;return i?_2(i):e.toasts.forEach(o=>{_2(o.id)}),{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)}}},Tm=[];let Cm={toasts:[]};function Fd(e){Cm=iL(Cm,e),Tm.forEach(t=>{t(Cm)})}function sL({...e}){const t=rL(),i=u=>Fd({type:"UPDATE_TOAST",toast:{...u,id:t}}),o=()=>Fd({type:"DISMISS_TOAST",toastId:t});return Fd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:u=>{u||o()}}}),{id:t,dismiss:o,update:i}}function oL(){const[e,t]=$.useState(Cm);return $.useEffect(()=>(Tm.push(t),()=>{const i=Tm.indexOf(t);i>-1&&Tm.splice(i,1)}),[e]),{...e,toast:sL,dismiss:i=>Fd({type:"DISMISS_TOAST",toastId:i})}}function En(e,t,{checkForDefaultPrevented:i=!0}={}){return function(u){if(e==null||e(u),i===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function aL(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ZE(...e){return t=>e.forEach(i=>aL(i,t))}function oi(...e){return $.useCallback(ZE(...e),e)}function lL(e,t=[]){let i=[];function o(p,y){const l=$.createContext(y),S=i.length;i=[...i,y];function w(I){const{scope:k,children:j,...X}=I,O=(k==null?void 0:k[e][S])||l,H=$.useMemo(()=>X,Object.values(X));return oe.jsx(O.Provider,{value:H,children:j})}function M(I,k){const j=(k==null?void 0:k[e][S])||l,X=$.useContext(j);if(X)return X;if(y!==void 0)return y;throw new Error(`\`${I}\` must be used within \`${p}\``)}return w.displayName=p+"Provider",[w,M]}const u=()=>{const p=i.map(y=>$.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return $.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,cL(u,...t)]}function cL(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:w})=>{const I=S(p)[`__scope${w}`];return{...l,...I}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}var $u=$.forwardRef((e,t)=>{const{children:i,...o}=e,u=$.Children.toArray(i),p=u.find(uL);if(p){const y=p.props.children,l=u.map(S=>S===p?$.Children.count(y)>1?$.Children.only(null):$.isValidElement(y)?y.props.children:null:S);return oe.jsx(n_,{...o,ref:t,children:$.isValidElement(y)?$.cloneElement(y,void 0,l):null})}return oe.jsx(n_,{...o,ref:t,children:i})});$u.displayName="Slot";var n_=$.forwardRef((e,t)=>{const{children:i,...o}=e;if($.isValidElement(i)){const u=dL(i);return $.cloneElement(i,{...hL(o,i.props),ref:t?ZE(t,u):u})}return $.Children.count(i)>1?$.Children.only(null):null});n_.displayName="SlotClone";var WE=({children:e})=>oe.jsx(oe.Fragment,{children:e});function uL(e){return $.isValidElement(e)&&e.type===WE}function hL(e,t){const i={...t};for(const o in t){const u=e[o],p=t[o];/^on[A-Z]/.test(o)?u&&p?i[o]=(...l)=>{p(...l),u(...l)}:u&&(i[o]=u):o==="style"?i[o]={...u,...p}:o==="className"&&(i[o]=[u,p].filter(Boolean).join(" "))}return{...e,...i}}function dL(e){var o,u;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function pL(e){const t=e+"CollectionProvider",[i,o]=lL(t),[u,p]=i(t,{collectionRef:{current:null},itemMap:new Map}),y=j=>{const{scope:X,children:O}=j,H=tt.useRef(null),B=tt.useRef(new Map).current;return oe.jsx(u,{scope:X,itemMap:B,collectionRef:H,children:O})};y.displayName=t;const l=e+"CollectionSlot",S=tt.forwardRef((j,X)=>{const{scope:O,children:H}=j,B=p(l,O),V=oi(X,B.collectionRef);return oe.jsx($u,{ref:V,children:H})});S.displayName=l;const w=e+"CollectionItemSlot",M="data-radix-collection-item",I=tt.forwardRef((j,X)=>{const{scope:O,children:H,...B}=j,V=tt.useRef(null),Z=oi(X,V),ne=p(w,O);return tt.useEffect(()=>(ne.itemMap.set(V,{ref:V,...B}),()=>void ne.itemMap.delete(V))),oe.jsx($u,{[M]:"",ref:Z,children:H})});I.displayName=w;function k(j){const X=p(e+"CollectionConsumer",j);return tt.useCallback(()=>{const H=X.collectionRef.current;if(!H)return[];const B=Array.from(H.querySelectorAll(`[${M}]`));return Array.from(X.itemMap.values()).sort((ne,de)=>B.indexOf(ne.ref.current)-B.indexOf(de.ref.current))},[X.collectionRef,X.itemMap])}return[{Provider:y,Slot:S,ItemSlot:I},k,o]}function fL(e,t){const i=$.createContext(t),o=p=>{const{children:y,...l}=p,S=$.useMemo(()=>l,Object.values(l));return oe.jsx(i.Provider,{value:S,children:y})};o.displayName=e+"Provider";function u(p){const y=$.useContext(i);if(y)return y;if(t!==void 0)return t;throw new Error(`\`${p}\` must be used within \`${e}\``)}return[o,u]}function zg(e,t=[]){let i=[];function o(p,y){const l=$.createContext(y),S=i.length;i=[...i,y];const w=I=>{var B;const{scope:k,children:j,...X}=I,O=((B=k==null?void 0:k[e])==null?void 0:B[S])||l,H=$.useMemo(()=>X,Object.values(X));return oe.jsx(O.Provider,{value:H,children:j})};w.displayName=p+"Provider";function M(I,k){var O;const j=((O=k==null?void 0:k[e])==null?void 0:O[S])||l,X=$.useContext(j);if(X)return X;if(y!==void 0)return y;throw new Error(`\`${I}\` must be used within \`${p}\``)}return[w,M]}const u=()=>{const p=i.map(y=>$.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return $.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,mL(u,...t)]}function mL(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:w})=>{const I=S(p)[`__scope${w}`];return{...l,...I}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}var gL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Un=gL.reduce((e,t)=>{const i=$.forwardRef((o,u)=>{const{asChild:p,...y}=o,l=p?$u:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),oe.jsx(l,{...y,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function HE(e,t){e&&xp.flushSync(()=>e.dispatchEvent(t))}function ks(e){const t=$.useRef(e);return $.useEffect(()=>{t.current=e}),$.useMemo(()=>(...i)=>{var o;return(o=t.current)==null?void 0:o.call(t,...i)},[])}function yL(e,t=globalThis==null?void 0:globalThis.document){const i=ks(e);$.useEffect(()=>{const o=u=>{u.key==="Escape"&&i(u)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[i,t])}var vL="DismissableLayer",r_="dismissableLayer.update",_L="dismissableLayer.pointerDownOutside",xL="dismissableLayer.focusOutside",x2,KE=$.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rg=$.forwardRef((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:y,onDismiss:l,...S}=e,w=$.useContext(KE),[M,I]=$.useState(null),k=(M==null?void 0:M.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=$.useState({}),X=oi(t,ke=>I(ke)),O=Array.from(w.layers),[H]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),B=O.indexOf(H),V=M?O.indexOf(M):-1,Z=w.layersWithOutsidePointerEventsDisabled.size>0,ne=V>=B,de=bL(ke=>{const we=ke.target,Ye=[...w.branches].some(Fe=>Fe.contains(we));!ne||Ye||(u==null||u(ke),y==null||y(ke),ke.defaultPrevented||l==null||l())},k),Se=SL(ke=>{const we=ke.target;[...w.branches].some(Fe=>Fe.contains(we))||(p==null||p(ke),y==null||y(ke),ke.defaultPrevented||l==null||l())},k);return yL(ke=>{V===w.layers.size-1&&(o==null||o(ke),!ke.defaultPrevented&&l&&(ke.preventDefault(),l()))},k),$.useEffect(()=>{if(M)return i&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(x2=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(M)),w.layers.add(M),w2(),()=>{i&&w.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=x2)}},[M,k,i,w]),$.useEffect(()=>()=>{M&&(w.layers.delete(M),w.layersWithOutsidePointerEventsDisabled.delete(M),w2())},[M,w]),$.useEffect(()=>{const ke=()=>j({});return document.addEventListener(r_,ke),()=>document.removeEventListener(r_,ke)},[]),oe.jsx(Un.div,{...S,ref:X,style:{pointerEvents:Z?ne?"auto":"none":void 0,...e.style},onFocusCapture:En(e.onFocusCapture,Se.onFocusCapture),onBlurCapture:En(e.onBlurCapture,Se.onBlurCapture),onPointerDownCapture:En(e.onPointerDownCapture,de.onPointerDownCapture)})});Rg.displayName=vL;var wL="DismissableLayerBranch",XE=$.forwardRef((e,t)=>{const i=$.useContext(KE),o=$.useRef(null),u=oi(t,o);return $.useEffect(()=>{const p=o.current;if(p)return i.branches.add(p),()=>{i.branches.delete(p)}},[i.branches]),oe.jsx(Un.div,{...e,ref:u})});XE.displayName=wL;function bL(e,t=globalThis==null?void 0:globalThis.document){const i=ks(e),o=$.useRef(!1),u=$.useRef(()=>{});return $.useEffect(()=>{const p=l=>{if(l.target&&!o.current){let S=function(){YE(_L,i,w,{discrete:!0})};const w={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",u.current),u.current=S,t.addEventListener("click",u.current,{once:!0})):S()}else t.removeEventListener("click",u.current);o.current=!1},y=window.setTimeout(()=>{t.addEventListener("pointerdown",p)},0);return()=>{window.clearTimeout(y),t.removeEventListener("pointerdown",p),t.removeEventListener("click",u.current)}},[t,i]),{onPointerDownCapture:()=>o.current=!0}}function SL(e,t=globalThis==null?void 0:globalThis.document){const i=ks(e),o=$.useRef(!1);return $.useEffect(()=>{const u=p=>{p.target&&!o.current&&YE(xL,i,{originalEvent:p},{discrete:!1})};return t.addEventListener("focusin",u),()=>t.removeEventListener("focusin",u)},[t,i]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function w2(){const e=new CustomEvent(r_);document.dispatchEvent(e)}function YE(e,t,i,{discrete:o}){const u=i.originalEvent.target,p=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&u.addEventListener(e,t,{once:!0}),o?HE(u,p):u.dispatchEvent(p)}var TL=Rg,CL=XE,el=globalThis!=null&&globalThis.document?$.useLayoutEffect:()=>{},EL="Portal",Ix=$.forwardRef((e,t)=>{var l;const{container:i,...o}=e,[u,p]=$.useState(!1);el(()=>p(!0),[]);const y=i||u&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return y?GE.createPortal(oe.jsx(Un.div,{...o,ref:t}),y):null});Ix.displayName=EL;function PL(e,t){return $.useReducer((i,o)=>t[i][o]??i,e)}var Ju=e=>{const{present:t,children:i}=e,o=kL(t),u=typeof i=="function"?i({present:o.isPresent}):$.Children.only(i),p=oi(o.ref,AL(u));return typeof i=="function"||o.isPresent?$.cloneElement(u,{ref:p}):null};Ju.displayName="Presence";function kL(e){const[t,i]=$.useState(),o=$.useRef({}),u=$.useRef(e),p=$.useRef("none"),y=e?"mounted":"unmounted",[l,S]=PL(y,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return $.useEffect(()=>{const w=Qf(o.current);p.current=l==="mounted"?w:"none"},[l]),el(()=>{const w=o.current,M=u.current;if(M!==e){const k=p.current,j=Qf(w);e?S("MOUNT"):j==="none"||(w==null?void 0:w.display)==="none"?S("UNMOUNT"):S(M&&k!==j?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,S]),el(()=>{if(t){let w;const M=t.ownerDocument.defaultView??window,I=j=>{const O=Qf(o.current).includes(j.animationName);if(j.target===t&&O&&(S("ANIMATION_END"),!u.current)){const H=t.style.animationFillMode;t.style.animationFillMode="forwards",w=M.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=H)})}},k=j=>{j.target===t&&(p.current=Qf(o.current))};return t.addEventListener("animationstart",k),t.addEventListener("animationcancel",I),t.addEventListener("animationend",I),()=>{M.clearTimeout(w),t.removeEventListener("animationstart",k),t.removeEventListener("animationcancel",I),t.removeEventListener("animationend",I)}}else S("ANIMATION_END")},[t,S]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:$.useCallback(w=>{w&&(o.current=getComputedStyle(w)),i(w)},[])}}function Qf(e){return(e==null?void 0:e.animationName)||"none"}function AL(e){var o,u;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function Dx({prop:e,defaultProp:t,onChange:i=()=>{}}){const[o,u]=ML({defaultProp:t,onChange:i}),p=e!==void 0,y=p?e:o,l=ks(i),S=$.useCallback(w=>{if(p){const I=typeof w=="function"?w(e):w;I!==e&&l(I)}else u(w)},[p,e,u,l]);return[y,S]}function ML({defaultProp:e,onChange:t}){const i=$.useState(e),[o]=i,u=$.useRef(o),p=ks(t);return $.useEffect(()=>{u.current!==o&&(p(o),u.current=o)},[o,u,p]),i}var IL="VisuallyHidden",Fg=$.forwardRef((e,t)=>oe.jsx(Un.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Fg.displayName=IL;var DL=Fg,Lx="ToastProvider",[zx,LL,zL]=pL("Toast"),[QE,pV]=zg("Toast",[zL]),[RL,Og]=QE(Lx),JE=e=>{const{__scopeToast:t,label:i="Notification",duration:o=5e3,swipeDirection:u="right",swipeThreshold:p=50,children:y}=e,[l,S]=$.useState(null),[w,M]=$.useState(0),I=$.useRef(!1),k=$.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${Lx}\`. Expected non-empty \`string\`.`),oe.jsx(zx.Provider,{scope:t,children:oe.jsx(RL,{scope:t,label:i,duration:o,swipeDirection:u,swipeThreshold:p,toastCount:w,viewport:l,onViewportChange:S,onToastAdd:$.useCallback(()=>M(j=>j+1),[]),onToastRemove:$.useCallback(()=>M(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:I,isClosePausedRef:k,children:y})})};JE.displayName=Lx;var eP="ToastViewport",FL=["F8"],i_="toast.viewportPause",s_="toast.viewportResume",tP=$.forwardRef((e,t)=>{const{__scopeToast:i,hotkey:o=FL,label:u="Notifications ({hotkey})",...p}=e,y=Og(eP,i),l=LL(i),S=$.useRef(null),w=$.useRef(null),M=$.useRef(null),I=$.useRef(null),k=oi(t,I,y.onViewportChange),j=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=y.toastCount>0;$.useEffect(()=>{const H=B=>{var Z;o.length!==0&&o.every(ne=>B[ne]||B.code===ne)&&((Z=I.current)==null||Z.focus())};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[o]),$.useEffect(()=>{const H=S.current,B=I.current;if(X&&H&&B){const V=()=>{if(!y.isClosePausedRef.current){const Se=new CustomEvent(i_);B.dispatchEvent(Se),y.isClosePausedRef.current=!0}},Z=()=>{if(y.isClosePausedRef.current){const Se=new CustomEvent(s_);B.dispatchEvent(Se),y.isClosePausedRef.current=!1}},ne=Se=>{!H.contains(Se.relatedTarget)&&Z()},de=()=>{H.contains(document.activeElement)||Z()};return H.addEventListener("focusin",V),H.addEventListener("focusout",ne),H.addEventListener("pointermove",V),H.addEventListener("pointerleave",de),window.addEventListener("blur",V),window.addEventListener("focus",Z),()=>{H.removeEventListener("focusin",V),H.removeEventListener("focusout",ne),H.removeEventListener("pointermove",V),H.removeEventListener("pointerleave",de),window.removeEventListener("blur",V),window.removeEventListener("focus",Z)}}},[X,y.isClosePausedRef]);const O=$.useCallback(({tabbingDirection:H})=>{const V=l().map(Z=>{const ne=Z.ref.current,de=[ne,...KL(ne)];return H==="forwards"?de:de.reverse()});return(H==="forwards"?V.reverse():V).flat()},[l]);return $.useEffect(()=>{const H=I.current;if(H){const B=V=>{var de,Se,ke;const Z=V.altKey||V.ctrlKey||V.metaKey;if(V.key==="Tab"&&!Z){const we=document.activeElement,Ye=V.shiftKey;if(V.target===H&&Ye){(de=w.current)==null||de.focus();return}const nt=O({tabbingDirection:Ye?"backwards":"forwards"}),Et=nt.findIndex(Ze=>Ze===we);Nv(nt.slice(Et+1))?V.preventDefault():Ye?(Se=w.current)==null||Se.focus():(ke=M.current)==null||ke.focus()}};return H.addEventListener("keydown",B),()=>H.removeEventListener("keydown",B)}},[l,O]),oe.jsxs(CL,{ref:S,role:"region","aria-label":u.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:X?void 0:"none"},children:[X&&oe.jsx(o_,{ref:w,onFocusFromOutsideViewport:()=>{const H=O({tabbingDirection:"forwards"});Nv(H)}}),oe.jsx(zx.Slot,{scope:i,children:oe.jsx(Un.ol,{tabIndex:-1,...p,ref:k})}),X&&oe.jsx(o_,{ref:M,onFocusFromOutsideViewport:()=>{const H=O({tabbingDirection:"backwards"});Nv(H)}})]})});tP.displayName=eP;var nP="ToastFocusProxy",o_=$.forwardRef((e,t)=>{const{__scopeToast:i,onFocusFromOutsideViewport:o,...u}=e,p=Og(nP,i);return oe.jsx(Fg,{"aria-hidden":!0,tabIndex:0,...u,ref:t,style:{position:"fixed"},onFocus:y=>{var w;const l=y.relatedTarget;!((w=p.viewport)!=null&&w.contains(l))&&o()}})});o_.displayName=nP;var Bg="Toast",OL="toast.swipeStart",BL="toast.swipeMove",NL="toast.swipeCancel",VL="toast.swipeEnd",rP=$.forwardRef((e,t)=>{const{forceMount:i,open:o,defaultOpen:u,onOpenChange:p,...y}=e,[l=!0,S]=Dx({prop:o,defaultProp:u,onChange:p});return oe.jsx(Ju,{present:i||l,children:oe.jsx($L,{open:l,...y,ref:t,onClose:()=>S(!1),onPause:ks(e.onPause),onResume:ks(e.onResume),onSwipeStart:En(e.onSwipeStart,w=>{w.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:En(e.onSwipeMove,w=>{const{x:M,y:I}=w.detail.delta;w.currentTarget.setAttribute("data-swipe","move"),w.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${M}px`),w.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${I}px`)}),onSwipeCancel:En(e.onSwipeCancel,w=>{w.currentTarget.setAttribute("data-swipe","cancel"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),w.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:En(e.onSwipeEnd,w=>{const{x:M,y:I}=w.detail.delta;w.currentTarget.setAttribute("data-swipe","end"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),w.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),w.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${M}px`),w.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${I}px`),S(!1)})})})});rP.displayName=Bg;var[jL,UL]=QE(Bg,{onClose(){}}),$L=$.forwardRef((e,t)=>{const{__scopeToast:i,type:o="foreground",duration:u,open:p,onClose:y,onEscapeKeyDown:l,onPause:S,onResume:w,onSwipeStart:M,onSwipeMove:I,onSwipeCancel:k,onSwipeEnd:j,...X}=e,O=Og(Bg,i),[H,B]=$.useState(null),V=oi(t,Ze=>B(Ze)),Z=$.useRef(null),ne=$.useRef(null),de=u||O.duration,Se=$.useRef(0),ke=$.useRef(de),we=$.useRef(0),{onToastAdd:Ye,onToastRemove:Fe}=O,pt=ks(()=>{var dt;(H==null?void 0:H.contains(document.activeElement))&&((dt=O.viewport)==null||dt.focus()),y()}),nt=$.useCallback(Ze=>{!Ze||Ze===1/0||(window.clearTimeout(we.current),Se.current=new Date().getTime(),we.current=window.setTimeout(pt,Ze))},[pt]);$.useEffect(()=>{const Ze=O.viewport;if(Ze){const dt=()=>{nt(ke.current),w==null||w()},mt=()=>{const Pt=new Date().getTime()-Se.current;ke.current=ke.current-Pt,window.clearTimeout(we.current),S==null||S()};return Ze.addEventListener(i_,mt),Ze.addEventListener(s_,dt),()=>{Ze.removeEventListener(i_,mt),Ze.removeEventListener(s_,dt)}}},[O.viewport,de,S,w,nt]),$.useEffect(()=>{p&&!O.isClosePausedRef.current&&nt(de)},[p,de,O.isClosePausedRef,nt]),$.useEffect(()=>(Ye(),()=>Fe()),[Ye,Fe]);const Et=$.useMemo(()=>H?uP(H):null,[H]);return O.viewport?oe.jsxs(oe.Fragment,{children:[Et&&oe.jsx(GL,{__scopeToast:i,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:Et}),oe.jsx(jL,{scope:i,onClose:pt,children:xp.createPortal(oe.jsx(zx.ItemSlot,{scope:i,children:oe.jsx(TL,{asChild:!0,onEscapeKeyDown:En(l,()=>{O.isFocusedToastEscapeKeyDownRef.current||pt(),O.isFocusedToastEscapeKeyDownRef.current=!1}),children:oe.jsx(Un.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":p?"open":"closed","data-swipe-direction":O.swipeDirection,...X,ref:V,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:En(e.onKeyDown,Ze=>{Ze.key==="Escape"&&(l==null||l(Ze.nativeEvent),Ze.nativeEvent.defaultPrevented||(O.isFocusedToastEscapeKeyDownRef.current=!0,pt()))}),onPointerDown:En(e.onPointerDown,Ze=>{Ze.button===0&&(Z.current={x:Ze.clientX,y:Ze.clientY})}),onPointerMove:En(e.onPointerMove,Ze=>{if(!Z.current)return;const dt=Ze.clientX-Z.current.x,mt=Ze.clientY-Z.current.y,Pt=!!ne.current,Pe=["left","right"].includes(O.swipeDirection),We=["left","up"].includes(O.swipeDirection)?Math.min:Math.max,yt=Pe?We(0,dt):0,ot=Pe?0:We(0,mt),_t=Ze.pointerType==="touch"?10:2,vt={x:yt,y:ot},Nt={originalEvent:Ze,delta:vt};Pt?(ne.current=vt,Jf(BL,I,Nt,{discrete:!1})):b2(vt,O.swipeDirection,_t)?(ne.current=vt,Jf(OL,M,Nt,{discrete:!1}),Ze.target.setPointerCapture(Ze.pointerId)):(Math.abs(dt)>_t||Math.abs(mt)>_t)&&(Z.current=null)}),onPointerUp:En(e.onPointerUp,Ze=>{const dt=ne.current,mt=Ze.target;if(mt.hasPointerCapture(Ze.pointerId)&&mt.releasePointerCapture(Ze.pointerId),ne.current=null,Z.current=null,dt){const Pt=Ze.currentTarget,Pe={originalEvent:Ze,delta:dt};b2(dt,O.swipeDirection,O.swipeThreshold)?Jf(VL,j,Pe,{discrete:!0}):Jf(NL,k,Pe,{discrete:!0}),Pt.addEventListener("click",We=>We.preventDefault(),{once:!0})}})})})}),O.viewport)})]}):null}),GL=e=>{const{__scopeToast:t,children:i,...o}=e,u=Og(Bg,t),[p,y]=$.useState(!1),[l,S]=$.useState(!1);return WL(()=>y(!0)),$.useEffect(()=>{const w=window.setTimeout(()=>S(!0),1e3);return()=>window.clearTimeout(w)},[]),l?null:oe.jsx(Ix,{asChild:!0,children:oe.jsx(Fg,{...o,children:p&&oe.jsxs(oe.Fragment,{children:[u.label," ",i]})})})},qL="ToastTitle",iP=$.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e;return oe.jsx(Un.div,{...o,ref:t})});iP.displayName=qL;var ZL="ToastDescription",sP=$.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e;return oe.jsx(Un.div,{...o,ref:t})});sP.displayName=ZL;var oP="ToastAction",aP=$.forwardRef((e,t)=>{const{altText:i,...o}=e;return i.trim()?oe.jsx(cP,{altText:i,asChild:!0,children:oe.jsx(Rx,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${oP}\`. Expected non-empty \`string\`.`),null)});aP.displayName=oP;var lP="ToastClose",Rx=$.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e,u=UL(lP,i);return oe.jsx(cP,{asChild:!0,children:oe.jsx(Un.button,{type:"button",...o,ref:t,onClick:En(e.onClick,u.onClose)})})});Rx.displayName=lP;var cP=$.forwardRef((e,t)=>{const{__scopeToast:i,altText:o,...u}=e;return oe.jsx(Un.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...u,ref:t})});function uP(e){const t=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),HL(o)){const u=o.ariaHidden||o.hidden||o.style.display==="none",p=o.dataset.radixToastAnnounceExclude==="";if(!u)if(p){const y=o.dataset.radixToastAnnounceAlt;y&&t.push(y)}else t.push(...uP(o))}}),t}function Jf(e,t,i,{discrete:o}){const u=i.originalEvent.currentTarget,p=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});t&&u.addEventListener(e,t,{once:!0}),o?HE(u,p):u.dispatchEvent(p)}var b2=(e,t,i=0)=>{const o=Math.abs(e.x),u=Math.abs(e.y),p=o>u;return t==="left"||t==="right"?p&&o>i:!p&&u>i};function WL(e=()=>{}){const t=ks(e);el(()=>{let i=0,o=0;return i=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(o)}},[t])}function HL(e){return e.nodeType===e.ELEMENT_NODE}function KL(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const u=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||u?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function Nv(e){const t=document.activeElement;return e.some(i=>i===t?!0:(i.focus(),document.activeElement!==t))}var XL=JE,hP=tP,dP=rP,pP=iP,fP=sP,mP=aP,gP=Rx;function yP(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=yP(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function vP(){for(var e,t,i=0,o="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=yP(e))&&(o&&(o+=" "),o+=t);return o}const S2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T2=vP,Fx=(e,t)=>i=>{var o;if((t==null?void 0:t.variants)==null)return T2(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:u,defaultVariants:p}=t,y=Object.keys(u).map(w=>{const M=i==null?void 0:i[w],I=p==null?void 0:p[w];if(M===null)return null;const k=S2(M)||S2(I);return u[w][k]}),l=i&&Object.entries(i).reduce((w,M)=>{let[I,k]=M;return k===void 0||(w[I]=k),w},{}),S=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((w,M)=>{let{class:I,className:k,...j}=M;return Object.entries(j).every(X=>{let[O,H]=X;return Array.isArray(H)?H.includes({...p,...l}[O]):{...p,...l}[O]===H})?[...w,I,k]:w},[]);return T2(e,y,S,i==null?void 0:i.class,i==null?void 0:i.className)};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),hl=(e,t)=>{const i=$.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:p=2,absoluteStrokeWidth:y,className:l="",children:S,...w},M)=>$.createElement("svg",{ref:M,...YL,width:u,height:u,stroke:o,strokeWidth:y?Number(p)*24/Number(u):p,className:["lucide",`lucide-${QL(e)}`,l].join(" "),...w},[...t.map(([I,k])=>$.createElement(I,k)),...Array.isArray(S)?S:[S]]));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=hl("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=hl("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=hl("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=hl("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=hl("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=hl("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=hl("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=hl("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ox="-",oz=e=>{const t=lz(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:y=>{const l=y.split(Ox);return l[0]===""&&l.length!==1&&l.shift(),xP(l,t)||az(y)},getConflictingClassGroupIds:(y,l)=>{const S=i[y]||[];return l&&o[y]?[...S,...o[y]]:S}}},xP=(e,t)=>{var y;if(e.length===0)return t.classGroupId;const i=e[0],o=t.nextPart.get(i),u=o?xP(e.slice(1),o):void 0;if(u)return u;if(t.validators.length===0)return;const p=e.join(Ox);return(y=t.validators.find(({validator:l})=>l(p)))==null?void 0:y.classGroupId},C2=/^\[(.+)\]$/,az=e=>{if(C2.test(e)){const t=C2.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},lz=e=>{const{theme:t,prefix:i}=e,o={nextPart:new Map,validators:[]};return uz(Object.entries(e.classGroups),i).forEach(([p,y])=>{a_(y,o,p,t)}),o},a_=(e,t,i,o)=>{e.forEach(u=>{if(typeof u=="string"){const p=u===""?t:E2(t,u);p.classGroupId=i;return}if(typeof u=="function"){if(cz(u)){a_(u(o),t,i,o);return}t.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(([p,y])=>{a_(y,E2(t,p),i,o)})})},E2=(e,t)=>{let i=e;return t.split(Ox).forEach(o=>{i.nextPart.has(o)||i.nextPart.set(o,{nextPart:new Map,validators:[]}),i=i.nextPart.get(o)}),i},cz=e=>e.isThemeGetter,uz=(e,t)=>t?e.map(([i,o])=>{const u=o.map(p=>typeof p=="string"?t+p:typeof p=="object"?Object.fromEntries(Object.entries(p).map(([y,l])=>[t+y,l])):p);return[i,u]}):e,hz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,o=new Map;const u=(p,y)=>{i.set(p,y),t++,t>e&&(t=0,o=i,i=new Map)};return{get(p){let y=i.get(p);if(y!==void 0)return y;if((y=o.get(p))!==void 0)return u(p,y),y},set(p,y){i.has(p)?i.set(p,y):u(p,y)}}},wP="!",dz=e=>{const{separator:t,experimentalParseClassName:i}=e,o=t.length===1,u=t[0],p=t.length,y=l=>{const S=[];let w=0,M=0,I;for(let H=0;H<l.length;H++){let B=l[H];if(w===0){if(B===u&&(o||l.slice(H,H+p)===t)){S.push(l.slice(M,H)),M=H+p;continue}if(B==="/"){I=H;continue}}B==="["?w++:B==="]"&&w--}const k=S.length===0?l:l.substring(M),j=k.startsWith(wP),X=j?k.substring(1):k,O=I&&I>M?I-M:void 0;return{modifiers:S,hasImportantModifier:j,baseClassName:X,maybePostfixModifierPosition:O}};return i?l=>i({className:l,parseClassName:y}):y},pz=e=>{if(e.length<=1)return e;const t=[];let i=[];return e.forEach(o=>{o[0]==="["?(t.push(...i.sort(),o),i=[]):i.push(o)}),t.push(...i.sort()),t},fz=e=>({cache:hz(e.cacheSize),parseClassName:dz(e),...oz(e)}),mz=/\s+/,gz=(e,t)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:u}=t,p=[],y=e.trim().split(mz);let l="";for(let S=y.length-1;S>=0;S-=1){const w=y[S],{modifiers:M,hasImportantModifier:I,baseClassName:k,maybePostfixModifierPosition:j}=i(w);let X=!!j,O=o(X?k.substring(0,j):k);if(!O){if(!X){l=w+(l.length>0?" "+l:l);continue}if(O=o(k),!O){l=w+(l.length>0?" "+l:l);continue}X=!1}const H=pz(M).join(":"),B=I?H+wP:H,V=B+O;if(p.includes(V))continue;p.push(V);const Z=u(O,X);for(let ne=0;ne<Z.length;++ne){const de=Z[ne];p.push(B+de)}l=w+(l.length>0?" "+l:l)}return l};function yz(){let e=0,t,i,o="";for(;e<arguments.length;)(t=arguments[e++])&&(i=bP(t))&&(o&&(o+=" "),o+=i);return o}const bP=e=>{if(typeof e=="string")return e;let t,i="";for(let o=0;o<e.length;o++)e[o]&&(t=bP(e[o]))&&(i&&(i+=" "),i+=t);return i};function vz(e,...t){let i,o,u,p=y;function y(S){const w=t.reduce((M,I)=>I(M),e());return i=fz(w),o=i.cache.get,u=i.cache.set,p=l,l(S)}function l(S){const w=o(S);if(w)return w;const M=gz(S,i);return u(S,M),M}return function(){return p(yz.apply(null,arguments))}}const Tn=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},SP=/^\[(?:([a-z-]+):)?(.+)\]$/i,_z=/^\d+\/\d+$/,xz=new Set(["px","full","screen"]),wz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Tz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bo=e=>Su(e)||xz.has(e)||_z.test(e),Ta=e=>eh(e,"length",Lz),Su=e=>!!e&&!Number.isNaN(Number(e)),Vv=e=>eh(e,"number",Su),vd=e=>!!e&&Number.isInteger(Number(e)),Ez=e=>e.endsWith("%")&&Su(e.slice(0,-1)),Bt=e=>SP.test(e),Ca=e=>wz.test(e),Pz=new Set(["length","size","percentage"]),kz=e=>eh(e,Pz,TP),Az=e=>eh(e,"position",TP),Mz=new Set(["image","url"]),Iz=e=>eh(e,Mz,Rz),Dz=e=>eh(e,"",zz),_d=()=>!0,eh=(e,t,i)=>{const o=SP.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):i(o[2]):!1},Lz=e=>bz.test(e)&&!Sz.test(e),TP=()=>!1,zz=e=>Tz.test(e),Rz=e=>Cz.test(e),Fz=()=>{const e=Tn("colors"),t=Tn("spacing"),i=Tn("blur"),o=Tn("brightness"),u=Tn("borderColor"),p=Tn("borderRadius"),y=Tn("borderSpacing"),l=Tn("borderWidth"),S=Tn("contrast"),w=Tn("grayscale"),M=Tn("hueRotate"),I=Tn("invert"),k=Tn("gap"),j=Tn("gradientColorStops"),X=Tn("gradientColorStopPositions"),O=Tn("inset"),H=Tn("margin"),B=Tn("opacity"),V=Tn("padding"),Z=Tn("saturate"),ne=Tn("scale"),de=Tn("sepia"),Se=Tn("skew"),ke=Tn("space"),we=Tn("translate"),Ye=()=>["auto","contain","none"],Fe=()=>["auto","hidden","clip","visible","scroll"],pt=()=>["auto",Bt,t],nt=()=>[Bt,t],Et=()=>["",Bo,Ta],Ze=()=>["auto",Su,Bt],dt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],mt=()=>["solid","dashed","dotted","double","none"],Pt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>["start","end","center","between","around","evenly","stretch"],We=()=>["","0",Bt],yt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ot=()=>[Su,Bt];return{cacheSize:500,separator:":",theme:{colors:[_d],spacing:[Bo,Ta],blur:["none","",Ca,Bt],brightness:ot(),borderColor:[e],borderRadius:["none","","full",Ca,Bt],borderSpacing:nt(),borderWidth:Et(),contrast:ot(),grayscale:We(),hueRotate:ot(),invert:We(),gap:nt(),gradientColorStops:[e],gradientColorStopPositions:[Ez,Ta],inset:pt(),margin:pt(),opacity:ot(),padding:nt(),saturate:ot(),scale:ot(),sepia:We(),skew:ot(),space:nt(),translate:nt()},classGroups:{aspect:[{aspect:["auto","square","video",Bt]}],container:["container"],columns:[{columns:[Ca]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...dt(),Bt]}],overflow:[{overflow:Fe()}],"overflow-x":[{"overflow-x":Fe()}],"overflow-y":[{"overflow-y":Fe()}],overscroll:[{overscroll:Ye()}],"overscroll-x":[{"overscroll-x":Ye()}],"overscroll-y":[{"overscroll-y":Ye()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vd,Bt]}],basis:[{basis:pt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bt]}],grow:[{grow:We()}],shrink:[{shrink:We()}],order:[{order:["first","last","none",vd,Bt]}],"grid-cols":[{"grid-cols":[_d]}],"col-start-end":[{col:["auto",{span:["full",vd,Bt]},Bt]}],"col-start":[{"col-start":Ze()}],"col-end":[{"col-end":Ze()}],"grid-rows":[{"grid-rows":[_d]}],"row-start-end":[{row:["auto",{span:[vd,Bt]},Bt]}],"row-start":[{"row-start":Ze()}],"row-end":[{"row-end":Ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bt]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...Pe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Pe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Pe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[V]}],px:[{px:[V]}],py:[{py:[V]}],ps:[{ps:[V]}],pe:[{pe:[V]}],pt:[{pt:[V]}],pr:[{pr:[V]}],pb:[{pb:[V]}],pl:[{pl:[V]}],m:[{m:[H]}],mx:[{mx:[H]}],my:[{my:[H]}],ms:[{ms:[H]}],me:[{me:[H]}],mt:[{mt:[H]}],mr:[{mr:[H]}],mb:[{mb:[H]}],ml:[{ml:[H]}],"space-x":[{"space-x":[ke]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ke]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bt,t]}],"min-w":[{"min-w":[Bt,t,"min","max","fit"]}],"max-w":[{"max-w":[Bt,t,"none","full","min","max","fit","prose",{screen:[Ca]},Ca]}],h:[{h:[Bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ca,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vv]}],"font-family":[{font:[_d]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bt]}],"line-clamp":[{"line-clamp":["none",Su,Vv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bo,Bt]}],"list-image":[{"list-image":["none",Bt]}],"list-style-type":[{list:["none","disc","decimal",Bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...mt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bo,Ta]}],"underline-offset":[{"underline-offset":["auto",Bo,Bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:nt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...dt(),Az]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Iz]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[X]}],"gradient-via-pos":[{via:[X]}],"gradient-to-pos":[{to:[X]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[p]}],"rounded-s":[{"rounded-s":[p]}],"rounded-e":[{"rounded-e":[p]}],"rounded-t":[{"rounded-t":[p]}],"rounded-r":[{"rounded-r":[p]}],"rounded-b":[{"rounded-b":[p]}],"rounded-l":[{"rounded-l":[p]}],"rounded-ss":[{"rounded-ss":[p]}],"rounded-se":[{"rounded-se":[p]}],"rounded-ee":[{"rounded-ee":[p]}],"rounded-es":[{"rounded-es":[p]}],"rounded-tl":[{"rounded-tl":[p]}],"rounded-tr":[{"rounded-tr":[p]}],"rounded-br":[{"rounded-br":[p]}],"rounded-bl":[{"rounded-bl":[p]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...mt(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:mt()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...mt()]}],"outline-offset":[{"outline-offset":[Bo,Bt]}],"outline-w":[{outline:[Bo,Ta]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Et()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[Bo,Ta]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ca,Dz]}],"shadow-color":[{shadow:[_d]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...Pt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Pt()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[o]}],contrast:[{contrast:[S]}],"drop-shadow":[{"drop-shadow":["","none",Ca,Bt]}],grayscale:[{grayscale:[w]}],"hue-rotate":[{"hue-rotate":[M]}],invert:[{invert:[I]}],saturate:[{saturate:[Z]}],sepia:[{sepia:[de]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[S]}],"backdrop-grayscale":[{"backdrop-grayscale":[w]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[M]}],"backdrop-invert":[{"backdrop-invert":[I]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[Z]}],"backdrop-sepia":[{"backdrop-sepia":[de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[y]}],"border-spacing-x":[{"border-spacing-x":[y]}],"border-spacing-y":[{"border-spacing-y":[y]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bt]}],duration:[{duration:ot()}],ease:[{ease:["linear","in","out","in-out",Bt]}],delay:[{delay:ot()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ne]}],"scale-x":[{"scale-x":[ne]}],"scale-y":[{"scale-y":[ne]}],rotate:[{rotate:[vd,Bt]}],"translate-x":[{"translate-x":[we]}],"translate-y":[{"translate-y":[we]}],"skew-x":[{"skew-x":[Se]}],"skew-y":[{"skew-y":[Se]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":nt()}],"scroll-mx":[{"scroll-mx":nt()}],"scroll-my":[{"scroll-my":nt()}],"scroll-ms":[{"scroll-ms":nt()}],"scroll-me":[{"scroll-me":nt()}],"scroll-mt":[{"scroll-mt":nt()}],"scroll-mr":[{"scroll-mr":nt()}],"scroll-mb":[{"scroll-mb":nt()}],"scroll-ml":[{"scroll-ml":nt()}],"scroll-p":[{"scroll-p":nt()}],"scroll-px":[{"scroll-px":nt()}],"scroll-py":[{"scroll-py":nt()}],"scroll-ps":[{"scroll-ps":nt()}],"scroll-pe":[{"scroll-pe":nt()}],"scroll-pt":[{"scroll-pt":nt()}],"scroll-pr":[{"scroll-pr":nt()}],"scroll-pb":[{"scroll-pb":nt()}],"scroll-pl":[{"scroll-pl":nt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Bo,Ta,Vv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Oz=vz(Fz);function lr(...e){return Oz(vP(e))}const Bz=XL,CP=$.forwardRef(({className:e,...t},i)=>oe.jsx(hP,{ref:i,className:lr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));CP.displayName=hP.displayName;const Nz=Fx("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),EP=$.forwardRef(({className:e,variant:t,...i},o)=>oe.jsx(dP,{ref:o,className:lr(Nz({variant:t}),e),...i}));EP.displayName=dP.displayName;const Vz=$.forwardRef(({className:e,...t},i)=>oe.jsx(mP,{ref:i,className:lr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Vz.displayName=mP.displayName;const PP=$.forwardRef(({className:e,...t},i)=>oe.jsx(gP,{ref:i,className:lr("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:oe.jsx(sz,{className:"h-4 w-4"})}));PP.displayName=gP.displayName;const kP=$.forwardRef(({className:e,...t},i)=>oe.jsx(pP,{ref:i,className:lr("text-sm font-semibold",e),...t}));kP.displayName=pP.displayName;const AP=$.forwardRef(({className:e,...t},i)=>oe.jsx(fP,{ref:i,className:lr("text-sm opacity-90",e),...t}));AP.displayName=fP.displayName;function jz(){const{toasts:e}=oL();return oe.jsxs(Bz,{children:[e.map(function({id:t,title:i,description:o,action:u,...p}){return oe.jsxs(EP,{...p,children:[oe.jsxs("div",{className:"grid gap-1",children:[i&&oe.jsx(kP,{children:i}),o&&oe.jsx(AP,{children:o})]}),u,oe.jsx(PP,{})]},t)}),oe.jsx(CP,{})]})}var Uz=e=>{switch(e){case"success":return qz;case"info":return Wz;case"warning":return Zz;case"error":return Hz;default:return null}},$z=Array(12).fill(0),Gz=({visible:e})=>tt.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},tt.createElement("div",{className:"sonner-spinner"},$z.map((t,i)=>tt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),qz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Zz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Wz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Hz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Kz=()=>{let[e,t]=tt.useState(document.hidden);return tt.useEffect(()=>{let i=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},l_=1,Xz=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:i,...o}=e,u=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:l_++,p=this.toasts.find(l=>l.id===u),y=e.dismissible===void 0?!0:e.dismissible;return p?this.toasts=this.toasts.map(l=>l.id===u?(this.publish({...l,...e,id:u,title:i}),{...l,...e,id:u,dismissible:y,title:i}):l):this.addToast({title:i,...o,dismissible:y,id:u}),u},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let o=e instanceof Promise?e:e(),u=i!==void 0;return o.then(async p=>{if(Qz(p)&&!p.ok){u=!1;let y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description;this.create({id:i,type:"error",message:y,description:l})}else if(t.success!==void 0){u=!1;let y=typeof t.success=="function"?await t.success(p):t.success,l=typeof t.description=="function"?await t.description(p):t.description;this.create({id:i,type:"success",message:y,description:l})}}).catch(async p=>{if(t.error!==void 0){u=!1;let y=typeof t.error=="function"?await t.error(p):t.error,l=typeof t.description=="function"?await t.description(p):t.description;this.create({id:i,type:"error",message:y,description:l})}}).finally(()=>{var p;u&&(this.dismiss(i),i=void 0),(p=t.finally)==null||p.call(t)}),i},this.custom=(e,t)=>{let i=(t==null?void 0:t.id)||l_++;return this.create({jsx:e(i),id:i,...t}),i},this.subscribers=[],this.toasts=[]}},Qi=new Xz,Yz=(e,t)=>{let i=(t==null?void 0:t.id)||l_++;return Qi.addToast({title:e,...t,id:i}),i},Qz=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Jz=Yz,eR=()=>Qi.toasts,ql=Object.assign(Jz,{success:Qi.success,info:Qi.info,warning:Qi.warning,error:Qi.error,custom:Qi.custom,message:Qi.message,promise:Qi.promise,dismiss:Qi.dismiss,loading:Qi.loading},{getHistory:eR});function tR(e,{insertAt:t}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}tR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function em(e){return e.label!==void 0}var nR=3,rR="32px",iR=4e3,sR=356,oR=14,aR=20,lR=200;function cR(...e){return e.filter(Boolean).join(" ")}var uR=e=>{var t,i,o,u,p,y,l,S,w,M;let{invert:I,toast:k,unstyled:j,interacting:X,setHeights:O,visibleToasts:H,heights:B,index:V,toasts:Z,expanded:ne,removeToast:de,defaultRichColors:Se,closeButton:ke,style:we,cancelButtonStyle:Ye,actionButtonStyle:Fe,className:pt="",descriptionClassName:nt="",duration:Et,position:Ze,gap:dt,loadingIcon:mt,expandByDefault:Pt,classNames:Pe,icons:We,closeButtonAriaLabel:yt="Close toast",pauseWhenPageIsHidden:ot,cn:_t}=e,[vt,Nt]=tt.useState(!1),[Dn,Gt]=tt.useState(!1),[sr,cr]=tt.useState(!1),[$n,Ln]=tt.useState(!1),[cs,kr]=tt.useState(0),[ai,Ar]=tt.useState(0),Gi=tt.useRef(null),yr=tt.useRef(null),Pi=V===0,ki=V+1<=H,dn=k.type,Ae=k.dismissible!==!1,vr=k.className||"",jr=k.descriptionClassName||"",Ht=tt.useMemo(()=>B.findIndex(Xe=>Xe.toastId===k.id)||0,[B,k.id]),qt=tt.useMemo(()=>{var Xe;return(Xe=k.closeButton)!=null?Xe:ke},[k.closeButton,ke]),li=tt.useMemo(()=>k.duration||Et||iR,[k.duration,Et]),us=tt.useRef(0),_r=tt.useRef(0),wo=tt.useRef(0),ci=tt.useRef(null),[qi,As]=Ze.split("-"),je=tt.useMemo(()=>B.reduce((Xe,rt,Dt)=>Dt>=Ht?Xe:Xe+rt.height,0),[B,Ht]),ui=Kz(),pn=k.invert||I,Zi=dn==="loading";_r.current=tt.useMemo(()=>Ht*dt+je,[Ht,je]),tt.useEffect(()=>{Nt(!0)},[]),tt.useLayoutEffect(()=>{if(!vt)return;let Xe=yr.current,rt=Xe.style.height;Xe.style.height="auto";let Dt=Xe.getBoundingClientRect().height;Xe.style.height=rt,Ar(Dt),O(zn=>zn.find(St=>St.toastId===k.id)?zn.map(St=>St.toastId===k.id?{...St,height:Dt}:St):[{toastId:k.id,height:Dt,position:k.position},...zn])},[vt,k.title,k.description,O,k.id]);let or=tt.useCallback(()=>{Gt(!0),kr(_r.current),O(Xe=>Xe.filter(rt=>rt.toastId!==k.id)),setTimeout(()=>{de(k)},lR)},[k,de,O,_r]);tt.useEffect(()=>{if(k.promise&&dn==="loading"||k.duration===1/0||k.type==="loading")return;let Xe,rt=li;return ne||X||ot&&ui?(()=>{if(wo.current<us.current){let Dt=new Date().getTime()-us.current;rt=rt-Dt}wo.current=new Date().getTime()})():rt!==1/0&&(us.current=new Date().getTime(),Xe=setTimeout(()=>{var Dt;(Dt=k.onAutoClose)==null||Dt.call(k,k),or()},rt)),()=>clearTimeout(Xe)},[ne,X,Pt,k,li,or,k.promise,dn,ot,ui]),tt.useEffect(()=>{let Xe=yr.current;if(Xe){let rt=Xe.getBoundingClientRect().height;return Ar(rt),O(Dt=>[{toastId:k.id,height:rt,position:k.position},...Dt]),()=>O(Dt=>Dt.filter(zn=>zn.toastId!==k.id))}},[O,k.id]),tt.useEffect(()=>{k.delete&&or()},[or,k.delete]);function $e(){return We!=null&&We.loading?tt.createElement("div",{className:"sonner-loader","data-visible":dn==="loading"},We.loading):mt?tt.createElement("div",{className:"sonner-loader","data-visible":dn==="loading"},mt):tt.createElement(Gz,{visible:dn==="loading"})}return tt.createElement("li",{"aria-live":k.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:yr,className:_t(pt,vr,Pe==null?void 0:Pe.toast,(t=k==null?void 0:k.classNames)==null?void 0:t.toast,Pe==null?void 0:Pe.default,Pe==null?void 0:Pe[dn],(i=k==null?void 0:k.classNames)==null?void 0:i[dn]),"data-sonner-toast":"","data-rich-colors":(o=k.richColors)!=null?o:Se,"data-styled":!(k.jsx||k.unstyled||j),"data-mounted":vt,"data-promise":!!k.promise,"data-removed":Dn,"data-visible":ki,"data-y-position":qi,"data-x-position":As,"data-index":V,"data-front":Pi,"data-swiping":sr,"data-dismissible":Ae,"data-type":dn,"data-invert":pn,"data-swipe-out":$n,"data-expanded":!!(ne||Pt&&vt),style:{"--index":V,"--toasts-before":V,"--z-index":Z.length-V,"--offset":`${Dn?cs:_r.current}px`,"--initial-height":Pt?"auto":`${ai}px`,...we,...k.style},onPointerDown:Xe=>{Zi||!Ae||(Gi.current=new Date,kr(_r.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(cr(!0),ci.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,rt,Dt,zn;if($n||!Ae)return;ci.current=null;let St=Number(((Xe=yr.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Ur=new Date().getTime()-((rt=Gi.current)==null?void 0:rt.getTime()),re=Math.abs(St)/Ur;if(Math.abs(St)>=aR||re>.11){kr(_r.current),(Dt=k.onDismiss)==null||Dt.call(k,k),or(),Ln(!0);return}(zn=yr.current)==null||zn.style.setProperty("--swipe-amount","0px"),cr(!1)},onPointerMove:Xe=>{var rt;if(!ci.current||!Ae)return;let Dt=Xe.clientY-ci.current.y,zn=Xe.clientX-ci.current.x,St=(qi==="top"?Math.min:Math.max)(0,Dt),Ur=Xe.pointerType==="touch"?10:2;Math.abs(St)>Ur?(rt=yr.current)==null||rt.style.setProperty("--swipe-amount",`${Dt}px`):Math.abs(zn)>Ur&&(ci.current=null)}},qt&&!k.jsx?tt.createElement("button",{"aria-label":yt,"data-disabled":Zi,"data-close-button":!0,onClick:Zi||!Ae?()=>{}:()=>{var Xe;or(),(Xe=k.onDismiss)==null||Xe.call(k,k)},className:_t(Pe==null?void 0:Pe.closeButton,(u=k==null?void 0:k.classNames)==null?void 0:u.closeButton)},tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},tt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),tt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,k.jsx||tt.isValidElement(k.title)?k.jsx||k.title:tt.createElement(tt.Fragment,null,dn||k.icon||k.promise?tt.createElement("div",{"data-icon":"",className:_t(Pe==null?void 0:Pe.icon,(p=k==null?void 0:k.classNames)==null?void 0:p.icon)},k.promise||k.type==="loading"&&!k.icon?k.icon||$e():null,k.type!=="loading"?k.icon||(We==null?void 0:We[dn])||Uz(dn):null):null,tt.createElement("div",{"data-content":"",className:_t(Pe==null?void 0:Pe.content,(y=k==null?void 0:k.classNames)==null?void 0:y.content)},tt.createElement("div",{"data-title":"",className:_t(Pe==null?void 0:Pe.title,(l=k==null?void 0:k.classNames)==null?void 0:l.title)},k.title),k.description?tt.createElement("div",{"data-description":"",className:_t(nt,jr,Pe==null?void 0:Pe.description,(S=k==null?void 0:k.classNames)==null?void 0:S.description)},k.description):null),tt.isValidElement(k.cancel)?k.cancel:k.cancel&&em(k.cancel)?tt.createElement("button",{"data-button":!0,"data-cancel":!0,style:k.cancelButtonStyle||Ye,onClick:Xe=>{var rt,Dt;em(k.cancel)&&Ae&&((Dt=(rt=k.cancel).onClick)==null||Dt.call(rt,Xe),or())},className:_t(Pe==null?void 0:Pe.cancelButton,(w=k==null?void 0:k.classNames)==null?void 0:w.cancelButton)},k.cancel.label):null,tt.isValidElement(k.action)?k.action:k.action&&em(k.action)?tt.createElement("button",{"data-button":!0,"data-action":!0,style:k.actionButtonStyle||Fe,onClick:Xe=>{var rt,Dt;em(k.action)&&(Xe.defaultPrevented||((Dt=(rt=k.action).onClick)==null||Dt.call(rt,Xe),or()))},className:_t(Pe==null?void 0:Pe.actionButton,(M=k==null?void 0:k.classNames)==null?void 0:M.actionButton)},k.action.label):null))};function P2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var hR=e=>{let{invert:t,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:p,className:y,offset:l,theme:S="light",richColors:w,duration:M,style:I,visibleToasts:k=nR,toastOptions:j,dir:X=P2(),gap:O=oR,loadingIcon:H,icons:B,containerAriaLabel:V="Notifications",pauseWhenPageIsHidden:Z,cn:ne=cR}=e,[de,Se]=tt.useState([]),ke=tt.useMemo(()=>Array.from(new Set([i].concat(de.filter(ot=>ot.position).map(ot=>ot.position)))),[de,i]),[we,Ye]=tt.useState([]),[Fe,pt]=tt.useState(!1),[nt,Et]=tt.useState(!1),[Ze,dt]=tt.useState(S!=="system"?S:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),mt=tt.useRef(null),Pt=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Pe=tt.useRef(null),We=tt.useRef(!1),yt=tt.useCallback(ot=>{var _t;(_t=de.find(vt=>vt.id===ot.id))!=null&&_t.delete||Qi.dismiss(ot.id),Se(vt=>vt.filter(({id:Nt})=>Nt!==ot.id))},[de]);return tt.useEffect(()=>Qi.subscribe(ot=>{if(ot.dismiss){Se(_t=>_t.map(vt=>vt.id===ot.id?{...vt,delete:!0}:vt));return}setTimeout(()=>{GE.flushSync(()=>{Se(_t=>{let vt=_t.findIndex(Nt=>Nt.id===ot.id);return vt!==-1?[..._t.slice(0,vt),{..._t[vt],...ot},..._t.slice(vt+1)]:[ot,..._t]})})})}),[]),tt.useEffect(()=>{if(S!=="system"){dt(S);return}S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?dt("dark"):dt("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:ot})=>{dt(ot?"dark":"light")})},[S]),tt.useEffect(()=>{de.length<=1&&pt(!1)},[de]),tt.useEffect(()=>{let ot=_t=>{var vt,Nt;o.every(Dn=>_t[Dn]||_t.code===Dn)&&(pt(!0),(vt=mt.current)==null||vt.focus()),_t.code==="Escape"&&(document.activeElement===mt.current||(Nt=mt.current)!=null&&Nt.contains(document.activeElement))&&pt(!1)};return document.addEventListener("keydown",ot),()=>document.removeEventListener("keydown",ot)},[o]),tt.useEffect(()=>{if(mt.current)return()=>{Pe.current&&(Pe.current.focus({preventScroll:!0}),Pe.current=null,We.current=!1)}},[mt.current]),de.length?tt.createElement("section",{"aria-label":`${V} ${Pt}`,tabIndex:-1},ke.map((ot,_t)=>{var vt;let[Nt,Dn]=ot.split("-");return tt.createElement("ol",{key:ot,dir:X==="auto"?P2():X,tabIndex:-1,ref:mt,className:y,"data-sonner-toaster":!0,"data-theme":Ze,"data-y-position":Nt,"data-x-position":Dn,style:{"--front-toast-height":`${((vt=we[0])==null?void 0:vt.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||rR,"--width":`${sR}px`,"--gap":`${O}px`,...I},onBlur:Gt=>{We.current&&!Gt.currentTarget.contains(Gt.relatedTarget)&&(We.current=!1,Pe.current&&(Pe.current.focus({preventScroll:!0}),Pe.current=null))},onFocus:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||We.current||(We.current=!0,Pe.current=Gt.relatedTarget)},onMouseEnter:()=>pt(!0),onMouseMove:()=>pt(!0),onMouseLeave:()=>{nt||pt(!1)},onPointerDown:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||Et(!0)},onPointerUp:()=>Et(!1)},de.filter(Gt=>!Gt.position&&_t===0||Gt.position===ot).map((Gt,sr)=>{var cr,$n;return tt.createElement(uR,{key:Gt.id,icons:B,index:sr,toast:Gt,defaultRichColors:w,duration:(cr=j==null?void 0:j.duration)!=null?cr:M,className:j==null?void 0:j.className,descriptionClassName:j==null?void 0:j.descriptionClassName,invert:t,visibleToasts:k,closeButton:($n=j==null?void 0:j.closeButton)!=null?$n:p,interacting:nt,position:ot,style:j==null?void 0:j.style,unstyled:j==null?void 0:j.unstyled,classNames:j==null?void 0:j.classNames,cancelButtonStyle:j==null?void 0:j.cancelButtonStyle,actionButtonStyle:j==null?void 0:j.actionButtonStyle,removeToast:yt,toasts:de.filter(Ln=>Ln.position==Gt.position),heights:we.filter(Ln=>Ln.position==Gt.position),setHeights:Ye,expandByDefault:u,gap:O,loadingIcon:H,expanded:Fe,pauseWhenPageIsHidden:Z,cn:ne})}))})):null};const dR=({...e})=>oe.jsx(hR,{className:"toaster group",position:"bottom-center",offset:140,gap:8,style:{width:"auto",minWidth:"300px",maxWidth:"90vw",position:"fixed",left:"50%",transform:"translateX(-50%)"},toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e});var pR=jT.useId||(()=>{}),fR=0;function jv(e){const[t,i]=$.useState(pR());return el(()=>{e||i(o=>o??String(fR++))},[e]),e||(t?`radix-${t}`:"")}const mR=["top","right","bottom","left"],tl=Math.min,es=Math.max,ng=Math.round,tm=Math.floor,nl=e=>({x:e,y:e}),gR={left:"right",right:"left",bottom:"top",top:"bottom"},yR={start:"end",end:"start"};function c_(e,t,i){return es(e,tl(t,i))}function Jo(e,t){return typeof e=="function"?e(t):e}function ea(e){return e.split("-")[0]}function th(e){return e.split("-")[1]}function Bx(e){return e==="x"?"y":"x"}function Nx(e){return e==="y"?"height":"width"}function rl(e){return["top","bottom"].includes(ea(e))?"y":"x"}function Vx(e){return Bx(rl(e))}function vR(e,t,i){i===void 0&&(i=!1);const o=th(e),u=Vx(e),p=Nx(u);let y=u==="x"?o===(i?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[p]>t.floating[p]&&(y=rg(y)),[y,rg(y)]}function _R(e){const t=rg(e);return[u_(e),t,u_(t)]}function u_(e){return e.replace(/start|end/g,t=>yR[t])}function xR(e,t,i){const o=["left","right"],u=["right","left"],p=["top","bottom"],y=["bottom","top"];switch(e){case"top":case"bottom":return i?t?u:o:t?o:u;case"left":case"right":return t?p:y;default:return[]}}function wR(e,t,i,o){const u=th(e);let p=xR(ea(e),i==="start",o);return u&&(p=p.map(y=>y+"-"+u),t&&(p=p.concat(p.map(u_)))),p}function rg(e){return e.replace(/left|right|bottom|top/g,t=>gR[t])}function bR(e){return{top:0,right:0,bottom:0,left:0,...e}}function MP(e){return typeof e!="number"?bR(e):{top:e,right:e,bottom:e,left:e}}function ig(e){const{x:t,y:i,width:o,height:u}=e;return{width:o,height:u,top:i,left:t,right:t+o,bottom:i+u,x:t,y:i}}function k2(e,t,i){let{reference:o,floating:u}=e;const p=rl(t),y=Vx(t),l=Nx(y),S=ea(t),w=p==="y",M=o.x+o.width/2-u.width/2,I=o.y+o.height/2-u.height/2,k=o[l]/2-u[l]/2;let j;switch(S){case"top":j={x:M,y:o.y-u.height};break;case"bottom":j={x:M,y:o.y+o.height};break;case"right":j={x:o.x+o.width,y:I};break;case"left":j={x:o.x-u.width,y:I};break;default:j={x:o.x,y:o.y}}switch(th(t)){case"start":j[y]-=k*(i&&w?-1:1);break;case"end":j[y]+=k*(i&&w?-1:1);break}return j}const SR=async(e,t,i)=>{const{placement:o="bottom",strategy:u="absolute",middleware:p=[],platform:y}=i,l=p.filter(Boolean),S=await(y.isRTL==null?void 0:y.isRTL(t));let w=await y.getElementRects({reference:e,floating:t,strategy:u}),{x:M,y:I}=k2(w,o,S),k=o,j={},X=0;for(let O=0;O<l.length;O++){const{name:H,fn:B}=l[O],{x:V,y:Z,data:ne,reset:de}=await B({x:M,y:I,initialPlacement:o,placement:k,strategy:u,middlewareData:j,rects:w,platform:y,elements:{reference:e,floating:t}});M=V??M,I=Z??I,j={...j,[H]:{...j[H],...ne}},de&&X<=50&&(X++,typeof de=="object"&&(de.placement&&(k=de.placement),de.rects&&(w=de.rects===!0?await y.getElementRects({reference:e,floating:t,strategy:u}):de.rects),{x:M,y:I}=k2(w,k,S)),O=-1)}return{x:M,y:I,placement:k,strategy:u,middlewareData:j}};async function ip(e,t){var i;t===void 0&&(t={});const{x:o,y:u,platform:p,rects:y,elements:l,strategy:S}=e,{boundary:w="clippingAncestors",rootBoundary:M="viewport",elementContext:I="floating",altBoundary:k=!1,padding:j=0}=Jo(t,e),X=MP(j),H=l[k?I==="floating"?"reference":"floating":I],B=ig(await p.getClippingRect({element:(i=await(p.isElement==null?void 0:p.isElement(H)))==null||i?H:H.contextElement||await(p.getDocumentElement==null?void 0:p.getDocumentElement(l.floating)),boundary:w,rootBoundary:M,strategy:S})),V=I==="floating"?{x:o,y:u,width:y.floating.width,height:y.floating.height}:y.reference,Z=await(p.getOffsetParent==null?void 0:p.getOffsetParent(l.floating)),ne=await(p.isElement==null?void 0:p.isElement(Z))?await(p.getScale==null?void 0:p.getScale(Z))||{x:1,y:1}:{x:1,y:1},de=ig(p.convertOffsetParentRelativeRectToViewportRelativeRect?await p.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:V,offsetParent:Z,strategy:S}):V);return{top:(B.top-de.top+X.top)/ne.y,bottom:(de.bottom-B.bottom+X.bottom)/ne.y,left:(B.left-de.left+X.left)/ne.x,right:(de.right-B.right+X.right)/ne.x}}const TR=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:o,placement:u,rects:p,platform:y,elements:l,middlewareData:S}=t,{element:w,padding:M=0}=Jo(e,t)||{};if(w==null)return{};const I=MP(M),k={x:i,y:o},j=Vx(u),X=Nx(j),O=await y.getDimensions(w),H=j==="y",B=H?"top":"left",V=H?"bottom":"right",Z=H?"clientHeight":"clientWidth",ne=p.reference[X]+p.reference[j]-k[j]-p.floating[X],de=k[j]-p.reference[j],Se=await(y.getOffsetParent==null?void 0:y.getOffsetParent(w));let ke=Se?Se[Z]:0;(!ke||!await(y.isElement==null?void 0:y.isElement(Se)))&&(ke=l.floating[Z]||p.floating[X]);const we=ne/2-de/2,Ye=ke/2-O[X]/2-1,Fe=tl(I[B],Ye),pt=tl(I[V],Ye),nt=Fe,Et=ke-O[X]-pt,Ze=ke/2-O[X]/2+we,dt=c_(nt,Ze,Et),mt=!S.arrow&&th(u)!=null&&Ze!==dt&&p.reference[X]/2-(Ze<nt?Fe:pt)-O[X]/2<0,Pt=mt?Ze<nt?Ze-nt:Ze-Et:0;return{[j]:k[j]+Pt,data:{[j]:dt,centerOffset:Ze-dt-Pt,...mt&&{alignmentOffset:Pt}},reset:mt}}}),CR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,o;const{placement:u,middlewareData:p,rects:y,initialPlacement:l,platform:S,elements:w}=t,{mainAxis:M=!0,crossAxis:I=!0,fallbackPlacements:k,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:X="none",flipAlignment:O=!0,...H}=Jo(e,t);if((i=p.arrow)!=null&&i.alignmentOffset)return{};const B=ea(u),V=rl(l),Z=ea(l)===l,ne=await(S.isRTL==null?void 0:S.isRTL(w.floating)),de=k||(Z||!O?[rg(l)]:_R(l)),Se=X!=="none";!k&&Se&&de.push(...wR(l,O,X,ne));const ke=[l,...de],we=await ip(t,H),Ye=[];let Fe=((o=p.flip)==null?void 0:o.overflows)||[];if(M&&Ye.push(we[B]),I){const Ze=vR(u,y,ne);Ye.push(we[Ze[0]],we[Ze[1]])}if(Fe=[...Fe,{placement:u,overflows:Ye}],!Ye.every(Ze=>Ze<=0)){var pt,nt;const Ze=(((pt=p.flip)==null?void 0:pt.index)||0)+1,dt=ke[Ze];if(dt)return{data:{index:Ze,overflows:Fe},reset:{placement:dt}};let mt=(nt=Fe.filter(Pt=>Pt.overflows[0]<=0).sort((Pt,Pe)=>Pt.overflows[1]-Pe.overflows[1])[0])==null?void 0:nt.placement;if(!mt)switch(j){case"bestFit":{var Et;const Pt=(Et=Fe.filter(Pe=>{if(Se){const We=rl(Pe.placement);return We===V||We==="y"}return!0}).map(Pe=>[Pe.placement,Pe.overflows.filter(We=>We>0).reduce((We,yt)=>We+yt,0)]).sort((Pe,We)=>Pe[1]-We[1])[0])==null?void 0:Et[0];Pt&&(mt=Pt);break}case"initialPlacement":mt=l;break}if(u!==mt)return{reset:{placement:mt}}}return{}}}};function A2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function M2(e){return mR.some(t=>e[t]>=0)}const ER=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:o="referenceHidden",...u}=Jo(e,t);switch(o){case"referenceHidden":{const p=await ip(t,{...u,elementContext:"reference"}),y=A2(p,i.reference);return{data:{referenceHiddenOffsets:y,referenceHidden:M2(y)}}}case"escaped":{const p=await ip(t,{...u,altBoundary:!0}),y=A2(p,i.floating);return{data:{escapedOffsets:y,escaped:M2(y)}}}default:return{}}}}};async function PR(e,t){const{placement:i,platform:o,elements:u}=e,p=await(o.isRTL==null?void 0:o.isRTL(u.floating)),y=ea(i),l=th(i),S=rl(i)==="y",w=["left","top"].includes(y)?-1:1,M=p&&S?-1:1,I=Jo(t,e);let{mainAxis:k,crossAxis:j,alignmentAxis:X}=typeof I=="number"?{mainAxis:I,crossAxis:0,alignmentAxis:null}:{mainAxis:I.mainAxis||0,crossAxis:I.crossAxis||0,alignmentAxis:I.alignmentAxis};return l&&typeof X=="number"&&(j=l==="end"?X*-1:X),S?{x:j*M,y:k*w}:{x:k*w,y:j*M}}const kR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,o;const{x:u,y:p,placement:y,middlewareData:l}=t,S=await PR(t,e);return y===((i=l.offset)==null?void 0:i.placement)&&(o=l.arrow)!=null&&o.alignmentOffset?{}:{x:u+S.x,y:p+S.y,data:{...S,placement:y}}}}},AR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:o,placement:u}=t,{mainAxis:p=!0,crossAxis:y=!1,limiter:l={fn:H=>{let{x:B,y:V}=H;return{x:B,y:V}}},...S}=Jo(e,t),w={x:i,y:o},M=await ip(t,S),I=rl(ea(u)),k=Bx(I);let j=w[k],X=w[I];if(p){const H=k==="y"?"top":"left",B=k==="y"?"bottom":"right",V=j+M[H],Z=j-M[B];j=c_(V,j,Z)}if(y){const H=I==="y"?"top":"left",B=I==="y"?"bottom":"right",V=X+M[H],Z=X-M[B];X=c_(V,X,Z)}const O=l.fn({...t,[k]:j,[I]:X});return{...O,data:{x:O.x-i,y:O.y-o,enabled:{[k]:p,[I]:y}}}}}},MR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:o,placement:u,rects:p,middlewareData:y}=t,{offset:l=0,mainAxis:S=!0,crossAxis:w=!0}=Jo(e,t),M={x:i,y:o},I=rl(u),k=Bx(I);let j=M[k],X=M[I];const O=Jo(l,t),H=typeof O=="number"?{mainAxis:O,crossAxis:0}:{mainAxis:0,crossAxis:0,...O};if(S){const Z=k==="y"?"height":"width",ne=p.reference[k]-p.floating[Z]+H.mainAxis,de=p.reference[k]+p.reference[Z]-H.mainAxis;j<ne?j=ne:j>de&&(j=de)}if(w){var B,V;const Z=k==="y"?"width":"height",ne=["top","left"].includes(ea(u)),de=p.reference[I]-p.floating[Z]+(ne&&((B=y.offset)==null?void 0:B[I])||0)+(ne?0:H.crossAxis),Se=p.reference[I]+p.reference[Z]+(ne?0:((V=y.offset)==null?void 0:V[I])||0)-(ne?H.crossAxis:0);X<de?X=de:X>Se&&(X=Se)}return{[k]:j,[I]:X}}}},IR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,o;const{placement:u,rects:p,platform:y,elements:l}=t,{apply:S=()=>{},...w}=Jo(e,t),M=await ip(t,w),I=ea(u),k=th(u),j=rl(u)==="y",{width:X,height:O}=p.floating;let H,B;I==="top"||I==="bottom"?(H=I,B=k===(await(y.isRTL==null?void 0:y.isRTL(l.floating))?"start":"end")?"left":"right"):(B=I,H=k==="end"?"top":"bottom");const V=O-M.top-M.bottom,Z=X-M.left-M.right,ne=tl(O-M[H],V),de=tl(X-M[B],Z),Se=!t.middlewareData.shift;let ke=ne,we=de;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(we=Z),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(ke=V),Se&&!k){const Fe=es(M.left,0),pt=es(M.right,0),nt=es(M.top,0),Et=es(M.bottom,0);j?we=X-2*(Fe!==0||pt!==0?Fe+pt:es(M.left,M.right)):ke=O-2*(nt!==0||Et!==0?nt+Et:es(M.top,M.bottom))}await S({...t,availableWidth:we,availableHeight:ke});const Ye=await y.getDimensions(l.floating);return X!==Ye.width||O!==Ye.height?{reset:{rects:!0}}:{}}}};function Ng(){return typeof window<"u"}function nh(e){return IP(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xo(e){var t;return(t=(IP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function IP(e){return Ng()?e instanceof Node||e instanceof rs(e).Node:!1}function Xs(e){return Ng()?e instanceof Element||e instanceof rs(e).Element:!1}function _o(e){return Ng()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function I2(e){return!Ng()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}function wp(e){const{overflow:t,overflowX:i,overflowY:o,display:u}=Ys(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+i)&&!["inline","contents"].includes(u)}function DR(e){return["table","td","th"].includes(nh(e))}function Vg(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function jx(e){const t=Ux(),i=Xs(e)?Ys(e):e;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(i.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(i.contain||"").includes(o))}function LR(e){let t=il(e);for(;_o(t)&&!Gu(t);){if(jx(t))return t;if(Vg(t))return null;t=il(t)}return null}function Ux(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gu(e){return["html","body","#document"].includes(nh(e))}function Ys(e){return rs(e).getComputedStyle(e)}function jg(e){return Xs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function il(e){if(nh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||I2(e)&&e.host||xo(e);return I2(t)?t.host:t}function DP(e){const t=il(e);return Gu(t)?e.ownerDocument?e.ownerDocument.body:e.body:_o(t)&&wp(t)?t:DP(t)}function sp(e,t,i){var o;t===void 0&&(t=[]),i===void 0&&(i=!0);const u=DP(e),p=u===((o=e.ownerDocument)==null?void 0:o.body),y=rs(u);if(p){const l=h_(y);return t.concat(y,y.visualViewport||[],wp(u)?u:[],l&&i?sp(l):[])}return t.concat(u,sp(u,[],i))}function h_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function LP(e){const t=Ys(e);let i=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const u=_o(e),p=u?e.offsetWidth:i,y=u?e.offsetHeight:o,l=ng(i)!==p||ng(o)!==y;return l&&(i=p,o=y),{width:i,height:o,$:l}}function $x(e){return Xs(e)?e:e.contextElement}function Tu(e){const t=$x(e);if(!_o(t))return nl(1);const i=t.getBoundingClientRect(),{width:o,height:u,$:p}=LP(t);let y=(p?ng(i.width):i.width)/o,l=(p?ng(i.height):i.height)/u;return(!y||!Number.isFinite(y))&&(y=1),(!l||!Number.isFinite(l))&&(l=1),{x:y,y:l}}const zR=nl(0);function zP(e){const t=rs(e);return!Ux()||!t.visualViewport?zR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function RR(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==rs(e)?!1:t}function oc(e,t,i,o){t===void 0&&(t=!1),i===void 0&&(i=!1);const u=e.getBoundingClientRect(),p=$x(e);let y=nl(1);t&&(o?Xs(o)&&(y=Tu(o)):y=Tu(e));const l=RR(p,i,o)?zP(p):nl(0);let S=(u.left+l.x)/y.x,w=(u.top+l.y)/y.y,M=u.width/y.x,I=u.height/y.y;if(p){const k=rs(p),j=o&&Xs(o)?rs(o):o;let X=k,O=h_(X);for(;O&&o&&j!==X;){const H=Tu(O),B=O.getBoundingClientRect(),V=Ys(O),Z=B.left+(O.clientLeft+parseFloat(V.paddingLeft))*H.x,ne=B.top+(O.clientTop+parseFloat(V.paddingTop))*H.y;S*=H.x,w*=H.y,M*=H.x,I*=H.y,S+=Z,w+=ne,X=rs(O),O=h_(X)}}return ig({width:M,height:I,x:S,y:w})}function FR(e){let{elements:t,rect:i,offsetParent:o,strategy:u}=e;const p=u==="fixed",y=xo(o),l=t?Vg(t.floating):!1;if(o===y||l&&p)return i;let S={scrollLeft:0,scrollTop:0},w=nl(1);const M=nl(0),I=_o(o);if((I||!I&&!p)&&((nh(o)!=="body"||wp(y))&&(S=jg(o)),_o(o))){const k=oc(o);w=Tu(o),M.x=k.x+o.clientLeft,M.y=k.y+o.clientTop}return{width:i.width*w.x,height:i.height*w.y,x:i.x*w.x-S.scrollLeft*w.x+M.x,y:i.y*w.y-S.scrollTop*w.y+M.y}}function OR(e){return Array.from(e.getClientRects())}function d_(e,t){const i=jg(e).scrollLeft;return t?t.left+i:oc(xo(e)).left+i}function BR(e){const t=xo(e),i=jg(e),o=e.ownerDocument.body,u=es(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),p=es(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let y=-i.scrollLeft+d_(e);const l=-i.scrollTop;return Ys(o).direction==="rtl"&&(y+=es(t.clientWidth,o.clientWidth)-u),{width:u,height:p,x:y,y:l}}function NR(e,t){const i=rs(e),o=xo(e),u=i.visualViewport;let p=o.clientWidth,y=o.clientHeight,l=0,S=0;if(u){p=u.width,y=u.height;const w=Ux();(!w||w&&t==="fixed")&&(l=u.offsetLeft,S=u.offsetTop)}return{width:p,height:y,x:l,y:S}}function VR(e,t){const i=oc(e,!0,t==="fixed"),o=i.top+e.clientTop,u=i.left+e.clientLeft,p=_o(e)?Tu(e):nl(1),y=e.clientWidth*p.x,l=e.clientHeight*p.y,S=u*p.x,w=o*p.y;return{width:y,height:l,x:S,y:w}}function D2(e,t,i){let o;if(t==="viewport")o=NR(e,i);else if(t==="document")o=BR(xo(e));else if(Xs(t))o=VR(t,i);else{const u=zP(e);o={...t,x:t.x-u.x,y:t.y-u.y}}return ig(o)}function RP(e,t){const i=il(e);return i===t||!Xs(i)||Gu(i)?!1:Ys(i).position==="fixed"||RP(i,t)}function jR(e,t){const i=t.get(e);if(i)return i;let o=sp(e,[],!1).filter(l=>Xs(l)&&nh(l)!=="body"),u=null;const p=Ys(e).position==="fixed";let y=p?il(e):e;for(;Xs(y)&&!Gu(y);){const l=Ys(y),S=jx(y);!S&&l.position==="fixed"&&(u=null),(p?!S&&!u:!S&&l.position==="static"&&!!u&&["absolute","fixed"].includes(u.position)||wp(y)&&!S&&RP(e,y))?o=o.filter(M=>M!==y):u=l,y=il(y)}return t.set(e,o),o}function UR(e){let{element:t,boundary:i,rootBoundary:o,strategy:u}=e;const y=[...i==="clippingAncestors"?Vg(t)?[]:jR(t,this._c):[].concat(i),o],l=y[0],S=y.reduce((w,M)=>{const I=D2(t,M,u);return w.top=es(I.top,w.top),w.right=tl(I.right,w.right),w.bottom=tl(I.bottom,w.bottom),w.left=es(I.left,w.left),w},D2(t,l,u));return{width:S.right-S.left,height:S.bottom-S.top,x:S.left,y:S.top}}function $R(e){const{width:t,height:i}=LP(e);return{width:t,height:i}}function GR(e,t,i){const o=_o(t),u=xo(t),p=i==="fixed",y=oc(e,!0,p,t);let l={scrollLeft:0,scrollTop:0};const S=nl(0);if(o||!o&&!p)if((nh(t)!=="body"||wp(u))&&(l=jg(t)),o){const j=oc(t,!0,p,t);S.x=j.x+t.clientLeft,S.y=j.y+t.clientTop}else u&&(S.x=d_(u));let w=0,M=0;if(u&&!o&&!p){const j=u.getBoundingClientRect();M=j.top+l.scrollTop,w=j.left+l.scrollLeft-d_(u,j)}const I=y.left+l.scrollLeft-S.x-w,k=y.top+l.scrollTop-S.y-M;return{x:I,y:k,width:y.width,height:y.height}}function Uv(e){return Ys(e).position==="static"}function L2(e,t){if(!_o(e)||Ys(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return xo(e)===i&&(i=i.ownerDocument.body),i}function FP(e,t){const i=rs(e);if(Vg(e))return i;if(!_o(e)){let u=il(e);for(;u&&!Gu(u);){if(Xs(u)&&!Uv(u))return u;u=il(u)}return i}let o=L2(e,t);for(;o&&DR(o)&&Uv(o);)o=L2(o,t);return o&&Gu(o)&&Uv(o)&&!jx(o)?i:o||LR(e)||i}const qR=async function(e){const t=this.getOffsetParent||FP,i=this.getDimensions,o=await i(e.floating);return{reference:GR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function ZR(e){return Ys(e).direction==="rtl"}const WR={convertOffsetParentRelativeRectToViewportRelativeRect:FR,getDocumentElement:xo,getClippingRect:UR,getOffsetParent:FP,getElementRects:qR,getClientRects:OR,getDimensions:$R,getScale:Tu,isElement:Xs,isRTL:ZR};function HR(e,t){let i=null,o;const u=xo(e);function p(){var l;clearTimeout(o),(l=i)==null||l.disconnect(),i=null}function y(l,S){l===void 0&&(l=!1),S===void 0&&(S=1),p();const{left:w,top:M,width:I,height:k}=e.getBoundingClientRect();if(l||t(),!I||!k)return;const j=tm(M),X=tm(u.clientWidth-(w+I)),O=tm(u.clientHeight-(M+k)),H=tm(w),V={rootMargin:-j+"px "+-X+"px "+-O+"px "+-H+"px",threshold:es(0,tl(1,S))||1};let Z=!0;function ne(de){const Se=de[0].intersectionRatio;if(Se!==S){if(!Z)return y();Se?y(!1,Se):o=setTimeout(()=>{y(!1,1e-7)},1e3)}Z=!1}try{i=new IntersectionObserver(ne,{...V,root:u.ownerDocument})}catch{i=new IntersectionObserver(ne,V)}i.observe(e)}return y(!0),p}function KR(e,t,i,o){o===void 0&&(o={});const{ancestorScroll:u=!0,ancestorResize:p=!0,elementResize:y=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:S=!1}=o,w=$x(e),M=u||p?[...w?sp(w):[],...sp(t)]:[];M.forEach(B=>{u&&B.addEventListener("scroll",i,{passive:!0}),p&&B.addEventListener("resize",i)});const I=w&&l?HR(w,i):null;let k=-1,j=null;y&&(j=new ResizeObserver(B=>{let[V]=B;V&&V.target===w&&j&&(j.unobserve(t),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var Z;(Z=j)==null||Z.observe(t)})),i()}),w&&!S&&j.observe(w),j.observe(t));let X,O=S?oc(e):null;S&&H();function H(){const B=oc(e);O&&(B.x!==O.x||B.y!==O.y||B.width!==O.width||B.height!==O.height)&&i(),O=B,X=requestAnimationFrame(H)}return i(),()=>{var B;M.forEach(V=>{u&&V.removeEventListener("scroll",i),p&&V.removeEventListener("resize",i)}),I==null||I(),(B=j)==null||B.disconnect(),j=null,S&&cancelAnimationFrame(X)}}const XR=kR,YR=AR,QR=CR,JR=IR,e3=ER,z2=TR,t3=MR,n3=(e,t,i)=>{const o=new Map,u={platform:WR,...i},p={...u.platform,_c:o};return SR(e,t,{...u,platform:p})};var Em=typeof document<"u"?$.useLayoutEffect:$.useEffect;function sg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,o,u;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(o=i;o--!==0;)if(!sg(e[o],t[o]))return!1;return!0}if(u=Object.keys(e),i=u.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!{}.hasOwnProperty.call(t,u[o]))return!1;for(o=i;o--!==0;){const p=u[o];if(!(p==="_owner"&&e.$$typeof)&&!sg(e[p],t[p]))return!1}return!0}return e!==e&&t!==t}function OP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function R2(e,t){const i=OP(e);return Math.round(t*i)/i}function $v(e){const t=$.useRef(e);return Em(()=>{t.current=e}),t}function r3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:o=[],platform:u,elements:{reference:p,floating:y}={},transform:l=!0,whileElementsMounted:S,open:w}=e,[M,I]=$.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[k,j]=$.useState(o);sg(k,o)||j(o);const[X,O]=$.useState(null),[H,B]=$.useState(null),V=$.useCallback(Pe=>{Pe!==Se.current&&(Se.current=Pe,O(Pe))},[]),Z=$.useCallback(Pe=>{Pe!==ke.current&&(ke.current=Pe,B(Pe))},[]),ne=p||X,de=y||H,Se=$.useRef(null),ke=$.useRef(null),we=$.useRef(M),Ye=S!=null,Fe=$v(S),pt=$v(u),nt=$v(w),Et=$.useCallback(()=>{if(!Se.current||!ke.current)return;const Pe={placement:t,strategy:i,middleware:k};pt.current&&(Pe.platform=pt.current),n3(Se.current,ke.current,Pe).then(We=>{const yt={...We,isPositioned:nt.current!==!1};Ze.current&&!sg(we.current,yt)&&(we.current=yt,xp.flushSync(()=>{I(yt)}))})},[k,t,i,pt,nt]);Em(()=>{w===!1&&we.current.isPositioned&&(we.current.isPositioned=!1,I(Pe=>({...Pe,isPositioned:!1})))},[w]);const Ze=$.useRef(!1);Em(()=>(Ze.current=!0,()=>{Ze.current=!1}),[]),Em(()=>{if(ne&&(Se.current=ne),de&&(ke.current=de),ne&&de){if(Fe.current)return Fe.current(ne,de,Et);Et()}},[ne,de,Et,Fe,Ye]);const dt=$.useMemo(()=>({reference:Se,floating:ke,setReference:V,setFloating:Z}),[V,Z]),mt=$.useMemo(()=>({reference:ne,floating:de}),[ne,de]),Pt=$.useMemo(()=>{const Pe={position:i,left:0,top:0};if(!mt.floating)return Pe;const We=R2(mt.floating,M.x),yt=R2(mt.floating,M.y);return l?{...Pe,transform:"translate("+We+"px, "+yt+"px)",...OP(mt.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:We,top:yt}},[i,l,mt.floating,M.x,M.y]);return $.useMemo(()=>({...M,update:Et,refs:dt,elements:mt,floatingStyles:Pt}),[M,Et,dt,mt,Pt])}const i3=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:o,padding:u}=typeof e=="function"?e(i):e;return o&&t(o)?o.current!=null?z2({element:o.current,padding:u}).fn(i):{}:o?z2({element:o,padding:u}).fn(i):{}}}},s3=(e,t)=>({...XR(e),options:[e,t]}),o3=(e,t)=>({...YR(e),options:[e,t]}),a3=(e,t)=>({...t3(e),options:[e,t]}),l3=(e,t)=>({...QR(e),options:[e,t]}),c3=(e,t)=>({...JR(e),options:[e,t]}),u3=(e,t)=>({...e3(e),options:[e,t]}),h3=(e,t)=>({...i3(e),options:[e,t]});var d3="Arrow",BP=$.forwardRef((e,t)=>{const{children:i,width:o=10,height:u=5,...p}=e;return oe.jsx(Un.svg,{...p,ref:t,width:o,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:oe.jsx("polygon",{points:"0,0 30,0 15,10"})})});BP.displayName=d3;var p3=BP;function f3(e,t=[]){let i=[];function o(p,y){const l=$.createContext(y),S=i.length;i=[...i,y];function w(I){const{scope:k,children:j,...X}=I,O=(k==null?void 0:k[e][S])||l,H=$.useMemo(()=>X,Object.values(X));return oe.jsx(O.Provider,{value:H,children:j})}function M(I,k){const j=(k==null?void 0:k[e][S])||l,X=$.useContext(j);if(X)return X;if(y!==void 0)return y;throw new Error(`\`${I}\` must be used within \`${p}\``)}return w.displayName=p+"Provider",[w,M]}const u=()=>{const p=i.map(y=>$.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return $.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,m3(u,...t)]}function m3(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:w})=>{const I=S(p)[`__scope${w}`];return{...l,...I}},{});return $.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}function NP(e){const[t,i]=$.useState(void 0);return el(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const p=u[0];let y,l;if("borderBoxSize"in p){const S=p.borderBoxSize,w=Array.isArray(S)?S[0]:S;y=w.inlineSize,l=w.blockSize}else y=e.offsetWidth,l=e.offsetHeight;i({width:y,height:l})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else i(void 0)},[e]),t}var VP="Popper",[jP,UP]=f3(VP),[fV,$P]=jP(VP),GP="PopperAnchor",qP=$.forwardRef((e,t)=>{const{__scopePopper:i,virtualRef:o,...u}=e,p=$P(GP,i),y=$.useRef(null),l=oi(t,y);return $.useEffect(()=>{p.onAnchorChange((o==null?void 0:o.current)||y.current)}),o?null:oe.jsx(Un.div,{...u,ref:l})});qP.displayName=GP;var Gx="PopperContent",[g3,y3]=jP(Gx),ZP=$.forwardRef((e,t)=>{var sr,cr,$n,Ln,cs,kr;const{__scopePopper:i,side:o="bottom",sideOffset:u=0,align:p="center",alignOffset:y=0,arrowPadding:l=0,avoidCollisions:S=!0,collisionBoundary:w=[],collisionPadding:M=0,sticky:I="partial",hideWhenDetached:k=!1,updatePositionStrategy:j="optimized",onPlaced:X,...O}=e,H=$P(Gx,i),[B,V]=$.useState(null),Z=oi(t,ai=>V(ai)),[ne,de]=$.useState(null),Se=NP(ne),ke=(Se==null?void 0:Se.width)??0,we=(Se==null?void 0:Se.height)??0,Ye=o+(p!=="center"?"-"+p:""),Fe=typeof M=="number"?M:{top:0,right:0,bottom:0,left:0,...M},pt=Array.isArray(w)?w:[w],nt=pt.length>0,Et={padding:Fe,boundary:pt.filter(_3),altBoundary:nt},{refs:Ze,floatingStyles:dt,placement:mt,isPositioned:Pt,middlewareData:Pe}=r3({strategy:"fixed",placement:Ye,whileElementsMounted:(...ai)=>KR(...ai,{animationFrame:j==="always"}),elements:{reference:H.anchor},middleware:[s3({mainAxis:u+we,alignmentAxis:y}),S&&o3({mainAxis:!0,crossAxis:!1,limiter:I==="partial"?a3():void 0,...Et}),S&&l3({...Et}),c3({...Et,apply:({elements:ai,rects:Ar,availableWidth:Gi,availableHeight:yr})=>{const{width:Pi,height:ki}=Ar.reference,dn=ai.floating.style;dn.setProperty("--radix-popper-available-width",`${Gi}px`),dn.setProperty("--radix-popper-available-height",`${yr}px`),dn.setProperty("--radix-popper-anchor-width",`${Pi}px`),dn.setProperty("--radix-popper-anchor-height",`${ki}px`)}}),ne&&h3({element:ne,padding:l}),x3({arrowWidth:ke,arrowHeight:we}),k&&u3({strategy:"referenceHidden",...Et})]}),[We,yt]=KP(mt),ot=ks(X);el(()=>{Pt&&(ot==null||ot())},[Pt,ot]);const _t=(sr=Pe.arrow)==null?void 0:sr.x,vt=(cr=Pe.arrow)==null?void 0:cr.y,Nt=(($n=Pe.arrow)==null?void 0:$n.centerOffset)!==0,[Dn,Gt]=$.useState();return el(()=>{B&&Gt(window.getComputedStyle(B).zIndex)},[B]),oe.jsx("div",{ref:Ze.setFloating,"data-radix-popper-content-wrapper":"",style:{...dt,transform:Pt?dt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Dn,"--radix-popper-transform-origin":[(Ln=Pe.transformOrigin)==null?void 0:Ln.x,(cs=Pe.transformOrigin)==null?void 0:cs.y].join(" "),...((kr=Pe.hide)==null?void 0:kr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:oe.jsx(g3,{scope:i,placedSide:We,onArrowChange:de,arrowX:_t,arrowY:vt,shouldHideArrow:Nt,children:oe.jsx(Un.div,{"data-side":We,"data-align":yt,...O,ref:Z,style:{...O.style,animation:Pt?void 0:"none"}})})})});ZP.displayName=Gx;var WP="PopperArrow",v3={top:"bottom",right:"left",bottom:"top",left:"right"},HP=$.forwardRef(function(t,i){const{__scopePopper:o,...u}=t,p=y3(WP,o),y=v3[p.placedSide];return oe.jsx("span",{ref:p.onArrowChange,style:{position:"absolute",left:p.arrowX,top:p.arrowY,[y]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0},children:oe.jsx(p3,{...u,ref:i,style:{...u.style,display:"block"}})})});HP.displayName=WP;function _3(e){return e!==null}var x3=e=>({name:"transformOrigin",options:e,fn(t){var H,B,V;const{placement:i,rects:o,middlewareData:u}=t,y=((H=u.arrow)==null?void 0:H.centerOffset)!==0,l=y?0:e.arrowWidth,S=y?0:e.arrowHeight,[w,M]=KP(i),I={start:"0%",center:"50%",end:"100%"}[M],k=(((B=u.arrow)==null?void 0:B.x)??0)+l/2,j=(((V=u.arrow)==null?void 0:V.y)??0)+S/2;let X="",O="";return w==="bottom"?(X=y?I:`${k}px`,O=`${-S}px`):w==="top"?(X=y?I:`${k}px`,O=`${o.floating.height+S}px`):w==="right"?(X=`${-S}px`,O=y?I:`${j}px`):w==="left"&&(X=`${o.floating.width+S}px`,O=y?I:`${j}px`),{data:{x:X,y:O}}}});function KP(e){const[t,i="center"]=e.split("-");return[t,i]}var w3=qP,b3=ZP,S3=HP,[Ug,mV]=zg("Tooltip",[UP]),qx=UP(),XP="TooltipProvider",T3=700,F2="tooltip.open",[C3,YP]=Ug(XP),QP=e=>{const{__scopeTooltip:t,delayDuration:i=T3,skipDelayDuration:o=300,disableHoverableContent:u=!1,children:p}=e,[y,l]=$.useState(!0),S=$.useRef(!1),w=$.useRef(0);return $.useEffect(()=>{const M=w.current;return()=>window.clearTimeout(M)},[]),oe.jsx(C3,{scope:t,isOpenDelayed:y,delayDuration:i,onOpen:$.useCallback(()=>{window.clearTimeout(w.current),l(!1)},[]),onClose:$.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>l(!0),o)},[o]),isPointerInTransitRef:S,onPointerInTransitChange:$.useCallback(M=>{S.current=M},[]),disableHoverableContent:u,children:p})};QP.displayName=XP;var JP="Tooltip",[gV,$g]=Ug(JP),p_="TooltipTrigger",E3=$.forwardRef((e,t)=>{const{__scopeTooltip:i,...o}=e,u=$g(p_,i),p=YP(p_,i),y=qx(i),l=$.useRef(null),S=oi(t,l,u.onTriggerChange),w=$.useRef(!1),M=$.useRef(!1),I=$.useCallback(()=>w.current=!1,[]);return $.useEffect(()=>()=>document.removeEventListener("pointerup",I),[I]),oe.jsx(w3,{asChild:!0,...y,children:oe.jsx(Un.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...o,ref:S,onPointerMove:En(e.onPointerMove,k=>{k.pointerType!=="touch"&&!M.current&&!p.isPointerInTransitRef.current&&(u.onTriggerEnter(),M.current=!0)}),onPointerLeave:En(e.onPointerLeave,()=>{u.onTriggerLeave(),M.current=!1}),onPointerDown:En(e.onPointerDown,()=>{w.current=!0,document.addEventListener("pointerup",I,{once:!0})}),onFocus:En(e.onFocus,()=>{w.current||u.onOpen()}),onBlur:En(e.onBlur,u.onClose),onClick:En(e.onClick,u.onClose)})})});E3.displayName=p_;var P3="TooltipPortal",[yV,k3]=Ug(P3,{forceMount:void 0}),qu="TooltipContent",ek=$.forwardRef((e,t)=>{const i=k3(qu,e.__scopeTooltip),{forceMount:o=i.forceMount,side:u="top",...p}=e,y=$g(qu,e.__scopeTooltip);return oe.jsx(Ju,{present:o||y.open,children:y.disableHoverableContent?oe.jsx(tk,{side:u,...p,ref:t}):oe.jsx(A3,{side:u,...p,ref:t})})}),A3=$.forwardRef((e,t)=>{const i=$g(qu,e.__scopeTooltip),o=YP(qu,e.__scopeTooltip),u=$.useRef(null),p=oi(t,u),[y,l]=$.useState(null),{trigger:S,onClose:w}=i,M=u.current,{onPointerInTransitChange:I}=o,k=$.useCallback(()=>{l(null),I(!1)},[I]),j=$.useCallback((X,O)=>{const H=X.currentTarget,B={x:X.clientX,y:X.clientY},V=L3(B,H.getBoundingClientRect()),Z=z3(B,V),ne=R3(O.getBoundingClientRect()),de=O3([...Z,...ne]);l(de),I(!0)},[I]);return $.useEffect(()=>()=>k(),[k]),$.useEffect(()=>{if(S&&M){const X=H=>j(H,M),O=H=>j(H,S);return S.addEventListener("pointerleave",X),M.addEventListener("pointerleave",O),()=>{S.removeEventListener("pointerleave",X),M.removeEventListener("pointerleave",O)}}},[S,M,j,k]),$.useEffect(()=>{if(y){const X=O=>{const H=O.target,B={x:O.clientX,y:O.clientY},V=(S==null?void 0:S.contains(H))||(M==null?void 0:M.contains(H)),Z=!F3(B,y);V?k():Z&&(k(),w())};return document.addEventListener("pointermove",X),()=>document.removeEventListener("pointermove",X)}},[S,M,y,w,k]),oe.jsx(tk,{...e,ref:p})}),[M3,I3]=Ug(JP,{isInside:!1}),tk=$.forwardRef((e,t)=>{const{__scopeTooltip:i,children:o,"aria-label":u,onEscapeKeyDown:p,onPointerDownOutside:y,...l}=e,S=$g(qu,i),w=qx(i),{onClose:M}=S;return $.useEffect(()=>(document.addEventListener(F2,M),()=>document.removeEventListener(F2,M)),[M]),$.useEffect(()=>{if(S.trigger){const I=k=>{const j=k.target;j!=null&&j.contains(S.trigger)&&M()};return window.addEventListener("scroll",I,{capture:!0}),()=>window.removeEventListener("scroll",I,{capture:!0})}},[S.trigger,M]),oe.jsx(Rg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:p,onPointerDownOutside:y,onFocusOutside:I=>I.preventDefault(),onDismiss:M,children:oe.jsxs(b3,{"data-state":S.stateAttribute,...w,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[oe.jsx(WE,{children:o}),oe.jsx(M3,{scope:i,isInside:!0,children:oe.jsx(DL,{id:S.contentId,role:"tooltip",children:u||o})})]})})});ek.displayName=qu;var nk="TooltipArrow",D3=$.forwardRef((e,t)=>{const{__scopeTooltip:i,...o}=e,u=qx(i);return I3(nk,i).isInside?null:oe.jsx(S3,{...u,...o,ref:t})});D3.displayName=nk;function L3(e,t){const i=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),u=Math.abs(t.right-e.x),p=Math.abs(t.left-e.x);switch(Math.min(i,o,u,p)){case p:return"left";case u:return"right";case i:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function z3(e,t,i=5){const o=[];switch(t){case"top":o.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":o.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":o.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":o.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return o}function R3(e){const{top:t,right:i,bottom:o,left:u}=e;return[{x:u,y:t},{x:i,y:t},{x:i,y:o},{x:u,y:o}]}function F3(e,t){const{x:i,y:o}=e;let u=!1;for(let p=0,y=t.length-1;p<t.length;y=p++){const l=t[p].x,S=t[p].y,w=t[y].x,M=t[y].y;S>o!=M>o&&i<(w-l)*(o-S)/(M-S)+l&&(u=!u)}return u}function O3(e){const t=e.slice();return t.sort((i,o)=>i.x<o.x?-1:i.x>o.x?1:i.y<o.y?-1:i.y>o.y?1:0),B3(t)}function B3(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const u=e[o];for(;t.length>=2;){const p=t[t.length-1],y=t[t.length-2];if((p.x-y.x)*(u.y-y.y)>=(p.y-y.y)*(u.x-y.x))t.pop();else break}t.push(u)}t.pop();const i=[];for(let o=e.length-1;o>=0;o--){const u=e[o];for(;i.length>=2;){const p=i[i.length-1],y=i[i.length-2];if((p.x-y.x)*(u.y-y.y)>=(p.y-y.y)*(u.x-y.x))i.pop();else break}i.push(u)}return i.pop(),t.length===1&&i.length===1&&t[0].x===i[0].x&&t[0].y===i[0].y?t:t.concat(i)}var N3=QP,rk=ek;const V3=N3,j3=$.forwardRef(({className:e,sideOffset:t=4,...i},o)=>oe.jsx(rk,{ref:o,sideOffset:t,className:lr("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));j3.displayName=rk.displayName;var Gg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qg=typeof window>"u"||"Deno"in globalThis;function Us(){}function U3(e,t){return typeof e=="function"?e(t):e}function $3(e){return typeof e=="number"&&e>=0&&e!==1/0}function G3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function O2(e,t){return typeof e=="function"?e(t):e}function q3(e,t){return typeof e=="function"?e(t):e}function B2(e,t){const{type:i="all",exact:o,fetchStatus:u,predicate:p,queryKey:y,stale:l}=e;if(y){if(o){if(t.queryHash!==Zx(y,t.options))return!1}else if(!ap(t.queryKey,y))return!1}if(i!=="all"){const S=t.isActive();if(i==="active"&&!S||i==="inactive"&&S)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||u&&u!==t.state.fetchStatus||p&&!p(t))}function N2(e,t){const{exact:i,status:o,predicate:u,mutationKey:p}=e;if(p){if(!t.options.mutationKey)return!1;if(i){if(op(t.options.mutationKey)!==op(p))return!1}else if(!ap(t.options.mutationKey,p))return!1}return!(o&&t.state.status!==o||u&&!u(t))}function Zx(e,t){return((t==null?void 0:t.queryKeyHashFn)||op)(e)}function op(e){return JSON.stringify(e,(t,i)=>f_(i)?Object.keys(i).sort().reduce((o,u)=>(o[u]=i[u],o),{}):i)}function ap(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(i=>!ap(e[i],t[i])):!1}function ik(e,t){if(e===t)return e;const i=V2(e)&&V2(t);if(i||f_(e)&&f_(t)){const o=i?e:Object.keys(e),u=o.length,p=i?t:Object.keys(t),y=p.length,l=i?[]:{};let S=0;for(let w=0;w<y;w++){const M=i?w:p[w];(!i&&o.includes(M)||i)&&e[M]===void 0&&t[M]===void 0?(l[M]=void 0,S++):(l[M]=ik(e[M],t[M]),l[M]===e[M]&&e[M]!==void 0&&S++)}return u===y&&S===u?e:l}return t}function V2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function f_(e){if(!j2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!j2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function j2(e){return Object.prototype.toString.call(e)==="[object Object]"}function Z3(e){return new Promise(t=>{setTimeout(t,e)})}function W3(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?ik(e,t):t}function H3(e,t,i=0){const o=[...e,t];return i&&o.length>i?o.slice(1):o}function K3(e,t,i=0){const o=[t,...e];return i&&o.length>i?o.slice(0,-1):o}var Wx=Symbol();function sk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Wx?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Wl,za,Pu,ST,X3=(ST=class extends Gg{constructor(){super();sn(this,Wl);sn(this,za);sn(this,Pu);Ut(this,Pu,t=>{if(!qg&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){Oe(this,za)||this.setEventListener(Oe(this,Pu))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,za))==null||t.call(this),Ut(this,za,void 0))}setEventListener(t){var i;Ut(this,Pu,t),(i=Oe(this,za))==null||i.call(this),Ut(this,za,t(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(t){Oe(this,Wl)!==t&&(Ut(this,Wl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof Oe(this,Wl)=="boolean"?Oe(this,Wl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Wl=new WeakMap,za=new WeakMap,Pu=new WeakMap,ST),ok=new X3,ku,Ra,Au,TT,Y3=(TT=class extends Gg{constructor(){super();sn(this,ku,!0);sn(this,Ra);sn(this,Au);Ut(this,Au,t=>{if(!qg&&window.addEventListener){const i=()=>t(!0),o=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",o)}}})}onSubscribe(){Oe(this,Ra)||this.setEventListener(Oe(this,Au))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,Ra))==null||t.call(this),Ut(this,Ra,void 0))}setEventListener(t){var i;Ut(this,Au,t),(i=Oe(this,Ra))==null||i.call(this),Ut(this,Ra,t(this.setOnline.bind(this)))}setOnline(t){Oe(this,ku)!==t&&(Ut(this,ku,t),this.listeners.forEach(o=>{o(t)}))}isOnline(){return Oe(this,ku)}},ku=new WeakMap,Ra=new WeakMap,Au=new WeakMap,TT),og=new Y3;function Q3(){let e,t;const i=new Promise((u,p)=>{e=u,t=p});i.status="pending",i.catch(()=>{});function o(u){Object.assign(i,u),delete i.resolve,delete i.reject}return i.resolve=u=>{o({status:"fulfilled",value:u}),e(u)},i.reject=u=>{o({status:"rejected",reason:u}),t(u)},i}function J3(e){return Math.min(1e3*2**e,3e4)}function ak(e){return(e??"online")==="online"?og.isOnline():!0}var lk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Gv(e){return e instanceof lk}function ck(e){let t=!1,i=0,o=!1,u;const p=Q3(),y=O=>{var H;o||(k(new lk(O)),(H=e.abort)==null||H.call(e))},l=()=>{t=!0},S=()=>{t=!1},w=()=>ok.isFocused()&&(e.networkMode==="always"||og.isOnline())&&e.canRun(),M=()=>ak(e.networkMode)&&e.canRun(),I=O=>{var H;o||(o=!0,(H=e.onSuccess)==null||H.call(e,O),u==null||u(),p.resolve(O))},k=O=>{var H;o||(o=!0,(H=e.onError)==null||H.call(e,O),u==null||u(),p.reject(O))},j=()=>new Promise(O=>{var H;u=B=>{(o||w())&&O(B)},(H=e.onPause)==null||H.call(e)}).then(()=>{var O;u=void 0,o||(O=e.onContinue)==null||O.call(e)}),X=()=>{if(o)return;let O;const H=i===0?e.initialPromise:void 0;try{O=H??e.fn()}catch(B){O=Promise.reject(B)}Promise.resolve(O).then(I).catch(B=>{var Se;if(o)return;const V=e.retry??(qg?0:3),Z=e.retryDelay??J3,ne=typeof Z=="function"?Z(i,B):Z,de=V===!0||typeof V=="number"&&i<V||typeof V=="function"&&V(i,B);if(t||!de){k(B);return}i++,(Se=e.onFail)==null||Se.call(e,i,B),Z3(ne).then(()=>w()?void 0:j()).then(()=>{t?k(B):X()})})};return{promise:p,cancel:y,continue:()=>(u==null||u(),p),cancelRetry:l,continueRetry:S,canStart:M,start:()=>(M()?X():j().then(X),p)}}function e7(){let e=[],t=0,i=l=>{l()},o=l=>{l()},u=l=>setTimeout(l,0);const p=l=>{t?e.push(l):u(()=>{i(l)})},y=()=>{const l=e;e=[],l.length&&u(()=>{o(()=>{l.forEach(S=>{i(S)})})})};return{batch:l=>{let S;t++;try{S=l()}finally{t--,t||y()}return S},batchCalls:l=>(...S)=>{p(()=>{l(...S)})},schedule:p,setNotifyFunction:l=>{i=l},setBatchNotifyFunction:l=>{o=l},setScheduler:l=>{u=l}}}var Si=e7(),Hl,CT,uk=(CT=class{constructor(){sn(this,Hl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$3(this.gcTime)&&Ut(this,Hl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qg?1/0:5*60*1e3))}clearGcTimeout(){Oe(this,Hl)&&(clearTimeout(Oe(this,Hl)),Ut(this,Hl,void 0))}},Hl=new WeakMap,CT),Mu,Iu,ws,ei,pp,Kl,$s,No,ET,t7=(ET=class extends uk{constructor(t){super();sn(this,$s);sn(this,Mu);sn(this,Iu);sn(this,ws);sn(this,ei);sn(this,pp);sn(this,Kl);Ut(this,Kl,!1),Ut(this,pp,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ut(this,ws,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ut(this,Mu,r7(this.options)),this.state=t.state??Oe(this,Mu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Oe(this,ei))==null?void 0:t.promise}setOptions(t){this.options={...Oe(this,pp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Oe(this,ws).remove(this)}setData(t,i){const o=W3(this.state.data,t,this.options);return Yr(this,$s,No).call(this,{data:o,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),o}setState(t,i){Yr(this,$s,No).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var o,u;const i=(o=Oe(this,ei))==null?void 0:o.promise;return(u=Oe(this,ei))==null||u.cancel(t),i?i.then(Us).catch(Us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Oe(this,Mu))}isActive(){return this.observers.some(t=>q3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!G3(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=Oe(this,ei))==null||i.continue()}onOnline(){var i;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=Oe(this,ei))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Oe(this,ws).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(Oe(this,ei)&&(Oe(this,Kl)?Oe(this,ei).cancel({revert:!0}):Oe(this,ei).cancelRetry()),this.scheduleGc()),Oe(this,ws).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yr(this,$s,No).call(this,{type:"invalidate"})}fetch(t,i){var S,w,M;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(Oe(this,ei))return Oe(this,ei).continueRetry(),Oe(this,ei).promise}if(t&&this.setOptions(t),!this.options.queryFn){const I=this.observers.find(k=>k.options.queryFn);I&&this.setOptions(I.options)}const o=new AbortController,u=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(Ut(this,Kl,!0),o.signal)})},p=()=>{const I=sk(this.options,i),k={queryKey:this.queryKey,meta:this.meta};return u(k),Ut(this,Kl,!1),this.options.persister?this.options.persister(I,k,this):I(k)},y={fetchOptions:i,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:p};u(y),(S=this.options.behavior)==null||S.onFetch(y,this),Ut(this,Iu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=y.fetchOptions)==null?void 0:w.meta))&&Yr(this,$s,No).call(this,{type:"fetch",meta:(M=y.fetchOptions)==null?void 0:M.meta});const l=I=>{var k,j,X,O;Gv(I)&&I.silent||Yr(this,$s,No).call(this,{type:"error",error:I}),Gv(I)||((j=(k=Oe(this,ws).config).onError)==null||j.call(k,I,this),(O=(X=Oe(this,ws).config).onSettled)==null||O.call(X,this.state.data,I,this)),this.scheduleGc()};return Ut(this,ei,ck({initialPromise:i==null?void 0:i.initialPromise,fn:y.fetchFn,abort:o.abort.bind(o),onSuccess:I=>{var k,j,X,O;if(I===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(I)}catch(H){l(H);return}(j=(k=Oe(this,ws).config).onSuccess)==null||j.call(k,I,this),(O=(X=Oe(this,ws).config).onSettled)==null||O.call(X,I,this.state.error,this),this.scheduleGc()},onError:l,onFail:(I,k)=>{Yr(this,$s,No).call(this,{type:"failed",failureCount:I,error:k})},onPause:()=>{Yr(this,$s,No).call(this,{type:"pause"})},onContinue:()=>{Yr(this,$s,No).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),Oe(this,ei).start()}},Mu=new WeakMap,Iu=new WeakMap,ws=new WeakMap,ei=new WeakMap,pp=new WeakMap,Kl=new WeakMap,$s=new WeakSet,No=function(t){const i=o=>{switch(t.type){case"failed":return{...o,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...n7(o.data,this.options),fetchMeta:t.meta??null};case"success":return{...o,data:t.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=t.error;return Gv(u)&&u.revert&&Oe(this,Iu)?{...Oe(this,Iu),fetchStatus:"idle"}:{...o,error:u,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...t.state}}};this.state=i(this.state),Si.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),Oe(this,ws).notify({query:this,type:"updated",action:t})})},ET);function n7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ak(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function r7(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,o=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var uo,PT,i7=(PT=class extends Gg{constructor(t={}){super();sn(this,uo);this.config=t,Ut(this,uo,new Map)}build(t,i,o){const u=i.queryKey,p=i.queryHash??Zx(u,i);let y=this.get(p);return y||(y=new t7({cache:this,queryKey:u,queryHash:p,options:t.defaultQueryOptions(i),state:o,defaultOptions:t.getQueryDefaults(u)}),this.add(y)),y}add(t){Oe(this,uo).has(t.queryHash)||(Oe(this,uo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=Oe(this,uo).get(t.queryHash);i&&(t.destroy(),i===t&&Oe(this,uo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Si.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Oe(this,uo).get(t)}getAll(){return[...Oe(this,uo).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(o=>B2(i,o))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(o=>B2(t,o)):i}notify(t){Si.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){Si.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Si.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},uo=new WeakMap,PT),ho,wi,Xl,po,Ea,kT,s7=(kT=class extends uk{constructor(t){super();sn(this,po);sn(this,ho);sn(this,wi);sn(this,Xl);this.mutationId=t.mutationId,Ut(this,wi,t.mutationCache),Ut(this,ho,[]),this.state=t.state||o7(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Oe(this,ho).includes(t)||(Oe(this,ho).push(t),this.clearGcTimeout(),Oe(this,wi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ut(this,ho,Oe(this,ho).filter(i=>i!==t)),this.scheduleGc(),Oe(this,wi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Oe(this,ho).length||(this.state.status==="pending"?this.scheduleGc():Oe(this,wi).remove(this))}continue(){var t;return((t=Oe(this,Xl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,p,y,l,S,w,M,I,k,j,X,O,H,B,V,Z,ne,de,Se,ke;Ut(this,Xl,ck({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(we,Ye)=>{Yr(this,po,Ea).call(this,{type:"failed",failureCount:we,error:Ye})},onPause:()=>{Yr(this,po,Ea).call(this,{type:"pause"})},onContinue:()=>{Yr(this,po,Ea).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Oe(this,wi).canRun(this)}));const i=this.state.status==="pending",o=!Oe(this,Xl).canStart();try{if(!i){Yr(this,po,Ea).call(this,{type:"pending",variables:t,isPaused:o}),await((p=(u=Oe(this,wi).config).onMutate)==null?void 0:p.call(u,t,this));const Ye=await((l=(y=this.options).onMutate)==null?void 0:l.call(y,t));Ye!==this.state.context&&Yr(this,po,Ea).call(this,{type:"pending",context:Ye,variables:t,isPaused:o})}const we=await Oe(this,Xl).start();return await((w=(S=Oe(this,wi).config).onSuccess)==null?void 0:w.call(S,we,t,this.state.context,this)),await((I=(M=this.options).onSuccess)==null?void 0:I.call(M,we,t,this.state.context)),await((j=(k=Oe(this,wi).config).onSettled)==null?void 0:j.call(k,we,null,this.state.variables,this.state.context,this)),await((O=(X=this.options).onSettled)==null?void 0:O.call(X,we,null,t,this.state.context)),Yr(this,po,Ea).call(this,{type:"success",data:we}),we}catch(we){try{throw await((B=(H=Oe(this,wi).config).onError)==null?void 0:B.call(H,we,t,this.state.context,this)),await((Z=(V=this.options).onError)==null?void 0:Z.call(V,we,t,this.state.context)),await((de=(ne=Oe(this,wi).config).onSettled)==null?void 0:de.call(ne,void 0,we,this.state.variables,this.state.context,this)),await((ke=(Se=this.options).onSettled)==null?void 0:ke.call(Se,void 0,we,t,this.state.context)),we}finally{Yr(this,po,Ea).call(this,{type:"error",error:we})}}finally{Oe(this,wi).runNext(this)}}},ho=new WeakMap,wi=new WeakMap,Xl=new WeakMap,po=new WeakSet,Ea=function(t){const i=o=>{switch(t.type){case"failed":return{...o,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...o,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:t.error,failureCount:o.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),Si.batch(()=>{Oe(this,ho).forEach(o=>{o.onMutationUpdate(t)}),Oe(this,wi).notify({mutation:this,type:"updated",action:t})})},kT);function o7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yi,fp,AT,a7=(AT=class extends Gg{constructor(t={}){super();sn(this,Yi);sn(this,fp);this.config=t,Ut(this,Yi,new Map),Ut(this,fp,Date.now())}build(t,i,o){const u=new s7({mutationCache:this,mutationId:++zf(this,fp)._,options:t.defaultMutationOptions(i),state:o});return this.add(u),u}add(t){const i=nm(t),o=Oe(this,Yi).get(i)??[];o.push(t),Oe(this,Yi).set(i,o),this.notify({type:"added",mutation:t})}remove(t){var o;const i=nm(t);if(Oe(this,Yi).has(i)){const u=(o=Oe(this,Yi).get(i))==null?void 0:o.filter(p=>p!==t);u&&(u.length===0?Oe(this,Yi).delete(i):Oe(this,Yi).set(i,u))}this.notify({type:"removed",mutation:t})}canRun(t){var o;const i=(o=Oe(this,Yi).get(nm(t)))==null?void 0:o.find(u=>u.state.status==="pending");return!i||i===t}runNext(t){var o;const i=(o=Oe(this,Yi).get(nm(t)))==null?void 0:o.find(u=>u!==t&&u.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}clear(){Si.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Oe(this,Yi).values()].flat()}find(t){const i={exact:!0,...t};return this.getAll().find(o=>N2(i,o))}findAll(t={}){return this.getAll().filter(i=>N2(t,i))}notify(t){Si.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return Si.batch(()=>Promise.all(t.map(i=>i.continue().catch(Us))))}},Yi=new WeakMap,fp=new WeakMap,AT);function nm(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function U2(e){return{onFetch:(t,i)=>{var M,I,k,j,X;const o=t.options,u=(k=(I=(M=t.fetchOptions)==null?void 0:M.meta)==null?void 0:I.fetchMore)==null?void 0:k.direction,p=((j=t.state.data)==null?void 0:j.pages)||[],y=((X=t.state.data)==null?void 0:X.pageParams)||[];let l={pages:[],pageParams:[]},S=0;const w=async()=>{let O=!1;const H=Z=>{Object.defineProperty(Z,"signal",{enumerable:!0,get:()=>(t.signal.aborted?O=!0:t.signal.addEventListener("abort",()=>{O=!0}),t.signal)})},B=sk(t.options,t.fetchOptions),V=async(Z,ne,de)=>{if(O)return Promise.reject();if(ne==null&&Z.pages.length)return Promise.resolve(Z);const Se={queryKey:t.queryKey,pageParam:ne,direction:de?"backward":"forward",meta:t.options.meta};H(Se);const ke=await B(Se),{maxPages:we}=t.options,Ye=de?K3:H3;return{pages:Ye(Z.pages,ke,we),pageParams:Ye(Z.pageParams,ne,we)}};if(u&&p.length){const Z=u==="backward",ne=Z?l7:$2,de={pages:p,pageParams:y},Se=ne(o,de);l=await V(de,Se,Z)}else{const Z=e??p.length;do{const ne=S===0?y[0]??o.initialPageParam:$2(o,l);if(S>0&&ne==null)break;l=await V(l,ne),S++}while(S<Z)}return l};t.options.persister?t.fetchFn=()=>{var O,H;return(H=(O=t.options).persister)==null?void 0:H.call(O,w,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=w}}}function $2(e,{pages:t,pageParams:i}){const o=t.length-1;return t.length>0?e.getNextPageParam(t[o],t,i[o],i):void 0}function l7(e,{pages:t,pageParams:i}){var o;return t.length>0?(o=e.getPreviousPageParam)==null?void 0:o.call(e,t[0],t,i[0],i):void 0}var Wn,Fa,Oa,Du,Lu,Ba,zu,Ru,MT,c7=(MT=class{constructor(e={}){sn(this,Wn);sn(this,Fa);sn(this,Oa);sn(this,Du);sn(this,Lu);sn(this,Ba);sn(this,zu);sn(this,Ru);Ut(this,Wn,e.queryCache||new i7),Ut(this,Fa,e.mutationCache||new a7),Ut(this,Oa,e.defaultOptions||{}),Ut(this,Du,new Map),Ut(this,Lu,new Map),Ut(this,Ba,0)}mount(){zf(this,Ba)._++,Oe(this,Ba)===1&&(Ut(this,zu,ok.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Wn).onFocus())})),Ut(this,Ru,og.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Wn).onOnline())})))}unmount(){var e,t;zf(this,Ba)._--,Oe(this,Ba)===0&&((e=Oe(this,zu))==null||e.call(this),Ut(this,zu,void 0),(t=Oe(this,Ru))==null||t.call(this),Ut(this,Ru,void 0))}isFetching(e){return Oe(this,Wn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Oe(this,Fa).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Oe(this,Wn).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const i=this.defaultQueryOptions(e),o=Oe(this,Wn).build(this,i);return e.revalidateIfStale&&o.isStaleByTime(O2(i.staleTime,o))&&this.prefetchQuery(i),Promise.resolve(t)}}getQueriesData(e){return Oe(this,Wn).findAll(e).map(({queryKey:t,state:i})=>{const o=i.data;return[t,o]})}setQueryData(e,t,i){const o=this.defaultQueryOptions({queryKey:e}),u=Oe(this,Wn).get(o.queryHash),p=u==null?void 0:u.state.data,y=U3(t,p);if(y!==void 0)return Oe(this,Wn).build(this,o).setData(y,{...i,manual:!0})}setQueriesData(e,t,i){return Si.batch(()=>Oe(this,Wn).findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Oe(this,Wn).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=Oe(this,Wn);Si.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=Oe(this,Wn),o={type:"active",...e};return Si.batch(()=>(i.findAll(e).forEach(u=>{u.reset()}),this.refetchQueries(o,t)))}cancelQueries(e={},t={}){const i={revert:!0,...t},o=Si.batch(()=>Oe(this,Wn).findAll(e).map(u=>u.cancel(i)));return Promise.all(o).then(Us).catch(Us)}invalidateQueries(e={},t={}){return Si.batch(()=>{if(Oe(this,Wn).findAll(e).forEach(o=>{o.invalidate()}),e.refetchType==="none")return Promise.resolve();const i={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(i,t)})}refetchQueries(e={},t){const i={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},o=Si.batch(()=>Oe(this,Wn).findAll(e).filter(u=>!u.isDisabled()).map(u=>{let p=u.fetch(void 0,i);return i.throwOnError||(p=p.catch(Us)),u.state.fetchStatus==="paused"?Promise.resolve():p}));return Promise.all(o).then(Us)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=Oe(this,Wn).build(this,t);return i.isStaleByTime(O2(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Us).catch(Us)}fetchInfiniteQuery(e){return e.behavior=U2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Us).catch(Us)}ensureInfiniteQueryData(e){return e.behavior=U2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return og.isOnline()?Oe(this,Fa).resumePausedMutations():Promise.resolve()}getQueryCache(){return Oe(this,Wn)}getMutationCache(){return Oe(this,Fa)}getDefaultOptions(){return Oe(this,Oa)}setDefaultOptions(e){Ut(this,Oa,e)}setQueryDefaults(e,t){Oe(this,Du).set(op(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Oe(this,Du).values()];let i={};return t.forEach(o=>{ap(e,o.queryKey)&&(i={...i,...o.defaultOptions})}),i}setMutationDefaults(e,t){Oe(this,Lu).set(op(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Oe(this,Lu).values()];let i={};return t.forEach(o=>{ap(e,o.mutationKey)&&(i={...i,...o.defaultOptions})}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Oe(this,Oa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Zx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Wx&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Oe(this,Oa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Oe(this,Wn).clear(),Oe(this,Fa).clear()}},Wn=new WeakMap,Fa=new WeakMap,Oa=new WeakMap,Du=new WeakMap,Lu=new WeakMap,Ba=new WeakMap,zu=new WeakMap,Ru=new WeakMap,MT),u7=$.createContext(void 0),h7=({client:e,children:t})=>($.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),oe.jsx(u7.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ag.apply(this,arguments)}var ja;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ja||(ja={}));const G2="popstate";function d7(e){e===void 0&&(e={});function t(o,u){let{pathname:p,search:y,hash:l}=o.location;return m_("",{pathname:p,search:y,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(o,u){return typeof u=="string"?u:dk(u)}return f7(t,i,null,e)}function $i(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function p7(){return Math.random().toString(36).substr(2,8)}function q2(e,t){return{usr:e.state,key:e.key,idx:t}}function m_(e,t,i,o){return i===void 0&&(i=null),ag({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zg(t):t,{state:i,key:t&&t.key||o||p7()})}function dk(e){let{pathname:t="/",search:i="",hash:o=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Zg(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function f7(e,t,i,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:p=!1}=o,y=u.history,l=ja.Pop,S=null,w=M();w==null&&(w=0,y.replaceState(ag({},y.state,{idx:w}),""));function M(){return(y.state||{idx:null}).idx}function I(){l=ja.Pop;let H=M(),B=H==null?null:H-w;w=H,S&&S({action:l,location:O.location,delta:B})}function k(H,B){l=ja.Push;let V=m_(O.location,H,B);w=M()+1;let Z=q2(V,w),ne=O.createHref(V);try{y.pushState(Z,"",ne)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;u.location.assign(ne)}p&&S&&S({action:l,location:O.location,delta:1})}function j(H,B){l=ja.Replace;let V=m_(O.location,H,B);w=M();let Z=q2(V,w),ne=O.createHref(V);y.replaceState(Z,"",ne),p&&S&&S({action:l,location:O.location,delta:0})}function X(H){let B=u.location.origin!=="null"?u.location.origin:u.location.href,V=typeof H=="string"?H:dk(H);return V=V.replace(/ $/,"%20"),$i(B,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,B)}let O={get action(){return l},get location(){return e(u,y)},listen(H){if(S)throw new Error("A history only accepts one active listener");return u.addEventListener(G2,I),S=H,()=>{u.removeEventListener(G2,I),S=null}},createHref(H){return t(u,H)},createURL:X,encodeLocation(H){let B=X(H);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:k,replace:j,go(H){return y.go(H)}};return O}var Z2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Z2||(Z2={}));function m7(e,t,i){return i===void 0&&(i="/"),g7(e,t,i,!1)}function g7(e,t,i,o){let u=typeof t=="string"?Zg(t):t,p=mk(u.pathname||"/",i);if(p==null)return null;let y=pk(e);y7(y);let l=null;for(let S=0;l==null&&S<y.length;++S){let w=k7(p);l=E7(y[S],w,o)}return l}function pk(e,t,i,o){t===void 0&&(t=[]),i===void 0&&(i=[]),o===void 0&&(o="");let u=(p,y,l)=>{let S={relativePath:l===void 0?p.path||"":l,caseSensitive:p.caseSensitive===!0,childrenIndex:y,route:p};S.relativePath.startsWith("/")&&($i(S.relativePath.startsWith(o),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(o.length));let w=Cu([o,S.relativePath]),M=i.concat(S);p.children&&p.children.length>0&&($i(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),pk(p.children,t,M,w)),!(p.path==null&&!p.index)&&t.push({path:w,score:T7(w,p.index),routesMeta:M})};return e.forEach((p,y)=>{var l;if(p.path===""||!((l=p.path)!=null&&l.includes("?")))u(p,y);else for(let S of fk(p.path))u(p,y,S)}),t}function fk(e){let t=e.split("/");if(t.length===0)return[];let[i,...o]=t,u=i.endsWith("?"),p=i.replace(/\?$/,"");if(o.length===0)return u?[p,""]:[p];let y=fk(o.join("/")),l=[];return l.push(...y.map(S=>S===""?p:[p,S].join("/"))),u&&l.push(...y),l.map(S=>e.startsWith("/")&&S===""?"/":S)}function y7(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:C7(t.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}const v7=/^:[\w-]+$/,_7=3,x7=2,w7=1,b7=10,S7=-2,W2=e=>e==="*";function T7(e,t){let i=e.split("/"),o=i.length;return i.some(W2)&&(o+=S7),t&&(o+=x7),i.filter(u=>!W2(u)).reduce((u,p)=>u+(v7.test(p)?_7:p===""?w7:b7),o)}function C7(e,t){return e.length===t.length&&e.slice(0,-1).every((o,u)=>o===t[u])?e[e.length-1]-t[t.length-1]:0}function E7(e,t,i){let{routesMeta:o}=e,u={},p="/",y=[];for(let l=0;l<o.length;++l){let S=o[l],w=l===o.length-1,M=p==="/"?t:t.slice(p.length)||"/",I=H2({path:S.relativePath,caseSensitive:S.caseSensitive,end:w},M),k=S.route;if(!I&&w&&i&&!o[o.length-1].route.index&&(I=H2({path:S.relativePath,caseSensitive:S.caseSensitive,end:!1},M)),!I)return null;Object.assign(u,I.params),y.push({params:u,pathname:Cu([p,I.pathname]),pathnameBase:A7(Cu([p,I.pathnameBase])),route:k}),I.pathnameBase!=="/"&&(p=Cu([p,I.pathnameBase]))}return y}function H2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=P7(e.path,e.caseSensitive,e.end),u=t.match(i);if(!u)return null;let p=u[0],y=p.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((w,M,I)=>{let{paramName:k,isOptional:j}=M;if(k==="*"){let O=l[I]||"";y=p.slice(0,p.length-O.length).replace(/(.)\/+$/,"$1")}const X=l[I];return j&&!X?w[k]=void 0:w[k]=(X||"").replace(/%2F/g,"/"),w},{}),pathname:p,pathnameBase:y,pattern:e}}function P7(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),hk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,l,S)=>(o.push({paramName:l,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function k7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function mk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}const Cu=e=>e.join("/").replace(/\/\/+/g,"/"),A7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function M7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gk=["post","put","patch","delete"];new Set(gk);const I7=["get",...gk];new Set(I7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},lg.apply(this,arguments)}const D7=$.createContext(null),L7=$.createContext(null),yk=$.createContext(null),Wg=$.createContext(null),Hg=$.createContext({outlet:null,matches:[],isDataRoute:!1}),vk=$.createContext(null);function Hx(){return $.useContext(Wg)!=null}function _k(){return Hx()||$i(!1),$.useContext(Wg).location}function z7(e,t){return R7(e,t)}function R7(e,t,i,o){Hx()||$i(!1);let{navigator:u}=$.useContext(yk),{matches:p}=$.useContext(Hg),y=p[p.length-1],l=y?y.params:{};y&&y.pathname;let S=y?y.pathnameBase:"/";y&&y.route;let w=_k(),M;if(t){var I;let H=typeof t=="string"?Zg(t):t;S==="/"||(I=H.pathname)!=null&&I.startsWith(S)||$i(!1),M=H}else M=w;let k=M.pathname||"/",j=k;if(S!=="/"){let H=S.replace(/^\//,"").split("/");j="/"+k.replace(/^\//,"").split("/").slice(H.length).join("/")}let X=m7(e,{pathname:j}),O=V7(X&&X.map(H=>Object.assign({},H,{params:Object.assign({},l,H.params),pathname:Cu([S,u.encodeLocation?u.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?S:Cu([S,u.encodeLocation?u.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),p,i,o);return t&&O?$.createElement(Wg.Provider,{value:{location:lg({pathname:"/",search:"",hash:"",state:null,key:"default"},M),navigationType:ja.Pop}},O):O}function F7(){let e=G7(),t=M7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),i?$.createElement("pre",{style:u},i):null,null)}const O7=$.createElement(F7,null);class B7 extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?$.createElement(Hg.Provider,{value:this.props.routeContext},$.createElement(vk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N7(e){let{routeContext:t,match:i,children:o}=e,u=$.useContext(D7);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),$.createElement(Hg.Provider,{value:t},o)}function V7(e,t,i,o){var u;if(t===void 0&&(t=[]),i===void 0&&(i=null),o===void 0&&(o=null),e==null){var p;if(!i)return null;if(i.errors)e=i.matches;else if((p=o)!=null&&p.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let y=e,l=(u=i)==null?void 0:u.errors;if(l!=null){let M=y.findIndex(I=>I.route.id&&(l==null?void 0:l[I.route.id])!==void 0);M>=0||$i(!1),y=y.slice(0,Math.min(y.length,M+1))}let S=!1,w=-1;if(i&&o&&o.v7_partialHydration)for(let M=0;M<y.length;M++){let I=y[M];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=M),I.route.id){let{loaderData:k,errors:j}=i,X=I.route.loader&&k[I.route.id]===void 0&&(!j||j[I.route.id]===void 0);if(I.route.lazy||X){S=!0,w>=0?y=y.slice(0,w+1):y=[y[0]];break}}}return y.reduceRight((M,I,k)=>{let j,X=!1,O=null,H=null;i&&(j=l&&I.route.id?l[I.route.id]:void 0,O=I.route.errorElement||O7,S&&(w<0&&k===0?(X=!0,H=null):w===k&&(X=!0,H=I.route.hydrateFallbackElement||null)));let B=t.concat(y.slice(0,k+1)),V=()=>{let Z;return j?Z=O:X?Z=H:I.route.Component?Z=$.createElement(I.route.Component,null):I.route.element?Z=I.route.element:Z=M,$.createElement(N7,{match:I,routeContext:{outlet:M,matches:B,isDataRoute:i!=null},children:Z})};return i&&(I.route.ErrorBoundary||I.route.errorElement||k===0)?$.createElement(B7,{location:i.location,revalidation:i.revalidation,component:O,error:j,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}var g_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(g_||{});function j7(e){let t=$.useContext(L7);return t||$i(!1),t}function U7(e){let t=$.useContext(Hg);return t||$i(!1),t}function $7(e){let t=U7(),i=t.matches[t.matches.length-1];return i.route.id||$i(!1),i.route.id}function G7(){var e;let t=$.useContext(vk),i=j7(g_.UseRouteError),o=$7(g_.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[o]}function y_(e){$i(!1)}function q7(e){let{basename:t="/",children:i=null,location:o,navigationType:u=ja.Pop,navigator:p,static:y=!1,future:l}=e;Hx()&&$i(!1);let S=t.replace(/^\/*/,"/"),w=$.useMemo(()=>({basename:S,navigator:p,static:y,future:lg({v7_relativeSplatPath:!1},l)}),[S,l,p,y]);typeof o=="string"&&(o=Zg(o));let{pathname:M="/",search:I="",hash:k="",state:j=null,key:X="default"}=o,O=$.useMemo(()=>{let H=mk(M,S);return H==null?null:{location:{pathname:H,search:I,hash:k,state:j,key:X},navigationType:u}},[S,M,I,k,j,X,u]);return O==null?null:$.createElement(yk.Provider,{value:w},$.createElement(Wg.Provider,{children:i,value:O}))}function Z7(e){let{children:t,location:i}=e;return z7(v_(t),i)}new Promise(()=>{});function v_(e,t){t===void 0&&(t=[]);let i=[];return $.Children.forEach(e,(o,u)=>{if(!$.isValidElement(o))return;let p=[...t,u];if(o.type===$.Fragment){i.push.apply(i,v_(o.props.children,p));return}o.type!==y_&&$i(!1),!o.props.index||!o.props.children||$i(!1);let y={id:o.props.id||p.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=v_(o.props.children,p)),i.push(y)}),i}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const W7="6";try{window.__reactRouterVersion=W7}catch{}const H7="startTransition",K2=jT[H7];function K7(e){let{basename:t,children:i,future:o,window:u}=e,p=$.useRef();p.current==null&&(p.current=d7({window:u,v5Compat:!0}));let y=p.current,[l,S]=$.useState({action:y.action,location:y.location}),{v7_startTransition:w}=o||{},M=$.useCallback(I=>{w&&K2?K2(()=>S(I)):S(I)},[S,w]);return $.useLayoutEffect(()=>y.listen(M),[y,M]),$.createElement(q7,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:y,future:o})}var X2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(X2||(X2={}));var Y2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Y2||(Y2={}));const ta=e=>!e||typeof e=="object"&&Object.keys(e).length===0||e instanceof Error&&!e.message&&!e.stack,xk=e=>{if(ta(e))return!1;if(e instanceof Error)return!0;if(typeof e=="object"){const t=e;return typeof t.message=="string"&&typeof t.name=="string"}return!1},X7=e=>xk(e)?e.message||"Une erreur inattendue est survenue":typeof e=="string"?e:"Une erreur inattendue est survenue",Kg=(e,t,i)=>{if(ta(t))return;const o={context:e,error:xk(t)?{name:t.name,message:t.message,stack:t.stack}:t,...i,timestamp:new Date().toISOString()};(o.error||i)&&console.error(`Error in ${e}:`,o)};class Y7 extends $.Component{constructor(){super(...arguments);cb(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(i){return ta(i)?{hasError:!1,error:null}:{hasError:!0,error:i}}componentDidCatch(i,o){if(ta(i))return;Kg("ErrorBoundary",i,{componentStack:o.componentStack});const u=X7(i);ql.error(u,{className:"bg-background/95 border-border/50 text-foreground",duration:5e3})}render(){var i;return this.state.hasError?oe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:oe.jsxs("div",{className:"text-center p-8 max-w-md",children:[oe.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Oops! Quelque chose s'est mal passé"}),oe.jsx("p",{className:"text-foreground/70 mb-6",children:((i=this.state.error)==null?void 0:i.message)||"Une erreur inattendue est survenue"}),oe.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 transition-colors",children:"Recharger l'application"})]})}):this.props.children}}var wk={exports:{}};(function(e,t){(function(i,o){e.exports=o()})(AD,function(){var i,o,u;function p(l,S){if(!i)i=S;else if(!o)o=S;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",M={};i(M),u=S(M),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}p(["exports"],function(l){function S(s,n,a,h){return new(a||(a=Promise))(function(f,v){function x(A){try{E(h.next(A))}catch(L){v(L)}}function b(A){try{E(h.throw(A))}catch(L){v(L)}}function E(A){var L;A.done?f(A.value):(L=A.value,L instanceof a?L:new a(function(F){F(L)})).then(x,b)}E((h=h.apply(s,n||[])).next())})}function w(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var M=I;function I(s,n){this.x=s,this.y=n}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,a=s.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),a=Math.sin(s),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(s,n){var a=Math.cos(s),h=Math.sin(s),f=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(s){return s instanceof I?s:Array.isArray(s)?new I(s[0],s[1]):s};var k=w(M),j=X;function X(s,n,a,h){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=a,this.p2y=h}X.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,h=0;h<8;h++){var f=this.sampleCurveX(a)-s;if(Math.abs(f)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var x=0,b=1;for(a=s,h=0;h<20&&(f=this.sampleCurveX(a),!(Math.abs(f-s)<n));h++)s>f?x=a:b=a,a=.5*(b-x)+x;return a},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var O=w(j);let H,B;function V(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function Z(){if(B==null&&(B=!1,V())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&a[h]!==h){B=!0;break}}}return B||!1}function ne(s,n,a,h){const f=new O(s,n,a,h);return function(v){return f.solve(v)}}const de=ne(.25,.1,.25,1);function Se(s,n,a){return Math.min(a,Math.max(n,s))}function ke(s,n,a){const h=a-n,f=((s-n)%h+h)%h+n;return f===n?a:f}function we(s,...n){for(const a of n)for(const h in a)s[h]=a[h];return s}let Ye=1;function Fe(s,n,a){const h={};for(const f in s)h[f]=n.call(a||this,s[f],f,s);return h}function pt(s,n,a){const h={};for(const f in s)n.call(a||this,s[f],f,s)&&(h[f]=s[f]);return h}function nt(s){return Array.isArray(s)?s.map(nt):typeof s=="object"&&s?Fe(s,nt):s}const Et={};function Ze(s){Et[s]||(typeof console<"u"&&console.warn(s),Et[s]=!0)}function dt(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function mt(s){let n=0;for(let a,h,f=0,v=s.length,x=v-1;f<v;x=f++)a=s[f],h=s[x],n+=(h.x-a.x)*(a.y+h.y);return n}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Pe=null;function We(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ot(s,n,a,h,f){return S(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),E=new Uint8ClampedArray(h*f*4);if(yield v.copyTo(E,function(A,L,F,U,W){const K=4*Math.max(-L,0),J=(Math.max(0,F)-F)*U*4+K,ae=4*U,ue=Math.max(0,L),ve=Math.max(0,F);return{rect:{x:ue,y:ve,width:Math.min(A.width,L+U)-ue,height:Math.min(A.height,F+W)-ve},layout:[{offset:J,stride:ae}]}}(s,n,a,h,f)),b)for(let A=0;A<E.length;A+=4){const L=E[A];E[A]=E[A+2],E[A+2]=L}return E}finally{v.close()}})}let _t,vt,Nt,Dn;const Gt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),a=n.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,a.drawImage(s,0,0,s.width,s.height),a},resolveURL:s=>(Nt||(Nt=document.createElement("a")),Nt.href=s,Nt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Dn==null&&(Dn=matchMedia("(prefers-reduced-motion: reduce)")),Dn.matches)}},sr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class cr extends Error{constructor(n,a,h,f){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=f}}const $n=Pt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ln=s=>sr.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function cs(s,n){const a=new AbortController,h=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:$n(),signal:a.signal});let f=!1,v=!1;return s.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(b=>{(s.type==="arrayBuffer"||s.type==="image"?b.arrayBuffer():s.type==="json"?b.json():b.text()).then(E=>{v||(f=!0,n(null,E,b.headers.get("Cache-Control"),b.headers.get("Expires")))}).catch(E=>{v||n(new Error(E.message))})})(x):x.blob().then(b=>n(new cr(x.status,x.statusText,s.url,b)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,f||a.abort()}}}const kr=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!Pt())return(Ln(s.url)||cs)(s,n)}if(!(/^file:/.test(a=s.url)||/^file:/.test($n())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return cs(s,n);if(Pt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var a;return function(h,f){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(b){return f(b)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new cr(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(s,n)},ai=function(s,n){return kr(we(s,{type:"arrayBuffer"}),n)};function Ar(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function Gi(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function yr(s,n,a){if(a&&a[s]){const h=a[s].indexOf(n);h!==-1&&a[s].splice(h,1)}}class Pi{constructor(n,a={}){we(this,a),this.type=n}}class ki extends Pi{constructor(n,a={}){super("error",we({error:n},a))}}class dn{on(n,a){return this._listeners=this._listeners||{},Gi(n,a,this._listeners),this}off(n,a){return yr(n,a,this._listeners),yr(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Gi(n,a,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,a){typeof n=="string"&&(n=new Pi(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const b of f)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const b of v)yr(h,b,this._oneTimeListeners),b.call(this,n);const x=this._eventedParent;x&&(we(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ki&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const vr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function jr(s,n){const a={};for(const h in s)h!=="ref"&&(a[h]=s[h]);return vr.forEach(h=>{h in n&&(a[h]=n[h])}),a}function Ht(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Ht(s[a],n[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const a in s)if(!Ht(s[a],n[a]))return!1;return!0}return s===n}const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function li(s,n,a){a.push({command:qt.addSource,args:[s,n[s]]})}function us(s,n,a){n.push({command:qt.removeSource,args:[s]}),a[s]=!0}function _r(s,n,a,h){us(s,a,h),li(s,n,a)}function wo(s,n,a){let h;for(h in s[a])if(Object.prototype.hasOwnProperty.call(s[a],h)&&h!=="data"&&!Ht(s[a][h],n[a][h]))return!1;for(h in n[a])if(Object.prototype.hasOwnProperty.call(n[a],h)&&h!=="data"&&!Ht(s[a][h],n[a][h]))return!1;return!0}function ci(s,n,a,h,f,v){let x;for(x in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,x)&&(Ht(s[x],n[x])||a.push({command:v,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Ht(s[x],n[x])||a.push({command:v,args:[h,x,n[x],f]}))}function qi(s){return s.id}function As(s,n){return s[n.id]=n,s}class je{constructor(n,a,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function ui(s,...n){for(const a of n)for(const h in a)s[h]=a[h];return s}class pn extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Zi{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,f]of a)this.bindings[h]=f}concat(n){return new Zi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const or={kind:"null"},$e={kind:"number"},Xe={kind:"string"},rt={kind:"boolean"},Dt={kind:"color"},zn={kind:"object"},St={kind:"value"},Ur={kind:"collator"},re={kind:"formatted"},N={kind:"padding"},G={kind:"resolvedImage"},Y={kind:"variableAnchorOffsetCollection"};function se(s,n){return{kind:"array",itemType:s,N:n}}function le(s){if(s.kind==="array"){const n=le(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const _e=[or,$e,Xe,rt,Dt,re,zn,se(St),N,G,Y];function fe(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!fe(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of _e)if(!fe(a,n))return null}}return`Expected ${le(s)} but found ${le(n)} instead.`}function he(s,n){return n.some(a=>a.kind===s.kind)}function ye(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function Me(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const Ie=.96422,ze=.82521,xt=4/29,kt=6/29,at=3*kt*kt,bt=kt*kt*kt,At=Math.PI/180,Qt=180/Math.PI;function nn(s){return(s%=360)<0&&(s+=360),s}function Zt([s,n,a,h]){let f,v;const x=xr((.2225045*(s=$t(s))+.7168786*(n=$t(n))+.0606169*(a=$t(a)))/1);s===n&&n===a?f=v=x:(f=xr((.4360747*s+.3850649*n+.1430804*a)/Ie),v=xr((.0139322*s+.0971045*n+.7141733*a)/ze));const b=116*x-16;return[b<0?0:b,500*(f-x),200*(x-v),h]}function $t(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function xr(s){return s>bt?Math.pow(s,1/3):s/at+xt}function on([s,n,a,h]){let f=(s+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(a)?f:f-a/200;return f=1*ur(f),v=Ie*ur(v),x=ze*ur(x),[Gn(3.1338561*v-1.6168667*f-.4906146*x),Gn(-.9787684*v+1.9161415*f+.033454*x),Gn(.0719453*v-.2289914*f+1.4052427*x),h]}function Gn(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function ur(s){return s>kt?s*s*s:at*(s-xt)}function Ai(s){return parseInt(s.padEnd(2,s),16)/255}function Ep(s,n){return ra(n?s/100:s,0,1)}function ra(s,n,a){return Math.min(Math.max(n,s),a)}function ia(s){return!s.some(Number.isNaN)}const ry={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class en{constructor(n,a,h,f=1,v=!0){this.r=n,this.g=a,this.b=h,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,a,h,f]))}static parse(n){if(n instanceof en)return n;if(typeof n!="string")return;const a=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=ry[h];if(f){const[x,b,E]=f;return[x/255,b/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let b=1;return[Ai(h.slice(b,b+=x)),Ai(h.slice(b,b+=x)),Ai(h.slice(b,b+=x)),Ai(h.slice(b,b+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,E,A,L,F,U,W,K,J,ae,ue,ve]=x,pe=[L||" ",W||" ",ae].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const xe=[A,U,J].join(""),Te=xe==="%%%"?100:xe===""?255:0;if(Te){const Le=[ra(+E/Te,0,1),ra(+F/Te,0,1),ra(+K/Te,0,1),ue?Ep(+ue,ve):1];if(ia(Le))return Le}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,b,E,A,L,F,U,W,K]=v,J=[E||" ",L||" ",U].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const ae=[+b,ra(+A,0,100),ra(+F,0,100),W?Ep(+W,K):1];if(ia(ae))return function([ue,ve,pe,xe]){function Te(Le){const et=(Le+ue/30)%12,ct=ve*Math.min(pe,1-pe);return pe-ct*Math.max(-1,Math.min(et-3,9-et,1))}return ue=nn(ue),ve/=100,pe/=100,[Te(0),Te(8),Te(4),xe]}(ae)}}}(n);return a?new en(...a,!1):void 0}get rgb(){const{r:n,g:a,b:h,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,a/v,h/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,h,f,v]=Zt(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?nn(Math.atan2(f,h)*Qt):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Zt(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,h,f]=this.rgb;return`rgba(${[n,a,h].map(v=>Math.round(255*v)).join(",")},${f})`}}en.black=new en(0,0,0,1),en.white=new en(1,1,1,1),en.transparent=new en(0,0,0,0),en.red=new en(1,0,0,1);class ih{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hc{constructor(n,a,h,f,v){this.text=n,this.image=a,this.scale=h,this.fontStack=f,this.textColor=v}}class wr{constructor(n){this.sections=n}static fromString(n){return new wr([new hc(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof wr?n:wr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new hi(n)}}toString(){return JSON.stringify(this.values)}}const iy=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Mi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const h=n[a],f=n[a+1];if(typeof h!="string"||!iy.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Mi(n)}}toString(){return JSON.stringify(this.values)}}class hr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new hr({name:n,available:!1}):null}}function dc(s,n,a,h){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,n,a,h]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof en||s instanceof ih||s instanceof wr||s instanceof hi||s instanceof Mi||s instanceof hr)return!0;if(Array.isArray(s)){for(const n of s)if(!sa(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!sa(s[n]))return!1;return!0}return!1}function gn(s){if(s===null)return or;if(typeof s=="string")return Xe;if(typeof s=="boolean")return rt;if(typeof s=="number")return $e;if(s instanceof en)return Dt;if(s instanceof ih)return Ur;if(s instanceof wr)return re;if(s instanceof hi)return N;if(s instanceof Mi)return Y;if(s instanceof hr)return G;if(Array.isArray(s)){const n=s.length;let a;for(const h of s){const f=gn(h);if(a){if(a===f)continue;a=St;break}a=f}return se(a||St,n)}return zn}function Kt(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof en||s instanceof wr||s instanceof hi||s instanceof Mi||s instanceof hr?s.toString():JSON.stringify(s)}class bo{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!sa(n[1]))return a.error("invalid value");const h=n[1];let f=gn(h);const v=a.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new bo(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const pc={string:Xe,number:$e,boolean:rt,object:zn};class Ii{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,f=1;const v=n[0];if(v==="array"){let b,E;if(n.length>2){const A=n[1];if(typeof A!="string"||!(A in pc)||A==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=pc[A],f++}else b=St;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=n[2],f++}h=se(b,E)}else{if(!pc[v])throw new Error(`Types doesn't contain name = ${v}`);h=pc[v]}const x=[];for(;f<n.length;f++){const b=a.parse(n[f],f,St);if(!b)return null;x.push(b)}return new Ii(h,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!fe(this.type,gn(h)))return h;if(a===this.args.length-1)throw new wn(`Expected value to be of type ${le(this.type)}, but found ${le(gn(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const sh={"to-boolean":rt,"to-color":Dt,"to-number":$e,"to-string":Xe};class Js{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if(!sh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const f=sh[h],v=[];for(let x=1;x<n.length;x++){const b=a.parse(n[x],x,St);if(!b)return null;v.push(b)}return new Js(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,h;for(const f of this.args){if(a=f.evaluate(n),h=null,a instanceof en)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:dc(a[0],a[1],a[2],a[3]),!h))return new en(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new wn(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const h of this.args){a=h.evaluate(n);const f=hi.parse(a);if(f)return f}throw new wn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const h of this.args){a=h.evaluate(n);const f=Mi.parse(a);if(f)return f}throw new wn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new wn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return wr.fromString(Kt(this.args[0].evaluate(n)));case"resolvedImage":return hr.fromString(Kt(this.args[0].evaluate(n)));default:return Kt(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Pp=["Unknown","Point","LineString","Polygon"];class oh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=en.parse(n)),a}}class fc{constructor(n,a,h=[],f,v=new Zi,x=[]){this.registry=n,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=a}parse(n,a,h,f,v={}){return a?this.concat(a,h,f)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(f,v,x){return x==="assert"?new Ii(v,[f]):x==="coerce"?new Js(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,E=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(b.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(b,E))return null}else x=h(x,b,a.typeAnnotation||"coerce");else x=h(x,b,a.typeAnnotation||"coerce");else x=h(x,b,a.typeAnnotation||"coerce");else x=h(x,b,a.typeAnnotation||"assert")}if(!(x instanceof bo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new oh;try{x=new bo(x.type,x.evaluate(b))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const f=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new fc(this.registry,this._isConstant,f,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new pn(h,n))}checkSubtype(n,a){const h=fe(n,a);return h&&this.error(h),h}}class mc{constructor(n,a,h){this.type=Ur,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const f=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,rt);if(!f)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,rt);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Xe),!x)?null:new mc(f,v,x)}evaluate(n){return new ih(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const eo=8192;function ah(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function fl(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function kp(s,n){const a=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(a*f*eo),Math.round(h*f*eo)]}function sy(s,n,a){const h=s[0]-n[0],f=s[1]-n[1],v=s[0]-a[0],x=s[1]-a[1];return h*x-v*f==0&&h*v<=0&&f*x<=0}function lh(s,n){let a=!1;for(let x=0,b=n.length;x<b;x++){const E=n[x];for(let A=0,L=E.length;A<L-1;A++){if(sy(s,E[A],E[A+1]))return!1;(f=E[A])[1]>(h=s)[1]!=(v=E[A+1])[1]>h[1]&&h[0]<(v[0]-f[0])*(h[1]-f[1])/(v[1]-f[1])+f[0]&&(a=!a)}}var h,f,v;return a}function ch(s,n){for(let a=0;a<n.length;a++)if(lh(s,n[a]))return!0;return!1}function Ap(s,n,a,h){const f=h[0]-a[0],v=h[1]-a[1],x=(s[0]-a[0])*v-f*(s[1]-a[1]),b=(n[0]-a[0])*v-f*(n[1]-a[1]);return x>0&&b<0||x<0&&b>0}function oy(s,n,a){for(const A of a)for(let L=0;L<A.length-1;++L)if((b=[(x=A[L+1])[0]-(v=A[L])[0],x[1]-v[1]])[0]*(E=[(f=n)[0]-(h=s)[0],f[1]-h[1]])[1]-b[1]*E[0]!=0&&Ap(h,f,v,x)&&Ap(v,x,h,f))return!0;var h,f,v,x,b,E;return!1}function Mp(s,n){for(let a=0;a<s.length;++a)if(!lh(s[a],n))return!1;for(let a=0;a<s.length-1;++a)if(oy(s[a],s[a+1],n))return!1;return!0}function Ip(s,n){for(let a=0;a<n.length;a++)if(Mp(s,n[a]))return!0;return!1}function gc(s,n,a){const h=[];for(let f=0;f<s.length;f++){const v=[];for(let x=0;x<s[f].length;x++){const b=kp(s[f][x],a);ah(n,b),v.push(b)}h.push(v)}return h}function Dp(s,n,a){const h=[];for(let f=0;f<s.length;f++){const v=gc(s[f],n,a);h.push(v)}return h}function Lp(s,n,a,h){if(s[0]<a[0]||s[0]>a[2]){const f=.5*h;let v=s[0]-a[0]>f?-h:a[0]-s[0]>f?h:0;v===0&&(v=s[0]-a[2]>f?-h:a[2]-s[0]>f?h:0),s[0]+=v}ah(n,s)}function uh(s,n,a,h){const f=Math.pow(2,h.z)*eo,v=[h.x*eo,h.y*eo],x=[];for(const b of s)for(const E of b){const A=[E.x+v[0],E.y+v[1]];Lp(A,n,a,f),x.push(A)}return x}function hh(s,n,a,h){const f=Math.pow(2,h.z)*eo,v=[h.x*eo,h.y*eo],x=[];for(const E of s){const A=[];for(const L of E){const F=[L.x+v[0],L.y+v[1]];ah(n,F),A.push(F)}x.push(A)}if(n[2]-n[0]<=f/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of x)for(const A of E)Lp(A,n,a,f)}var b;return x}class So{constructor(n,a){this.type=rt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sa(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const v=h.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new So(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new So(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new So(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const b=gc(h.coordinates,v,x),E=uh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!lh(A,b))return!1}if(h.type==="MultiPolygon"){const b=Dp(h.coordinates,v,x),E=uh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!ch(A,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const b=gc(h.coordinates,v,x),E=hh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!Mp(A,b))return!1}if(h.type==="MultiPolygon"){const b=Dp(h.coordinates,v,x),E=hh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!Ip(A,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yc{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new yc(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Di{constructor(n,a,h,f){this.name=n,this.type=a,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const h=n[0],f=Di.definitions[h];if(!f)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=x.filter(([A])=>!Array.isArray(A)||A.length===n.length-1);let E=null;for(const[A,L]of b){E=new fc(a.registry,vc,a.path,null,a.scope);const F=[];let U=!1;for(let W=1;W<n.length;W++){const K=n[W],J=Array.isArray(A)?A[W-1]:A.type,ae=E.parse(K,1+F.length,J);if(!ae){U=!0;break}F.push(ae)}if(!U)if(Array.isArray(A)&&A.length!==F.length)E.error(`Expected ${A.length} arguments, but found ${F.length} instead.`);else{for(let W=0;W<F.length;W++){const K=Array.isArray(A)?A[W]:A.type,J=F[W];E.concat(W+1).checkSubtype(K,J.type)}if(E.errors.length===0)return new Di(h,v,L,F)}}if(b.length===1)a.errors.push(...E.errors);else{const A=(b.length?b:x).map(([F])=>{return U=F,Array.isArray(U)?`(${U.map(le).join(", ")})`:`(${le(U.type)}...)`;var U}).join(" | "),L=[];for(let F=1;F<n.length;F++){const U=a.parse(n[F],1+L.length);if(!U)return null;L.push(le(U.type))}a.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(n,a){Di.definitions=a;for(const h in a)n[h]=Di}}function vc(s){if(s instanceof yc)return vc(s.boundExpression);if(s instanceof Di&&s.name==="error"||s instanceof mc||s instanceof So)return!1;const n=s instanceof Js||s instanceof Ii;let a=!0;return s.eachChild(h=>{a=n?a&&vc(h):a&&h instanceof bo}),!!a&&_c(s)&&xc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _c(s){if(s instanceof Di&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof So)return!1;let n=!0;return s.eachChild(a=>{n&&!_c(a)&&(n=!1)}),n}function ml(s){if(s instanceof Di&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!ml(a)&&(n=!1)}),n}function xc(s,n){if(s instanceof Di&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(h=>{a&&!xc(h,n)&&(a=!1)}),a}function oa(s,n){const a=s.length-1;let h,f,v=0,x=a,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),h=s[b],f=s[b+1],h<=n){if(b===a||n<f)return b;v=b+1}else{if(!(h>n))throw new wn("Input is not a number.");x=b-1}return 0}class to{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[f,v]of h)this.labels.push(f),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,$e);if(!h)return null;const f=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const b=x===1?-1/0:n[x],E=n[x+1],A=x,L=x+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(f.length&&f[f.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const F=a.parse(E,L,v);if(!F)return null;v=v||F.type,f.push([b,F])}return new to(v,h,f)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return h[0].evaluate(n);const v=a.length;return f>=a[v-1]?h[v-1].evaluate(n):h[oa(a,f)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Vt(s,n,a){return s+a*(n-s)}function wc(s,n,a){return s.map((h,f)=>Vt(h,n[f],a))}const di={number:Vt,color:function(s,n,a,h="rgb"){switch(h){case"rgb":{const[f,v,x,b]=wc(s.rgb,n.rgb,a);return new en(f,v,x,b,!1)}case"hcl":{const[f,v,x,b]=s.hcl,[E,A,L,F]=n.hcl;let U,W;if(isNaN(f)||isNaN(E))isNaN(f)?isNaN(E)?U=NaN:(U=E,x!==1&&x!==0||(W=A)):(U=f,L!==1&&L!==0||(W=v));else{let ve=E-f;E>f&&ve>180?ve-=360:E<f&&f-E>180&&(ve+=360),U=f+a*ve}const[K,J,ae,ue]=function([ve,pe,xe,Te]){return ve=isNaN(ve)?0:ve*At,on([xe,Math.cos(ve)*pe,Math.sin(ve)*pe,Te])}([U,W??Vt(v,A,a),Vt(x,L,a),Vt(b,F,a)]);return new en(K,J,ae,ue,!1)}case"lab":{const[f,v,x,b]=on(wc(s.lab,n.lab,a));return new en(f,v,x,b,!1)}}},array:wc,padding:function(s,n,a){return new hi(wc(s.values,n.values,a))},variableAnchorOffsetCollection:function(s,n,a){const h=s.values,f=n.values;if(h.length!==f.length)throw new wn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new wn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);v.push(h[x]);const[b,E]=h[x+1],[A,L]=f[x+1];v.push([Vt(b,A,a),Vt(E,L,a)])}return new Mi(v)}};class pi{constructor(n,a,h,f,v){this.type=n,this.operator=a,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(n,a,h,f){let v=0;if(n.name==="exponential")v=dh(a,n.base,h,f);else if(n.name==="linear")v=dh(a,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new O(x[0],x[1],x[2],x[3]).solve(dh(a,1,h,f))}return v}static parse(n,a){let[h,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const A=f[1];if(typeof A!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:A}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const A=f.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:A}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,$e),!v)return null;const b=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=Dt:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],F=x[A+1],U=A+3,W=A+4;if(typeof L!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(b.length&&b[b.length-1][0]>=L)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const K=a.parse(F,W,E);if(!K)return null;E=E||K.type,b.push([L,K])}return Me(E,$e)||Me(E,Dt)||Me(E,N)||Me(E,Y)||Me(E,se($e))?new pi(E,h,f,v,b):a.error(`Type ${le(E)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return h[0].evaluate(n);const v=a.length;if(f>=a[v-1])return h[v-1].evaluate(n);const x=oa(a,f),b=pi.interpolationFactor(this.interpolation,f,a[x],a[x+1]),E=h[x].evaluate(n),A=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return di[this.type.kind](E,A,b);case"interpolate-hcl":return di.color(E,A,b,"hcl");case"interpolate-lab":return di.color(E,A,b,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function dh(s,n,a,h){const f=h-a,v=s-a;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class bc{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const f=a.expectedType;f&&f.kind!=="value"&&(h=f);const v=[];for(const b of n.slice(1)){const E=a.parse(b,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,v.push(E)}if(!h)throw new Error("No output type");const x=f&&v.some(b=>fe(f,b.type));return new bc(x?St:h,v)}evaluate(n){let a,h=null,f=0;for(const v of this.args)if(f++,h=v.evaluate(n),h&&h instanceof hr&&!h.available&&(a||(a=h.name),h=null,f===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Sc{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=a.parse(n[v+1],v+1);if(!b)return null;h.push([x,b])}const f=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return f?new Sc(h,f):null}outputDefined(){return this.result.outputDefined()}}class ph{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,$e),f=a.parse(n[2],2,se(a.expectedType||St));return h&&f?new ph(f.type.itemType,h,f):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new wn(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new wn(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new wn(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class fh{constructor(n,a){this.type=rt,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,St);return h&&f?he(h.type,[rt,Xe,$e,or,St])?new fh(h,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!ye(a,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${le(gn(a))} instead.`);if(!ye(h,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${le(gn(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Tc{constructor(n,a,h){this.type=$e,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,St);if(!h||!f)return null;if(!he(h.type,[rt,Xe,$e,or,St]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${le(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,$e);return v?new Tc(h,f,v):null}return new Tc(h,f)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!ye(a,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${le(gn(a))} instead.`);if(!ye(h,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${le(gn(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(a,f)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class mh{constructor(n,a,h,f,v,x){this.inputType=n,this.type=a,this.input=h,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const v={},x=[];for(let A=2;A<n.length-1;A+=2){let L=n[A];const F=n[A+1];Array.isArray(L)||(L=[L]);const U=a.concat(A);if(L.length===0)return U.error("Expected at least one branch label.");for(const K of L){if(typeof K!="number"&&typeof K!="string")return U.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return U.error("Numeric branch labels must be integer values.");if(h){if(U.checkSubtype(h,gn(K)))return null}else h=gn(K);if(v[String(K)]!==void 0)return U.error("Branch labels must be unique.");v[String(K)]=x.length}const W=a.parse(F,A,f);if(!W)return null;f=f||W.type,x.push(W)}const b=a.parse(n[1],1,St);if(!b)return null;const E=a.parse(n[n.length-1],n.length-1,f);return E?b.type.kind!=="value"&&a.concat(1).checkSubtype(h,b.type)?null:new mh(h,f,b,v,x,E):null}evaluate(n){const a=this.input.evaluate(n);return(gn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class gh{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const b=a.parse(n[x],x,rt);if(!b)return null;const E=a.parse(n[x+1],x+1,h);if(!E)return null;f.push([b,E]),h=h||E.type}const v=a.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new gh(h,f,v)}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Cc{constructor(n,a,h,f){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=f}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,$e);if(!h||!f)return null;if(!he(h.type,[se(St),Xe,St]))return a.error(`Expected first argument to be of type array or string, but found ${le(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,$e);return v?new Cc(h.type,h,f,v):null}return new Cc(h.type,h,f)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!ye(a,["string","array"]))throw new wn(`Expected first argument to be of type array or string, but found ${le(gn(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return a.slice(h,f)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function zp(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Rp(s,n,a,h){return h.compare(n,a)===0}function aa(s,n,a){const h=s!=="=="&&s!=="!=";return class bk{constructor(v,x,b){this.type=rt,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const b=v[0];let E=x.parse(v[1],1,St);if(!E)return null;if(!zp(b,E.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${le(E.type)}'.`);let A=x.parse(v[2],2,St);if(!A)return null;if(!zp(b,A.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${le(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${le(E.type)}' and '${le(A.type)}'.`);h&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new Ii(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new Ii(E.type,[A])));let L=null;if(v.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(v[3],3,Ur),!L)return null}return new bk(E,A,L)}evaluate(v){const x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const E=gn(x),A=gn(b);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new wn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=gn(x),A=gn(b);if(E.kind!=="string"||A.kind!=="string")return n(v,x,b)}return this.collator?a(v,x,b,this.collator.evaluate(v)):n(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const ay=aa("==",function(s,n,a){return n===a},Rp),ly=aa("!=",function(s,n,a){return n!==a},function(s,n,a,h){return!Rp(0,n,a,h)}),cy=aa("<",function(s,n,a){return n<a},function(s,n,a,h){return h.compare(n,a)<0}),uy=aa(">",function(s,n,a){return n>a},function(s,n,a,h){return h.compare(n,a)>0}),hy=aa("<=",function(s,n,a){return n<=a},function(s,n,a,h){return h.compare(n,a)<=0}),dy=aa(">=",function(s,n,a){return n>=a},function(s,n,a,h){return h.compare(n,a)>=0});class yh{constructor(n,a,h,f,v){this.type=Xe,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,$e);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=a.parse(f.locale,1,Xe),!v))return null;let x=null;if(f.currency&&(x=a.parse(f.currency,1,Xe),!x))return null;let b=null;if(f["min-fraction-digits"]&&(b=a.parse(f["min-fraction-digits"],1,$e),!b))return null;let E=null;return f["max-fraction-digits"]&&(E=a.parse(f["max-fraction-digits"],1,$e),!E)?null:new yh(h,v,x,b,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ec{constructor(n){this.type=re,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const b=n[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let E=null;if(b["font-scale"]&&(E=a.parse(b["font-scale"],1,$e),!E))return null;let A=null;if(b["text-font"]&&(A=a.parse(b["text-font"],1,se(Xe)),!A))return null;let L=null;if(b["text-color"]&&(L=a.parse(b["text-color"],1,Dt),!L))return null;const F=f[f.length-1];F.scale=E,F.font=A,F.textColor=L}else{const E=a.parse(n[x],1,St);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new Ec(f)}evaluate(n){return new wr(this.sections.map(a=>{const h=a.content.evaluate(n);return gn(h)===G?new hc("",h,null,null,null):new hc(Kt(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class vh{constructor(n){this.type=G,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Xe);return h?new vh(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=hr.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class _h{constructor(n){this.type=$e,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${le(h.type)} instead.`):new _h(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new wn(`Expected value to be of type string or array, but found ${le(gn(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const la={"==":ay,"!=":ly,">":uy,"<":cy,">=":dy,"<=":hy,array:Ii,at:ph,boolean:Ii,case:gh,coalesce:bc,collator:mc,format:Ec,image:vh,in:fh,"index-of":Tc,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:_h,let:Sc,literal:bo,match:mh,number:Ii,"number-format":yh,object:Ii,slice:Cc,step:to,string:Ii,"to-boolean":Js,"to-color":Js,"to-number":Js,"to-string":Js,var:yc,within:So};function Fp(s,[n,a,h,f]){n=n.evaluate(s),a=a.evaluate(s),h=h.evaluate(s);const v=f?f.evaluate(s):1,x=dc(n,a,h,v);if(x)throw new wn(x);return new en(n/255,a/255,h/255,v,!1)}function Op(s,n){return s in n}function xh(s,n){const a=n[s];return a===void 0?null:a}function To(s){return{type:s}}function Bp(s){return{result:"success",value:s}}function no(s){return{result:"error",value:s}}function ca(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Np(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function wh(s){return!!s.expression&&s.expression.interpolated}function Xt(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function yn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function py(s){return s}function jt(s,n){const a=n.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",f=h||!(h||s.property!==void 0),v=s.type||(wh(n)?"exponential":"interval");if(a||n.type==="padding"){const L=a?en.parse:hi.parse;(s=ui({},s)).stops&&(s.stops=s.stops.map(F=>[F[0],L(F[1])])),s.default=L(s.default?s.default:n.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let b,E,A;if(v==="exponential")b=gl;else if(v==="interval")b=fn;else if(v==="categorical"){b=vn,E=Object.create(null);for(const L of s.stops)E[L[0]]=L[1];A=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Vp}if(h){const L={},F=[];for(let K=0;K<s.stops.length;K++){const J=s.stops[K],ae=J[0].zoom;L[ae]===void 0&&(L[ae]={zoom:ae,type:s.type,property:s.property,default:s.default,stops:[]},F.push(ae)),L[ae].stops.push([J[0].value,J[1]])}const U=[];for(const K of F)U.push([L[K].zoom,jt(L[K],n)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:pi.interpolationFactor.bind(void 0,W),zoomStops:U.map(K=>K[0]),evaluate:({zoom:K},J)=>gl({stops:U,base:s.base},n,K).evaluate(K,J)}}if(f){const L=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:pi.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map(F=>F[0]),evaluate:({zoom:F})=>b(s,n,F,E,A)}}return{kind:"source",evaluate(L,F){const U=F&&F.properties?F.properties[s.property]:void 0;return U===void 0?Co(s.default,n.default):b(s,n,U,E,A)}}}function Co(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function vn(s,n,a,h,f){return Co(typeof a===f?h[a]:void 0,s.default,n.default)}function fn(s,n,a){if(Xt(a)!=="number")return Co(s.default,n.default);const h=s.stops.length;if(h===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[h-1][0])return s.stops[h-1][1];const f=oa(s.stops.map(v=>v[0]),a);return s.stops[f][1]}function gl(s,n,a){const h=s.base!==void 0?s.base:1;if(Xt(a)!=="number")return Co(s.default,n.default);const f=s.stops.length;if(f===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[f-1][0])return s.stops[f-1][1];const v=oa(s.stops.map(L=>L[0]),a),x=function(L,F,U,W){const K=W-U,J=L-U;return K===0?0:F===1?J/K:(Math.pow(F,J)-1)/(Math.pow(F,K)-1)}(a,h,s.stops[v][0],s.stops[v+1][0]),b=s.stops[v][1],E=s.stops[v+1][1],A=di[n.type]||py;return typeof b.evaluate=="function"?{evaluate(...L){const F=b.evaluate.apply(void 0,L),U=E.evaluate.apply(void 0,L);if(F!==void 0&&U!==void 0)return A(F,U,x,s.colorSpace)}}:A(b,E,x,s.colorSpace)}function Vp(s,n,a){switch(n.type){case"color":a=en.parse(a);break;case"formatted":a=wr.fromString(a.toString());break;case"resolvedImage":a=hr.fromString(a.toString());break;case"padding":a=hi.parse(a);break;default:Xt(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return Co(a,s.default,n.default)}Di.register(la,{error:[{kind:"error"},[Xe],(s,[n])=>{throw new wn(n.evaluate(s))}],typeof:[Xe,[St],(s,[n])=>le(gn(n.evaluate(s)))],"to-rgba":[se($e,4),[Dt],(s,[n])=>{const[a,h,f,v]=n.evaluate(s).rgb;return[255*a,255*h,255*f,v]}],rgb:[Dt,[$e,$e,$e],Fp],rgba:[Dt,[$e,$e,$e,$e],Fp],has:{type:rt,overloads:[[[Xe],(s,[n])=>Op(n.evaluate(s),s.properties())],[[Xe,zn],(s,[n,a])=>Op(n.evaluate(s),a.evaluate(s))]]},get:{type:St,overloads:[[[Xe],(s,[n])=>xh(n.evaluate(s),s.properties())],[[Xe,zn],(s,[n,a])=>xh(n.evaluate(s),a.evaluate(s))]]},"feature-state":[St,[Xe],(s,[n])=>xh(n.evaluate(s),s.featureState||{})],properties:[zn,[],s=>s.properties()],"geometry-type":[Xe,[],s=>s.geometryType()],id:[St,[],s=>s.id()],zoom:[$e,[],s=>s.globals.zoom],"heatmap-density":[$e,[],s=>s.globals.heatmapDensity||0],"line-progress":[$e,[],s=>s.globals.lineProgress||0],accumulated:[St,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[$e,To($e),(s,n)=>{let a=0;for(const h of n)a+=h.evaluate(s);return a}],"*":[$e,To($e),(s,n)=>{let a=1;for(const h of n)a*=h.evaluate(s);return a}],"-":{type:$e,overloads:[[[$e,$e],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[$e],(s,[n])=>-n.evaluate(s)]]},"/":[$e,[$e,$e],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[$e,[$e,$e],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[$e,[],()=>Math.LN2],pi:[$e,[],()=>Math.PI],e:[$e,[],()=>Math.E],"^":[$e,[$e,$e],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[$e,[$e],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))],log2:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[$e,[$e],(s,[n])=>Math.sin(n.evaluate(s))],cos:[$e,[$e],(s,[n])=>Math.cos(n.evaluate(s))],tan:[$e,[$e],(s,[n])=>Math.tan(n.evaluate(s))],asin:[$e,[$e],(s,[n])=>Math.asin(n.evaluate(s))],acos:[$e,[$e],(s,[n])=>Math.acos(n.evaluate(s))],atan:[$e,[$e],(s,[n])=>Math.atan(n.evaluate(s))],min:[$e,To($e),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[$e,To($e),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[$e,[$e],(s,[n])=>Math.abs(n.evaluate(s))],round:[$e,[$e],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[$e,[$e],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[$e,[$e],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[rt,[Xe,St],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[rt,[St],(s,[n])=>s.id()===n.value],"filter-type-==":[rt,[Xe],(s,[n])=>s.geometryType()===n.value],"filter-<":[rt,[Xe,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h<f}],"filter-id-<":[rt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[rt,[Xe,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h>f}],"filter-id->":[rt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[rt,[Xe,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[rt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[rt,[Xe,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[rt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[rt,[St],(s,[n])=>n.value in s.properties()],"filter-has-id":[rt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[rt,[se(Xe)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[rt,[se(St)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[rt,[Xe,se(St)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[rt,[Xe,se(St)],(s,[n,a])=>function(h,f,v,x){for(;v<=x;){const b=v+x>>1;if(f[b]===h)return!0;f[b]>h?x=b-1:v=b+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:rt,overloads:[[[rt,rt],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[To(rt),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:rt,overloads:[[[rt,rt],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[To(rt),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[rt,[rt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[rt,[Xe],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Xe,[Xe],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Xe,[Xe],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Xe,To(St),(s,n)=>n.map(a=>Kt(a.evaluate(s))).join("")],"resolved-locale":[Xe,[Ur],(s,[n])=>n.evaluate(s).resolvedLocale()]});class bh{constructor(n,a){var h;this.expression=n,this._warningHistory={},this._evaluator=new oh,this._defaultValue=a?(h=a).type==="color"&&yn(h.default)?new en(0,0,0,0):h.type==="color"?en.parse(h.default)||null:h.type==="padding"?hi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Mi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,f,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new wn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function Pc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in la}function kc(s,n){const a=new fc(la,vc,[],n?function(f){const v={color:Dt,string:Xe,number:$e,enum:Xe,boolean:rt,formatted:re,padding:N,resolvedImage:G,variableAnchorOffsetCollection:Y};return f.type==="array"?se(v[f.value]||St,f.length):v[f.type]}(n):void 0),h=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Bp(new bh(h,n)):no(a.errors)}class Sh{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!ml(a.expression)}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,f,v,x)}evaluate(n,a,h,f,v,x){return this._styleExpression.evaluate(n,a,h,f,v,x)}}class Ac{constructor(n,a,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!ml(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,f,v,x)}evaluate(n,a,h,f,v,x){return this._styleExpression.evaluate(n,a,h,f,v,x)}interpolationFactor(n,a,h){return this.interpolationType?pi.interpolationFactor(this.interpolationType,n,a,h):0}}function Th(s,n){const a=kc(s,n);if(a.result==="error")return a;const h=a.value.expression,f=_c(h);if(!f&&!ca(n))return no([new pn("","data expressions not supported")]);const v=xc(h,["zoom"]);if(!v&&!Np(n))return no([new pn("","zoom expressions not supported")]);const x=vl(h);return x||v?x instanceof pn?no([x]):x instanceof pi&&!wh(n)?no([new pn("",'"interpolate" expressions cannot be used with this property')]):Bp(x?new Ac(f?"camera":"composite",a.value,x.labels,x instanceof pi?x.interpolation:void 0):new Sh(f?"constant":"source",a.value)):no([new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yl{constructor(n,a){this._parameters=n,this._specification=a,ui(this,jt(this._parameters,this._specification))}static deserialize(n){return new yl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function vl(s){let n=null;if(s instanceof Sc)n=vl(s.result);else if(s instanceof bc){for(const a of s.args)if(n=vl(a),n)break}else(s instanceof to||s instanceof pi)&&s.input instanceof Di&&s.input.name==="zoom"&&(n=s);return n instanceof pn||s.eachChild(a=>{const h=vl(a);h instanceof pn?n=h:!n&&h?n=new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function _l(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!_l(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const fy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ch(s){if(s==null)return{filter:()=>!0,needGeometry:!1};_l(s)||(s=Mc(s));const n=kc(s,fy);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,f)=>n.value.evaluate(a,h,{},f),needGeometry:jp(s)}}function my(s,n){return s<n?-1:s>n?1:0}function jp(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(jp(s[n]))return!0;return!1}function Mc(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Eh(s[1],s[2],"=="):n==="!="?xl(Eh(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Eh(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(Mc))):n==="all"?["all"].concat(s.slice(1).map(Mc)):n==="none"?["all"].concat(s.slice(1).map(Mc).map(xl)):n==="in"?Up(s[1],s.slice(2)):n==="!in"?xl(Up(s[1],s.slice(2))):n==="has"?$p(s[1]):n==="!has"?xl($p(s[1])):n!=="within"||s;var a}function Eh(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function Up(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(my)]]:["filter-in-small",s,["literal",n]]}}function $p(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function xl(s){return["!",s]}function Ic(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let f="[";for(const v of s)f+=`${Ic(v)},`;return`${f}]`}const a=Object.keys(s).sort();let h="{";for(let f=0;f<a.length;f++)h+=`${JSON.stringify(a[f])}:${Ic(s[a[f]])},`;return`${h}}`}function Dc(s){let n="";for(const a of vr)n+=`/${Ic(s[a])}`;return n}function Gp(s){const n=s.value;return n?[new je(s.key,n,"constants have been deprecated as of v8")]:[]}function bn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Eo(s){if(Array.isArray(s))return s.map(Eo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=Eo(s[a]);return n}return bn(s)}function $r(s){const n=s.key,a=s.value,h=s.valueSpec||{},f=s.objectElementValidators||{},v=s.style,x=s.styleSpec,b=s.validateSpec;let E=[];const A=Xt(a);if(A!=="object")return[new je(n,a,`object expected, ${A} found`)];for(const L in a){const F=L.split(".")[0],U=h[F]||h["*"];let W;if(f[F])W=f[F];else if(h[F])W=b;else if(f["*"])W=f["*"];else{if(!h["*"]){E.push(new je(n,a[L],`unknown property "${L}"`));continue}W=b}E=E.concat(W({key:(n&&`${n}.`)+L,value:a[L],valueSpec:U,style:v,styleSpec:x,object:a,objectKey:L,validateSpec:b},a))}for(const L in h)f[L]||h[L].required&&h[L].default===void 0&&a[L]===void 0&&E.push(new je(n,a,`missing required property "${L}"`));return E}function ua(s){const n=s.value,a=s.valueSpec,h=s.style,f=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(Xt(n)!=="array")return[new je(v,n,`array expected, ${Xt(n)} found`)];if(a.length&&n.length!==a.length)return[new je(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new je(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let b={type:a.value,values:a.values};f.$version<7&&(b.function=a.function),Xt(a.value)==="object"&&(b=a.value);let E=[];for(let A=0;A<n.length;A++)E=E.concat(x({array:n,arrayIndex:A,value:n[A],valueSpec:b,validateSpec:s.validateSpec,style:h,styleSpec:f,key:`${v}[${A}]`}));return E}function wl(s){const n=s.key,a=s.value,h=s.valueSpec;let f=Xt(a);return f==="number"&&a!=a&&(f="NaN"),f!=="number"?[new je(n,a,`number expected, ${f} found`)]:"minimum"in h&&a<h.minimum?[new je(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new je(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function Lc(s){const n=s.valueSpec,a=bn(s.value.type);let h,f,v,x={};const b=a!=="categorical"&&s.value.property===void 0,E=!b,A=Xt(s.value.stops)==="array"&&Xt(s.value.stops[0])==="array"&&Xt(s.value.stops[0][0])==="object",L=$r({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(W){if(a==="identity")return[new je(W.key,W.value,'identity function may not have a "stops" property')];let K=[];const J=W.value;return K=K.concat(ua({key:W.key,value:J,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:F})),Xt(J)==="array"&&J.length===0&&K.push(new je(W.key,J,"array must have at least one stop")),K},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return a==="identity"&&b&&L.push(new je(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||L.push(new je(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!wh(s.valueSpec)&&L.push(new je(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!ca(s.valueSpec)?L.push(new je(s.key,s.value,"property functions not supported")):b&&!Np(s.valueSpec)&&L.push(new je(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!A||s.value.property!==void 0||L.push(new je(s.key,s.value,'"property" property is required')),L;function F(W){let K=[];const J=W.value,ae=W.key;if(Xt(J)!=="array")return[new je(ae,J,`array expected, ${Xt(J)} found`)];if(J.length!==2)return[new je(ae,J,`array length 2 expected, length ${J.length} found`)];if(A){if(Xt(J[0])!=="object")return[new je(ae,J,`object expected, ${Xt(J[0])} found`)];if(J[0].zoom===void 0)return[new je(ae,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new je(ae,J,"object stop key must have value")];if(v&&v>bn(J[0].zoom))return[new je(ae,J[0].zoom,"stop zoom values must appear in ascending order")];bn(J[0].zoom)!==v&&(v=bn(J[0].zoom),f=void 0,x={}),K=K.concat($r({key:`${ae}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:wl,value:U}}))}else K=K.concat(U({key:`${ae}[0]`,value:J[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},J));return Pc(Eo(J[1]))?K.concat([new je(`${ae}[1]`,J[1],"expressions are not allowed in function stops.")]):K.concat(W.validateSpec({key:`${ae}[1]`,value:J[1],valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function U(W,K){const J=Xt(W.value),ae=bn(W.value),ue=W.value!==null?W.value:K;if(h){if(J!==h)return[new je(W.key,ue,`${J} stop domain type must match previous stop domain type ${h}`)]}else h=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new je(W.key,ue,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&a!=="categorical"){let ve=`number expected, ${J} found`;return ca(n)&&a===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(W.key,ue,ve)]}return a!=="categorical"||J!=="number"||isFinite(ae)&&Math.floor(ae)===ae?a!=="categorical"&&J==="number"&&f!==void 0&&ae<f?[new je(W.key,ue,"stop domain values must appear in ascending order")]:(f=ae,a==="categorical"&&ae in x?[new je(W.key,ue,"stop domain values must be unique")]:(x[ae]=!0,[])):[new je(W.key,ue,`integer expected, found ${ae}`)]}}function Po(s){const n=(s.expressionContext==="property"?Th:kc)(Eo(s.value),s.valueSpec);if(n.result==="error")return n.value.map(h=>new je(`${s.key}${h.key}`,s.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new je(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ml(a))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ml(a))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!xc(a,["zoom","feature-state"]))return[new je(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!_c(a))return[new je(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bl(s){const n=s.key,a=s.value,h=s.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(bn(a))===-1&&f.push(new je(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(bn(a))===-1&&f.push(new je(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function ha(s){return _l(Eo(s.value))?Po(ui({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qp(s)}function qp(s){const n=s.value,a=s.key;if(Xt(n)!=="array")return[new je(a,n,`array expected, ${Xt(n)} found`)];const h=s.styleSpec;let f,v=[];if(n.length<1)return[new je(a,n,"filter array must have at least 1 element")];switch(v=v.concat(bl({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),bn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&bn(n[1])==="$type"&&v.push(new je(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new je(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Xt(n[1]),f!=="string"&&v.push(new je(`${a}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=Xt(n[x]),bn(n[1])==="$type"?v=v.concat(bl({key:`${a}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new je(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(qp({key:`${a}[${x}]`,value:n[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=Xt(n[1]),n.length!==2?v.push(new je(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new je(`${a}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=Xt(n[1]),n.length!==2?v.push(new je(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new je(`${a}[1]`,n[1],`object expected, ${f} found`))}return v}function Zp(s,n){const a=s.key,h=s.validateSpec,f=s.style,v=s.styleSpec,x=s.value,b=s.objectKey,E=v[`${n}_${s.layerType}`];if(!E)return[];const A=b.match(/^(.*)-transition$/);if(n==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return h({key:a,value:x,valueSpec:v.transition,style:f,styleSpec:v});const L=s.valueSpec||E[b];if(!L)return[new je(a,x,`unknown property "${b}"`)];let F;if(Xt(x)==="string"&&ca(L)&&!L.tokens&&(F=/^{([^}]+)}$/.exec(x)))return[new je(a,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const U=[];return s.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&U.push(new je(a,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&yn(Eo(x))&&bn(x.type)==="identity"&&U.push(new je(a,x,'"text-font" does not support identity functions'))),U.concat(h({key:s.key,value:x,valueSpec:L,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function Wp(s){return Zp(s,"paint")}function Hp(s){return Zp(s,"layout")}function Kp(s){let n=[];const a=s.value,h=s.key,f=s.style,v=s.styleSpec;a.type||a.ref||n.push(new je(h,a,'either "type" or "ref" is required'));let x=bn(a.type);const b=bn(a.ref);if(a.id){const E=bn(a.id);for(let A=0;A<s.arrayIndex;A++){const L=f.layers[A];bn(L.id)===E&&n.push(new je(h,a.id,`duplicate layer id "${a.id}", previously used at line ${L.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in a&&n.push(new je(h,a[A],`"${A}" is prohibited for ref layers`))}),f.layers.forEach(A=>{bn(A.id)===b&&(E=A)}),E?E.ref?n.push(new je(h,a.ref,"ref cannot reference another ref layer")):x=bn(E.type):n.push(new je(h,a.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(a.source){const E=f.sources&&f.sources[a.source],A=E&&bn(E.type);E?A==="vector"&&x==="raster"?n.push(new je(h,a.source,`layer "${a.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?n.push(new je(h,a.source,`layer "${a.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?n.push(new je(h,a.source,`layer "${a.id}" requires a vector source`)):A!=="vector"||a["source-layer"]?A==="raster-dem"&&x!=="hillshade"?n.push(new je(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||A==="geojson"&&E.lineMetrics||n.push(new je(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new je(h,a.source,`source "${a.source}" not found`))}else n.push(new je(h,a,'missing required property "source"'));return n=n.concat($r({key:h,value:a,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:ha,layout:E=>$r({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Hp(ui({layerType:x},A))}}),paint:E=>$r({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Wp(ui({layerType:x},A))}})}})),n}function hs(s){const n=s.value,a=s.key,h=Xt(n);return h!=="string"?[new je(a,n,`string expected, ${h} found`)]:[]}const Sl={promoteId:function({key:s,value:n}){if(Xt(n)==="string")return hs({key:s,value:n});{const a=[];for(const h in n)a.push(...hs({key:`${s}.${h}`,value:n[h]}));return a}}};function fi(s){const n=s.value,a=s.key,h=s.styleSpec,f=s.style,v=s.validateSpec;if(!n.type)return[new je(a,n,'"type" is required')];const x=bn(n.type);let b;switch(x){case"vector":case"raster":return b=$r({key:a,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:Sl,validateSpec:v}),b;case"raster-dem":return b=function(E){var A;const L=(A=E.sourceName)!==null&&A!==void 0?A:"",F=E.value,U=E.styleSpec,W=U.source_raster_dem,K=E.style;let J=[];const ae=Xt(F);if(F===void 0)return J;if(ae!=="object")return J.push(new je("source_raster_dem",F,`object expected, ${ae} found`)),J;const ue=bn(F.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const xe in F)!ue&&ve.includes(xe)?J.push(new je(xe,F[xe],`In "${L}": "${xe}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):W[xe]?J=J.concat(E.validateSpec({key:xe,value:F[xe],valueSpec:W[xe],validateSpec:E.validateSpec,style:K,styleSpec:U})):J.push(new je(xe,F[xe],`unknown property "${xe}"`));return J}({sourceName:a,value:n,style:s.style,styleSpec:h,validateSpec:v}),b;case"geojson":if(b=$r({key:a,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:v,objectElementValidators:Sl}),n.cluster)for(const E in n.clusterProperties){const[A,L]=n.clusterProperties[E],F=typeof A=="string"?[A,["accumulated"],["get",E]]:A;b.push(...Po({key:`${a}.${E}.map`,value:L,validateSpec:v,expressionContext:"cluster-map"})),b.push(...Po({key:`${a}.${E}.reduce`,value:F,validateSpec:v,expressionContext:"cluster-reduce"}))}return b;case"video":return $r({key:a,value:n,valueSpec:h.source_video,style:f,validateSpec:v,styleSpec:h});case"image":return $r({key:a,value:n,valueSpec:h.source_image,style:f,validateSpec:v,styleSpec:h});case"canvas":return[new je(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bl({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:h})}}function Tl(s){const n=s.value,a=s.styleSpec,h=a.light,f=s.style;let v=[];const x=Xt(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("light",n,`object expected, ${x} found`)]),v;for(const b in n){const E=b.match(/^(.*)-transition$/);v=v.concat(E&&h[E[1]]&&h[E[1]].transition?s.validateSpec({key:b,value:n[b],valueSpec:a.transition,validateSpec:s.validateSpec,style:f,styleSpec:a}):h[b]?s.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new je(b,n[b],`unknown property "${b}"`)])}return v}function Xp(s){const n=s.value,a=s.styleSpec,h=a.terrain,f=s.style;let v=[];const x=Xt(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",n,`object expected, ${x} found`)]),v;for(const b in n)v=v.concat(h[b]?s.validateSpec({key:b,value:n[b],valueSpec:h[b],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new je(b,n[b],`unknown property "${b}"`)]);return v}function Yp(s){let n=[];const a=s.value,h=s.key;if(Array.isArray(a)){const f=[],v=[];for(const x in a)a[x].id&&f.includes(a[x].id)&&n.push(new je(h,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),f.push(a[x].id),a[x].url&&v.includes(a[x].url)&&n.push(new je(h,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),n=n.concat($r({key:`${h}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return hs({key:h,value:a})}const Qp={"*":()=>[],array:ua,boolean:function(s){const n=s.value,a=s.key,h=Xt(n);return h!=="boolean"?[new je(a,n,`boolean expected, ${h} found`)]:[]},number:wl,color:function(s){const n=s.key,a=s.value,h=Xt(a);return h!=="string"?[new je(n,a,`color expected, ${h} found`)]:en.parse(String(a))?[]:[new je(n,a,`color expected, "${a}" found`)]},constants:Gp,enum:bl,filter:ha,function:Lc,layer:Kp,object:$r,source:fi,light:Tl,terrain:Xp,string:hs,formatted:function(s){return hs(s).length===0?[]:Po(s)},resolvedImage:function(s){return hs(s).length===0?[]:Po(s)},padding:function(s){const n=s.key,a=s.value;if(Xt(a)==="array"){if(a.length<1||a.length>4)return[new je(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let f=[];for(let v=0;v<a.length;v++)f=f.concat(s.validateSpec({key:`${n}[${v}]`,value:a[v],validateSpec:s.validateSpec,valueSpec:h}));return f}return wl({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,a=s.value,h=Xt(a),f=s.styleSpec;if(h!=="array"||a.length<1||a.length%2!=0)return[new je(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(bl({key:`${n}[${x}]`,value:a[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(ua({key:`${n}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:f}));return v},sprite:Yp};function Ms(s){const n=s.value,a=s.valueSpec,h=s.styleSpec;return s.validateSpec=Ms,a.expression&&yn(bn(n))?Lc(s):a.expression&&Pc(Eo(n))?Po(s):a.type&&Qp[a.type]?Qp[a.type](s):$r(ui({},s,{valueSpec:a.type?h[a.type]:a}))}function Jp(s){const n=s.value,a=s.key,h=hs(s);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new je(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new je(a,n,'"glyphs" url must include a "{range}" token'))),h}function Li(s,n=Ae){let a=[];return a=a.concat(Ms({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Ms,objectElementValidators:{glyphs:Jp,"*":()=>[]}})),s.constants&&(a=a.concat(Gp({key:"constants",value:s.constants,style:s,styleSpec:n,validateSpec:Ms}))),zc(a)}function Is(s){return function(n){return s({...n,validateSpec:Ms})}}function zc(s){return[].concat(s).sort((n,a)=>n.line-a.line)}function Ds(s){return function(...n){return zc(s.apply(this,n))}}Li.source=Ds(Is(fi)),Li.sprite=Ds(Is(Yp)),Li.glyphs=Ds(Is(Jp)),Li.light=Ds(Is(Tl)),Li.terrain=Ds(Is(Xp)),Li.layer=Ds(Is(Kp)),Li.filter=Ds(Is(ha)),Li.paintProperty=Ds(Is(Wp)),Li.layoutProperty=Ds(Is(Hp));const Ls=Li,gy=Ls.light,Ph=Ls.paintProperty,ef=Ls.layoutProperty;function Rc(s,n){let a=!1;if(n&&n.length)for(const h of n)s.fire(new ki(new Error(h.message))),a=!0;return a}class da{constructor(n,a,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const A=x[3+E],L=x[3+E+1];f.push(A===L?null:x.subarray(A,L))}const b=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,f,v){this._forEachCell(a,h,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,f,v,x){this.cells[v].push(x)}query(n,a,h,f,v){const x=this.min,b=this.max;if(n<=x&&a<=x&&b<=h&&b<=f&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(n,a,h,f,this._queryCell,E,{},v),E}}_queryCell(n,a,h,f,v,x,b,E){const A=this.cells[v];if(A!==null){const L=this.keys,F=this.bboxes;for(let U=0;U<A.length;U++){const W=A[U];if(b[W]===void 0){const K=4*W;(E?E(F[K+0],F[K+1],F[K+2],F[K+3]):n<=F[K+2]&&a<=F[K+3]&&h>=F[K+0]&&f>=F[K+1])?(b[W]=!0,x.push(L[W])):b[W]=!1}}}}_forEachCell(n,a,h,f,v,x,b,E){const A=this._convertToCellCoord(n),L=this._convertToCellCoord(a),F=this._convertToCellCoord(h),U=this._convertToCellCoord(f);for(let W=A;W<=F;W++)for(let K=L;K<=U;K++){const J=this.d*K+W;if((!E||E(this._convertFromCellCoord(W),this._convertFromCellCoord(K),this._convertFromCellCoord(W+1),this._convertFromCellCoord(K+1)))&&v.call(this,n,a,h,f,J,x,b,E))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(a+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const b=n[x];f[3+x]=v,f.set(b,v),v+=b.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new da(n.buffer)}}const zs={};function it(s,n,a={}){if(zs[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),zs[s]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}it("Object",Object),it("TransferableGridIndex",da),it("Color",en),it("Error",Error),it("AJAXError",cr),it("ResolvedImage",hr),it("StylePropertyFunction",yl),it("StyleExpression",bh,{omit:["_evaluator"]}),it("ZoomDependentExpression",Ac),it("ZoomConstantExpression",Sh),it("CompoundExpression",Di,{omit:["_evaluate"]});for(const s in la)la[s]._classRegistryKey||it(`Expression_${s}`,la[s]);function Fc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ro(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(Fc(s)||We(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return n&&n.push(a.buffer),a}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const h of s)a.push(ro(h,n));return a}if(typeof s=="object"){const a=s.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!zs[h])throw new Error(`${h} is not registered.`);const f=a.serialize?a.serialize(s,n):{};if(a.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||zs[h].omit.indexOf(v)>=0)continue;const x=s[v];f[v]=zs[h].shallow.indexOf(v)>=0?x:ro(x,n)}s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof s)}function pa(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||Fc(s)||We(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(pa);if(typeof s=="object"){const n=s.$name||"Object";if(!zs[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=zs[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const h=Object.create(a.prototype);for(const f of Object.keys(s)){if(f==="$name")continue;const v=s[f];h[f]=zs[n].shallow.indexOf(f)>=0?v:pa(v)}return h}throw new Error("can't deserialize object of type "+typeof s)}class tf{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Je={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function kh(s){for(const n of s)if(Mh(n.charCodeAt(0)))return!0;return!1}function Ah(s){for(const n of s)if(!yy(n.charCodeAt(0)))return!1;return!0}function yy(s){return!(Je.Arabic(s)||Je["Arabic Supplement"](s)||Je["Arabic Extended-A"](s)||Je["Arabic Presentation Forms-A"](s)||Je["Arabic Presentation Forms-B"](s))}function Mh(s){return!(s!==746&&s!==747&&(s<4352||!(Je["Bopomofo Extended"](s)||Je.Bopomofo(s)||Je["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Je["CJK Compatibility Ideographs"](s)||Je["CJK Compatibility"](s)||Je["CJK Radicals Supplement"](s)||Je["CJK Strokes"](s)||!(!Je["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Je["CJK Unified Ideographs Extension A"](s)||Je["CJK Unified Ideographs"](s)||Je["Enclosed CJK Letters and Months"](s)||Je["Hangul Compatibility Jamo"](s)||Je["Hangul Jamo Extended-A"](s)||Je["Hangul Jamo Extended-B"](s)||Je["Hangul Jamo"](s)||Je["Hangul Syllables"](s)||Je.Hiragana(s)||Je["Ideographic Description Characters"](s)||Je.Kanbun(s)||Je["Kangxi Radicals"](s)||Je["Katakana Phonetic Extensions"](s)||Je.Katakana(s)&&s!==12540||!(!Je["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Je["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Je["Unified Canadian Aboriginal Syllabics"](s)||Je["Unified Canadian Aboriginal Syllabics Extended"](s)||Je["Vertical Forms"](s)||Je["Yijing Hexagram Symbols"](s)||Je["Yi Syllables"](s)||Je["Yi Radicals"](s))))}function nf(s){return!(Mh(s)||function(n){return!!(Je["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Je["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Je["Letterlike Symbols"](n)||Je["Number Forms"](n)||Je["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Je["Control Pictures"](n)&&n!==9251||Je["Optical Character Recognition"](n)||Je["Enclosed Alphanumerics"](n)||Je["Geometric Shapes"](n)||Je["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Je["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Je["CJK Symbols and Punctuation"](n)||Je.Katakana(n)||Je["Private Use Area"](n)||Je["CJK Compatibility Forms"](n)||Je["Small Form Variants"](n)||Je["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function rf(s){return s>=1424&&s<=2303||Je["Arabic Presentation Forms-A"](s)||Je["Arabic Presentation Forms-B"](s)}function sf(s,n){return!(!n&&rf(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Je.Khmer(s))}function vy(s){for(const n of s)if(rf(n.charCodeAt(0)))return!0;return!1}const Ih="deferred",Dh="loading",Lh="loaded";let zh=null,Gr="unavailable",io=null;const Cl=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(Gr="error"),zh&&zh(s)};function Rh(){El.fire(new Pi("pluginStateChange",{pluginStatus:Gr,pluginURL:io}))}const El=new dn,Fh=function(){return Gr},of=function(){if(Gr!==Ih||!io)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gr=Dh,Rh(),io&&ai({url:io},s=>{s?Cl(s):(Gr=Lh,Rh())})},mi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Gr===Lh||mi.applyArabicShaping!=null,isLoading:()=>Gr===Dh,setState(s){if(!Pt())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Gr=s.pluginStatus,io=s.pluginURL},isParsed(){if(!Pt())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return mi.applyArabicShaping!=null&&mi.processBidirectionalText!=null&&mi.processStyledBidirectionalText!=null},getPluginURL(){if(!Pt())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return io}};class cn{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tf,this.transition={})}isSupportedScript(n){return function(a,h){for(const f of a)if(!sf(f.charCodeAt(0),h))return!1;return!0}(n,mi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Oc{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,f){if(yn(h))return new yl(h,f);if(Pc(h)){const v=Th(h,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return f.type==="color"&&typeof h=="string"?v=en.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Mi.parse(h)):v=hi.parse(h),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class Oh{constructor(n){this.property=n,this.value=new Oc(n,void 0)}transitioned(n,a){return new lf(this.property,this.value,a,we({},n.transition,this.transition),n.now)}untransitioned(){return new lf(this.property,this.value,null,{},0)}}class af{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return nt(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Oh(this._values[n].property)),this._values[n].value=new Oc(this._values[n].property,a===null?void 0:nt(a))}getTransition(n){return nt(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Oh(this._values[n].property)),this._values[n].transition=nt(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const f=this.getTransition(a);f!==void 0&&(n[`${a}-transition`]=f)}return n}transitioned(n,a){const h=new cf(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,a._values[f]);return h}untransitioned(){const n=new cf(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class lf{constructor(n,a,h,f,v){this.property=n,this.value=a,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const f=n.now||0,v=this.value.possiblyEvaluate(n,a,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,a,h);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,h),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const A=E*E,L=A*E;return 4*(E<.5?L:3*(E-A)+L-.75)}(b))}}return v}}class cf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const f=new Bc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class _y{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return nt(this._values[n].value)}setValue(n,a){this._values[n]=new Oc(this._values[n].property,a===null?void 0:nt(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const f=new Bc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,h);return f}}class Mr{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,f){return this.property.evaluate(this.value,this.parameters,n,a,h,f)}}class Bc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ft{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,h){const f=di[this.specification.type];return f?f(n,a,h):n}}class Tt{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,f){return new Mr(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,f)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Mr(this,{kind:"constant",value:void 0},n.parameters);const f=di[this.specification.type];if(f){const v=f(n.value.value,a.value.value,h);return new Mr(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,a,h,f,v,x){return n.kind==="constant"?n.value:n.evaluate(a,h,f,v,x)}}class Pl extends Tt{possiblyEvaluate(n,a,h,f){if(n.value===void 0)return new Mr(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,a);return new Mr(this,{kind:"constant",value:b},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Mr(this,{kind:"constant",value:v},a)}return new Mr(this,n.expression,a)}evaluate(n,a,h,f,v,x){if(n.kind==="source"){const b=n.evaluate(a,h,f,v,x);return this._calculate(b,b,b,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,f),n.evaluate({zoom:Math.floor(a.zoom)},h,f),n.evaluate({zoom:Math.floor(a.zoom)+1},h,f),a):n.value}_calculate(n,a,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Bh{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,f);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new cn(Math.floor(a.zoom-1),a)),n.expression.evaluate(new cn(Math.floor(a.zoom),a)),n.expression.evaluate(new cn(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Nh{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,f){return!!n.expression.evaluate(a,null,{},h,f)}interpolate(){return!1}}class Rn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const f=this.defaultPropertyValues[a]=new Oc(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new Oh(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=f.possiblyEvaluate({})}}}it("DataDrivenProperty",Tt),it("DataConstantProperty",ft),it("CrossFadedDataDrivenProperty",Pl),it("CrossFadedProperty",Bh),it("ColorRampProperty",Nh);const Vh="-transition";class zi extends dn{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new _y(a.layout)),a.paint)){this._transitionablePaint=new af(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bc(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(ef,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(Vh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(Ph,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(Vh))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const E=this._transitionablePaint._values[n].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,b,E)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),pt(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,f,v={}){return(!v||v.validate!==!1)&&Rc(this,n.call(Ls,{key:a,layerType:this.type,objectKey:h,value:f,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Mr&&ca(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const uf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ko{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _n(s,n=1){let a=0,h=0;return{members:s.map(f=>{const v=uf[f.type].BYTES_PER_ELEMENT,x=a=fa(a,Math.max(n,v)),b=f.components||1;return h=Math.max(h,v),a+=v*b,{name:f.name,type:f.type,components:b,offset:x}}),size:fa(a,Math.max(h,n)),alignment:n}}function fa(s,n){return Math.ceil(s/n)*n}class kl extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.int16[f+0]=a,this.int16[f+1]=h,n}}kl.prototype.bytesPerElement=4,it("StructArrayLayout2i4",kl);class Al extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=f,n}}Al.prototype.bytesPerElement=6,it("StructArrayLayout3i6",Al);class Ao extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=v,n}}Ao.prototype.bytesPerElement=8,it("StructArrayLayout4i8",Ao);class jh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,b){const E=6*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=b,n}}jh.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",jh);class Uh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,b){const E=4*n,A=8*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.uint8[A+4]=f,this.uint8[A+5]=v,this.uint8[A+6]=x,this.uint8[A+7]=b,n}}Uh.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",Uh);class ma extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.float32[f+0]=a,this.float32[f+1]=h,n}}ma.prototype.bytesPerElement=8,it("StructArrayLayout2f8",ma);class $h extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,b,E,A,L){const F=this.length;return this.resize(F+1),this.emplace(F,n,a,h,f,v,x,b,E,A,L)}emplace(n,a,h,f,v,x,b,E,A,L,F){const U=10*n;return this.uint16[U+0]=a,this.uint16[U+1]=h,this.uint16[U+2]=f,this.uint16[U+3]=v,this.uint16[U+4]=x,this.uint16[U+5]=b,this.uint16[U+6]=E,this.uint16[U+7]=A,this.uint16[U+8]=L,this.uint16[U+9]=F,n}}$h.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",$h);class Gh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,b,E,A,L,F,U){const W=this.length;return this.resize(W+1),this.emplace(W,n,a,h,f,v,x,b,E,A,L,F,U)}emplace(n,a,h,f,v,x,b,E,A,L,F,U,W){const K=12*n;return this.int16[K+0]=a,this.int16[K+1]=h,this.int16[K+2]=f,this.int16[K+3]=v,this.uint16[K+4]=x,this.uint16[K+5]=b,this.uint16[K+6]=E,this.uint16[K+7]=A,this.int16[K+8]=L,this.int16[K+9]=F,this.int16[K+10]=U,this.int16[K+11]=W,n}}Gh.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",Gh);class Yt extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=f,n}}Yt.prototype.bytesPerElement=12,it("StructArrayLayout3f12",Yt);class g extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}g.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",g);class r extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,b,E,A){const L=this.length;return this.resize(L+1),this.emplace(L,n,a,h,f,v,x,b,E,A)}emplace(n,a,h,f,v,x,b,E,A,L){const F=10*n,U=5*n;return this.int16[F+0]=a,this.int16[F+1]=h,this.int16[F+2]=f,this.int16[F+3]=v,this.int16[F+4]=x,this.int16[F+5]=b,this.uint32[U+3]=E,this.uint16[F+8]=A,this.uint16[F+9]=L,n}}r.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",r);class c extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,b){const E=6*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=b,n}}c.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",c);class d extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,h,f,v)}emplace(n,a,h,f,v,x){const b=4*n,E=8*n;return this.float32[b+0]=a,this.float32[b+1]=h,this.float32[b+2]=f,this.int16[E+6]=v,this.int16[E+7]=x,n}}d.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",d);class m extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=12*n,b=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[b+1]=f,this.float32[b+2]=v,n}}m.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",m);class _ extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=f,n}}_.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",_);class T extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue){const ve=this.length;return this.resize(ve+1),this.emplace(ve,n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue)}emplace(n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue,ve){const pe=24*n,xe=12*n,Te=48*n;return this.int16[pe+0]=a,this.int16[pe+1]=h,this.uint16[pe+2]=f,this.uint16[pe+3]=v,this.uint32[xe+2]=x,this.uint32[xe+3]=b,this.uint32[xe+4]=E,this.uint16[pe+10]=A,this.uint16[pe+11]=L,this.uint16[pe+12]=F,this.float32[xe+7]=U,this.float32[xe+8]=W,this.uint8[Te+36]=K,this.uint8[Te+37]=J,this.uint8[Te+38]=ae,this.uint32[xe+10]=ue,this.int16[pe+22]=ve,n}}T.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class C extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue,ve,pe,xe,Te,Le,et,ct,Qe,Ke,Ue,st){const qe=this.length;return this.resize(qe+1),this.emplace(qe,n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue,ve,pe,xe,Te,Le,et,ct,Qe,Ke,Ue,st)}emplace(n,a,h,f,v,x,b,E,A,L,F,U,W,K,J,ae,ue,ve,pe,xe,Te,Le,et,ct,Qe,Ke,Ue,st,qe){const Ne=32*n,wt=16*n;return this.int16[Ne+0]=a,this.int16[Ne+1]=h,this.int16[Ne+2]=f,this.int16[Ne+3]=v,this.int16[Ne+4]=x,this.int16[Ne+5]=b,this.int16[Ne+6]=E,this.int16[Ne+7]=A,this.uint16[Ne+8]=L,this.uint16[Ne+9]=F,this.uint16[Ne+10]=U,this.uint16[Ne+11]=W,this.uint16[Ne+12]=K,this.uint16[Ne+13]=J,this.uint16[Ne+14]=ae,this.uint16[Ne+15]=ue,this.uint16[Ne+16]=ve,this.uint16[Ne+17]=pe,this.uint16[Ne+18]=xe,this.uint16[Ne+19]=Te,this.uint16[Ne+20]=Le,this.uint16[Ne+21]=et,this.uint16[Ne+22]=ct,this.uint32[wt+12]=Qe,this.float32[wt+13]=Ke,this.float32[wt+14]=Ue,this.uint16[Ne+30]=st,this.uint16[Ne+31]=qe,n}}C.prototype.bytesPerElement=64,it("StructArrayLayout8i15ui1ul2f2ui64",C);class P extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}P.prototype.bytesPerElement=4,it("StructArrayLayout1f4",P);class D extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.uint16[6*n+0]=a,this.float32[v+1]=h,this.float32[v+2]=f,n}}D.prototype.bytesPerElement=12,it("StructArrayLayout1ui2f12",D);class z extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=f,n}}z.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",z);class R extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.uint16[f+0]=a,this.uint16[f+1]=h,n}}R.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",R);class q extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}q.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",q);class te extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=v,n}}te.prototype.bytesPerElement=16,it("StructArrayLayout4f16",te);class ee extends ko{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ee.prototype.size=20;class ie extends r{get(n){return new ee(this,n)}}it("CollisionBoxArray",ie);class Q extends ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Q.prototype.size=48;class me extends T{get(n){return new Q(this,n)}}it("PlacedSymbolArray",me);class be extends ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}be.prototype.size=64;class ce extends C{get(n){return new be(this,n)}}it("SymbolInstanceArray",ce);class ge extends P{getoffsetX(n){return this.float32[1*n+0]}}it("GlyphOffsetArray",ge);class Ce extends Al{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}it("SymbolLineVertexArray",Ce);class Ee extends ko{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ee.prototype.size=12;class De extends D{get(n){return new Ee(this,n)}}it("TextAnchorOffsetArray",De);class Be extends ko{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Be.prototype.size=8;class Re extends z{get(n){return new Be(this,n)}}it("FeatureIndexArray",Re);class Ve extends kl{}class lt extends kl{}class Rt extends kl{}class He extends jh{}class Ct extends Uh{}class ut extends ma{}class tn extends $h{}class zt extends Gh{}class It extends Yt{}class Ft extends g{}class kn extends c{}class an extends m{}class dr extends _{}class Kn extends R{}const Fn=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:gi}=Fn;class un{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,f){let v=this.segments[this.segments.length-1];return n>un.MAX_VERTEX_ARRAY_LENGTH&&Ze(`Max vertices per segment is ${un.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>un.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,f){return new un([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function ds(s,n){return 256*(s=Se(Math.floor(s),0,255))+Se(Math.floor(n),0,255)}un.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",un);const ps=_n([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var so={exports:{}},Mo={exports:{}};Mo.exports=function(s,n){var a,h,f,v,x,b,E,A;for(h=s.length-(a=3&s.length),f=n,x=3432918353,b=461845907,A=0;A<h;)E=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,f=27492+(65535&(v=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,a){case 3:E^=(255&s.charCodeAt(A+2))<<16;case 2:E^=(255&s.charCodeAt(A+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&s.charCodeAt(A)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var ga=Mo.exports,br={exports:{}};br.exports=function(s,n){for(var a,h=s.length,f=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:f^=(255&s.charCodeAt(v+2))<<16;case 2:f^=(255&s.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var pr=ga,Ir=br.exports;so.exports=pr,so.exports.murmur3=pr,so.exports.murmur2=Ir;var Io=w(so.exports);class An{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,f){this.ids.push(Xn(n)),this.positions.push(a,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Xn(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=a?f=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return qr(h,f,0,h.length-1),a&&a.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const a=new An;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function Xn(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Io(String(s))}function qr(s,n,a,h){for(;a<h;){const f=s[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(s[v]<f);do x--;while(s[x]>f);if(v>=x)break;Mn(s,v,x),Mn(n,3*v,3*x),Mn(n,3*v+1,3*x+1),Mn(n,3*v+2,3*x+2)}x-a<h-x?(qr(s,n,a,x),a=x+1):(qr(s,n,x+1,h),h=x)}}function Mn(s,n,a){const h=s[n];s[n]=s[a],s[a]=h}it("FeaturePositionMap",An);class Do{constructor(n,a){this.gl=n.gl,this.location=a}}class Nc extends Do{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class hf extends Do{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class df extends Do{constructor(n,a){super(n,a),this.current=en.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const xy=new Float32Array(16);function qh(s){return[ds(255*s.r,255*s.g),ds(255*s.b,255*s.a)]}class fs{constructor(n,a,h){this.value=n,this.uniformNames=a.map(f=>`u_${f}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new df(n,a):new Nc(n,a)}}class Lo{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new hf(n,a):new Nc(n,a)}}class ms{constructor(n,a,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,a,h,f,v){const x=this.paintVertexArray.length,b=this.expression.evaluate(new cn(0),a,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,b)}updatePaintArray(n,a,h,f){const v=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const f=qh(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<a;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ri{constructor(n,a,h,f,v,x){this.expression=n,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,h,f,v){const x=this.expression.evaluate(new cn(this.zoom),a,{},f,[],v),b=this.expression.evaluate(new cn(this.zoom+1),a,{},f,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,x,b)}updatePaintArray(n,a,h,f){const v=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,h,f){if(this.type==="color"){const v=qh(h),x=qh(f);for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,f=Se(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,a,h){return new Nc(n,a)}}class gs{constructor(n,a,h,f,v,x){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,f,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,f){if(!f||!h)return;const{min:v,mid:x,max:b}=h,E=f[v],A=f[x],L=f[b];if(E&&A&&L)for(let F=n;F<a;F++)this.zoomInPaintVertexArray.emplace(F,A.tl[0],A.tl[1],A.br[0],A.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],A.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ps.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ps.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zh{constructor(n,a,h){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Mr&&ca(x.property.specification)))continue;const b=DM(v,n.type),E=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,F=x.property.specification["property-type"],U=F==="cross-faded"||F==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=U?new Lo(E.value,b):new fs(E.value,b,A),f.push(`/u_${v}`);else if(E.kind==="source"||U){const W=k1(v,A,"source");this.binders[v]=U?new gs(E,A,L,a,W,n.id):new ms(E,b,A,W),f.push(`/a_${v}`)}else{const W=k1(v,A,"composite");this.binders[v]=new Ri(E,b,A,L,a,W),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof ms||a instanceof Ri?a.maxValue:0}populatePaintArrays(n,a,h,f,v){for(const x in this.binders){const b=this.binders[x];(b instanceof ms||b instanceof Ri||b instanceof gs)&&b.populatePaintArray(n,a,h,f,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const f=this.binders[h];f instanceof Lo&&f.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,f,v){let x=!1;for(const b in n){const E=a.getPositions(b);for(const A of E){const L=h.feature(A.index);for(const F in this.binders){const U=this.binders[F];if((U instanceof ms||U instanceof Ri||U instanceof gs)&&U.expression.isStateDependent===!0){const W=f.paint.get(F);U.expression=W.value,U.updatePaintArray(A.start,A.end,L,n[b],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof fs||h instanceof Lo)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof ms||h instanceof Ri)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof gs)for(let f=0;f<ps.members.length;f++)n.push(ps.members[f].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof fs||h instanceof Lo||h instanceof Ri)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof fs||v instanceof Lo||v instanceof Ri){for(const x of v.uniformNames)if(a[x]){const b=v.getBinding(n,a[x],x);h.push({name:x,property:f,binding:b})}}}return h}setUniforms(n,a,h,f){for(const{name:v,property:x,binding:b}of a)this.binders[x].setUniform(b,f,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof gs){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof ms||h instanceof Ri)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof ms||h instanceof Ri||h instanceof gs)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof ms||a instanceof Ri||a instanceof gs)&&a.destroy()}}}class Rs{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new Zh(f,a,h);this.needsUpload=!1,this._featureMap=new An,this._bufferOffset=0}populatePaintArrays(n,a,h,f,v,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,a,f,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,f){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function DM(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function k1(s,n,a){const h={color:{source:ma,composite:te},number:{source:P,composite:ma}},f=function(v){return{"line-pattern":{source:tn,composite:tn},"fill-pattern":{source:tn,composite:tn},"fill-extrusion-pattern":{source:tn,composite:tn}}[v]}(s);return f&&f[a]||h[n][a]}it("ConstantBinder",fs),it("CrossFadedConstantBinder",Lo),it("SourceExpressionBinder",ms),it("CrossFadedCompositeBinder",gs),it("CompositeExpressionBinder",Ri),it("ProgramConfiguration",Zh,{omit:["_buffers"]}),it("ProgramConfigurationSet",Rs);const qn=8192,wy=Math.pow(2,14)-1,A1=-wy-1;function Ml(s){const n=qn/s.extent,a=s.loadGeometry();for(let h=0;h<a.length;h++){const f=a[h];for(let v=0;v<f.length;v++){const x=f[v],b=Math.round(x.x*n),E=Math.round(x.y*n);x.x=Se(b,A1,wy),x.y=Se(E,A1,wy),(b<x.x||b>x.x+1||E<x.y||E>x.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Il(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Ml(s):[]}}function pf(s,n,a,h,f){s.emplaceBack(2*n+(h+1)/2,2*a+(f+1)/2)}class by{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new lt,this.indexArray=new dr,this.segments=new un,this.programConfigurations=new Rs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const f=this.layers[0],v=[];let x=null,b=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:E,id:A,index:L,sourceLayerIndex:F}of n){const U=this.layers[0]._featureFilter.needGeometry,W=Il(E,U);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),W,h))continue;const K=b?x.evaluate(W,{},h):void 0,J={id:A,properties:E.properties,type:E.type,sourceLayerIndex:F,index:L,geometry:U?W.geometry:Ml(E),patterns:{},sortKey:K};v.push(J)}b&&v.sort((E,A)=>E.sortKey-A.sortKey);for(const E of v){const{geometry:A,index:L,sourceLayerIndex:F}=E,U=n[L].feature;this.addFeature(E,A,L,h),a.featureIndex.insert(U,A,L,F,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,f){for(const v of a)for(const x of v){const b=x.x,E=x.y;if(b<0||b>=qn||E<0||E>=qn)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=A.vertexLength;pf(this.layoutVertexArray,b,E,-1,-1),pf(this.layoutVertexArray,b,E,1,-1),pf(this.layoutVertexArray,b,E,1,1),pf(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function M1(s,n){for(let a=0;a<s.length;a++)if(Vc(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(Vc(s,n[a]))return!0;return!!Sy(s,n)}function LM(s,n,a){return!!Vc(s,n)||!!Ty(n,s,a)}function I1(s,n){if(s.length===1)return L1(n,s[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let f=0;f<h.length;f++)if(Vc(s,h[f]))return!0}for(let a=0;a<s.length;a++)if(L1(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(Sy(s,n[a]))return!0;return!1}function zM(s,n,a){if(s.length>1){if(Sy(s,n))return!0;for(let h=0;h<n.length;h++)if(Ty(n[h],s,a))return!0}for(let h=0;h<s.length;h++)if(Ty(s[h],n,a))return!0;return!1}function Sy(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const h=s[a],f=s[a+1];for(let v=0;v<n.length-1;v++)if(RM(h,f,n[v],n[v+1]))return!0}return!1}function RM(s,n,a,h){return dt(s,a,h)!==dt(n,a,h)&&dt(s,n,a)!==dt(s,n,h)}function Ty(s,n,a){const h=a*a;if(n.length===1)return s.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(D1(s,n[f-1],n[f])<h)return!0;return!1}function D1(s,n,a){const h=n.distSqr(a);if(h===0)return s.distSqr(n);const f=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/h;return s.distSqr(f<0?n:f>1?a:a.sub(n)._mult(f)._add(n))}function L1(s,n){let a,h,f,v=!1;for(let x=0;x<s.length;x++){a=s[x];for(let b=0,E=a.length-1;b<a.length;E=b++)h=a[b],f=a[E],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(v=!v)}return v}function Vc(s,n){let a=!1;for(let h=0,f=s.length-1;h<s.length;f=h++){const v=s[h],x=s[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function FM(s,n,a){const h=a[0],f=a[2];if(s.x<h.x&&n.x<h.x||s.x>f.x&&n.x>f.x||s.y<h.y&&n.y<h.y||s.y>f.y&&n.y>f.y)return!1;const v=dt(s,n,a[0]);return v!==dt(s,n,a[1])||v!==dt(s,n,a[2])||v!==dt(s,n,a[3])}function Wh(s,n,a){const h=n.paint.get(s).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(s)}function ff(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function mf(s,n,a,h,f){if(!n[0]&&!n[1])return s;const v=k.convert(n)._mult(f);a==="viewport"&&v._rotate(-h);const x=[];for(let b=0;b<s.length;b++)x.push(s[b].sub(v));return x}let z1,R1;it("CircleBucket",by,{omit:["layers"]});var OM={get paint(){return R1=R1||new Rn({"circle-radius":new Tt(Ae.paint_circle["circle-radius"]),"circle-color":new Tt(Ae.paint_circle["circle-color"]),"circle-blur":new Tt(Ae.paint_circle["circle-blur"]),"circle-opacity":new Tt(Ae.paint_circle["circle-opacity"]),"circle-translate":new ft(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return z1=z1||new Rn({"circle-sort-key":new Tt(Ae.layout_circle["circle-sort-key"])})}},Zr=1e-6,jc=typeof Float32Array<"u"?Float32Array:Array;function Cy(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function F1(s,n,a){var h=n[0],f=n[1],v=n[2],x=n[3],b=n[4],E=n[5],A=n[6],L=n[7],F=n[8],U=n[9],W=n[10],K=n[11],J=n[12],ae=n[13],ue=n[14],ve=n[15],pe=a[0],xe=a[1],Te=a[2],Le=a[3];return s[0]=pe*h+xe*b+Te*F+Le*J,s[1]=pe*f+xe*E+Te*U+Le*ae,s[2]=pe*v+xe*A+Te*W+Le*ue,s[3]=pe*x+xe*L+Te*K+Le*ve,s[4]=(pe=a[4])*h+(xe=a[5])*b+(Te=a[6])*F+(Le=a[7])*J,s[5]=pe*f+xe*E+Te*U+Le*ae,s[6]=pe*v+xe*A+Te*W+Le*ue,s[7]=pe*x+xe*L+Te*K+Le*ve,s[8]=(pe=a[8])*h+(xe=a[9])*b+(Te=a[10])*F+(Le=a[11])*J,s[9]=pe*f+xe*E+Te*U+Le*ae,s[10]=pe*v+xe*A+Te*W+Le*ue,s[11]=pe*x+xe*L+Te*K+Le*ve,s[12]=(pe=a[12])*h+(xe=a[13])*b+(Te=a[14])*F+(Le=a[15])*J,s[13]=pe*f+xe*E+Te*U+Le*ae,s[14]=pe*v+xe*A+Te*W+Le*ue,s[15]=pe*x+xe*L+Te*K+Le*ve,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var Hh,BM=F1;function gf(s,n,a){var h=n[0],f=n[1],v=n[2],x=n[3];return s[0]=a[0]*h+a[4]*f+a[8]*v+a[12]*x,s[1]=a[1]*h+a[5]*f+a[9]*v+a[13]*x,s[2]=a[2]*h+a[6]*f+a[10]*v+a[14]*x,s[3]=a[3]*h+a[7]*f+a[11]*v+a[15]*x,s}Hh=new jc(4),jc!=Float32Array&&(Hh[0]=0,Hh[1]=0,Hh[2]=0,Hh[3]=0);class NM extends zi{constructor(n){super(n,OM)}createBucket(n){return new by(n)}queryRadius(n){const a=n;return Wh("circle-radius",this,a)+Wh("circle-stroke-width",this,a)+ff(this.paint.get("circle-translate"))}queryIntersectsFeature(n,a,h,f,v,x,b,E){const A=mf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),L=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),F=this.paint.get("circle-pitch-alignment")==="map",U=F?A:function(K,J){return K.map(ae=>O1(ae,J))}(A,E),W=F?L*b:L;for(const K of f)for(const J of K){const ae=F?J:O1(J,E);let ue=W;const ve=gf([],[J.x,J.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=ve[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=x.cameraToCenterDistance/ve[3]),LM(U,ae,ue))return!0}return!1}}function O1(s,n){const a=gf([],[s.x,s.y,0,1],n);return new k(a[0]/a[3],a[1]/a[3])}class B1 extends by{}let N1;it("HeatmapBucket",B1,{omit:["layers"]});var VM={get paint(){return N1=N1||new Rn({"heatmap-radius":new Tt(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Nh(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(Ae.paint_heatmap["heatmap-opacity"])})}};function Ey(s,{width:n,height:a},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*a*h}`)}else f=new Uint8Array(n*a*h);return s.width=n,s.height=a,s.data=f,s}function V1(s,{width:n,height:a},h){if(n===s.width&&a===s.height)return;const f=Ey({},{width:n,height:a},h);Py(s,f,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,a)},h),s.width=n,s.height=a,s.data=f.data}function Py(s,n,a,h,f,v){if(f.width===0||f.height===0)return n;if(f.width>s.width||f.height>s.height||a.x>s.width-f.width||a.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,b=n.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<f.height;E++){const A=((a.y+E)*s.width+a.x)*v,L=((h.y+E)*n.width+h.x)*v;for(let F=0;F<f.width*v;F++)b[L+F]=x[A+F]}return n}class Kh{constructor(n,a){Ey(this,n,1,a)}resize(n){V1(this,n,1)}clone(){return new Kh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,f,v){Py(n,a,h,f,v,1)}}class Wi{constructor(n,a){Ey(this,n,4,a)}resize(n){V1(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Wi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,f,v){Py(n,a,h,f,v,4)}}function j1(s){const n={},a=s.resolution||256,h=s.clips?s.clips.length:1,f=s.image||new Wi({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,b,E)=>{n[s.evaluationKey]=E;const A=s.expression.evaluate(n);f.data[x+b+0]=Math.floor(255*A.r/A.a),f.data[x+b+1]=Math.floor(255*A.g/A.a),f.data[x+b+2]=Math.floor(255*A.b/A.a),f.data[x+b+3]=Math.floor(255*A.a)};if(s.clips)for(let x=0,b=0;x<h;++x,b+=4*a)for(let E=0,A=0;E<a;E++,A+=4){const L=E/(a-1),{start:F,end:U}=s.clips[x];v(b,A,F*(1-L)+U*L)}else for(let x=0,b=0;x<a;x++,b+=4)v(0,b,x/(a-1));return f}it("AlphaImage",Kh),it("RGBAImage",Wi);class jM extends zi{createBucket(n){return new B1(n)}constructor(n){super(n,VM),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=j1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let U1;var UM={get paint(){return U1=U1||new Rn({"hillshade-illumination-direction":new ft(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(Ae.paint_hillshade["hillshade-accent-color"])})}};class $M extends zi{constructor(n){super(n,UM)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const GM=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:qM}=GM;var ky={exports:{}};function yf(s,n,a){a=a||2;var h,f,v,x,b,E,A,L=n&&n.length,F=L?n[0]*a:s.length,U=$1(s,0,F,a,!0),W=[];if(!U||U.next===U.prev)return W;if(L&&(U=function(J,ae,ue,ve){var pe,xe,Te,Le=[];for(pe=0,xe=ae.length;pe<xe;pe++)(Te=$1(J,ae[pe]*ve,pe<xe-1?ae[pe+1]*ve:J.length,ve,!1))===Te.next&&(Te.steiner=!0),Le.push(JM(Te));for(Le.sort(XM),pe=0;pe<Le.length;pe++)ue=YM(Le[pe],ue);return ue}(s,n,U,a)),s.length>80*a){h=v=s[0],f=x=s[1];for(var K=a;K<F;K+=a)(b=s[K])<h&&(h=b),(E=s[K+1])<f&&(f=E),b>v&&(v=b),E>x&&(x=E);A=(A=Math.max(v-h,x-f))!==0?32767/A:0}return Xh(U,W,a,h,f,A,0),W}function $1(s,n,a,h,f){var v,x;if(f===Iy(s,n,a,h)>0)for(v=n;v<a;v+=h)x=Z1(v,s[v],s[v+1],x);else for(v=a-h;v>=n;v-=h)x=Z1(v,s[v],s[v+1],x);return x&&vf(x,x.next)&&(Qh(x),x=x.next),x}function Dl(s,n){if(!s)return s;n||(n=s);var a,h=s;do if(a=!1,h.steiner||!vf(h,h.next)&&On(h.prev,h,h.next)!==0)h=h.next;else{if(Qh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function Xh(s,n,a,h,f,v,x){if(s){!x&&v&&function(L,F,U,W){var K=L;do K.z===0&&(K.z=Ay(K.x,K.y,F,U,W)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==L);K.prevZ.nextZ=null,K.prevZ=null,function(J){var ae,ue,ve,pe,xe,Te,Le,et,ct=1;do{for(ue=J,J=null,xe=null,Te=0;ue;){for(Te++,ve=ue,Le=0,ae=0;ae<ct&&(Le++,ve=ve.nextZ);ae++);for(et=ct;Le>0||et>0&&ve;)Le!==0&&(et===0||!ve||ue.z<=ve.z)?(pe=ue,ue=ue.nextZ,Le--):(pe=ve,ve=ve.nextZ,et--),xe?xe.nextZ=pe:J=pe,pe.prevZ=xe,xe=pe;ue=ve}xe.nextZ=null,ct*=2}while(Te>1)}(K)}(s,h,f,v);for(var b,E,A=s;s.prev!==s.next;)if(b=s.prev,E=s.next,v?WM(s,h,f,v):ZM(s))n.push(b.i/a|0),n.push(s.i/a|0),n.push(E.i/a|0),Qh(s),s=E.next,A=E.next;else if((s=E)===A){x?x===1?Xh(s=HM(Dl(s),n,a),n,a,h,f,v,2):x===2&&KM(s,n,a,h,f,v):Xh(Dl(s),n,a,h,f,v,1);break}}}function ZM(s){var n=s.prev,a=s,h=s.next;if(On(n,a,h)>=0)return!1;for(var f=n.x,v=a.x,x=h.x,b=n.y,E=a.y,A=h.y,L=f<v?f<x?f:x:v<x?v:x,F=b<E?b<A?b:A:E<A?E:A,U=f>v?f>x?f:x:v>x?v:x,W=b>E?b>A?b:A:E>A?E:A,K=h.next;K!==n;){if(K.x>=L&&K.x<=U&&K.y>=F&&K.y<=W&&Uc(f,b,v,E,x,A,K.x,K.y)&&On(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function WM(s,n,a,h){var f=s.prev,v=s,x=s.next;if(On(f,v,x)>=0)return!1;for(var b=f.x,E=v.x,A=x.x,L=f.y,F=v.y,U=x.y,W=b<E?b<A?b:A:E<A?E:A,K=L<F?L<U?L:U:F<U?F:U,J=b>E?b>A?b:A:E>A?E:A,ae=L>F?L>U?L:U:F>U?F:U,ue=Ay(W,K,n,a,h),ve=Ay(J,ae,n,a,h),pe=s.prevZ,xe=s.nextZ;pe&&pe.z>=ue&&xe&&xe.z<=ve;){if(pe.x>=W&&pe.x<=J&&pe.y>=K&&pe.y<=ae&&pe!==f&&pe!==x&&Uc(b,L,E,F,A,U,pe.x,pe.y)&&On(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,xe.x>=W&&xe.x<=J&&xe.y>=K&&xe.y<=ae&&xe!==f&&xe!==x&&Uc(b,L,E,F,A,U,xe.x,xe.y)&&On(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;pe&&pe.z>=ue;){if(pe.x>=W&&pe.x<=J&&pe.y>=K&&pe.y<=ae&&pe!==f&&pe!==x&&Uc(b,L,E,F,A,U,pe.x,pe.y)&&On(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;xe&&xe.z<=ve;){if(xe.x>=W&&xe.x<=J&&xe.y>=K&&xe.y<=ae&&xe!==f&&xe!==x&&Uc(b,L,E,F,A,U,xe.x,xe.y)&&On(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function HM(s,n,a){var h=s;do{var f=h.prev,v=h.next.next;!vf(f,v)&&G1(f,h,h.next,v)&&Yh(f,v)&&Yh(v,f)&&(n.push(f.i/a|0),n.push(h.i/a|0),n.push(v.i/a|0),Qh(h),Qh(h.next),h=s=v),h=h.next}while(h!==s);return Dl(h)}function KM(s,n,a,h,f,v){var x=s;do{for(var b=x.next.next;b!==x.prev;){if(x.i!==b.i&&eI(x,b)){var E=q1(x,b);return x=Dl(x,x.next),E=Dl(E,E.next),Xh(x,n,a,h,f,v,0),void Xh(E,n,a,h,f,v,0)}b=b.next}x=x.next}while(x!==s)}function XM(s,n){return s.x-n.x}function YM(s,n){var a=function(f,v){var x,b=v,E=f.x,A=f.y,L=-1/0;do{if(A<=b.y&&A>=b.next.y&&b.next.y!==b.y){var F=b.x+(A-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(F<=E&&F>L&&(L=F,x=b.x<b.next.x?b:b.next,F===E))return x}b=b.next}while(b!==v);if(!x)return null;var U,W=x,K=x.x,J=x.y,ae=1/0;b=x;do E>=b.x&&b.x>=K&&E!==b.x&&Uc(A<J?E:L,A,K,J,A<J?L:E,A,b.x,b.y)&&(U=Math.abs(A-b.y)/(E-b.x),Yh(b,f)&&(U<ae||U===ae&&(b.x>x.x||b.x===x.x&&QM(x,b)))&&(x=b,ae=U)),b=b.next;while(b!==W);return x}(s,n);if(!a)return n;var h=q1(a,s);return Dl(h,h.next),Dl(a,a.next)}function QM(s,n){return On(s.prev,s,n.prev)<0&&On(n.next,s,s.next)<0}function Ay(s,n,a,h,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function JM(s){var n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function Uc(s,n,a,h,f,v,x,b){return(f-x)*(n-b)>=(s-x)*(v-b)&&(s-x)*(h-b)>=(a-x)*(n-b)&&(a-x)*(v-b)>=(f-x)*(h-b)}function eI(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,h){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==h.i&&f.next.i!==h.i&&G1(f,f.next,a,h))return!0;f=f.next}while(f!==a);return!1}(s,n)&&(Yh(s,n)&&Yh(n,s)&&function(a,h){var f=a,v=!1,x=(a.x+h.x)/2,b=(a.y+h.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&x<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==a);return v}(s,n)&&(On(s.prev,s,n.prev)||On(s,n.prev,n))||vf(s,n)&&On(s.prev,s,s.next)>0&&On(n.prev,n,n.next)>0)}function On(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function vf(s,n){return s.x===n.x&&s.y===n.y}function G1(s,n,a,h){var f=xf(On(s,n,a)),v=xf(On(s,n,h)),x=xf(On(a,h,s)),b=xf(On(a,h,n));return f!==v&&x!==b||!(f!==0||!_f(s,a,n))||!(v!==0||!_f(s,h,n))||!(x!==0||!_f(a,s,h))||!(b!==0||!_f(a,n,h))}function _f(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function xf(s){return s>0?1:s<0?-1:0}function Yh(s,n){return On(s.prev,s,s.next)<0?On(s,n,s.next)>=0&&On(s,s.prev,n)>=0:On(s,n,s.prev)<0||On(s,s.next,n)<0}function q1(s,n){var a=new My(s.i,s.x,s.y),h=new My(n.i,n.x,n.y),f=s.next,v=n.prev;return s.next=n,n.prev=s,a.next=f,f.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function Z1(s,n,a,h){var f=new My(s,n,a);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function Qh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function My(s,n,a){this.i=s,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Iy(s,n,a,h){for(var f=0,v=n,x=a-h;v<a;v+=h)f+=(s[x]-s[v])*(s[v+1]+s[x+1]),x=v;return f}ky.exports=yf,ky.exports.default=yf,yf.deviation=function(s,n,a,h){var f=n&&n.length,v=Math.abs(Iy(s,0,f?n[0]*a:s.length,a));if(f)for(var x=0,b=n.length;x<b;x++)v-=Math.abs(Iy(s,n[x]*a,x<b-1?n[x+1]*a:s.length,a));var E=0;for(x=0;x<h.length;x+=3){var A=h[x]*a,L=h[x+1]*a,F=h[x+2]*a;E+=Math.abs((s[A]-s[F])*(s[L+1]-s[A+1])-(s[A]-s[L])*(s[F+1]-s[A+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},yf.flatten=function(s){for(var n=s[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,f=0;f<s.length;f++){for(var v=0;v<s[f].length;v++)for(var x=0;x<n;x++)a.vertices.push(s[f][v][x]);f>0&&a.holes.push(h+=s[f-1].length)}return a};var W1=w(ky.exports);function tI(s,n,a,h,f){H1(s,n,a,h||s.length-1,f||nI)}function H1(s,n,a,h,f){for(;h>a;){if(h-a>600){var v=h-a+1,x=n-a+1,b=Math.log(v),E=.5*Math.exp(2*b/3),A=.5*Math.sqrt(b*E*(v-E)/v)*(x-v/2<0?-1:1);H1(s,n,Math.max(a,Math.floor(n-x*E/v+A)),Math.min(h,Math.floor(n+(v-x)*E/v+A)),f)}var L=s[n],F=a,U=h;for(Jh(s,a,n),f(s[h],L)>0&&Jh(s,a,h);F<U;){for(Jh(s,F,U),F++,U--;f(s[F],L)<0;)F++;for(;f(s[U],L)>0;)U--}f(s[a],L)===0?Jh(s,a,U):Jh(s,++U,h),U<=n&&(a=U+1),n<=U&&(h=U-1)}}function Jh(s,n,a){var h=s[n];s[n]=s[a],s[a]=h}function nI(s,n){return s<n?-1:s>n?1:0}function Dy(s,n){const a=s.length;if(a<=1)return[s];const h=[];let f,v;for(let x=0;x<a;x++){const b=mt(s[x]);b!==0&&(s[x].area=Math.abs(b),v===void 0&&(v=b<0),v===b<0?(f&&h.push(f),f=[s[x]]):f.push(s[x]))}if(f&&h.push(f),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(tI(h[x],n,1,h[x].length-1,rI),h[x]=h[x].slice(0,n));return h}function rI(s,n){return n.area-s.area}function Ly(s,n,a){const h=a.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(f=!0);const b=x.constantOr(null);b&&(f=!0,h[b.to]=!0,h[b.from]=!0)}return f}function zy(s,n,a,h,f){const v=f.patternDependencies;for(const x of n){const b=x.paint.get(`${s}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:h-1},a,{},f.availableImages),A=b.evaluate({zoom:h},a,{},f.availableImages),L=b.evaluate({zoom:h+1},a,{},f.availableImages);E=E&&E.name?E.name:E,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,v[E]=!0,v[A]=!0,v[L]=!0,a.patterns[x.id]={min:E,mid:A,max:L}}}return a}class Ry{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rt,this.indexArray=new dr,this.indexArray2=new Kn,this.programConfigurations=new Rs(n.layers,n.zoom),this.segments=new un,this.segments2=new un,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Ly("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:E,index:A,sourceLayerIndex:L}of n){const F=this.layers[0]._featureFilter.needGeometry,U=Il(b,F);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),U,h))continue;const W=v?f.evaluate(U,{},h,a.availableImages):void 0,K={id:E,properties:b.properties,type:b.type,sourceLayerIndex:L,index:A,geometry:F?U.geometry:Ml(b),patterns:{},sortKey:W};x.push(K)}v&&x.sort((b,E)=>b.sortKey-E.sortKey);for(const b of x){const{geometry:E,index:A,sourceLayerIndex:L}=b;if(this.hasPattern){const F=zy("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(F)}else this.addFeature(b,E,A,h,{});a.featureIndex.insert(n[A].feature,E,A,L,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qM),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,f,v){for(const x of Dy(a,500)){let b=0;for(const W of x)b+=W.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),A=E.vertexLength,L=[],F=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&F.push(L.length/2);const K=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),J=K.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(J+W.length-1,J),L.push(W[0].x),L.push(W[0].y);for(let ae=1;ae<W.length;ae++)this.layoutVertexArray.emplaceBack(W[ae].x,W[ae].y),this.indexArray2.emplaceBack(J+ae-1,J+ae),L.push(W[ae].x),L.push(W[ae].y);K.vertexLength+=W.length,K.primitiveLength+=W.length}const U=W1(L,F);for(let W=0;W<U.length;W+=3)this.indexArray.emplaceBack(A+U[W],A+U[W+1],A+U[W+2]);E.vertexLength+=b,E.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}let K1,X1;it("FillBucket",Ry,{omit:["layers","patternFeatures"]});var iI={get paint(){return X1=X1||new Rn({"fill-antialias":new ft(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Tt(Ae.paint_fill["fill-opacity"]),"fill-color":new Tt(Ae.paint_fill["fill-color"]),"fill-outline-color":new Tt(Ae.paint_fill["fill-outline-color"]),"fill-translate":new ft(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pl(Ae.paint_fill["fill-pattern"])})},get layout(){return K1=K1||new Rn({"fill-sort-key":new Tt(Ae.layout_fill["fill-sort-key"])})}};class sI extends zi{constructor(n){super(n,iI)}recalculate(n,a){super.recalculate(n,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ry(n)}queryRadius(){return ff(this.paint.get("fill-translate"))}queryIntersectsFeature(n,a,h,f,v,x,b){return I1(mf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),f)}isTileClipped(){return!0}}const oI=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),aI=_n([{name:"a_centroid",components:2,type:"Int16"}],4),{members:lI}=oI;var ya={},cI=M,Y1=$c;function $c(s,n,a,h,f){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=f,s.readFields(uI,this,n)}function uI(s,n,a){s==1?n.id=a.readVarint():s==2?function(h,f){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=f._keys[h.readVarint()],b=f._values[h.readVarint()];f.properties[x]=b}}(a,n):s==3?n.type=a.readVarint():s==4&&(n._geometry=a.pos)}function hI(s){for(var n,a,h=0,f=0,v=s.length,x=v-1;f<v;x=f++)h+=((a=s[x]).x-(n=s[f]).x)*(n.y+a.y);return h}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,a=s.readVarint()+s.pos,h=1,f=0,v=0,x=0,b=[];s.pos<a;){if(f<=0){var E=s.readVarint();h=7&E,f=E>>3}if(f--,h===1||h===2)v+=s.readSVarint(),x+=s.readSVarint(),h===1&&(n&&b.push(n),n=[]),n.push(new cI(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&b.push(n),b},$c.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,a=1,h=0,f=0,v=0,x=1/0,b=-1/0,E=1/0,A=-1/0;s.pos<n;){if(h<=0){var L=s.readVarint();a=7&L,h=L>>3}if(h--,a===1||a===2)(f+=s.readSVarint())<x&&(x=f),f>b&&(b=f),(v+=s.readSVarint())<E&&(E=v),v>A&&(A=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,E,b,A]},$c.prototype.toGeoJSON=function(s,n,a){var h,f,v=this.extent*Math.pow(2,a),x=this.extent*s,b=this.extent*n,E=this.loadGeometry(),A=$c.types[this.type];function L(W){for(var K=0;K<W.length;K++){var J=W[K];W[K]=[360*(J.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(h=0;h<E.length;h++)F[h]=E[h][0];L(E=F);break;case 2:for(h=0;h<E.length;h++)L(E[h]);break;case 3:for(E=function(W){var K=W.length;if(K<=1)return[W];for(var J,ae,ue=[],ve=0;ve<K;ve++){var pe=hI(W[ve]);pe!==0&&(ae===void 0&&(ae=pe<0),ae===pe<0?(J&&ue.push(J),J=[W[ve]]):J.push(W[ve]))}return J&&ue.push(J),ue}(E),h=0;h<E.length;h++)for(f=0;f<E[h].length;f++)L(E[h][f])}E.length===1?E=E[0]:A="Multi"+A;var U={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(U.id=this.id),U};var dI=Y1,Q1=J1;function J1(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(pI,this,n),this.length=this._features.length}function pI(s,n,a){s===15?n.version=a.readVarint():s===1?n.name=a.readString():s===5?n.extent=a.readVarint():s===2?n._features.push(a.pos):s===3?n._keys.push(a.readString()):s===4&&n._values.push(function(h){for(var f=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(a))}J1.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new dI(this._pbf,n,this.extent,this._keys,this._values)};var fI=Q1;function mI(s,n,a){if(s===3){var h=new fI(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}ya.VectorTile=function(s,n){this.layers=s.readFields(mI,{},n)},ya.VectorTileFeature=Y1,ya.VectorTileLayer=Q1;const gI=ya.VectorTileFeature.types,Fy=Math.pow(2,13);function ed(s,n,a,h,f,v,x,b){s.emplaceBack(n,a,2*Math.floor(h*Fy)+x,f*Fy*2,v*Fy*2,Math.round(b))}class Oy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new He,this.centroidVertexArray=new Ve,this.indexArray=new dr,this.programConfigurations=new Rs(n.layers,n.zoom),this.segments=new un,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=Ly("fill-extrusion",this.layers,a);for(const{feature:f,id:v,index:x,sourceLayerIndex:b}of n){const E=this.layers[0]._featureFilter.needGeometry,A=Il(f,E);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),A,h))continue;const L={id:v,sourceLayerIndex:b,index:x,geometry:E?A.geometry:Ml(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(zy("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,x,h,{}),a.featureIndex.insert(f,L.geometry,x,b,this.index,!0)}}addFeatures(n,a,h){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,lI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,aI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,h,f,v){const x={x:0,y:0,vertexCount:0};for(const b of Dy(a,500)){let E=0;for(const K of b)E+=K.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const K of b){if(K.length===0||vI(K))continue;let J=0;for(let ae=0;ae<K.length;ae++){const ue=K[ae];if(ae>=1){const ve=K[ae-1];if(!yI(ue,ve)){A.vertexLength+4>un.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=ue.sub(ve)._perp()._unit(),xe=ve.dist(ue);J+xe>32768&&(J=0),ed(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,0,J),ed(this.layoutVertexArray,ue.x,ue.y,pe.x,pe.y,0,1,J),x.x+=2*ue.x,x.y+=2*ue.y,x.vertexCount+=2,J+=xe,ed(this.layoutVertexArray,ve.x,ve.y,pe.x,pe.y,0,0,J),ed(this.layoutVertexArray,ve.x,ve.y,pe.x,pe.y,0,1,J),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2;const Te=A.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+E>un.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),gI[n.type]!=="Polygon")continue;const L=[],F=[],U=A.vertexLength;for(const K of b)if(K.length!==0){K!==b[0]&&F.push(L.length/2);for(let J=0;J<K.length;J++){const ae=K[J];ed(this.layoutVertexArray,ae.x,ae.y,0,0,1,1,0),x.x+=ae.x,x.y+=ae.y,x.vertexCount+=1,L.push(ae.x),L.push(ae.y)}}const W=W1(L,F);for(let K=0;K<W.length;K+=3)this.indexArray.emplaceBack(U+W[K],U+W[K+2],U+W[K+1]);A.primitiveLength+=W.length/3,A.vertexLength+=E}for(let b=0;b<x.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}function yI(s,n){return s.x===n.x&&(s.x<0||s.x>qn)||s.y===n.y&&(s.y<0||s.y>qn)}function vI(s){return s.every(n=>n.x<0)||s.every(n=>n.x>qn)||s.every(n=>n.y<0)||s.every(n=>n.y>qn)}let ew;it("FillExtrusionBucket",Oy,{omit:["layers","features"]});var _I={get paint(){return ew=ew||new Rn({"fill-extrusion-opacity":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pl(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xI extends zi{constructor(n){super(n,_I)}createBucket(n){return new Oy(n)}queryRadius(){return ff(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,a,h,f,v,x,b,E){const A=mf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),L=this.paint.get("fill-extrusion-height").evaluate(a,h),F=this.paint.get("fill-extrusion-base").evaluate(a,h),U=function(K,J,ae,ue){const ve=[];for(const pe of K){const xe=[pe.x,pe.y,0,1];gf(xe,xe,J),ve.push(new k(xe[0]/xe[3],xe[1]/xe[3]))}return ve}(A,E),W=function(K,J,ae,ue){const ve=[],pe=[],xe=ue[8]*J,Te=ue[9]*J,Le=ue[10]*J,et=ue[11]*J,ct=ue[8]*ae,Qe=ue[9]*ae,Ke=ue[10]*ae,Ue=ue[11]*ae;for(const st of K){const qe=[],Ne=[];for(const wt of st){const ht=wt.x,Lt=wt.y,hn=ue[0]*ht+ue[4]*Lt+ue[12],mn=ue[1]*ht+ue[5]*Lt+ue[13],Qn=ue[2]*ht+ue[6]*Lt+ue[14],Fi=ue[3]*ht+ue[7]*Lt+ue[15],Wr=Qn+Le,Zn=Fi+et,fr=hn+ct,Tr=mn+Qe,Hr=Qn+Ke,Kr=Fi+Ue,Jn=new k((hn+xe)/Zn,(mn+Te)/Zn);Jn.z=Wr/Zn,qe.push(Jn);const er=new k(fr/Kr,Tr/Kr);er.z=Hr/Kr,Ne.push(er)}ve.push(qe),pe.push(Ne)}return[ve,pe]}(f,F,L,E);return function(K,J,ae){let ue=1/0;I1(ae,J)&&(ue=tw(ae,J[0]));for(let ve=0;ve<J.length;ve++){const pe=J[ve],xe=K[ve];for(let Te=0;Te<pe.length-1;Te++){const Le=pe[Te],et=[Le,pe[Te+1],xe[Te+1],xe[Te],Le];M1(ae,et)&&(ue=Math.min(ue,tw(ae,et)))}}return ue!==1/0&&ue}(W[0],W[1],U)}}function td(s,n){return s.x*n.x+s.y*n.y}function tw(s,n){if(s.length===1){let a=0;const h=n[a++];let f;for(;!f||h.equals(f);)if(f=n[a++],!f)return 1/0;for(;a<n.length;a++){const v=n[a],x=s[0],b=f.sub(h),E=v.sub(h),A=x.sub(h),L=td(b,b),F=td(b,E),U=td(E,E),W=td(A,b),K=td(A,E),J=L*U-F*F,ae=(U*W-F*K)/J,ue=(L*K-F*W)/J,ve=h.z*(1-ae-ue)+f.z*ae+v.z*ue;if(isFinite(ve))return ve}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const wI=_n([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:bI}=wI,SI=_n([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:TI}=SI,CI=ya.VectorTileFeature.types,EI=Math.cos(Math.PI/180*37.5),nw=Math.pow(2,14)/.5;class By{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ct,this.layoutVertexArray2=new ut,this.indexArray=new dr,this.programConfigurations=new Rs(n.layers,n.zoom),this.segments=new un,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Ly("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:b,id:E,index:A,sourceLayerIndex:L}of n){const F=this.layers[0]._featureFilter.needGeometry,U=Il(b,F);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),U,h))continue;const W=v?f.evaluate(U,{},h):void 0,K={id:E,properties:b.properties,type:b.type,sourceLayerIndex:L,index:A,geometry:F?U.geometry:Ml(b),patterns:{},sortKey:W};x.push(K)}v&&x.sort((b,E)=>b.sortKey-E.sortKey);for(const b of x){const{geometry:E,index:A,sourceLayerIndex:L}=b;if(this.hasPattern){const F=zy("line",this.layers,b,this.zoom,a);this.patternFeatures.push(F)}else this.addFeature(b,E,A,h,{});a.featureIndex.insert(n[A].feature,E,A,L,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,TI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,bI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,f,v){const x=this.layers[0].layout,b=x.get("line-join").evaluate(n,{}),E=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const F of a)this.addLine(F,n,b,E,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}addLine(n,a,h,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<n.length-1;ue++)this.totalDistance+=n[ue].dist(n[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=CI[a.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let A=0;for(;A<E-1&&n[A].equals(n[A+1]);)A++;if(E<(b?3:2))return;h==="bevel"&&(v=1.05);const L=this.overscaling<=16?15*qn/(512*this.overscaling):0,F=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let U,W,K,J,ae;this.e1=this.e2=-1,b&&(U=n[E-2],ae=n[A].sub(U)._unit()._perp());for(let ue=A;ue<E;ue++){if(K=ue===E-1?b?n[A+1]:void 0:n[ue+1],K&&n[ue].equals(K))continue;ae&&(J=ae),U&&(W=U),U=n[ue],ae=K?K.sub(U)._unit()._perp():J,J=J||ae;let ve=J.add(ae);ve.x===0&&ve.y===0||ve._unit();const pe=J.x*ae.x+J.y*ae.y,xe=ve.x*ae.x+ve.y*ae.y,Te=xe!==0?1/xe:1/0,Le=2*Math.sqrt(2-2*xe),et=xe<EI&&W&&K,ct=J.x*ae.y-J.y*ae.x>0;if(et&&ue>A){const Ue=U.dist(W);if(Ue>2*L){const st=U.sub(U.sub(W)._mult(L/Ue)._round());this.updateDistance(W,st),this.addCurrentVertex(st,J,0,0,F),W=st}}const Qe=W&&K;let Ke=Qe?h:b?"butt":f;if(Qe&&Ke==="round"&&(Te<x?Ke="miter":Te<=2&&(Ke="fakeround")),Ke==="miter"&&Te>v&&(Ke="bevel"),Ke==="bevel"&&(Te>2&&(Ke="flipbevel"),Te<v&&(Ke="miter")),W&&this.updateDistance(W,U),Ke==="miter")ve._mult(Te),this.addCurrentVertex(U,ve,0,0,F);else if(Ke==="flipbevel"){if(Te>100)ve=ae.mult(-1);else{const Ue=Te*J.add(ae).mag()/J.sub(ae).mag();ve._perp()._mult(Ue*(ct?-1:1))}this.addCurrentVertex(U,ve,0,0,F),this.addCurrentVertex(U,ve.mult(-1),0,0,F)}else if(Ke==="bevel"||Ke==="fakeround"){const Ue=-Math.sqrt(Te*Te-1),st=ct?Ue:0,qe=ct?0:Ue;if(W&&this.addCurrentVertex(U,J,st,qe,F),Ke==="fakeround"){const Ne=Math.round(180*Le/Math.PI/20);for(let wt=1;wt<Ne;wt++){let ht=wt/Ne;if(ht!==.5){const hn=ht-.5;ht+=ht*hn*(ht-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*hn*hn+(.848013+pe*(.215638*pe-1.06021)))}const Lt=ae.sub(J)._mult(ht)._add(J)._unit()._mult(ct?-1:1);this.addHalfVertex(U,Lt.x,Lt.y,!1,ct,0,F)}}K&&this.addCurrentVertex(U,ae,-st,-qe,F)}else if(Ke==="butt")this.addCurrentVertex(U,ve,0,0,F);else if(Ke==="square"){const Ue=W?1:-1;this.addCurrentVertex(U,ve,Ue,Ue,F)}else Ke==="round"&&(W&&(this.addCurrentVertex(U,J,0,0,F),this.addCurrentVertex(U,J,1,1,F,!0)),K&&(this.addCurrentVertex(U,ae,-1,-1,F,!0),this.addCurrentVertex(U,ae,0,0,F)));if(et&&ue<E-1){const Ue=U.dist(K);if(Ue>2*L){const st=U.add(K.sub(U)._mult(L/Ue)._round());this.updateDistance(U,st),this.addCurrentVertex(st,ae,0,0,F),U=st}}}}addCurrentVertex(n,a,h,f,v,x=!1){const b=a.y*f-a.x,E=-a.y-a.x*f;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(n,b,E,x,!0,-f,v),this.distance>nw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,h,f,v,x))}addHalfVertex({x:n,y:a},h,f,v,x,b,E){const A=.5*(this.lineClips?this.scaledDistance*(nw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),E.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let rw,iw;it("LineBucket",By,{omit:["layers","patternFeatures"]});var sw={get paint(){return iw=iw||new Rn({"line-opacity":new Tt(Ae.paint_line["line-opacity"]),"line-color":new Tt(Ae.paint_line["line-color"]),"line-translate":new ft(Ae.paint_line["line-translate"]),"line-translate-anchor":new ft(Ae.paint_line["line-translate-anchor"]),"line-width":new Tt(Ae.paint_line["line-width"]),"line-gap-width":new Tt(Ae.paint_line["line-gap-width"]),"line-offset":new Tt(Ae.paint_line["line-offset"]),"line-blur":new Tt(Ae.paint_line["line-blur"]),"line-dasharray":new Bh(Ae.paint_line["line-dasharray"]),"line-pattern":new Pl(Ae.paint_line["line-pattern"]),"line-gradient":new Nh(Ae.paint_line["line-gradient"])})},get layout(){return rw=rw||new Rn({"line-cap":new ft(Ae.layout_line["line-cap"]),"line-join":new Tt(Ae.layout_line["line-join"]),"line-miter-limit":new ft(Ae.layout_line["line-miter-limit"]),"line-round-limit":new ft(Ae.layout_line["line-round-limit"]),"line-sort-key":new Tt(Ae.layout_line["line-sort-key"])})}};class PI extends Tt{possiblyEvaluate(n,a){return a=new cn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,h,f){return a=we({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,h,f)}}let wf;class kI extends zi{constructor(n){super(n,sw),this.gradientVersion=0,wf||(wf=new PI(sw.paint.properties["line-width"].specification),wf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof to,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=wf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new By(n)}queryRadius(n){const a=n,h=ow(Wh("line-width",this,a),Wh("line-gap-width",this,a)),f=Wh("line-offset",this,a);return h/2+Math.abs(f)+ff(this.paint.get("line-translate"))}queryIntersectsFeature(n,a,h,f,v,x,b){const E=mf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),A=b/2*ow(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),L=this.paint.get("line-offset").evaluate(a,h);return L&&(f=function(F,U){const W=[];for(let K=0;K<F.length;K++){const J=F[K],ae=[];for(let ue=0;ue<J.length;ue++){const ve=J[ue-1],pe=J[ue],xe=J[ue+1],Te=ue===0?new k(0,0):pe.sub(ve)._unit()._perp(),Le=ue===J.length-1?new k(0,0):xe.sub(pe)._unit()._perp(),et=Te._add(Le)._unit(),ct=et.x*Le.x+et.y*Le.y;ct!==0&&et._mult(1/ct),ae.push(et._mult(U)._add(pe))}W.push(ae)}return W}(f,L*b)),function(F,U,W){for(let K=0;K<U.length;K++){const J=U[K];if(F.length>=3){for(let ae=0;ae<J.length;ae++)if(Vc(F,J[ae]))return!0}if(zM(F,J,W))return!0}return!1}(E,f,A)}isTileClipped(){return!0}}function ow(s,n){return n>0?n+2*s:s}const AI=_n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),MI=_n([{name:"a_projected_pos",components:3,type:"Float32"}],4);_n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const II=_n([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const aw=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),DI=_n([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function LI(s,n,a){return s.sections.forEach(h=>{h.text=function(f,v,x){const b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),mi.applyArabicShaping&&(f=mi.applyArabicShaping(f)),f}(h.text,n,a)}),s}_n([{name:"triangle",components:3,type:"Uint16"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),_n([{type:"Float32",name:"offsetX"}]),_n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),_n([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const nd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Yn=24,lw=rn,cw=function(s,n,a,h,f){var v,x,b=8*f-h-1,E=(1<<b)-1,A=E>>1,L=-7,F=f-1,U=-1,W=s[n+F];for(F+=U,v=W&(1<<-L)-1,W>>=-L,L+=b;L>0;v=256*v+s[n+F],F+=U,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=h;L>0;x=256*x+s[n+F],F+=U,L-=8);if(v===0)v=1-A;else{if(v===E)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,h),v-=A}return(W?-1:1)*x*Math.pow(2,v-h)},uw=function(s,n,a,h,f,v){var x,b,E,A=8*v-f-1,L=(1<<A)-1,F=L>>1,U=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=0,K=1,J=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,x=L):(x=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-x))<1&&(x--,E*=2),(n+=x+F>=1?U/E:U*Math.pow(2,1-F))*E>=2&&(x++,E/=2),x+F>=L?(b=0,x=L):x+F>=1?(b=(n*E-1)*Math.pow(2,f),x+=F):(b=n*Math.pow(2,F-1)*Math.pow(2,f),x=0));f>=8;s[a+W]=255&b,W+=K,b/=256,f-=8);for(x=x<<f|b,A+=f;A>0;s[a+W]=255&x,W+=K,x/=256,A-=8);s[a+W-K]|=128*J};function rn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}rn.Varint=0,rn.Fixed64=1,rn.Bytes=2,rn.Fixed32=5;var Ny=4294967296,hw=1/Ny,dw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zo(s){return s.type===rn.Bytes?s.readVarint()+s.pos:s.pos+1}function Gc(s,n,a){return a?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function pw(s,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var f=a.pos-1;f>=s;f--)a.buf[f+h]=a.buf[f]}function zI(s,n){for(var a=0;a<s.length;a++)n.writeVarint(s[a])}function RI(s,n){for(var a=0;a<s.length;a++)n.writeSVarint(s[a])}function FI(s,n){for(var a=0;a<s.length;a++)n.writeFloat(s[a])}function OI(s,n){for(var a=0;a<s.length;a++)n.writeDouble(s[a])}function BI(s,n){for(var a=0;a<s.length;a++)n.writeBoolean(s[a])}function NI(s,n){for(var a=0;a<s.length;a++)n.writeFixed32(s[a])}function VI(s,n){for(var a=0;a<s.length;a++)n.writeSFixed32(s[a])}function jI(s,n){for(var a=0;a<s.length;a++)n.writeFixed64(s[a])}function UI(s,n){for(var a=0;a<s.length;a++)n.writeSFixed64(s[a])}function bf(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function qc(s,n,a){s[a]=n,s[a+1]=n>>>8,s[a+2]=n>>>16,s[a+3]=n>>>24}function fw(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}rn.prototype={destroy:function(){this.buf=null},readFields:function(s,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),f=h>>3,v=this.pos;this.type=7&h,s(f,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=bf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=fw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=bf(this.buf,this.pos)+bf(this.buf,this.pos+4)*Ny;return this.pos+=8,s},readSFixed64:function(){var s=bf(this.buf,this.pos)+fw(this.buf,this.pos+4)*Ny;return this.pos+=8,s},readFloat:function(){var s=cw(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=cw(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(f,v,x){var b,E,A=x.buf;if(b=(112&(E=A[x.pos++]))>>4,E<128||(b|=(127&(E=A[x.pos++]))<<3,E<128)||(b|=(127&(E=A[x.pos++]))<<10,E<128)||(b|=(127&(E=A[x.pos++]))<<17,E<128)||(b|=(127&(E=A[x.pos++]))<<24,E<128)||(b|=(1&(E=A[x.pos++]))<<31,E<128))return Gc(f,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&dw?function(a,h,f){return dw.decode(a.subarray(h,f))}(this.buf,n,s):function(a,h,f){for(var v="",x=h;x<f;){var b,E,A,L=a[x],F=null,U=L>239?4:L>223?3:L>191?2:1;if(x+U>f)break;U===1?L<128&&(F=L):U===2?(192&(b=a[x+1]))==128&&(F=(31&L)<<6|63&b)<=127&&(F=null):U===3?(E=a[x+2],(192&(b=a[x+1]))==128&&(192&E)==128&&((F=(15&L)<<12|(63&b)<<6|63&E)<=2047||F>=55296&&F<=57343)&&(F=null)):U===4&&(E=a[x+2],A=a[x+3],(192&(b=a[x+1]))==128&&(192&E)==128&&(192&A)==128&&((F=(15&L)<<18|(63&b)<<12|(63&E)<<6|63&A)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,U=1):F>65535&&(F-=65536,v+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),v+=String.fromCharCode(F),x+=U}return v}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==rn.Bytes)return s.push(this.readVarint(n));var a=zo(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==rn.Bytes)return s.push(this.readSVarint());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==rn.Bytes)return s.push(this.readBoolean());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==rn.Bytes)return s.push(this.readFloat());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==rn.Bytes)return s.push(this.readDouble());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==rn.Bytes)return s.push(this.readFixed32());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==rn.Bytes)return s.push(this.readSFixed32());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==rn.Bytes)return s.push(this.readFixed64());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==rn.Bytes)return s.push(this.readSFixed64());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===rn.Varint)for(;this.buf[this.pos++]>127;);else if(n===rn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===rn.Fixed32)this.pos+=4;else{if(n!==rn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),qc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),qc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),qc(this.buf,-1&s,this.pos),qc(this.buf,Math.floor(s*hw),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),qc(this.buf,-1&s,this.pos),qc(this.buf,Math.floor(s*hw),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,a){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(h,f,v){for(var x,b,E=0;E<f.length;E++){if((x=f.charCodeAt(E))>55295&&x<57344){if(!b){x>56319||E+1===f.length?(h[v++]=239,h[v++]=191,h[v++]=189):b=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(h[v++]=239,h[v++]=191,h[v++]=189,b=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,s,this.pos);var a=this.pos-n;a>=128&&pw(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),uw(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),uw(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,n){this.pos++;var a=this.pos;s(n,this);var h=this.pos-a;h>=128&&pw(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,n,a){this.writeTag(s,rn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,zI,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,RI,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,BI,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,FI,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,OI,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,NI,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,VI,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,jI,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,UI,n)},writeBytesField:function(s,n){this.writeTag(s,rn.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,rn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,rn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,rn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,rn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,rn.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,rn.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,rn.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,rn.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,rn.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var Vy=w(lw);const jy=3;function $I(s,n,a){s===1&&a.readMessage(GI,n)}function GI(s,n,a){if(s===3){const{id:h,bitmap:f,width:v,height:x,left:b,top:E,advance:A}=a.readMessage(qI,{});n.push({id:h,bitmap:new Kh({width:v+2*jy,height:x+2*jy},f),metrics:{width:v,height:x,left:b,top:E,advance:A}})}}function qI(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}const mw=jy;function gw(s){let n=0,a=0;for(const x of s)n+=x.w*x.h,a=Math.max(a,x.w);s.sort((x,b)=>b.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let f=0,v=0;for(const x of s)for(let b=h.length-1;b>=0;b--){const E=h[b];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===E.w&&x.h===E.h){const A=h.pop();b<h.length&&(h[b]=A)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const yi=1;class Uy{constructor(n,{pixelRatio:a,version:h,stretchX:f,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=f,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+yi,this.paddedRect.y+yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-yi,this.paddedRect.y+this.paddedRect.h-yi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*yi)/this.pixelRatio,(this.paddedRect.h-2*yi)/this.pixelRatio]}}class yw{constructor(n,a){const h={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,f,v);const{w:x,h:b}=gw(v),E=new Wi({width:x||1,height:b||1});for(const A in n){const L=n[A],F=h[A].paddedRect;Wi.copy(L.data,E,{x:0,y:0},{x:F.x+yi,y:F.y+yi},L.data)}for(const A in a){const L=a[A],F=f[A].paddedRect,U=F.x+yi,W=F.y+yi,K=L.data.width,J=L.data.height;Wi.copy(L.data,E,{x:0,y:0},{x:U,y:W},L.data),Wi.copy(L.data,E,{x:0,y:J-1},{x:U,y:W-1},{width:K,height:1}),Wi.copy(L.data,E,{x:0,y:0},{x:U,y:W+J},{width:K,height:1}),Wi.copy(L.data,E,{x:K-1,y:0},{x:U-1,y:W},{width:1,height:J}),Wi.copy(L.data,E,{x:0,y:0},{x:U+K,y:W},{width:1,height:J})}this.image=E,this.iconPositions=h,this.patternPositions=f}addImages(n,a,h){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*yi,h:v.data.height+2*yi};h.push(x),a[f]=new Uy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[f,v]=n.tl;h.update(a.data,void 0,{x:f,y:v})}}var va;it("ImagePosition",Uy),it("ImageAtlas",yw),l.ai=void 0,(va=l.ai||(l.ai={}))[va.none=0]="none",va[va.horizontal=1]="horizontal",va[va.vertical=2]="vertical",va[va.horizontalOnly=3]="horizontalOnly";const rd=-17;class id{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new id;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new id;return a.imageName=n,a}}class Zc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new Zc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=f&&nf(f)&&!nd[n[h+1]]||v&&nf(v)&&!nd[n[h-1]]||!nd[n[h]]?n[h]:nd[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Tf[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Tf[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new Zc;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(id.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Ze("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(id.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Sf(s,n,a,h,f,v,x,b,E,A,L,F,U,W,K,J){const ae=Zc.fromFeature(s,f);let ue;F===l.ai.vertical&&ae.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:pe}=mi;if(ve&&ae.sections.length===1){ue=[];const Le=ve(ae.toString(),$y(ae,A,v,n,h,W,K));for(const et of Le){const ct=new Zc;ct.text=et,ct.sections=ae.sections;for(let Qe=0;Qe<et.length;Qe++)ct.sectionIndex.push(0);ue.push(ct)}}else if(pe){ue=[];const Le=pe(ae.text,ae.sectionIndex,$y(ae,A,v,n,h,W,K));for(const et of Le){const ct=new Zc;ct.text=et[0],ct.sectionIndex=et[1],ct.sections=ae.sections,ue.push(ct)}}else ue=function(Le,et){const ct=[],Qe=Le.text;let Ke=0;for(const Ue of et)ct.push(Le.substring(Ke,Ue)),Ke=Ue;return Ke<Qe.length&&ct.push(Le.substring(Ke,Qe.length)),ct}(ae,$y(ae,A,v,n,h,W,K));const xe=[],Te={positionedLines:xe,text:ae.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Le,et,ct,Qe,Ke,Ue,st,qe,Ne,wt,ht,Lt){let hn=0,mn=rd,Qn=0,Fi=0;const Wr=qe==="right"?1:qe==="left"?0:.5;let Zn=0;for(const Jn of Ke){Jn.trim();const er=Jn.getMaxScale(),Dr=(er-1)*Yn,Xr={positionedGlyphs:[],lineOffset:0};Le.positionedLines[Zn]=Xr;const Lr=Xr.positionedGlyphs;let vi=0;if(!Jn.length()){mn+=Ue,++Zn;continue}for(let tr=0;tr<Jn.length();tr++){const Ot=Jn.getSection(tr),zr=Jn.getSectionIndex(tr),Cr=Jn.getCharCode(tr);let nr=0,ys=null,Fs=null,Os=null,Ro=Yn;const vs=!(Ne===l.ai.horizontal||!ht&&!Mh(Cr)||ht&&(Tf[Cr]||(fr=Cr,Je.Arabic(fr)||Je["Arabic Supplement"](fr)||Je["Arabic Extended-A"](fr)||Je["Arabic Presentation Forms-A"](fr)||Je["Arabic Presentation Forms-B"](fr))));if(Ot.imageName){const Ki=Qe[Ot.imageName];if(!Ki)continue;Os=Ot.imageName,Le.iconsInText=Le.iconsInText||!0,Fs=Ki.paddedRect;const xi=Ki.displaySize;Ot.scale=Ot.scale*Yn/Lt,ys={width:xi[0],height:xi[1],left:yi,top:-mw,advance:vs?xi[1]:xi[0]},nr=Dr+(Yn-xi[1]*Ot.scale),Ro=ys.advance;const Fo=vs?xi[0]*Ot.scale-Yn*er:xi[1]*Ot.scale-Yn*er;Fo>0&&Fo>vi&&(vi=Fo)}else{const Ki=ct[Ot.fontStack],xi=Ki&&Ki[Cr];if(xi&&xi.rect)Fs=xi.rect,ys=xi.metrics;else{const Fo=et[Ot.fontStack],cd=Fo&&Fo[Cr];if(!cd)continue;ys=cd.metrics}nr=(er-Ot.scale)*Yn}vs?(Le.verticalizable=!0,Lr.push({glyph:Cr,imageName:Os,x:hn,y:mn+nr,vertical:vs,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:zr,metrics:ys,rect:Fs}),hn+=Ro*Ot.scale+wt):(Lr.push({glyph:Cr,imageName:Os,x:hn,y:mn+nr,vertical:vs,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:zr,metrics:ys,rect:Fs}),hn+=ys.advance*Ot.scale+wt)}Lr.length!==0&&(Qn=Math.max(hn-wt,Qn),HI(Lr,0,Lr.length-1,Wr,vi)),hn=0;const _i=Ue*er+vi;Xr.lineOffset=Math.max(vi,Dr),mn+=_i,Fi=Math.max(_i,Fi),++Zn}var fr;const Tr=mn-rd,{horizontalAlign:Hr,verticalAlign:Kr}=Gy(st);(function(Jn,er,Dr,Xr,Lr,vi,_i,tr,Ot){const zr=(er-Dr)*Lr;let Cr=0;Cr=vi!==_i?-tr*Xr-rd:(-Xr*Ot+.5)*_i;for(const nr of Jn)for(const ys of nr.positionedGlyphs)ys.x+=zr,ys.y+=Cr})(Le.positionedLines,Wr,Hr,Kr,Qn,Fi,Ue,Tr,Ke.length),Le.top+=-Kr*Tr,Le.bottom=Le.top+Tr,Le.left+=-Hr*Qn,Le.right=Le.left+Qn}(Te,n,a,h,ue,x,b,E,F,A,U,J),!function(Le){for(const et of Le)if(et.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Te}const Tf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ZI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function vw(s,n,a,h,f,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Yn/v+f:0}{const x=a[n.fontStack],b=x&&x[s];return b?b.metrics.advance*n.scale+f:0}}function _w(s,n,a,h){const f=Math.pow(s-n,2);return h?s<n?f/2:2*f:f+Math.abs(a)*a}function WI(s,n,a){let h=0;return s===10&&(h-=1e4),a&&(h+=150),s!==40&&s!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function xw(s,n,a,h,f,v){let x=null,b=_w(n,a,f,v);for(const E of h){const A=_w(n-E.x,a,f,v)+E.badness;A<=b&&(x=E,b=A)}return{index:s,x:n,priorBreak:x,badness:b}}function ww(s){return s?ww(s.priorBreak).concat(s.index):[]}function $y(s,n,a,h,f,v,x){if(v!=="point")return[];if(!s)return[];const b=[],E=function(U,W,K,J,ae,ue){let ve=0;for(let pe=0;pe<U.length();pe++){const xe=U.getSection(pe);ve+=vw(U.getCharCode(pe),xe,J,ae,W,ue)}return ve/Math.max(1,Math.ceil(ve/K))}(s,n,a,h,f,x),A=s.text.indexOf("​")>=0;let L=0;for(let U=0;U<s.length();U++){const W=s.getSection(U),K=s.getCharCode(U);if(Tf[K]||(L+=vw(K,W,h,f,n,x)),U<s.length()-1){const J=!((F=K)<11904||!(Je["Bopomofo Extended"](F)||Je.Bopomofo(F)||Je["CJK Compatibility Forms"](F)||Je["CJK Compatibility Ideographs"](F)||Je["CJK Compatibility"](F)||Je["CJK Radicals Supplement"](F)||Je["CJK Strokes"](F)||Je["CJK Symbols and Punctuation"](F)||Je["CJK Unified Ideographs Extension A"](F)||Je["CJK Unified Ideographs"](F)||Je["Enclosed CJK Letters and Months"](F)||Je["Halfwidth and Fullwidth Forms"](F)||Je.Hiragana(F)||Je["Ideographic Description Characters"](F)||Je["Kangxi Radicals"](F)||Je["Katakana Phonetic Extensions"](F)||Je.Katakana(F)||Je["Vertical Forms"](F)||Je["Yi Radicals"](F)||Je["Yi Syllables"](F)));(ZI[K]||J||W.imageName)&&b.push(xw(U+1,L,E,b,WI(K,s.getCharCode(U+1),J&&A),!1))}}var F;return ww(xw(s.length(),L,E,b,0,!0))}function Gy(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function HI(s,n,a,h,f){if(!h&&!f)return;const v=s[a],x=(s[a].x+v.metrics.advance*v.scale)*h;for(let b=n;b<=a;b++)s[b].x-=x,s[b].y+=f}function KI(s,n,a){const{horizontalAlign:h,verticalAlign:f}=Gy(a),v=n[0]-s.displaySize[0]*h,x=n[1]-s.displaySize[1]*f;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function bw(s,n,a,h,f,v){const x=s.image;let b;if(x.content){const ae=x.content,ue=x.pixelRatio||1;b=[ae[0]/ue,ae[1]/ue,x.displaySize[0]-ae[2]/ue,x.displaySize[1]-ae[3]/ue]}const E=n.left*v,A=n.right*v;let L,F,U,W;a==="width"||a==="both"?(W=f[0]+E-h[3],F=f[0]+A+h[1]):(W=f[0]+(E+A-x.displaySize[0])/2,F=W+x.displaySize[0]);const K=n.top*v,J=n.bottom*v;return a==="height"||a==="both"?(L=f[1]+K-h[0],U=f[1]+J+h[2]):(L=f[1]+(K+J-x.displaySize[1])/2,U=L+x.displaySize[1]),{image:x,top:L,right:F,bottom:U,left:W,collisionPadding:b}}const sd=255,oo=128,_a=sd*oo;function Sw(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new cn(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=a;let v=0;for(;v<h.length&&h[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const b=h[v],E=h[x];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:E,minSize:a.evaluate(new cn(b)),maxSize:a.evaluate(new cn(E)),interpolationType:f}}}function qy(s,n,a){let h="never";const f=s.get(n);return f?h=f:s.get(a)&&(h="always"),h}const XI=ya.VectorTileFeature.types,YI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cf(s,n,a,h,f,v,x,b,E,A,L,F,U){const W=b?Math.min(_a,Math.round(b[0])):0,K=b?Math.min(_a,Math.round(b[1])):0;s.emplaceBack(n,a,Math.round(32*h),Math.round(32*f),v,x,(W<<1)+(E?1:0),K,16*A,16*L,256*F,256*U)}function Zy(s,n,a){s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a)}function QI(s){for(const n of s.sections)if(vy(n.text))return!0;return!1}class Wy{constructor(n){this.layoutVertexArray=new zt,this.indexArray=new dr,this.programConfigurations=n,this.segments=new un,this.dynamicLayoutVertexArray=new It,this.opacityVertexArray=new Ft,this.hasVisibleVertices=!1,this.placedSymbolArray=new me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,AI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,MI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,YI,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}it("SymbolBuffers",Wy);class Hy{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new un,this.collisionVertexArray=new an}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,II.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}it("CollisionBuffers",Hy);class Wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cy([]),this.placementViewportMatrix=Cy([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sw(this.zoom,a["text-size"]),this.iconSizeData=Sw(this.zoom,a["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=qy(h,"text-overlap","text-allow-overlap")!=="never"||qy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Wy(new Rs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Wy(new Rs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ge,this.lineVertexArray=new Ce,this.symbolInstances=new ce,this.textAnchorOffsets=new De}calculateGlyphDependencies(n,a,h,f,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(h||f)&&v){const b=nd[n.charAt(x)];b&&(a[b.charCodeAt(0)]=!0)}}populate(n,a,h){const f=this.layers[0],v=f.layout,x=v.get("text-font"),b=v.get("text-field"),E=v.get("icon-image"),A=(b.value.kind!=="constant"||b.value.value instanceof wr&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,F=v.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const U=a.iconDependencies,W=a.glyphDependencies,K=a.availableImages,J=new cn(this.zoom);for(const{feature:ae,id:ue,index:ve,sourceLayerIndex:pe}of n){const xe=f._featureFilter.needGeometry,Te=Il(ae,xe);if(!f._featureFilter.filter(J,Te,h))continue;let Le,et;if(xe||(Te.geometry=Ml(ae)),A){const Qe=f.getValueAndResolveTokens("text-field",Te,h,K),Ke=wr.factory(Qe);QI(Ke)&&(this.hasRTLText=!0),(!this.hasRTLText||Fh()==="unavailable"||this.hasRTLText&&mi.isParsed())&&(Le=LI(Ke,f,Te))}if(L){const Qe=f.getValueAndResolveTokens("icon-image",Te,h,K);et=Qe instanceof hr?Qe:hr.fromString(Qe)}if(!Le&&!et)continue;const ct=this.sortFeaturesByKey?F.evaluate(Te,{},h):void 0;if(this.features.push({id:ue,text:Le,icon:et,index:ve,sourceLayerIndex:pe,geometry:Te.geometry,properties:ae.properties,type:XI[ae.type],sortKey:ct}),et&&(U[et.name]=!0),Le){const Qe=x.evaluate(Te,{},h).join(","),Ke=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ue of Le.sections)if(Ue.image)U[Ue.image.name]=!0;else{const st=kh(Le.toString()),qe=Ue.fontStack||Qe,Ne=W[qe]=W[qe]||{};this.calculateGlyphDependencies(Ue.text,Ne,Ke,this.allowVerticalPlacement,st)}}}v.get("symbol-placement")==="line"&&(this.features=function(ae){const ue={},ve={},pe=[];let xe=0;function Te(Qe){pe.push(ae[Qe]),xe++}function Le(Qe,Ke,Ue){const st=ve[Qe];return delete ve[Qe],ve[Ke]=st,pe[st].geometry[0].pop(),pe[st].geometry[0]=pe[st].geometry[0].concat(Ue[0]),st}function et(Qe,Ke,Ue){const st=ue[Ke];return delete ue[Ke],ue[Qe]=st,pe[st].geometry[0].shift(),pe[st].geometry[0]=Ue[0].concat(pe[st].geometry[0]),st}function ct(Qe,Ke,Ue){const st=Ue?Ke[0][Ke[0].length-1]:Ke[0][0];return`${Qe}:${st.x}:${st.y}`}for(let Qe=0;Qe<ae.length;Qe++){const Ke=ae[Qe],Ue=Ke.geometry,st=Ke.text?Ke.text.toString():null;if(!st){Te(Qe);continue}const qe=ct(st,Ue),Ne=ct(st,Ue,!0);if(qe in ve&&Ne in ue&&ve[qe]!==ue[Ne]){const wt=et(qe,Ne,Ue),ht=Le(qe,Ne,pe[wt].geometry);delete ue[qe],delete ve[Ne],ve[ct(st,pe[ht].geometry,!0)]=ht,pe[wt].geometry=null}else qe in ve?Le(qe,Ne,Ue):Ne in ue?et(qe,Ne,Ue):(Te(Qe),ue[qe]=xe-1,ve[Ne]=xe-1)}return pe.filter(Qe=>Qe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ae,ue)=>ae.sortKey-ue.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let b=n.segment+1;b<a.length;b++)x[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:f},b<a.length-1&&(f+=a[b+1].dist(a[b]));for(let b=n.segment||0;b>=0;b--)x[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=a[b-1].dist(a[b]));for(let b=0;b<a.length;b++){const E=x[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,f,v,x,b,E,A,L,F,U){const W=n.indexArray,K=n.layoutVertexArray,J=n.segments.prepareSegment(4*a.length,K,W,this.canOverlap?x.sortKey:void 0),ae=this.glyphOffsetArray.length,ue=J.vertexLength,ve=this.allowVerticalPlacement&&b===l.ai.vertical?Math.PI/2:0,pe=x.text&&x.text.sections;for(let xe=0;xe<a.length;xe++){const{tl:Te,tr:Le,bl:et,br:ct,tex:Qe,pixelOffsetTL:Ke,pixelOffsetBR:Ue,minFontScaleX:st,minFontScaleY:qe,glyphOffset:Ne,isSDF:wt,sectionIndex:ht}=a[xe],Lt=J.vertexLength,hn=Ne[1];Cf(K,E.x,E.y,Te.x,hn+Te.y,Qe.x,Qe.y,h,wt,Ke.x,Ke.y,st,qe),Cf(K,E.x,E.y,Le.x,hn+Le.y,Qe.x+Qe.w,Qe.y,h,wt,Ue.x,Ke.y,st,qe),Cf(K,E.x,E.y,et.x,hn+et.y,Qe.x,Qe.y+Qe.h,h,wt,Ke.x,Ue.y,st,qe),Cf(K,E.x,E.y,ct.x,hn+ct.y,Qe.x+Qe.w,Qe.y+Qe.h,h,wt,Ue.x,Ue.y,st,qe),Zy(n.dynamicLayoutVertexArray,E,ve),W.emplaceBack(Lt,Lt+1,Lt+2),W.emplaceBack(Lt+1,Lt+2,Lt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),xe!==a.length-1&&ht===a[xe+1].sectionIndex||n.programConfigurations.populatePaintArrays(K.length,x,x.index,{},U,pe&&pe[ht])}n.placedSymbolArray.emplaceBack(E.x,E.y,ae,this.glyphOffsetArray.length-ae,ue,A,L,E.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],b,0,!1,0,F)}_addCollisionDebugVertex(n,a,h,f,v,x){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,h,f,v,x,b){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),A=E.vertexLength,L=v.layoutVertexArray,F=v.collisionVertexArray,U=b.anchorX,W=b.anchorY;this._addCollisionDebugVertex(L,F,x,U,W,new k(n,a)),this._addCollisionDebugVertex(L,F,x,U,W,new k(h,a)),this._addCollisionDebugVertex(L,F,x,U,W,new k(h,f)),this._addCollisionDebugVertex(L,F,x,U,W,new k(n,f)),E.vertexLength+=4;const K=v.indexArray;K.emplaceBack(A,A+1),K.emplaceBack(A+1,A+2),K.emplaceBack(A+2,A+3),K.emplaceBack(A+3,A),E.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,f){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hy(kn,aw.members,Kn),this.iconCollisionBox=new Hy(kn,aw.members,Kn);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,f,v,x,b,E,A){const L={};for(let F=a;F<h;F++){const U=n.get(F);L.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.textFeatureIndex=U.featureIndex;break}for(let F=f;F<v;F++){const U=n.get(F);L.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalTextFeatureIndex=U.featureIndex;break}for(let F=x;F<b;F++){const U=n.get(F);L.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.iconFeatureIndex=U.featureIndex;break}for(let F=E;F<A;F++){const U=n.get(F);L.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalIconFeatureIndex=U.featureIndex;break}return L}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),f=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),f=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const E=this.symbolInstances.get(b);f.push(0|Math.round(a*E.anchorX+h*E.anchorY)),v.push(E.featureIndex)}return x.sort((b,E)=>f[b]-f[E]||v[E]-v[b]),x}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Tw,Cw;it("SymbolBucket",Wc,{omit:["layers","collisionBoxArray","features","compareText"]}),Wc.MAX_GLYPHS=65535,Wc.addDynamicAttributes=Zy;var Ky={get paint(){return Cw=Cw||new Rn({"icon-opacity":new Tt(Ae.paint_symbol["icon-opacity"]),"icon-color":new Tt(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Tt(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(Ae.paint_symbol["text-opacity"]),"text-color":new Tt(Ae.paint_symbol["text-color"],{runtimeType:Dt,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Tt(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(Ae.paint_symbol["text-halo-blur"]),"text-translate":new ft(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new ft(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return Tw=Tw||new Rn({"symbol-placement":new ft(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(Ae.layout_symbol["icon-size"]),"icon-text-fit":new ft(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(Ae.layout_symbol["icon-image"]),"icon-rotate":new Tt(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Tt(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Tt(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(Ae.layout_symbol["text-field"]),"text-font":new Tt(Ae.layout_symbol["text-font"]),"text-size":new Tt(Ae.layout_symbol["text-size"]),"text-max-width":new Tt(Ae.layout_symbol["text-max-width"]),"text-line-height":new ft(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Tt(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tt(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tt(Ae.layout_symbol["text-anchor"]),"text-max-angle":new ft(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(Ae.layout_symbol["text-rotate"]),"text-padding":new ft(Ae.layout_symbol["text-padding"]),"text-keep-upright":new ft(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Tt(Ae.layout_symbol["text-transform"]),"text-offset":new Tt(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new ft(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new ft(Ae.layout_symbol["text-optional"])})}};class Ew{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:or,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}it("FormatSectionOverride",Ew,{omit:["defaultValue"]});class Ef extends zi{constructor(n){super(n,Ky)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const v of h)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,f){const v=this.layout.get(n).evaluate(a,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Pc(x.value)||!v?v:function(b,E){return E.replace(/{([^{}]+)}/g,(A,L)=>b&&L in b?String(b[L]):"")}(a.properties,v)}createBucket(n){return new Wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Ky.paint.overridableProperties){if(!Ef.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new Ew(a),f=new bh(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Sh("source",f):new Ac("composite",f,a.value.zoomStops),this.paint._values[n]=new Mr(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Ef.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),f=Ky.paint.properties[a];let v=!1;const x=b=>{for(const E of b)if(f.overrides&&f.overrides.hasOverride(E))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof wr)x(h.value.value.sections);else if(h.value.kind==="source"){const b=A=>{v||(A instanceof bo&&gn(A.value)===re?x(A.value.sections):A instanceof Ec?x(A.sections):A.eachChild(b))},E=h.value;E._styleExpression&&b(E._styleExpression.expression)}return v}}let Pw;var JI={get paint(){return Pw=Pw||new Rn({"background-color":new ft(Ae.paint_background["background-color"]),"background-pattern":new Bh(Ae.paint_background["background-pattern"]),"background-opacity":new ft(Ae.paint_background["background-opacity"])})}};class eD extends zi{constructor(n){super(n,JI)}}let kw;var tD={get paint(){return kw=kw||new Rn({"raster-opacity":new ft(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(Ae.paint_raster["raster-saturation"]),"raster-contrast":new ft(Ae.paint_raster["raster-contrast"]),"raster-resampling":new ft(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(Ae.paint_raster["raster-fade-duration"])})}};class nD extends zi{constructor(n){super(n,tD)}}class rD extends zi{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class iD{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Xy=63710088e-1;class xa{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xa(ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,f=n.lat*a,v=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*a);return Xy*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof xa)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new xa(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new xa(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Aw=2*Math.PI*Xy;function Mw(s){return Aw*Math.cos(s*Math.PI/180)}function Iw(s){return(180+s)/360}function Dw(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Lw(s,n){return s/Mw(n)}function zw(s){return 360*s-180}function Yy(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Pf{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=xa.convert(n);return new Pf(Iw(h.lng),Dw(h.lat),Lw(a,h.lat))}toLngLat(){return new xa(zw(this.x),Yy(this.y))}toAltitude(){return this.z*Mw(Yy(this.y))}meterInMercatorCoordinateUnits(){return 1/Aw*(n=Yy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Rw(s,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[s*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Qy{constructor(n,a,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||a<0||a>=Math.pow(2,n))throw new Error(`x=${a}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=h,this.key=od(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const f=(x=this.y,b=this.z,E=Rw(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),A=Rw(256*(v+1),256*(x+1),b),E[0]+","+E[1]+","+A[0]+","+A[1]);var v,x,b,E,A;const L=function(F,U,W){let K,J="";for(let ae=F;ae>0;ae--)K=1<<ae-1,J+=(U&K?1:0)+(W&K?2:0);return J}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new k((n.x*a-this.x)*qn,(n.y*a-this.y)*qn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fw{constructor(n,a){this.wrap=n,this.canonical=a,this.key=od(n,a.z,a.z,a.x,a.y)}}class Hi{constructor(n,a,h,f,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=a,this.canonical=new Qy(h,+f,+v),this.key=od(a,n,h,f,v)}clone(){return new Hi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new Hi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?od(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):od(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new Hi(a,this.wrap,a,h,f),new Hi(a,this.wrap,a,h+1,f),new Hi(a,this.wrap,a,h,f+1),new Hi(a,this.wrap,a,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Hi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Pf(n.x-this.wrap,n.y))}}function od(s,n,a,h,f){(s*=2)<0&&(s=-1*s-1);const v=1<<a;return(v*v*s+v*f+h).toString(36)+a.toString(36)+n.toString(36)}it("CanonicalTileID",Qy),it("OverscaledTileID",Hi,{omit:["posMatrix"]});class Ow{constructor(n,a,h,f=1,v=1,x=1,b=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ze(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const E=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<E;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(E,A)]=this.data[this._idx(E-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,E)]=this.data[this._idx(A,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<E;A++)for(let L=0;L<E;L++){const F=this.get(A,L);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(n,a){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,a);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,h){return n*this.redFactor+a*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Wi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,b=h*this.dim+this.dim;switch(a){case-1:f=v-1;break;case 1:v=f+1}switch(h){case-1:x=b-1;break;case 1:b=x+1}const E=-a*this.dim,A=-h*this.dim;for(let L=x;L<b;L++)for(let F=f;F<v;F++)this.data[this._idx(F,L)]=n.data[this._idx(F+E,L+A)]}}it("DEMData",Ow);class Bw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Nw{constructor(n,a,h,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class Vw{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new da(qn,16,0),this.grid3D=new da(qn,16,0),this.featureIndexArray=new Re,this.promoteId=a}insert(n,a,h,f,v,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,v);const E=x?this.grid3D:this.grid;for(let A=0;A<a.length;A++){const L=a[A],F=[1/0,1/0,-1/0,-1/0];for(let U=0;U<L.length;U++){const W=L[U];F[0]=Math.min(F[0],W.x),F[1]=Math.min(F[1],W.y),F[2]=Math.max(F[2],W.x),F[3]=Math.max(F[3],W.y)}F[0]<qn&&F[1]<qn&&F[2]>=0&&F[3]>=0&&E.insert(b,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ya.VectorTile(new Vy(this.rawTileData)).layers,this.sourceLayerCoder=new Bw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,f){this.loadVTLayers();const v=n.params||{},x=qn/n.tileSize/n.scale,b=Ch(v.filter),E=n.queryGeometry,A=n.queryPadding*x,L=Uw(E),F=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),U=Uw(n.cameraQueryGeometry),W=this.grid3D.query(U.minX-A,U.minY-A,U.maxX+A,U.maxY+A,(ae,ue,ve,pe)=>function(xe,Te,Le,et,ct){for(const Ke of xe)if(Te<=Ke.x&&Le<=Ke.y&&et>=Ke.x&&ct>=Ke.y)return!0;const Qe=[new k(Te,Le),new k(Te,ct),new k(et,ct),new k(et,Le)];if(xe.length>2){for(const Ke of Qe)if(Vc(xe,Ke))return!0}for(let Ke=0;Ke<xe.length-1;Ke++)if(FM(xe[Ke],xe[Ke+1],Qe))return!0;return!1}(n.cameraQueryGeometry,ae-A,ue-A,ve+A,pe+A));for(const ae of W)F.push(ae);F.sort(sD);const K={};let J;for(let ae=0;ae<F.length;ae++){const ue=F[ae];if(ue===J)continue;J=ue;const ve=this.featureIndexArray.get(ue);let pe=null;this.loadMatchingFeature(K,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,b,v.layers,v.availableImages,a,h,f,(xe,Te,Le)=>(pe||(pe=Ml(xe)),Te.queryIntersectsFeature(E,xe,Le,pe,this.z,n.transform,x,n.pixelPosMatrix)))}return K}loadMatchingFeature(n,a,h,f,v,x,b,E,A,L,F){const U=this.bucketLayerIDs[a];if(x&&!function(ae,ue){for(let ve=0;ve<ae.length;ve++)if(ue.indexOf(ae[ve])>=0)return!0;return!1}(x,U))return;const W=this.sourceLayerCoder.decode(h),K=this.vtLayers[W].feature(f);if(v.needGeometry){const ae=Il(K,!0);if(!v.filter(new cn(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!v.filter(new cn(this.tileID.overscaledZ),K))return;const J=this.getId(K,W);for(let ae=0;ae<U.length;ae++){const ue=U[ae];if(x&&x.indexOf(ue)<0)continue;const ve=E[ue];if(!ve)continue;let pe={};J&&L&&(pe=L.getState(ve.sourceLayer||"_geojsonTileLayer",J));const xe=we({},A[ue]);xe.paint=jw(xe.paint,ve.paint,K,pe,b),xe.layout=jw(xe.layout,ve.layout,K,pe,b);const Te=!F||F(K,ve,pe);if(!Te)continue;const Le=new Nw(K,this.z,this.x,this.y,J);Le.layer=xe;let et=n[ue];et===void 0&&(et=n[ue]=[]),et.push({featureIndex:f,feature:Le,intersectionZ:Te})}}lookupSymbolFeatures(n,a,h,f,v,x,b,E){const A={};this.loadVTLayers();const L=Ch(v);for(const F of n)this.loadMatchingFeature(A,h,f,F,L,x,b,E,a);return A}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function jw(s,n,a,h,f){return Fe(s,(v,x)=>{const b=n instanceof Bc?n.get(x):null;return b&&b.evaluate?b.evaluate(a,h,f):b})}function Uw(s){let n=1/0,a=1/0,h=-1/0,f=-1/0;for(const v of s)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y);return{minX:n,minY:a,maxX:h,maxY:f}}function sD(s,n){return n-s}function $w(s,n,a,h,f){const v=[];for(let x=0;x<s.length;x++){const b=s[x];let E;for(let A=0;A<b.length-1;A++){let L=b[A],F=b[A+1];L.x<n&&F.x<n||(L.x<n?L=new k(n,L.y+(n-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x<n&&(F=new k(n,L.y+(n-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y<a&&F.y<a||(L.y<a?L=new k(L.x+(a-L.y)/(F.y-L.y)*(F.x-L.x),a)._round():F.y<a&&(F=new k(L.x+(a-L.y)/(F.y-L.y)*(F.x-L.x),a)._round()),L.x>=h&&F.x>=h||(L.x>=h?L=new k(h,L.y+(h-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x>=h&&(F=new k(h,L.y+(h-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y>=f&&F.y>=f||(L.y>=f?L=new k(L.x+(f-L.y)/(F.y-L.y)*(F.x-L.x),f)._round():F.y>=f&&(F=new k(L.x+(f-L.y)/(F.y-L.y)*(F.x-L.x),f)._round()),E&&L.equals(E[E.length-1])||(E=[L],v.push(E)),E.push(F)))))}}return v}it("FeatureIndex",Vw,{omit:["rawTileData","sourceLayerCoder"]});class wa extends k{constructor(n,a,h,f){super(n,a),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new wa(this.x,this.y,this.angle,this.segment)}}function Gw(s,n,a,h,f){if(n.segment===void 0||a===0)return!0;let v=n,x=n.segment+1,b=0;for(;b>-a/2;){if(x--,x<0)return!1;b-=s[x].dist(v),v=s[x]}b+=s[x].dist(s[x+1]),x++;const E=[];let A=0;for(;b<a/2;){const L=s[x],F=s[x+1];if(!F)return!1;let U=s[x-1].angleTo(L)-L.angleTo(F);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:U}),A+=U;b-E[0].distance>h;)A-=E.shift().angleDelta;if(A>f)return!1;x++,b+=L.dist(F)}return!0}function qw(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function Zw(s,n,a){return s?.6*n*a:0}function Ww(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function oD(s,n,a,h,f,v){const x=Zw(a,f,v),b=Ww(a,h)*v;let E=0;const A=qw(s)/2;for(let L=0;L<s.length-1;L++){const F=s[L],U=s[L+1],W=F.dist(U);if(E+W>A){const K=(A-E)/W,J=di.number(F.x,U.x,K),ae=di.number(F.y,U.y,K),ue=new wa(J,ae,U.angleTo(F),L);return ue._round(),!x||Gw(s,ue,b,x,n)?ue:void 0}E+=W}}function aD(s,n,a,h,f,v,x,b,E){const A=Zw(h,v,x),L=Ww(h,f),F=L*x,U=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return n-F<n/4&&(n=F+n/4),Hw(s,U?n/2*b%n:(L/2+2*v)*x*b%n,n,A,a,F,U,!1,E)}function Hw(s,n,a,h,f,v,x,b,E){const A=v/2,L=qw(s);let F=0,U=n-a,W=[];for(let K=0;K<s.length-1;K++){const J=s[K],ae=s[K+1],ue=J.dist(ae),ve=ae.angleTo(J);for(;U+a<F+ue;){U+=a;const pe=(U-F)/ue,xe=di.number(J.x,ae.x,pe),Te=di.number(J.y,ae.y,pe);if(xe>=0&&xe<E&&Te>=0&&Te<E&&U-A>=0&&U+A<=L){const Le=new wa(xe,Te,ve,K);Le._round(),h&&!Gw(s,Le,v,h,f)||W.push(Le)}}F+=ue}return b||W.length||x||(W=Hw(s,F/2,a,h,f,v,x,!0,E)),W}it("Anchor",wa);const Hc=yi;function Kw(s,n,a,h){const f=[],v=s.image,x=v.pixelRatio,b=v.paddedRect.w-2*Hc,E=v.paddedRect.h-2*Hc,A=s.right-s.left,L=s.bottom-s.top,F=v.stretchX||[[0,b]],U=v.stretchY||[[0,E]],W=(Ue,st)=>Ue+st[1]-st[0],K=F.reduce(W,0),J=U.reduce(W,0),ae=b-K,ue=E-J;let ve=0,pe=K,xe=0,Te=J,Le=0,et=ae,ct=0,Qe=ue;if(v.content&&h){const Ue=v.content;ve=kf(F,0,Ue[0]),xe=kf(U,0,Ue[1]),pe=kf(F,Ue[0],Ue[2]),Te=kf(U,Ue[1],Ue[3]),Le=Ue[0]-ve,ct=Ue[1]-xe,et=Ue[2]-Ue[0]-pe,Qe=Ue[3]-Ue[1]-Te}const Ke=(Ue,st,qe,Ne)=>{const wt=Af(Ue.stretch-ve,pe,A,s.left),ht=Mf(Ue.fixed-Le,et,Ue.stretch,K),Lt=Af(st.stretch-xe,Te,L,s.top),hn=Mf(st.fixed-ct,Qe,st.stretch,J),mn=Af(qe.stretch-ve,pe,A,s.left),Qn=Mf(qe.fixed-Le,et,qe.stretch,K),Fi=Af(Ne.stretch-xe,Te,L,s.top),Wr=Mf(Ne.fixed-ct,Qe,Ne.stretch,J),Zn=new k(wt,Lt),fr=new k(mn,Lt),Tr=new k(mn,Fi),Hr=new k(wt,Fi),Kr=new k(ht/x,hn/x),Jn=new k(Qn/x,Wr/x),er=n*Math.PI/180;if(er){const Lr=Math.sin(er),vi=Math.cos(er),_i=[vi,-Lr,Lr,vi];Zn._matMult(_i),fr._matMult(_i),Hr._matMult(_i),Tr._matMult(_i)}const Dr=Ue.stretch+Ue.fixed,Xr=st.stretch+st.fixed;return{tl:Zn,tr:fr,bl:Hr,br:Tr,tex:{x:v.paddedRect.x+Hc+Dr,y:v.paddedRect.y+Hc+Xr,w:qe.stretch+qe.fixed-Dr,h:Ne.stretch+Ne.fixed-Xr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kr,pixelOffsetBR:Jn,minFontScaleX:et/x/A,minFontScaleY:Qe/x/L,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Ue=Xw(F,ae,K),st=Xw(U,ue,J);for(let qe=0;qe<Ue.length-1;qe++){const Ne=Ue[qe],wt=Ue[qe+1];for(let ht=0;ht<st.length-1;ht++)f.push(Ke(Ne,st[ht],wt,st[ht+1]))}}else f.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return f}function kf(s,n,a){let h=0;for(const f of s)h+=Math.max(n,Math.min(a,f[1]))-Math.max(n,Math.min(a,f[0]));return h}function Xw(s,n,a){const h=[{fixed:-Hc,stretch:0}];for(const[f,v]of s){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return h.push({fixed:n+Hc,stretch:a}),h}function Af(s,n,a,h){return s/n*a+h}function Mf(s,n,a,h){return s-n*a/h}class If{constructor(n,a,h,f,v,x,b,E,A,L){if(this.boxStartIndex=n.length,A){let F=x.top,U=x.bottom;const W=x.collisionPadding;W&&(F-=W[1],U+=W[3]);let K=U-F;K>0&&(K=Math.max(10,K),this.circleDiameter=K)}else{let F=x.top*b-E[0],U=x.bottom*b+E[2],W=x.left*b-E[3],K=x.right*b+E[1];const J=x.collisionPadding;if(J&&(W-=J[0]*b,F-=J[1]*b,K+=J[2]*b,U+=J[3]*b),L){const ae=new k(W,F),ue=new k(K,F),ve=new k(W,U),pe=new k(K,U),xe=L*Math.PI/180;ae._rotate(xe),ue._rotate(xe),ve._rotate(xe),pe._rotate(xe),W=Math.min(ae.x,ue.x,ve.x,pe.x),K=Math.max(ae.x,ue.x,ve.x,pe.x),F=Math.min(ae.y,ue.y,ve.y,pe.y),U=Math.max(ae.y,ue.y,ve.y,pe.y)}n.emplaceBack(a.x,a.y,W,F,K,U,h,f,v)}this.boxEndIndex=n.length}}class lD{constructor(n=[],a=cD){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,f=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(h(f,x)>=0)break;a[n]=x,n=v}a[n]=f}_down(n){const{data:a,compare:h}=this,f=this.length>>1,v=a[n];for(;n<f;){let x=1+(n<<1),b=a[x];const E=x+1;if(E<this.length&&h(a[E],b)<0&&(x=E,b=a[E]),h(b,v)>=0)break;a[n]=b,n=x}a[n]=v}}function cD(s,n){return s<n?-1:s>n?1:0}function uD(s,n=1,a=!1){let h=1/0,f=1/0,v=-1/0,x=-1/0;const b=s[0];for(let W=0;W<b.length;W++){const K=b[W];(!W||K.x<h)&&(h=K.x),(!W||K.y<f)&&(f=K.y),(!W||K.x>v)&&(v=K.x),(!W||K.y>x)&&(x=K.y)}const E=Math.min(v-h,x-f);let A=E/2;const L=new lD([],hD);if(E===0)return new k(h,f);for(let W=h;W<v;W+=E)for(let K=f;K<x;K+=E)L.push(new Kc(W+A,K+A,A,s));let F=function(W){let K=0,J=0,ae=0;const ue=W[0];for(let ve=0,pe=ue.length,xe=pe-1;ve<pe;xe=ve++){const Te=ue[ve],Le=ue[xe],et=Te.x*Le.y-Le.x*Te.y;J+=(Te.x+Le.x)*et,ae+=(Te.y+Le.y)*et,K+=3*et}return new Kc(J/K,ae/K,0,W)}(s),U=L.length;for(;L.length;){const W=L.pop();(W.d>F.d||!F.d)&&(F=W,a&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,U)),W.max-F.d<=n||(A=W.h/2,L.push(new Kc(W.p.x-A,W.p.y-A,A,s)),L.push(new Kc(W.p.x+A,W.p.y-A,A,s)),L.push(new Kc(W.p.x-A,W.p.y+A,A,s)),L.push(new Kc(W.p.x+A,W.p.y+A,A,s)),U+=4)}return a&&(console.log(`num probes: ${U}`),console.log(`best distance: ${F.d}`)),F.p}function hD(s,n){return n.max-s.max}function Kc(s,n,a,h){this.p=new k(s,n),this.h=a,this.d=function(f,v){let x=!1,b=1/0;for(let E=0;E<v.length;E++){const A=v[E];for(let L=0,F=A.length,U=F-1;L<F;U=L++){const W=A[L],K=A[U];W.y>f.y!=K.y>f.y&&f.x<(K.x-W.x)*(f.y-W.y)/(K.y-W.y)+W.x&&(x=!x),b=Math.min(b,D1(f,W,K))}}return(x?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Sr;l.aq=void 0,(Sr=l.aq||(l.aq={}))[Sr.center=1]="center",Sr[Sr.left=2]="left",Sr[Sr.right=3]="right",Sr[Sr.top=4]="top",Sr[Sr.bottom=5]="bottom",Sr[Sr["top-left"]=6]="top-left",Sr[Sr["top-right"]=7]="top-right",Sr[Sr["bottom-left"]=8]="bottom-left",Sr[Sr["bottom-right"]=9]="bottom-right";const ba=7,Jy=Number.POSITIVE_INFINITY;function Yw(s,n){return n[1]!==Jy?function(a,h,f){let v=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),a){case"top-right":case"top-left":case"top":x=f-ba;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+ba}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(s,n[0],n[1]):function(a,h){let f=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-ba;break;case"bottom-right":case"bottom-left":v=-x+ba;break;case"bottom":v=-h+ba;break;case"top":v=h-ba}switch(a){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,v]}(s,n[0])}function Qw(s,n,a){var h;const f=s.layout,v=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},a);if(v){const b=v.values,E=[];for(let A=0;A<b.length;A+=2){const L=E[A]=b[A],F=b[A+1].map(U=>U*Yn);L.startsWith("top")?F[1]-=ba:L.startsWith("bottom")&&(F[1]+=ba),E[A+1]=F}return new Mi(E)}const x=f.get("text-variable-anchor");if(x){let b;b=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},a)*Yn,Jy]:f.get("text-offset").evaluate(n,{},a).map(A=>A*Yn);const E=[];for(const A of x)E.push(A,Yw(A,b));return new Mi(E)}return null}function ev(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dD(s,n,a,h,f,v,x,b,E,A,L){let F=v.textMaxSize.evaluate(n,{});F===void 0&&(F=x);const U=s.layers[0].layout,W=U.get("icon-offset").evaluate(n,{},L),K=eb(a.horizontal),J=x/24,ae=s.tilePixelRatio*J,ue=s.tilePixelRatio*F/24,ve=s.tilePixelRatio*b,pe=s.tilePixelRatio*U.get("symbol-spacing"),xe=U.get("text-padding")*s.tilePixelRatio,Te=function(Ne,wt,ht,Lt=1){const hn=Ne.get("icon-padding").evaluate(wt,{},ht),mn=hn&&hn.values;return[mn[0]*Lt,mn[1]*Lt,mn[2]*Lt,mn[3]*Lt]}(U,n,L,s.tilePixelRatio),Le=U.get("text-max-angle")/180*Math.PI,et=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",ct=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",Qe=U.get("symbol-placement"),Ke=pe/2,Ue=U.get("icon-text-fit");let st;h&&Ue!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(st=bw(h,a.vertical,Ue,U.get("icon-text-fit-padding"),W,J)),K&&(h=bw(h,K,Ue,U.get("icon-text-fit-padding"),W,J)));const qe=(Ne,wt)=>{wt.x<0||wt.x>=qn||wt.y<0||wt.y>=qn||function(ht,Lt,hn,mn,Qn,Fi,Wr,Zn,fr,Tr,Hr,Kr,Jn,er,Dr,Xr,Lr,vi,_i,tr,Ot,zr,Cr,nr,ys){const Fs=ht.addToLineVertexArray(Lt,hn);let Os,Ro,vs,Ki,xi=0,Fo=0,cd=0,ib=0,lv=-1,cv=-1;const Oo={};let sb=Io("");if(ht.allowVerticalPlacement&&mn.vertical){const Rr=Zn.layout.get("text-rotate").evaluate(Ot,{},nr)+90;vs=new If(fr,Lt,Tr,Hr,Kr,mn.vertical,Jn,er,Dr,Rr),Wr&&(Ki=new If(fr,Lt,Tr,Hr,Kr,Wr,Lr,vi,Dr,Rr))}if(Qn){const Rr=Zn.layout.get("icon-rotate").evaluate(Ot,{}),Xi=Zn.layout.get("icon-text-fit")!=="none",Ll=Kw(Qn,Rr,Cr,Xi),Ns=Wr?Kw(Wr,Rr,Cr,Xi):void 0;Ro=new If(fr,Lt,Tr,Hr,Kr,Qn,Lr,vi,!1,Rr),xi=4*Ll.length;const zl=ht.iconSizeData;let ao=null;zl.kind==="source"?(ao=[oo*Zn.layout.get("icon-size").evaluate(Ot,{})],ao[0]>_a&&Ze(`${ht.layerIds[0]}: Value for "icon-size" is >= ${sd}. Reduce your "icon-size".`)):zl.kind==="composite"&&(ao=[oo*zr.compositeIconSizes[0].evaluate(Ot,{},nr),oo*zr.compositeIconSizes[1].evaluate(Ot,{},nr)],(ao[0]>_a||ao[1]>_a)&&Ze(`${ht.layerIds[0]}: Value for "icon-size" is >= ${sd}. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,Ll,ao,tr,_i,Ot,l.ai.none,Lt,Fs.lineStartIndex,Fs.lineLength,-1,nr),lv=ht.icon.placedSymbolArray.length-1,Ns&&(Fo=4*Ns.length,ht.addSymbols(ht.icon,Ns,ao,tr,_i,Ot,l.ai.vertical,Lt,Fs.lineStartIndex,Fs.lineLength,-1,nr),cv=ht.icon.placedSymbolArray.length-1)}const ob=Object.keys(mn.horizontal);for(const Rr of ob){const Xi=mn.horizontal[Rr];if(!Os){sb=Io(Xi.text);const Ns=Zn.layout.get("text-rotate").evaluate(Ot,{},nr);Os=new If(fr,Lt,Tr,Hr,Kr,Xi,Jn,er,Dr,Ns)}const Ll=Xi.positionedLines.length===1;if(cd+=Jw(ht,Lt,Xi,Fi,Zn,Dr,Ot,Xr,Fs,mn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Ll?ob:[Rr],Oo,lv,zr,nr),Ll)break}mn.vertical&&(ib+=Jw(ht,Lt,mn.vertical,Fi,Zn,Dr,Ot,Xr,Fs,l.ai.vertical,["vertical"],Oo,cv,zr,nr));const mD=Os?Os.boxStartIndex:ht.collisionBoxArray.length,gD=Os?Os.boxEndIndex:ht.collisionBoxArray.length,yD=vs?vs.boxStartIndex:ht.collisionBoxArray.length,vD=vs?vs.boxEndIndex:ht.collisionBoxArray.length,_D=Ro?Ro.boxStartIndex:ht.collisionBoxArray.length,xD=Ro?Ro.boxEndIndex:ht.collisionBoxArray.length,wD=Ki?Ki.boxStartIndex:ht.collisionBoxArray.length,bD=Ki?Ki.boxEndIndex:ht.collisionBoxArray.length;let Bs=-1;const Lf=(Rr,Xi)=>Rr&&Rr.circleDiameter?Math.max(Rr.circleDiameter,Xi):Xi;Bs=Lf(Os,Bs),Bs=Lf(vs,Bs),Bs=Lf(Ro,Bs),Bs=Lf(Ki,Bs);const ab=Bs>-1?1:0;ab&&(Bs*=ys/Yn),ht.glyphOffsetArray.length>=Wc.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ot.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,Ot.sortKey);const SD=Qw(Zn,Ot,nr),[TD,CD]=function(Rr,Xi){const Ll=Rr.length,Ns=Xi==null?void 0:Xi.values;if((Ns==null?void 0:Ns.length)>0)for(let zl=0;zl<Ns.length;zl+=2){const ao=Ns[zl+1];Rr.emplaceBack(l.aq[Ns[zl]],ao[0],ao[1])}return[Ll,Rr.length]}(ht.textAnchorOffsets,SD);ht.symbolInstances.emplaceBack(Lt.x,Lt.y,Oo.right>=0?Oo.right:-1,Oo.center>=0?Oo.center:-1,Oo.left>=0?Oo.left:-1,Oo.vertical||-1,lv,cv,sb,mD,gD,yD,vD,_D,xD,wD,bD,Tr,cd,ib,xi,Fo,ab,0,Jn,Bs,TD,CD)}(s,wt,Ne,a,h,f,st,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ae,[xe,xe,xe,xe],et,E,ve,Te,ct,W,n,v,A,L,x)};if(Qe==="line")for(const Ne of $w(n.geometry,0,0,qn,qn)){const wt=aD(Ne,pe,Le,a.vertical||K,h,24,ue,s.overscaling,qn);for(const ht of wt)K&&pD(s,K.text,Ke,ht)||qe(Ne,ht)}else if(Qe==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const wt=oD(Ne,Le,a.vertical||K,h,24,ue);wt&&qe(Ne,wt)}}else if(n.type==="Polygon")for(const Ne of Dy(n.geometry,0)){const wt=uD(Ne,16);qe(Ne[0],new wa(wt.x,wt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)qe(Ne,new wa(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const wt of Ne)qe([wt],new wa(wt.x,wt.y,0))}function Jw(s,n,a,h,f,v,x,b,E,A,L,F,U,W,K){const J=function(ve,pe,xe,Te,Le,et,ct,Qe){const Ke=Te.layout.get("text-rotate").evaluate(et,{})*Math.PI/180,Ue=[];for(const st of pe.positionedLines)for(const qe of st.positionedGlyphs){if(!qe.rect)continue;const Ne=qe.rect||{};let wt=mw+1,ht=!0,Lt=1,hn=0;const mn=(Le||Qe)&&qe.vertical,Qn=qe.metrics.advance*qe.scale/2;if(Qe&&pe.verticalizable&&(hn=st.lineOffset/2-(qe.imageName?-(Yn-qe.metrics.width*qe.scale)/2:(qe.scale-1)*Yn)),qe.imageName){const tr=ct[qe.imageName];ht=tr.sdf,Lt=tr.pixelRatio,wt=yi/Lt}const Fi=Le?[qe.x+Qn,qe.y]:[0,0];let Wr=Le?[0,0]:[qe.x+Qn+xe[0],qe.y+xe[1]-hn],Zn=[0,0];mn&&(Zn=Wr,Wr=[0,0]);const fr=qe.metrics.isDoubleResolution?2:1,Tr=(qe.metrics.left-wt)*qe.scale-Qn+Wr[0],Hr=(-qe.metrics.top-wt)*qe.scale+Wr[1],Kr=Tr+Ne.w/fr*qe.scale/Lt,Jn=Hr+Ne.h/fr*qe.scale/Lt,er=new k(Tr,Hr),Dr=new k(Kr,Hr),Xr=new k(Tr,Jn),Lr=new k(Kr,Jn);if(mn){const tr=new k(-Qn,Qn-rd),Ot=-Math.PI/2,zr=Yn/2-Qn,Cr=new k(5-rd-zr,-(qe.imageName?zr:0)),nr=new k(...Zn);er._rotateAround(Ot,tr)._add(Cr)._add(nr),Dr._rotateAround(Ot,tr)._add(Cr)._add(nr),Xr._rotateAround(Ot,tr)._add(Cr)._add(nr),Lr._rotateAround(Ot,tr)._add(Cr)._add(nr)}if(Ke){const tr=Math.sin(Ke),Ot=Math.cos(Ke),zr=[Ot,-tr,tr,Ot];er._matMult(zr),Dr._matMult(zr),Xr._matMult(zr),Lr._matMult(zr)}const vi=new k(0,0),_i=new k(0,0);Ue.push({tl:er,tr:Dr,bl:Xr,br:Lr,tex:Ne,writingMode:pe.writingMode,glyphOffset:Fi,sectionIndex:qe.sectionIndex,isSDF:ht,pixelOffsetTL:vi,pixelOffsetBR:_i,minFontScaleX:0,minFontScaleY:0})}return Ue}(0,a,b,f,v,x,h,s.allowVerticalPlacement),ae=s.textSizeData;let ue=null;ae.kind==="source"?(ue=[oo*f.layout.get("text-size").evaluate(x,{})],ue[0]>_a&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${sd}. Reduce your "text-size".`)):ae.kind==="composite"&&(ue=[oo*W.compositeTextSizes[0].evaluate(x,{},K),oo*W.compositeTextSizes[1].evaluate(x,{},K)],(ue[0]>_a||ue[1]>_a)&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${sd}. Reduce your "text-size".`)),s.addSymbols(s.text,J,ue,b,v,x,A,n,E.lineStartIndex,E.lineLength,U,K);for(const ve of L)F[ve]=s.text.placedSymbolArray.length-1;return 4*J.length}function eb(s){for(const n in s)return s[n];return null}function pD(s,n,a,h){const f=s.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else f[n]=[];return f[n].push(h),!1}const tb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class tv{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=tb[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new tv(b,x,v,n)}constructor(n,a=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=tb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+E),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=a,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return nv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:b}=this,E=[0,v.length-1,0],A=[];for(;E.length;){const L=E.pop()||0,F=E.pop()||0,U=E.pop()||0;if(F-U<=b){for(let ae=U;ae<=F;ae++){const ue=x[2*ae],ve=x[2*ae+1];ue>=n&&ue<=h&&ve>=a&&ve<=f&&A.push(v[ae])}continue}const W=U+F>>1,K=x[2*W],J=x[2*W+1];K>=n&&K<=h&&J>=a&&J<=f&&A.push(v[W]),(L===0?n<=K:a<=J)&&(E.push(U),E.push(W-1),E.push(1-L)),(L===0?h>=K:f>=J)&&(E.push(W+1),E.push(F),E.push(1-L))}return A}within(n,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,b=[0,f.length-1,0],E=[],A=h*h;for(;b.length;){const L=b.pop()||0,F=b.pop()||0,U=b.pop()||0;if(F-U<=x){for(let ae=U;ae<=F;ae++)rb(v[2*ae],v[2*ae+1],n,a)<=A&&E.push(f[ae]);continue}const W=U+F>>1,K=v[2*W],J=v[2*W+1];rb(K,J,n,a)<=A&&E.push(f[W]),(L===0?n-h<=K:a-h<=J)&&(b.push(U),b.push(W-1),b.push(1-L)),(L===0?n+h>=K:a+h>=J)&&(b.push(W+1),b.push(F),b.push(1-L))}return E}}function nv(s,n,a,h,f,v){if(f-h<=a)return;const x=h+f>>1;nb(s,n,x,h,f,v),nv(s,n,a,h,x-1,1-v),nv(s,n,a,x+1,f,1-v)}function nb(s,n,a,h,f,v){for(;f>h;){if(f-h>600){const A=f-h+1,L=a-h+1,F=Math.log(A),U=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*U*(A-U)/A)*(L-A/2<0?-1:1);nb(s,n,a,Math.max(h,Math.floor(a-L*U/A+W)),Math.min(f,Math.floor(a+(A-L)*U/A+W)),v)}const x=n[2*a+v];let b=h,E=f;for(ad(s,n,h,a),n[2*f+v]>x&&ad(s,n,h,f);b<E;){for(ad(s,n,b,E),b++,E--;n[2*b+v]<x;)b++;for(;n[2*E+v]>x;)E--}n[2*h+v]===x?ad(s,n,h,E):(E++,ad(s,n,E,f)),E<=a&&(h=E+1),a<=E&&(f=E-1)}}function ad(s,n,a,h){rv(s,a,h),rv(n,2*a,2*h),rv(n,2*a+1,2*h+1)}function rv(s,n,a){const h=s[n];s[n]=s[a],s[a]=h}function rb(s,n,a,h){const f=s-a,v=n-h;return f*f+v*v}var iv;l.bh=void 0,(iv=l.bh||(l.bh={})).create="create",iv.load="load",iv.fullLoad="fullLoad";let Df=null,ld=[];const sv=1e3/60,ov="loadTime",av="fullLoadTime",fD={mark(s){performance.mark(s)},frame(s){const n=s;Df!=null&&ld.push(n-Df),Df=n},clearMetrics(){Df=null,ld=[],performance.clearMeasures(ov),performance.clearMeasures(av);for(const s in l.bh)performance.clearMarks(l.bh[s])},getPerformanceMetrics(){performance.measure(ov,l.bh.create,l.bh.load),performance.measure(av,l.bh.create,l.bh.fullLoad);const s=performance.getEntriesByName(ov)[0].duration,n=performance.getEntriesByName(av)[0].duration,a=ld.length,h=1/(ld.reduce((v,x)=>v+x,0)/a/1e3),f=ld.filter(v=>v>sv).reduce((v,x)=>v+(x-sv)/sv,0);return{loadTime:s,fullLoadTime:n,fps:h,percentDroppedFrames:f/(a+f)*100,totalFrames:a}}};l.$=function(s,n,a){var h,f,v,x,b,E,A,L,F,U,W,K,J=a[0],ae=a[1],ue=a[2];return n===s?(s[12]=n[0]*J+n[4]*ae+n[8]*ue+n[12],s[13]=n[1]*J+n[5]*ae+n[9]*ue+n[13],s[14]=n[2]*J+n[6]*ae+n[10]*ue+n[14],s[15]=n[3]*J+n[7]*ae+n[11]*ue+n[15]):(f=n[1],v=n[2],x=n[3],b=n[4],E=n[5],A=n[6],L=n[7],F=n[8],U=n[9],W=n[10],K=n[11],s[0]=h=n[0],s[1]=f,s[2]=v,s[3]=x,s[4]=b,s[5]=E,s[6]=A,s[7]=L,s[8]=F,s[9]=U,s[10]=W,s[11]=K,s[12]=h*J+b*ae+F*ue+n[12],s[13]=f*J+E*ae+U*ue+n[13],s[14]=v*J+A*ae+W*ue+n[14],s[15]=x*J+L*ae+K*ue+n[15]),s},l.A=jc,l.B=di,l.C=class{constructor(s,n,a){this.receive=h=>{const f=h.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Pt()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),f=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(h,f)},this.target=s,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new iD(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pt()?s:window}send(s,n,a,h,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=[],b={id:v,type:s,hasCallback:!!a,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:ro(n,x)};return this.target.postMessage(b,{transfer:x}),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(n.error?a(pa(n.error)):a(null,pa(n.data)))}else{let a=!1;const h=[],f=n.hasCallback?(b,E)=>{a=!0,delete this.cancelCallbacks[s];const A={id:s,type:"<response>",sourceMapId:this.mapId,error:b?ro(b):null,data:ro(E,h)};this.target.postMessage(A,{transfer:h})}:b=>{a=!0};let v=null;const x=pa(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const b=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,b[0],x.source)[b[1]](x,f)}else f(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[s]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=ft,l.E=dn,l.F=function(s,n){const a={};for(let h=0;h<n.length;h++){const f=n[h];f in s&&(a[f]=s[f])}return a},l.G=Iw,l.H=Dw,l.I=Uy,l.J=V,l.K=Z,l.L=xa,l.M=ot,l.N=qn,l.O=Hi,l.P=k,l.Q=_n,l.R=Wi,l.S=un,l.T=af,l.U=Pf,l.V=class extends Ao{},l.W=Qy,l.X=function(s,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<s.length;h++){const f=window.document.createElement("source");Ar(s[h])||(a.crossOrigin="Anonymous"),f.src=s[h],a.appendChild(f)}return{cancel:()=>{}}},l.Y=je,l.Z=function(){var s=new jc(16);return jc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},l._=S,l.a=We,l.a$=class extends q{},l.a0=function(s,n,a){var h=a[0],f=a[1],v=a[2];return s[0]=n[0]*h,s[1]=n[1]*h,s[2]=n[2]*h,s[3]=n[3]*h,s[4]=n[4]*f,s[5]=n[5]*f,s[6]=n[6]*f,s[7]=n[7]*f,s[8]=n[8]*v,s[9]=n[9]*v,s[10]=n[10]*v,s[11]=n[11]*v,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.a1=F1,l.a2=function(){return Ye++},l.a3=ie,l.a4=Wc,l.a5=function(){mi.isLoading()||mi.isLoaded()||Fh()!=="deferred"||of()},l.a6=Ch,l.a7=Il,l.a8=cn,l.a9=Nw,l.aA=Cl,l.aB=function(s){s=s.slice();const n=Object.create(null);for(let a=0;a<s.length;a++)n[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=jr(s[a],n[s[a].ref]));return s},l.aC=function(s){if(s.type==="custom")return new rD(s);switch(s.type){case"background":return new eD(s);case"circle":return new NM(s);case"fill":return new sI(s);case"fill-extrusion":return new xI(s);case"heatmap":return new jM(s);case"hillshade":return new $M(s);case"line":return new kI(s);case"raster":return new nD(s);case"symbol":return new Ef(s)}},l.aD=nt,l.aE=function(s,n){if(!s)return[{command:qt.setStyle,args:[n]}];let a=[];try{if(!Ht(s.version,n.version))return[{command:qt.setStyle,args:[n]}];Ht(s.center,n.center)||a.push({command:qt.setCenter,args:[n.center]}),Ht(s.zoom,n.zoom)||a.push({command:qt.setZoom,args:[n.zoom]}),Ht(s.bearing,n.bearing)||a.push({command:qt.setBearing,args:[n.bearing]}),Ht(s.pitch,n.pitch)||a.push({command:qt.setPitch,args:[n.pitch]}),Ht(s.sprite,n.sprite)||a.push({command:qt.setSprite,args:[n.sprite]}),Ht(s.glyphs,n.glyphs)||a.push({command:qt.setGlyphs,args:[n.glyphs]}),Ht(s.transition,n.transition)||a.push({command:qt.setTransition,args:[n.transition]}),Ht(s.light,n.light)||a.push({command:qt.setLight,args:[n.light]});const h={},f=[];(function(x,b,E,A){let L;for(L in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(b,L)||us(L,E,A));for(L in b)Object.prototype.hasOwnProperty.call(b,L)&&(Object.prototype.hasOwnProperty.call(x,L)?Ht(x[L],b[L])||(x[L].type==="geojson"&&b[L].type==="geojson"&&wo(x,b,L)?E.push({command:qt.setGeoJSONSourceData,args:[L,b[L].data]}):_r(L,b,E,A)):li(L,b,E))})(s.sources,n.sources,f,h);const v=[];s.layers&&s.layers.forEach(x=>{h[x.source]?a.push({command:qt.removeLayer,args:[x.id]}):v.push(x)}),a=a.concat(f),function(x,b,E){b=b||[];const A=(x=x||[]).map(qi),L=b.map(qi),F=x.reduce(As,{}),U=b.reduce(As,{}),W=A.slice(),K=Object.create(null);let J,ae,ue,ve,pe,xe,Te;for(J=0,ae=0;J<A.length;J++)ue=A[J],Object.prototype.hasOwnProperty.call(U,ue)?ae++:(E.push({command:qt.removeLayer,args:[ue]}),W.splice(W.indexOf(ue,ae),1));for(J=0,ae=0;J<L.length;J++)ue=L[L.length-1-J],W[W.length-1-J]!==ue&&(Object.prototype.hasOwnProperty.call(F,ue)?(E.push({command:qt.removeLayer,args:[ue]}),W.splice(W.lastIndexOf(ue,W.length-ae),1)):ae++,xe=W[W.length-J],E.push({command:qt.addLayer,args:[U[ue],xe]}),W.splice(W.length-J,0,ue),K[ue]=!0);for(J=0;J<L.length;J++)if(ue=L[J],ve=F[ue],pe=U[ue],!K[ue]&&!Ht(ve,pe))if(Ht(ve.source,pe.source)&&Ht(ve["source-layer"],pe["source-layer"])&&Ht(ve.type,pe.type)){for(Te in ci(ve.layout,pe.layout,E,ue,null,qt.setLayoutProperty),ci(ve.paint,pe.paint,E,ue,null,qt.setPaintProperty),Ht(ve.filter,pe.filter)||E.push({command:qt.setFilter,args:[ue,pe.filter]}),Ht(ve.minzoom,pe.minzoom)&&Ht(ve.maxzoom,pe.maxzoom)||E.push({command:qt.setLayerZoomRange,args:[ue,pe.minzoom,pe.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ci(ve[Te],pe[Te],E,ue,Te.slice(6),qt.setPaintProperty):Ht(ve[Te],pe[Te])||E.push({command:qt.setLayerProperty,args:[ue,Te,pe[Te]]}));for(Te in pe)Object.prototype.hasOwnProperty.call(pe,Te)&&!Object.prototype.hasOwnProperty.call(ve,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ci(ve[Te],pe[Te],E,ue,Te.slice(6),qt.setPaintProperty):Ht(ve[Te],pe[Te])||E.push({command:qt.setLayerProperty,args:[ue,Te,pe[Te]]}))}else E.push({command:qt.removeLayer,args:[ue]}),xe=W[W.lastIndexOf(ue)+1],E.push({command:qt.addLayer,args:[pe,xe]})}(v,n.layers,a)}catch(h){console.warn("Unable to compute style diff:",h),a=[{command:qt.setStyle,args:[n]}]}return a},l.aF=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function s(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let h=0;h<n.length;h++)if(!s(n[h],a[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const h in n)if(!s(n[h],a[h]))return!1;return!0}return n===a},l.aH=Fe,l.aI=pt,l.aJ=El,l.aK=function(s){return s({pluginStatus:Gr,pluginURL:io}),El.on("pluginStateChange",s),s},l.aL=class extends Do{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},l.aM=Nc,l.aN=class extends Do{constructor(s,n){super(s,n),this.current=xy}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},l.aO=hf,l.aP=class extends Do{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},l.aQ=class extends Do{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},l.aR=df,l.aS=function(s,n,a,h,f,v,x){var b=1/(n-a),E=1/(h-f),A=1/(v-x);return s[0]=-2*b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(n+a)*b,s[13]=(f+h)*E,s[14]=(x+v)*A,s[15]=1,s},l.aT=en,l.aU=BM,l.aV=class extends d{},l.aW=DI,l.aX=class extends _{},l.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},l.aZ=j1,l.a_=Ve,l.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,f,v)=>{const x=f||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},l.ab=function(s,n){const a=[];for(const h in s)h in n||a.push(h);return a},l.ac=function(s){if(Pe==null){const n=s.navigator?s.navigator.userAgent:null;Pe=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Pe},l.ad=Se,l.ae=function(s,n,a){var h=Math.sin(a),f=Math.cos(a),v=n[0],x=n[1],b=n[2],E=n[3],A=n[4],L=n[5],F=n[6],U=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*f+A*h,s[1]=x*f+L*h,s[2]=b*f+F*h,s[3]=E*f+U*h,s[4]=A*f-v*h,s[5]=L*f-x*h,s[6]=F*f-b*h,s[7]=U*f-E*h,s},l.af=function(s){var n=new jc(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},l.ag=gf,l.ah=function(s,n){let a=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=s,b=f?Se(pi.interpolationFactor(f,n,v,x),0,1):0;s.kind==="camera"?h=di.number(s.minSize,s.maxSize,b):a=b}return{uSizeT:a,uSize:h}},l.aj=function(s,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:f}){return s.kind==="source"?h/oo:s.kind==="composite"?di.number(h/oo,f/oo,a):n},l.ak=Zy,l.al=function(s,n,a,h){const f=n.y-s.y,v=n.x-s.x,x=h.y-a.y,b=h.x-a.x,E=x*v-b*f;if(E===0)return null;const A=(b*(s.y-a.y)-x*(s.x-a.x))/E;return new k(s.x+A*v,s.y+A*f)},l.am=$w,l.an=M1,l.ao=Cy,l.ap=Yn,l.ar=qy,l.as=function(s,n){var a=n[0],h=n[1],f=n[2],v=n[3],x=n[4],b=n[5],E=n[6],A=n[7],L=n[8],F=n[9],U=n[10],W=n[11],K=n[12],J=n[13],ae=n[14],ue=n[15],ve=a*b-h*x,pe=a*E-f*x,xe=a*A-v*x,Te=h*E-f*b,Le=h*A-v*b,et=f*A-v*E,ct=L*J-F*K,Qe=L*ae-U*K,Ke=L*ue-W*K,Ue=F*ae-U*J,st=F*ue-W*J,qe=U*ue-W*ae,Ne=ve*qe-pe*st+xe*Ue+Te*Ke-Le*Qe+et*ct;return Ne?(s[0]=(b*qe-E*st+A*Ue)*(Ne=1/Ne),s[1]=(f*st-h*qe-v*Ue)*Ne,s[2]=(J*et-ae*Le+ue*Te)*Ne,s[3]=(U*Le-F*et-W*Te)*Ne,s[4]=(E*Ke-x*qe-A*Qe)*Ne,s[5]=(a*qe-f*Ke+v*Qe)*Ne,s[6]=(ae*xe-K*et-ue*pe)*Ne,s[7]=(L*et-U*xe+W*pe)*Ne,s[8]=(x*st-b*Ke+A*ct)*Ne,s[9]=(h*Ke-a*st-v*ct)*Ne,s[10]=(K*Le-J*xe+ue*ve)*Ne,s[11]=(F*xe-L*Le-W*ve)*Ne,s[12]=(b*Qe-x*Ue-E*ct)*Ne,s[13]=(a*Ue-h*Qe+f*ct)*Ne,s[14]=(J*pe-K*Te-ae*ve)*Ne,s[15]=(L*Te-F*pe+U*ve)*Ne,s):null},l.at=ev,l.au=Gy,l.av=tv,l.aw=function(){const s={},n=Ae.$version;for(const a in Ae.$root){const h=Ae.$root[a];if(h.required){let f=null;f=a==="version"?n:h.type==="array"?[]:{},f!=null&&(s[a]=f)}}return s},l.ax=qt,l.ay=tf,l.az=$n,l.b=function(s,n){const a=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(a).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=dr,l.b1=function(s,n){var a=s[0],h=s[1],f=s[2],v=s[3],x=s[4],b=s[5],E=s[6],A=s[7],L=s[8],F=s[9],U=s[10],W=s[11],K=s[12],J=s[13],ae=s[14],ue=s[15],ve=n[0],pe=n[1],xe=n[2],Te=n[3],Le=n[4],et=n[5],ct=n[6],Qe=n[7],Ke=n[8],Ue=n[9],st=n[10],qe=n[11],Ne=n[12],wt=n[13],ht=n[14],Lt=n[15];return Math.abs(a-ve)<=Zr*Math.max(1,Math.abs(a),Math.abs(ve))&&Math.abs(h-pe)<=Zr*Math.max(1,Math.abs(h),Math.abs(pe))&&Math.abs(f-xe)<=Zr*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(v-Te)<=Zr*Math.max(1,Math.abs(v),Math.abs(Te))&&Math.abs(x-Le)<=Zr*Math.max(1,Math.abs(x),Math.abs(Le))&&Math.abs(b-et)<=Zr*Math.max(1,Math.abs(b),Math.abs(et))&&Math.abs(E-ct)<=Zr*Math.max(1,Math.abs(E),Math.abs(ct))&&Math.abs(A-Qe)<=Zr*Math.max(1,Math.abs(A),Math.abs(Qe))&&Math.abs(L-Ke)<=Zr*Math.max(1,Math.abs(L),Math.abs(Ke))&&Math.abs(F-Ue)<=Zr*Math.max(1,Math.abs(F),Math.abs(Ue))&&Math.abs(U-st)<=Zr*Math.max(1,Math.abs(U),Math.abs(st))&&Math.abs(W-qe)<=Zr*Math.max(1,Math.abs(W),Math.abs(qe))&&Math.abs(K-Ne)<=Zr*Math.max(1,Math.abs(K),Math.abs(Ne))&&Math.abs(J-wt)<=Zr*Math.max(1,Math.abs(J),Math.abs(wt))&&Math.abs(ae-ht)<=Zr*Math.max(1,Math.abs(ae),Math.abs(ht))&&Math.abs(ue-Lt)<=Zr*Math.max(1,Math.abs(ue),Math.abs(Lt))},l.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.b3=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s},l.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},l.b5=ke,l.b6=Fw,l.b7=Lw,l.b8=function(s,n,a,h,f){var v,x=1/Math.tan(n/2);return s[0]=x/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+h)*(v=1/(h-f)),s[14]=2*f*h*v):(s[10]=-1,s[14]=-2*h),s},l.b9=function(s,n,a){var h=Math.sin(a),f=Math.cos(a),v=n[4],x=n[5],b=n[6],E=n[7],A=n[8],L=n[9],F=n[10],U=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=v*f+A*h,s[5]=x*f+L*h,s[6]=b*f+F*h,s[7]=E*f+U*h,s[8]=A*f-v*h,s[9]=L*f-x*h,s[10]=F*f-b*h,s[11]=U*f-E*h,s},l.bA=M,l.bB=lw,l.bC=kc,l.bD=mi,l.ba=ne,l.bb=de,l.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},l.bd=class extends Al{},l.be=Xy,l.bf=zw,l.bg=fD,l.bi=cr,l.bj=function(s,n,a=!1){if(Gr===Ih||Gr===Dh||Gr===Lh)throw new Error("setRTLTextPlugin cannot be called multiple times.");io=Gt.resolveURL(s),Gr=Ih,zh=n,Rh(),a||of()},l.bk=Fh,l.bl=function(s,n){const a={};for(let f=0;f<s.length;f++){const v=n&&n[s[f].id]||Dc(s[f]);n&&(n[s[f].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(s[f])}const h=[];for(const f in a)h.push(a[f]);return h},l.bm=it,l.bn=Bw,l.bo=Vw,l.bp=yw,l.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=qn/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],a=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new cn(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new cn(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new cn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new cn(A),s.canonical),h["text-size"].possiblyEvaluate(new cn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new cn(A),s.canonical),h["icon-size"].possiblyEvaluate(new cn(L),s.canonical)]}const v=a.get("text-line-height")*Yn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",b=a.get("text-keep-upright"),E=a.get("text-size");for(const A of s.bucket.features){const L=a.get("text-font").evaluate(A,{},s.canonical).join(","),F=E.evaluate(A,{},s.canonical),U=f.layoutTextSize.evaluate(A,{},s.canonical),W=f.layoutIconSize.evaluate(A,{},s.canonical),K={horizontal:{},vertical:void 0},J=A.text;let ae,ue=[0,0];if(J){const xe=J.toString(),Te=a.get("text-letter-spacing").evaluate(A,{},s.canonical)*Yn,Le=Ah(xe)?Te:0,et=a.get("text-anchor").evaluate(A,{},s.canonical),ct=Qw(n,A,s.canonical);if(!ct){const qe=a.get("text-radial-offset").evaluate(A,{},s.canonical);ue=qe?Yw(et,[qe*Yn,Jy]):a.get("text-offset").evaluate(A,{},s.canonical).map(Ne=>Ne*Yn)}let Qe=x?"center":a.get("text-justify").evaluate(A,{},s.canonical);const Ke=a.get("symbol-placement"),Ue=Ke==="point"?a.get("text-max-width").evaluate(A,{},s.canonical)*Yn:0,st=()=>{s.bucket.allowVerticalPlacement&&kh(xe)&&(K.vertical=Sf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,"left",Le,ue,l.ai.vertical,!0,Ke,U,F))};if(!x&&ct){const qe=new Set;if(Qe==="auto")for(let wt=0;wt<ct.values.length;wt+=2)qe.add(ev(ct.values[wt]));else qe.add(Qe);let Ne=!1;for(const wt of qe)if(!K.horizontal[wt])if(Ne)K.horizontal[wt]=K.horizontal[0];else{const ht=Sf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,"center",wt,Le,ue,l.ai.horizontal,!1,Ke,U,F);ht&&(K.horizontal[wt]=ht,Ne=ht.positionedLines.length===1)}st()}else{Qe==="auto"&&(Qe=ev(et));const qe=Sf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,Qe,Le,ue,l.ai.horizontal,!1,Ke,U,F);qe&&(K.horizontal[Qe]=qe),st(),kh(xe)&&x&&b&&(K.vertical=Sf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,Qe,Le,ue,l.ai.vertical,!1,Ke,U,F))}}let ve=!1;if(A.icon&&A.icon.name){const xe=s.imageMap[A.icon.name];xe&&(ae=KI(s.imagePositions[A.icon.name],a.get("icon-offset").evaluate(A,{},s.canonical),a.get("icon-anchor").evaluate(A,{},s.canonical)),ve=!!xe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ve:s.bucket.sdfIcons!==ve&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xe.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const pe=eb(K.horizontal)||K.vertical;s.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||ae)&&dD(s.bucket,A,K,ae,s.imageMap,f,U,W,ue,ve,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},l.br=By,l.bs=Ry,l.bt=Oy,l.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},l.bv=Vy,l.bw=ya,l.bx=function(s,n,a,h,f){return S(this,void 0,void 0,function*(){if(Z())try{return yield ot(s,n,a,h,f)}catch{}return function(v,x,b,E,A){const L=v.width,F=v.height;_t&&vt||(_t=new OffscreenCanvas(L,F),vt=_t.getContext("2d",{willReadFrequently:!0})),_t.width=L,_t.height=F,vt.drawImage(v,0,0,L,F);const U=vt.getImageData(x,b,E,A);return vt.clearRect(0,0,L,F),U.data}(s,n,a,h,f)})},l.by=Ow,l.bz=w,l.c=sr,l.d=function(s,n){const a=new Image;a.onload=()=>{n(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=yt})},a.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(s)],{type:"image/png"});a.src=s.byteLength?URL.createObjectURL(h):yt},l.e=we,l.f=function(s,n){return kr(we(s,{type:"json"}),n)},l.g=Ln,l.h=Gt,l.i=Pt,l.j=ki,l.k=Pi,l.l=ai,l.m=kr,l.n=function(s){return new Vy(s).readFields($I,[])},l.o=function(s,n,a){if(!s.length)return a(null,[]);let h=s.length;const f=new Array(s.length);let v=null;s.forEach((x,b)=>{n(x,(E,A)=>{E&&(v=E),f[b]=A,--h==0&&a(v,f)})})},l.p=gw,l.q=Kh,l.r=Rn,l.s=Ar,l.t=gy,l.u=Je,l.v=Ae,l.w=Ze,l.x=Rc,l.y=Ls,l.z=function([s,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(a),y:s*Math.sin(n)*Math.sin(a),z:s*Math.cos(a)}}}),p(["./shared"],function(l){class S{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,G){for(const se of N){this._layerConfigs[se.id]=se;const le=this._layers[se.id]=l.aC(se);le._featureFilter=l.a6(le.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of G)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const Y=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of Y){const le=se.map(Ie=>this._layers[Ie.id]),_e=le[0];if(_e.visibility==="none")continue;const fe=_e.source||"";let he=this.familiesBySource[fe];he||(he=this.familiesBySource[fe]={});const ye=_e.sourceLayer||"_geojsonTileLayer";let Me=he[ye];Me||(Me=he[ye]=[]),Me.push(le)}}}class w{constructor(N){const G={},Y=[];for(const fe in N){const he=N[fe],ye=G[fe]={};for(const Me in he){const Ie=he[+Me];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const ze={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};Y.push(ze),ye[Me]={rect:ze,metrics:Ie.metrics}}}const{w:se,h:le}=l.p(Y),_e=new l.q({width:se||1,height:le||1});for(const fe in N){const he=N[fe];for(const ye in he){const Me=he[+ye];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Ie=G[fe][ye].rect;l.q.copy(Me.bitmap,_e,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},Me.bitmap)}}this.image=_e,this.positions=G}}l.bm("GlyphAtlas",w);class M{constructor(N){this.tileID=new l.O(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(N,G,Y,se,le){this.status="parsing",this.data=N,this.collisionBoxArray=new l.a3;const _e=new l.bn(Object.keys(N.layers).sort()),fe=new l.bo(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const he={},ye={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y},Me=G.familiesBySource[this.source];for(const Zt in Me){const $t=N.layers[Zt];if(!$t)continue;$t.version===1&&l.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xr=_e.encode(Zt),on=[];for(let Gn=0;Gn<$t.length;Gn++){const ur=$t.feature(Gn),Ai=fe.getId(ur,Zt);on.push({feature:ur,id:Ai,index:Gn,sourceLayerIndex:xr})}for(const Gn of Me[Zt]){const ur=Gn[0];ur.source!==this.source&&l.w(`layer.source = ${ur.source} does not equal this.source = ${this.source}`),ur.minzoom&&this.zoom<Math.floor(ur.minzoom)||ur.maxzoom&&this.zoom>=ur.maxzoom||ur.visibility!=="none"&&(I(Gn,this.zoom,Y),(he[ur.id]=ur.createBucket({index:fe.bucketLayerIDs.length,layers:Gn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xr,sourceID:this.source})).populate(on,ye,this.tileID.canonical),fe.bucketLayerIDs.push(Gn.map(Ai=>Ai.id)))}}let Ie,ze,xt,kt;const at=l.aH(ye.glyphDependencies,Zt=>Object.keys(Zt).map(Number));this.inFlightDependencies.forEach(Zt=>Zt==null?void 0:Zt.cancel()),this.inFlightDependencies=[];const bt=++this.dependencySentinel;Object.keys(at).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,ze=$t,nn.call(this)))})):ze={};const At=Object.keys(ye.iconDependencies);At.length?this.inFlightDependencies.push(se.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"icons"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,xt=$t,nn.call(this)))})):xt={};const Qt=Object.keys(ye.patternDependencies);function nn(){if(Ie)return le(Ie);if(ze&&xt&&kt){const Zt=new w(ze),$t=new l.bp(xt,kt);for(const xr in he){const on=he[xr];on instanceof l.a4?(I(on.layers,this.zoom,Y),l.bq({bucket:on,glyphMap:ze,glyphPositions:Zt.positions,imageMap:xt,imagePositions:$t.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):on.hasPattern&&(on instanceof l.br||on instanceof l.bs||on instanceof l.bt)&&(I(on.layers,this.zoom,Y),on.addFeatures(ye,this.tileID.canonical,$t.patternPositions))}this.status="done",le(null,{buckets:Object.values(he).filter(xr=>!xr.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zt.image,imageAtlas:$t,glyphMap:this.returnDependencies?ze:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?Zt.positions:null})}}Qt.length?this.inFlightDependencies.push(se.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,kt=$t,nn.call(this)))})):kt={},nn.call(this)}}function I(re,N,G){const Y=new l.a8(N);for(const se of re)se.recalculate(Y,G)}function k(re,N){const G=l.l(re.request,(Y,se,le,_e)=>{if(Y)N(Y);else if(se)try{const fe=new l.bw.VectorTile(new l.bv(se));N(null,{vectorTile:fe,rawData:se,cacheControl:le,expires:_e})}catch(fe){const he=new Uint8Array(se);let ye=`Unable to parse the tile at ${re.request.url}, `;ye+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${fe.messge}`,N(new Error(ye))}});return()=>{G.cancel(),N()}}class j{constructor(N,G,Y,se){this.actor=N,this.layerIndex=G,this.availableImages=Y,this.loadVectorData=se||k,this.fetching={},this.loading={},this.loaded={}}loadTile(N,G){const Y=N.uid;this.loading||(this.loading={});const se=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bu(N.request),le=this.loading[Y]=new M(N);le.abort=this.loadVectorData(N,(_e,fe)=>{if(delete this.loading[Y],_e||!fe)return le.status="done",this.loaded[Y]=le,G(_e);const he=fe.rawData,ye={};fe.expires&&(ye.expires=fe.expires),fe.cacheControl&&(ye.cacheControl=fe.cacheControl);const Me={};if(se){const Ie=se.finish();Ie&&(Me.resourceTiming=JSON.parse(JSON.stringify(Ie)))}le.vectorTile=fe.vectorTile,le.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ie,ze)=>{if(delete this.fetching[Y],Ie||!ze)return G(Ie);G(null,l.e({rawTileData:he.slice(0)},ze,ye,Me))}),this.loaded=this.loaded||{},this.loaded[Y]=le,this.fetching[Y]={rawTileData:he,cacheControl:ye,resourceTiming:Me}})}reloadTile(N,G){const Y=this.loaded,se=N.uid;if(Y&&Y[se]){const le=Y[se];le.showCollisionBoxes=N.showCollisionBoxes,le.status==="parsing"?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,fe)=>{if(_e||!fe)return G(_e,fe);let he;if(this.fetching[se]){const{rawTileData:ye,cacheControl:Me,resourceTiming:Ie}=this.fetching[se];delete this.fetching[se],he=l.e({rawTileData:ye.slice(0)},fe,Me,Ie)}else he=fe;G(null,he)}):le.status==="done"&&(le.vectorTile?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(N,G){const Y=this.loading,se=N.uid;Y&&Y[se]&&Y[se].abort&&(Y[se].abort(),delete Y[se]),G()}removeTile(N,G){const Y=this.loaded,se=N.uid;Y&&Y[se]&&delete Y[se],G()}}class X{constructor(){this.loaded={}}loadTile(N,G){return l._(this,void 0,void 0,function*(){const{uid:Y,encoding:se,rawImageData:le,redFactor:_e,greenFactor:fe,blueFactor:he,baseShift:ye}=N,Me=le.width+2,Ie=le.height+2,ze=l.a(le)?new l.R({width:Me,height:Ie},yield l.bx(le,-1,-1,Me,Ie)):le,xt=new l.by(Y,ze,se,_e,fe,he,ye);this.loaded=this.loaded||{},this.loaded[Y]=xt,G(null,xt)})}removeTile(N){const G=this.loaded,Y=N.uid;G&&G[Y]&&delete G[Y]}}function O(re,N){if(re.length!==0){H(re[0],N);for(var G=1;G<re.length;G++)H(re[G],!N)}}function H(re,N){for(var G=0,Y=0,se=0,le=re.length,_e=le-1;se<le;_e=se++){var fe=(re[se][0]-re[_e][0])*(re[_e][1]+re[se][1]),he=G+fe;Y+=Math.abs(G)>=Math.abs(fe)?G-he+fe:fe-he+G,G=he}G+Y>=0!=!!N&&re.reverse()}var B=l.bz(function re(N,G){var Y,se=N&&N.type;if(se==="FeatureCollection")for(Y=0;Y<N.features.length;Y++)re(N.features[Y],G);else if(se==="GeometryCollection")for(Y=0;Y<N.geometries.length;Y++)re(N.geometries[Y],G);else if(se==="Feature")re(N.geometry,G);else if(se==="Polygon")O(N.coordinates,G);else if(se==="MultiPolygon")for(Y=0;Y<N.coordinates.length;Y++)O(N.coordinates[Y],G);return N});const V=l.bw.VectorTileFeature.prototype.toGeoJSON;var Z={exports:{}},ne=l.bA,de=l.bw.VectorTileFeature,Se=ke;function ke(re,N){this.options=N||{},this.features=re,this.length=re.length}function we(re,N){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=N||4096}ke.prototype.feature=function(re){return new we(this.features[re],this.options.extent)},we.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var N=0;N<re.length;N++){for(var G=re[N],Y=[],se=0;se<G.length;se++)Y.push(new ne(G[se][0],G[se][1]));this.geometry.push(Y)}return this.geometry},we.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,N=1/0,G=-1/0,Y=1/0,se=-1/0,le=0;le<re.length;le++)for(var _e=re[le],fe=0;fe<_e.length;fe++){var he=_e[fe];N=Math.min(N,he.x),G=Math.max(G,he.x),Y=Math.min(Y,he.y),se=Math.max(se,he.y)}return[N,Y,G,se]},we.prototype.toGeoJSON=de.prototype.toGeoJSON;var Ye=l.bB,Fe=Se;function pt(re){var N=new Ye;return function(G,Y){for(var se in G.layers)Y.writeMessage(3,nt,G.layers[se])}(re,N),N.finish()}function nt(re,N){var G;N.writeVarintField(15,re.version||1),N.writeStringField(1,re.name||""),N.writeVarintField(5,re.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<re.length;G++)Y.feature=re.feature(G),N.writeMessage(2,Et,Y);var se=Y.keys;for(G=0;G<se.length;G++)N.writeStringField(3,se[G]);var le=Y.values;for(G=0;G<le.length;G++)N.writeMessage(4,Pe,le[G])}function Et(re,N){var G=re.feature;G.id!==void 0&&N.writeVarintField(1,G.id),N.writeMessage(2,Ze,re),N.writeVarintField(3,G.type),N.writeMessage(4,Pt,G)}function Ze(re,N){var G=re.feature,Y=re.keys,se=re.values,le=re.keycache,_e=re.valuecache;for(var fe in G.properties){var he=G.properties[fe],ye=le[fe];if(he!==null){ye===void 0&&(Y.push(fe),le[fe]=ye=Y.length-1),N.writeVarint(ye);var Me=typeof he;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(he=JSON.stringify(he));var Ie=Me+":"+he,ze=_e[Ie];ze===void 0&&(se.push(he),_e[Ie]=ze=se.length-1),N.writeVarint(ze)}}}function dt(re,N){return(N<<3)+(7&re)}function mt(re){return re<<1^re>>31}function Pt(re,N){for(var G=re.loadGeometry(),Y=re.type,se=0,le=0,_e=G.length,fe=0;fe<_e;fe++){var he=G[fe],ye=1;Y===1&&(ye=he.length),N.writeVarint(dt(1,ye));for(var Me=Y===3?he.length-1:he.length,Ie=0;Ie<Me;Ie++){Ie===1&&Y!==1&&N.writeVarint(dt(2,Me-1));var ze=he[Ie].x-se,xt=he[Ie].y-le;N.writeVarint(mt(ze)),N.writeVarint(mt(xt)),se+=ze,le+=xt}Y===3&&N.writeVarint(dt(7,1))}}function Pe(re,N){var G=typeof re;G==="string"?N.writeStringField(1,re):G==="boolean"?N.writeBooleanField(7,re):G==="number"&&(re%1!=0?N.writeDoubleField(3,re):re<0?N.writeSVarintField(6,re):N.writeVarintField(5,re))}Z.exports=pt,Z.exports.fromVectorTileJs=pt,Z.exports.fromGeojsonVt=function(re,N){N=N||{};var G={};for(var Y in re)G[Y]=new Fe(re[Y].features,N),G[Y].name=Y,G[Y].version=N.version,G[Y].extent=N.extent;return pt({layers:G})},Z.exports.GeoJSONWrapper=Fe;var We=l.bz(Z.exports);const yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},ot=Math.fround||(_t=new Float32Array(1),re=>(_t[0]=+re,_t[0]));var _t;const vt=3,Nt=5,Dn=6;class Gt{constructor(N){this.options=Object.assign(Object.create(yt),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){const{log:G,minZoom:Y,maxZoom:se}=this.options;G&&console.time("total time");const le=`prepare ${N.length} points`;G&&console.time(le),this.points=N;const _e=[];for(let he=0;he<N.length;he++){const ye=N[he];if(!ye.geometry)continue;const[Me,Ie]=ye.geometry.coordinates,ze=ot($n(Me)),xt=ot(Ln(Ie));_e.push(ze,xt,1/0,he,-1,1),this.options.reduce&&_e.push(0)}let fe=this.trees[se+1]=this._createTree(_e);G&&console.timeEnd(le);for(let he=se;he>=Y;he--){const ye=+Date.now();fe=this.trees[he]=this._createTree(this._cluster(fe,he)),G&&console.log("z%d: %d clusters in %dms",he,fe.numItems,+Date.now()-ye)}return G&&console.timeEnd("total time"),this}getClusters(N,G){let Y=((N[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,N[1]));let le=N[2]===180?180:((N[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)Y=-180,le=180;else if(Y>le){const Ie=this.getClusters([Y,se,180,_e],G),ze=this.getClusters([-180,se,le,_e],G);return Ie.concat(ze)}const fe=this.trees[this._limitZoom(G)],he=fe.range($n(Y),Ln(_e),$n(le),Ln(se)),ye=fe.data,Me=[];for(const Ie of he){const ze=this.stride*Ie;Me.push(ye[ze+Nt]>1?sr(ye,ze,this.clusterProps):this.points[ye[ze+vt]])}return Me}getChildren(N){const G=this._getOriginId(N),Y=this._getOriginZoom(N),se="No cluster with the specified id.",le=this.trees[Y];if(!le)throw new Error(se);const _e=le.data;if(G*this.stride>=_e.length)throw new Error(se);const fe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),he=le.within(_e[G*this.stride],_e[G*this.stride+1],fe),ye=[];for(const Me of he){const Ie=Me*this.stride;_e[Ie+4]===N&&ye.push(_e[Ie+Nt]>1?sr(_e,Ie,this.clusterProps):this.points[_e[Ie+vt]])}if(ye.length===0)throw new Error(se);return ye}getLeaves(N,G,Y){const se=[];return this._appendLeaves(se,N,G=G||10,Y=Y||0,0),se}getTile(N,G,Y){const se=this.trees[this._limitZoom(N)],le=Math.pow(2,N),{extent:_e,radius:fe}=this.options,he=fe/_e,ye=(Y-he)/le,Me=(Y+1+he)/le,Ie={features:[]};return this._addTileFeatures(se.range((G-he)/le,ye,(G+1+he)/le,Me),se.data,G,Y,le,Ie),G===0&&this._addTileFeatures(se.range(1-he/le,ye,1,Me),se.data,le,Y,le,Ie),G===le-1&&this._addTileFeatures(se.range(0,ye,he/le,Me),se.data,-1,Y,le,Ie),Ie.features.length?Ie:null}getClusterExpansionZoom(N){let G=this._getOriginZoom(N)-1;for(;G<=this.options.maxZoom;){const Y=this.getChildren(N);if(G++,Y.length!==1)break;N=Y[0].properties.cluster_id}return G}_appendLeaves(N,G,Y,se,le){const _e=this.getChildren(G);for(const fe of _e){const he=fe.properties;if(he&&he.cluster?le+he.point_count<=se?le+=he.point_count:le=this._appendLeaves(N,he.cluster_id,Y,se,le):le<se?le++:N.push(fe),N.length===Y)break}return le}_createTree(N){const G=new l.av(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<N.length;Y+=this.stride)G.add(N[Y],N[Y+1]);return G.finish(),G.data=N,G}_addTileFeatures(N,G,Y,se,le,_e){for(const fe of N){const he=fe*this.stride,ye=G[he+Nt]>1;let Me,Ie,ze;if(ye)Me=cr(G,he,this.clusterProps),Ie=G[he],ze=G[he+1];else{const at=this.points[G[he+vt]];Me=at.properties;const[bt,At]=at.geometry.coordinates;Ie=$n(bt),ze=Ln(At)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Ie*le-Y)),Math.round(this.options.extent*(ze*le-se))]],tags:Me};let kt;kt=ye||this.options.generateId?G[he+vt]:this.points[G[he+vt]].id,kt!==void 0&&(xt.id=kt),_e.features.push(xt)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,G){const{radius:Y,extent:se,reduce:le,minPoints:_e}=this.options,fe=Y/(se*Math.pow(2,G)),he=N.data,ye=[],Me=this.stride;for(let Ie=0;Ie<he.length;Ie+=Me){if(he[Ie+2]<=G)continue;he[Ie+2]=G;const ze=he[Ie],xt=he[Ie+1],kt=N.within(he[Ie],he[Ie+1],fe),at=he[Ie+Nt];let bt=at;for(const At of kt){const Qt=At*Me;he[Qt+2]>G&&(bt+=he[Qt+Nt])}if(bt>at&&bt>=_e){let At,Qt=ze*at,nn=xt*at,Zt=-1;const $t=((Ie/Me|0)<<5)+(G+1)+this.points.length;for(const xr of kt){const on=xr*Me;if(he[on+2]<=G)continue;he[on+2]=G;const Gn=he[on+Nt];Qt+=he[on]*Gn,nn+=he[on+1]*Gn,he[on+4]=$t,le&&(At||(At=this._map(he,Ie,!0),Zt=this.clusterProps.length,this.clusterProps.push(At)),le(At,this._map(he,on)))}he[Ie+4]=$t,ye.push(Qt/bt,nn/bt,1/0,$t,-1,bt),le&&ye.push(Zt)}else{for(let At=0;At<Me;At++)ye.push(he[Ie+At]);if(bt>1)for(const At of kt){const Qt=At*Me;if(!(he[Qt+2]<=G)){he[Qt+2]=G;for(let nn=0;nn<Me;nn++)ye.push(he[Qt+nn])}}}}return ye}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,G,Y){if(N[G+Nt]>1){const _e=this.clusterProps[N[G+Dn]];return Y?Object.assign({},_e):_e}const se=this.points[N[G+vt]].properties,le=this.options.map(se);return Y&&le===se?Object.assign({},le):le}}function sr(re,N,G){return{type:"Feature",id:re[N+vt],properties:cr(re,N,G),geometry:{type:"Point",coordinates:[(Y=re[N],360*(Y-.5)),cs(re[N+1])]}};var Y}function cr(re,N,G){const Y=re[N+Nt],se=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,le=re[N+Dn],_e=le===-1?{}:Object.assign({},G[le]);return Object.assign(_e,{cluster:!0,cluster_id:re[N+vt],point_count:Y,point_count_abbreviated:se})}function $n(re){return re/360+.5}function Ln(re){const N=Math.sin(re*Math.PI/180),G=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return G<0?0:G>1?1:G}function cs(re){const N=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function kr(re,N,G,Y){for(var se,le=Y,_e=G-N>>1,fe=G-N,he=re[N],ye=re[N+1],Me=re[G],Ie=re[G+1],ze=N+3;ze<G;ze+=3){var xt=ai(re[ze],re[ze+1],he,ye,Me,Ie);if(xt>le)se=ze,le=xt;else if(xt===le){var kt=Math.abs(ze-_e);kt<fe&&(se=ze,fe=kt)}}le>Y&&(se-N>3&&kr(re,N,se,Y),re[se+2]=le,G-se>3&&kr(re,se,G,Y))}function ai(re,N,G,Y,se,le){var _e=se-G,fe=le-Y;if(_e!==0||fe!==0){var he=((re-G)*_e+(N-Y)*fe)/(_e*_e+fe*fe);he>1?(G=se,Y=le):he>0&&(G+=_e*he,Y+=fe*he)}return(_e=re-G)*_e+(fe=N-Y)*fe}function Ar(re,N,G,Y){var se={id:re===void 0?null:re,type:N,geometry:G,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(le){var _e=le.geometry,fe=le.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Gi(le,_e);else if(fe==="Polygon"||fe==="MultiLineString")for(var he=0;he<_e.length;he++)Gi(le,_e[he]);else if(fe==="MultiPolygon")for(he=0;he<_e.length;he++)for(var ye=0;ye<_e[he].length;ye++)Gi(le,_e[he][ye])}(se),se}function Gi(re,N){for(var G=0;G<N.length;G+=3)re.minX=Math.min(re.minX,N[G]),re.minY=Math.min(re.minY,N[G+1]),re.maxX=Math.max(re.maxX,N[G]),re.maxY=Math.max(re.maxY,N[G+1])}function yr(re,N,G,Y){if(N.geometry){var se=N.geometry.coordinates,le=N.geometry.type,_e=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),fe=[],he=N.id;if(G.promoteId?he=N.properties[G.promoteId]:G.generateId&&(he=Y||0),le==="Point")Pi(se,fe);else if(le==="MultiPoint")for(var ye=0;ye<se.length;ye++)Pi(se[ye],fe);else if(le==="LineString")ki(se,fe,_e,!1);else if(le==="MultiLineString"){if(G.lineMetrics){for(ye=0;ye<se.length;ye++)ki(se[ye],fe=[],_e,!1),re.push(Ar(he,"LineString",fe,N.properties));return}dn(se,fe,_e,!1)}else if(le==="Polygon")dn(se,fe,_e,!0);else{if(le!=="MultiPolygon"){if(le==="GeometryCollection"){for(ye=0;ye<N.geometry.geometries.length;ye++)yr(re,{id:he,geometry:N.geometry.geometries[ye],properties:N.properties},G,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<se.length;ye++){var Me=[];dn(se[ye],Me,_e,!0),fe.push(Me)}}re.push(Ar(he,le,fe,N.properties))}}function Pi(re,N){N.push(Ae(re[0])),N.push(vr(re[1])),N.push(0)}function ki(re,N,G,Y){for(var se,le,_e=0,fe=0;fe<re.length;fe++){var he=Ae(re[fe][0]),ye=vr(re[fe][1]);N.push(he),N.push(ye),N.push(0),fe>0&&(_e+=Y?(se*ye-he*le)/2:Math.sqrt(Math.pow(he-se,2)+Math.pow(ye-le,2))),se=he,le=ye}var Me=N.length-3;N[2]=1,kr(N,0,Me,G),N[Me+2]=1,N.size=Math.abs(_e),N.start=0,N.end=N.size}function dn(re,N,G,Y){for(var se=0;se<re.length;se++){var le=[];ki(re[se],le,G,Y),N.push(le)}}function Ae(re){return re/360+.5}function vr(re){var N=Math.sin(re*Math.PI/180),G=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return G<0?0:G>1?1:G}function jr(re,N,G,Y,se,le,_e,fe){if(Y/=N,le>=(G/=N)&&_e<Y)return re;if(_e<G||le>=Y)return null;for(var he=[],ye=0;ye<re.length;ye++){var Me=re[ye],Ie=Me.geometry,ze=Me.type,xt=se===0?Me.minX:Me.minY,kt=se===0?Me.maxX:Me.maxY;if(xt>=G&&kt<Y)he.push(Me);else if(!(kt<G||xt>=Y)){var at=[];if(ze==="Point"||ze==="MultiPoint")Ht(Ie,at,G,Y,se);else if(ze==="LineString")qt(Ie,at,G,Y,se,!1,fe.lineMetrics);else if(ze==="MultiLineString")us(Ie,at,G,Y,se,!1);else if(ze==="Polygon")us(Ie,at,G,Y,se,!0);else if(ze==="MultiPolygon")for(var bt=0;bt<Ie.length;bt++){var At=[];us(Ie[bt],At,G,Y,se,!0),At.length&&at.push(At)}if(at.length){if(fe.lineMetrics&&ze==="LineString"){for(bt=0;bt<at.length;bt++)he.push(Ar(Me.id,ze,at[bt],Me.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(at.length===1?(ze="LineString",at=at[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=at.length===3?"Point":"MultiPoint"),he.push(Ar(Me.id,ze,at,Me.tags))}}}return he.length?he:null}function Ht(re,N,G,Y,se){for(var le=0;le<re.length;le+=3){var _e=re[le+se];_e>=G&&_e<=Y&&(N.push(re[le]),N.push(re[le+1]),N.push(re[le+2]))}}function qt(re,N,G,Y,se,le,_e){for(var fe,he,ye=li(re),Me=se===0?wo:ci,Ie=re.start,ze=0;ze<re.length-3;ze+=3){var xt=re[ze],kt=re[ze+1],at=re[ze+2],bt=re[ze+3],At=re[ze+4],Qt=se===0?xt:kt,nn=se===0?bt:At,Zt=!1;_e&&(fe=Math.sqrt(Math.pow(xt-bt,2)+Math.pow(kt-At,2))),Qt<G?nn>G&&(he=Me(ye,xt,kt,bt,At,G),_e&&(ye.start=Ie+fe*he)):Qt>Y?nn<Y&&(he=Me(ye,xt,kt,bt,At,Y),_e&&(ye.start=Ie+fe*he)):_r(ye,xt,kt,at),nn<G&&Qt>=G&&(he=Me(ye,xt,kt,bt,At,G),Zt=!0),nn>Y&&Qt<=Y&&(he=Me(ye,xt,kt,bt,At,Y),Zt=!0),!le&&Zt&&(_e&&(ye.end=Ie+fe*he),N.push(ye),ye=li(re)),_e&&(Ie+=fe)}var $t=re.length-3;xt=re[$t],kt=re[$t+1],at=re[$t+2],(Qt=se===0?xt:kt)>=G&&Qt<=Y&&_r(ye,xt,kt,at),$t=ye.length-3,le&&$t>=3&&(ye[$t]!==ye[0]||ye[$t+1]!==ye[1])&&_r(ye,ye[0],ye[1],ye[2]),ye.length&&N.push(ye)}function li(re){var N=[];return N.size=re.size,N.start=re.start,N.end=re.end,N}function us(re,N,G,Y,se,le){for(var _e=0;_e<re.length;_e++)qt(re[_e],N,G,Y,se,le,!1)}function _r(re,N,G,Y){re.push(N),re.push(G),re.push(Y)}function wo(re,N,G,Y,se,le){var _e=(le-N)/(Y-N);return re.push(le),re.push(G+(se-G)*_e),re.push(1),_e}function ci(re,N,G,Y,se,le){var _e=(le-G)/(se-G);return re.push(N+(Y-N)*_e),re.push(le),re.push(1),_e}function qi(re,N){for(var G=[],Y=0;Y<re.length;Y++){var se,le=re[Y],_e=le.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")se=As(le.geometry,N);else if(_e==="MultiLineString"||_e==="Polygon"){se=[];for(var fe=0;fe<le.geometry.length;fe++)se.push(As(le.geometry[fe],N))}else if(_e==="MultiPolygon")for(se=[],fe=0;fe<le.geometry.length;fe++){for(var he=[],ye=0;ye<le.geometry[fe].length;ye++)he.push(As(le.geometry[fe][ye],N));se.push(he)}G.push(Ar(le.id,_e,se,le.tags))}return G}function As(re,N){var G=[];G.size=re.size,re.start!==void 0&&(G.start=re.start,G.end=re.end);for(var Y=0;Y<re.length;Y+=3)G.push(re[Y]+N,re[Y+1],re[Y+2]);return G}function je(re,N){if(re.transformed)return re;var G,Y,se,le=1<<re.z,_e=re.x,fe=re.y;for(G=0;G<re.features.length;G++){var he=re.features[G],ye=he.geometry,Me=he.type;if(he.geometry=[],Me===1)for(Y=0;Y<ye.length;Y+=2)he.geometry.push(ui(ye[Y],ye[Y+1],N,le,_e,fe));else for(Y=0;Y<ye.length;Y++){var Ie=[];for(se=0;se<ye[Y].length;se+=2)Ie.push(ui(ye[Y][se],ye[Y][se+1],N,le,_e,fe));he.geometry.push(Ie)}}return re.transformed=!0,re}function ui(re,N,G,Y,se,le){return[Math.round(G*(re*Y-se)),Math.round(G*(N*Y-le))]}function pn(re,N,G,Y,se){for(var le=N===se.maxZoom?0:se.tolerance/((1<<N)*se.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:Y,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<re.length;fe++){_e.numFeatures++,Zi(_e,re[fe],le,se);var he=re[fe].minX,ye=re[fe].minY,Me=re[fe].maxX,Ie=re[fe].maxY;he<_e.minX&&(_e.minX=he),ye<_e.minY&&(_e.minY=ye),Me>_e.maxX&&(_e.maxX=Me),Ie>_e.maxY&&(_e.maxY=Ie)}return _e}function Zi(re,N,G,Y){var se=N.geometry,le=N.type,_e=[];if(le==="Point"||le==="MultiPoint")for(var fe=0;fe<se.length;fe+=3)_e.push(se[fe]),_e.push(se[fe+1]),re.numPoints++,re.numSimplified++;else if(le==="LineString")or(_e,se,re,G,!1,!1);else if(le==="MultiLineString"||le==="Polygon")for(fe=0;fe<se.length;fe++)or(_e,se[fe],re,G,le==="Polygon",fe===0);else if(le==="MultiPolygon")for(var he=0;he<se.length;he++){var ye=se[he];for(fe=0;fe<ye.length;fe++)or(_e,ye[fe],re,G,!0,fe===0)}if(_e.length){var Me=N.tags||null;if(le==="LineString"&&Y.lineMetrics){for(var Ie in Me={},N.tags)Me[Ie]=N.tags[Ie];Me.mapbox_clip_start=se.start/se.size,Me.mapbox_clip_end=se.end/se.size}var ze={geometry:_e,type:le==="Polygon"||le==="MultiPolygon"?3:le==="LineString"||le==="MultiLineString"?2:1,tags:Me};N.id!==null&&(ze.id=N.id),re.features.push(ze)}}function or(re,N,G,Y,se,le){var _e=Y*Y;if(Y>0&&N.size<(se?_e:Y))G.numPoints+=N.length/3;else{for(var fe=[],he=0;he<N.length;he+=3)(Y===0||N[he+2]>_e)&&(G.numSimplified++,fe.push(N[he]),fe.push(N[he+1])),G.numPoints++;se&&function(ye,Me){for(var Ie=0,ze=0,xt=ye.length,kt=xt-2;ze<xt;kt=ze,ze+=2)Ie+=(ye[ze]-ye[kt])*(ye[ze+1]+ye[kt+1]);if(Ie>0===Me)for(ze=0,xt=ye.length;ze<xt/2;ze+=2){var at=ye[ze],bt=ye[ze+1];ye[ze]=ye[xt-2-ze],ye[ze+1]=ye[xt-1-ze],ye[xt-2-ze]=at,ye[xt-1-ze]=bt}}(fe,le),re.push(fe)}}function $e(re,N){var G=(N=this.options=function(se,le){for(var _e in le)se[_e]=le[_e];return se}(Object.create(this.options),N)).debug;if(G&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(se,le){var _e=[];if(se.type==="FeatureCollection")for(var fe=0;fe<se.features.length;fe++)yr(_e,se.features[fe],le,fe);else yr(_e,se.type==="Feature"?se:{geometry:se},le);return _e}(re,N);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Y=function(se,le){var _e=le.buffer/le.extent,fe=se,he=jr(se,1,-1-_e,_e,0,-1,2,le),ye=jr(se,1,1-_e,2+_e,0,-1,2,le);return(he||ye)&&(fe=jr(se,1,-_e,1+_e,0,-1,2,le)||[],he&&(fe=qi(he,1).concat(fe)),ye&&(fe=fe.concat(qi(ye,-1)))),fe}(Y,N),Y.length&&this.splitTile(Y,0,0,0),G&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xe(re,N,G){return 32*((1<<re)*G+N)+re}function rt(re,N){return N?re.properties[N]:re.id}function Dt(re,N){if(re==null)return!0;if(re.type==="Feature")return rt(re,N)!=null;if(re.type==="FeatureCollection"){const G=new Set;for(const Y of re.features){const se=rt(Y,N);if(se==null||G.has(se))return!1;G.add(se)}return!0}return!1}function zn(re,N){const G=new Map;if(re!=null)if(re.type==="Feature")G.set(rt(re,N),re);else for(const Y of re.features)G.set(rt(Y,N),Y);return G}$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(re,N,G,Y,se,le,_e){for(var fe=[re,N,G,Y],he=this.options,ye=he.debug;fe.length;){Y=fe.pop(),G=fe.pop(),N=fe.pop(),re=fe.pop();var Me=1<<N,Ie=Xe(N,G,Y),ze=this.tiles[Ie];if(!ze&&(ye>1&&console.time("creation"),ze=this.tiles[Ie]=pn(re,N,G,Y,he),this.tileCoords.push({z:N,x:G,y:Y}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,G,Y,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var xt="z"+N;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(ze.source=re,se){if(N===he.maxZoom||N===se)continue;var kt=1<<se-N;if(G!==Math.floor(le/kt)||Y!==Math.floor(_e/kt))continue}else if(N===he.indexMaxZoom||ze.numPoints<=he.indexMaxPoints)continue;if(ze.source=null,re.length!==0){ye>1&&console.time("clipping");var at,bt,At,Qt,nn,Zt,$t=.5*he.buffer/he.extent,xr=.5-$t,on=.5+$t,Gn=1+$t;at=bt=At=Qt=null,nn=jr(re,Me,G-$t,G+on,0,ze.minX,ze.maxX,he),Zt=jr(re,Me,G+xr,G+Gn,0,ze.minX,ze.maxX,he),re=null,nn&&(at=jr(nn,Me,Y-$t,Y+on,1,ze.minY,ze.maxY,he),bt=jr(nn,Me,Y+xr,Y+Gn,1,ze.minY,ze.maxY,he),nn=null),Zt&&(At=jr(Zt,Me,Y-$t,Y+on,1,ze.minY,ze.maxY,he),Qt=jr(Zt,Me,Y+xr,Y+Gn,1,ze.minY,ze.maxY,he),Zt=null),ye>1&&console.timeEnd("clipping"),fe.push(at||[],N+1,2*G,2*Y),fe.push(bt||[],N+1,2*G,2*Y+1),fe.push(At||[],N+1,2*G+1,2*Y),fe.push(Qt||[],N+1,2*G+1,2*Y+1)}}},$e.prototype.getTile=function(re,N,G){var Y=this.options,se=Y.extent,le=Y.debug;if(re<0||re>24)return null;var _e=1<<re,fe=Xe(re,N=(N%_e+_e)%_e,G);if(this.tiles[fe])return je(this.tiles[fe],se);le>1&&console.log("drilling down to z%d-%d-%d",re,N,G);for(var he,ye=re,Me=N,Ie=G;!he&&ye>0;)ye--,Me=Math.floor(Me/2),Ie=Math.floor(Ie/2),he=this.tiles[Xe(ye,Me,Ie)];return he&&he.source?(le>1&&console.log("found parent tile z%d-%d-%d",ye,Me,Ie),le>1&&console.time("drilling down"),this.splitTile(he.source,ye,Me,Ie,re,N,G),le>1&&console.timeEnd("drilling down"),this.tiles[fe]?je(this.tiles[fe],se):null):null};class St extends j{constructor(N,G,Y,se){super(N,G,Y),this._dataUpdateable=new Map,this.loadGeoJSON=(le,_e)=>{const{promoteId:fe}=le;if(le.request)return l.f(le.request,(he,ye,Me,Ie)=>{this._dataUpdateable=Dt(ye,fe)?zn(ye,fe):void 0,_e(he,ye,Me,Ie)});if(typeof le.data=="string")try{const he=JSON.parse(le.data);this._dataUpdateable=Dt(he,fe)?zn(he,fe):void 0,_e(null,he)}catch{_e(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`))}else le.dataDiff?this._dataUpdateable?(function(he,ye,Me){var Ie,ze,xt,kt;if(ye.removeAll&&he.clear(),ye.remove)for(const at of ye.remove)he.delete(at);if(ye.add)for(const at of ye.add){const bt=rt(at,Me);bt!=null&&he.set(bt,at)}if(ye.update)for(const at of ye.update){let bt=he.get(at.id);if(bt==null)continue;const At=!at.removeAllProperties&&(((Ie=at.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((ze=at.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((at.newGeometry||at.removeAllProperties||At)&&(bt=Object.assign({},bt),he.set(at.id,bt),At&&(bt.properties=Object.assign({},bt.properties))),at.newGeometry&&(bt.geometry=at.newGeometry),at.removeAllProperties)bt.properties={};else if(((xt=at.removeProperties)===null||xt===void 0?void 0:xt.length)>0)for(const Qt of at.removeProperties)Object.prototype.hasOwnProperty.call(bt.properties,Qt)&&delete bt.properties[Qt];if(((kt=at.addOrUpdateProperties)===null||kt===void 0?void 0:kt.length)>0)for(const{key:Qt,value:nn}of at.addOrUpdateProperties)bt.properties[Qt]=nn}}(this._dataUpdateable,le.dataDiff,fe),_e(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):_e(new Error(`Cannot update existing geojson data in ${le.source}`)):_e(new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile(N,G){const Y=N.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const se=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!se)return G(null,null);const le=new class{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=fe.length,this._features=fe}feature(fe){return new class{constructor(he){this._feature=he,this.extent=l.N,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const ye of this._feature.geometry)he.push([new l.P(ye[0],ye[1])]);return he}{const he=[];for(const ye of this._feature.geometry){const Me=[];for(const Ie of ye)Me.push(new l.P(Ie[0],Ie[1]));he.push(Me)}return he}}toGeoJSON(he,ye,Me){return V.call(this,he,ye,Me)}}(this._features[fe])}}(se.features);let _e=We(le);_e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),G(null,{vectorTile:le,rawData:_e.buffer})}loadData(N,G){var Y;(Y=this._pendingRequest)===null||Y===void 0||Y.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bu(N.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(N,(le,_e)=>{if(delete this._pendingCallback,delete this._pendingRequest,le||!_e)return G(le);if(typeof _e!="object")return G(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));{B(_e,!0);try{if(N.filter){const he=l.bC(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(Me=>he.value.evaluate({zoom:0},Me))}}this._geoJSONIndex=N.cluster?new Gt(function({superclusterOptions:he,clusterProperties:ye}){if(!ye||!he)return he;const Me={},Ie={},ze={accumulated:null,zoom:0},xt={properties:null},kt=Object.keys(ye);for(const at of kt){const[bt,At]=ye[at],Qt=l.bC(At),nn=l.bC(typeof bt=="string"?[bt,["accumulated"],["get",at]]:bt);Me[at]=Qt.value,Ie[at]=nn.value}return he.map=at=>{xt.properties=at;const bt={};for(const At of kt)bt[At]=Me[At].evaluate(ze,xt);return bt},he.reduce=(at,bt)=>{xt.properties=bt;for(const At of kt)ze.accumulated=at[At],at[At]=Ie[At].evaluate(ze,xt)},he}(N)).load(_e.features):function(he,ye){return new $e(he,ye)}(_e,N.geojsonVtOptions)}catch(he){return G(he)}this.loaded={};const fe={};if(se){const he=se.finish();he&&(fe.resourceTiming={},fe.resourceTiming[N.source]=JSON.parse(JSON.stringify(he)))}G(null,fe)}})}reloadTile(N,G){const Y=this.loaded;return Y&&Y[N.uid]?super.reloadTile(N,G):this.loadTile(N,G)}removeSource(N,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(N,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(Y){G(Y)}}getClusterChildren(N,G){try{G(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(Y){G(Y)}}getClusterLeaves(N,G){try{G(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(Y){G(Y)}}}class Ur{constructor(N){this.self=N,this.actor=new l.C(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:St},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,Y)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=Y},this.self.registerRTLTextPlugin=G=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=G.applyArabicShaping,l.bD.processBidirectionalText=G.processBidirectionalText,l.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(N,G){this.referrer=G}setImages(N,G,Y){this.availableImages[N]=G;for(const se in this.workerSources[N]){const le=this.workerSources[N][se];for(const _e in le)le[_e].availableImages=G}Y()}setLayers(N,G,Y){this.getLayerIndex(N).replace(G),Y()}updateLayers(N,G,Y){this.getLayerIndex(N).update(G.layers,G.removedIds),Y()}loadTile(N,G,Y){this.getWorkerSource(N,G.type,G.source).loadTile(G,Y)}loadDEMTile(N,G,Y){this.getDEMWorkerSource(N,G.source).loadTile(G,Y)}reloadTile(N,G,Y){this.getWorkerSource(N,G.type,G.source).reloadTile(G,Y)}abortTile(N,G,Y){this.getWorkerSource(N,G.type,G.source).abortTile(G,Y)}removeTile(N,G,Y){this.getWorkerSource(N,G.type,G.source).removeTile(G,Y)}removeDEMTile(N,G){this.getDEMWorkerSource(N,G.source).removeTile(G)}removeSource(N,G,Y){if(!this.workerSources[N]||!this.workerSources[N][G.type]||!this.workerSources[N][G.type][G.source])return;const se=this.workerSources[N][G.type][G.source];delete this.workerSources[N][G.type][G.source],se.removeSource!==void 0?se.removeSource(G,Y):Y()}loadWorkerSource(N,G,Y){try{this.self.importScripts(G.url),Y()}catch(se){Y(se.toString())}}syncRTLPluginState(N,G,Y){try{l.bD.setState(G);const se=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&se!=null){this.self.importScripts(se);const le=l.bD.isParsed();Y(le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),le)}}catch(se){Y(se.toString())}}getAvailableImages(N){let G=this.availableImages[N];return G||(G=[]),G}getLayerIndex(N){let G=this.layerIndexes[N];return G||(G=this.layerIndexes[N]=new S),G}getWorkerSource(N,G,Y){return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][G]||(this.workerSources[N][G]={}),this.workerSources[N][G][Y]||(this.workerSources[N][G][Y]=new this.workerSourceTypes[G]({send:(se,le,_e)=>{this.actor.send(se,le,_e,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][G][Y]}getDEMWorkerSource(N,G){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][G]||(this.demWorkerSources[N][G]=new X),this.demWorkerSources[N][G]}}return l.i()&&(self.worker=new Ur(self)),Ur}),p(["./shared"],function(l){var S="3.6.2";class w{static testProp(r){if(!w.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in w.docStyle)return r[c];return r[0]}static create(r,c,d){const m=window.document.createElement(r);return c!==void 0&&(m.className=c),d&&d.appendChild(m),m}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,c){r.style[w.transformProp]=c}static addEventListener(r,c,d,m={}){r.addEventListener(c,d,"passive"in m?m:m.capture)}static removeEventListener(r,c,d,m={}){r.removeEventListener(c,d,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,c){const d=r.getBoundingClientRect();return new l.P(c.clientX-d.left-r.clientLeft,c.clientY-d.top-r.clientTop)}static touchPos(r,c){const d=r.getBoundingClientRect(),m=[];for(let _=0;_<c.length;_++)m.push(new l.P(c[_].clientX-d.left-r.clientLeft,c[_].clientY-d.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const M={supported:!1,testSupport:function(g){!j&&k&&(X?O(g):I=g)}};let I,k,j=!1,X=!1;function O(g){const r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,k),g.isContextLost())return;M.supported=!0}catch{}g.deleteTexture(r),j=!0}var H,B;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){I&&O(I),I=null,X=!0},k.onerror=function(){j=!0,I=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,c,d,m;g.resetRequestQueue=()=>{r=[],c=0,d=0,m={}},g.addThrottleControl=D=>{const z=d++;return m[z]=D,z},g.removeThrottleControl=D=>{delete m[D],C()},g.getImage=(D,z,R=!0)=>{M.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const q={requestParameters:D,supportImageRefresh:R,callback:z,cancelled:!1,completed:!1,cancel:()=>{q.completed||q.cancelled||(q.cancelled=!0,q.innerRequest&&(q.innerRequest.cancel(),c--),C())}};return r.push(q),C(),q};const _=D=>{const{requestParameters:z,supportImageRefresh:R,callback:q}=D;return l.e(z,{type:"image"}),(R!==!1||l.i()||l.g(z.url)||z.headers&&!Object.keys(z.headers).reduce((te,ee)=>te&&ee==="accept",!0)?l.m:P)(z,(te,ee,ie,Q)=>{T(D,q,te,ee,ie,Q)})},T=(D,z,R,q,te,ee)=>{R?z(R):q instanceof HTMLImageElement||l.a(q)?z(null,q):q&&((ie,Q)=>{typeof createImageBitmap=="function"?l.b(ie,Q):l.d(ie,Q)})(q,(ie,Q)=>{ie!=null?z(ie):Q!=null&&z(null,Q,{cacheControl:te,expires:ee})}),D.cancelled||(D.completed=!0,c--,C())},C=()=>{const D=(()=>{const z=Object.keys(m);let R=!1;if(z.length>0){for(const q of z)if(R=m[q](),R)break}return R})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<D&&r.length>0;z++){const R=r.shift();if(R.cancelled){z--;continue}const q=_(R);c++,R.innerRequest=q}},P=(D,z)=>{const R=new Image,q=D.url;let te=!1;const ee=D.credentials;return ee&&ee==="include"?R.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!l.s(q))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{z(null,R),R.onerror=R.onload=null},R.onerror=()=>{te||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=q,{cancel:()=>{te=!0,R.src=""}}}}(H||(H={})),H.resetRequestQueue(),function(g){g.Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown"}(B||(B={}));class V{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}normalizeSpriteURL(r,c,d){const m=function(_){const T=_.match(Z);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${c}${d}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const Z=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ne(g){var r=new l.A(3);return r[0]=g[0],r[1]=g[1],r[2]=g[2],r}var de,Se=function(g,r,c){return g[0]=r[0]-c[0],g[1]=r[1]-c[1],g[2]=r[2]-c[2],g};de=new l.A(3),l.A!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0);var ke=function(g){var r=g[0],c=g[1];return r*r+c*c};function we(g){const r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){const c=[];for(const{id:d,url:m}of g){const _=`${d}${m}`;c.indexOf(_)===-1&&(c.push(_),r.push({id:d,url:m}))}}return r}function Ye(g,r,c,d,m){if(d)return void g(d);if(m!==Object.values(r).length||m!==Object.values(c).length)return;const _={};for(const T in r){_[T]={};const C=l.h.getImageCanvasContext(c[T]),P=r[T];for(const D in P){const{width:z,height:R,x:q,y:te,sdf:ee,pixelRatio:ie,stretchX:Q,stretchY:me,content:be}=P[D];_[T][D]={data:null,pixelRatio:ie,sdf:ee,stretchX:Q,stretchY:me,content:be,spriteData:{width:z,height:R,x:q,y:te,context:C}}}}g(null,_)}(function(){var g=new l.A(2);l.A!=Float32Array&&(g[0]=0,g[1]=0)})();class Fe{constructor(r,c,d,m){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(c,m)}update(r,c,d){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||d),{context:C}=this,{gl:P}=C;if(this.useMipmap=!!(c&&c.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,r):P.texImage2D(P.TEXTURE_2D,0,this.format,m,_,0,this.format,P.UNSIGNED_BYTE,r.data);else{const{x:D,y:z}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?P.texSubImage2D(P.TEXTURE_2D,0,D,z,P.RGBA,P.UNSIGNED_BYTE,r):P.texSubImage2D(P.TEXTURE_2D,0,D,z,m,_,P.RGBA,P.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(r,c,d){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function pt(g){const{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class nt extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,callback:d}of this.requestors)this._notify(c,d);this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const d=c.spriteData;c.data=new l.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let d=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,c){if(!r)return!0;let d=0;for(const m of r){if(m[0]<d||m[1]<m[0]||c<m[1])return!1;d=m[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const d=c.spriteData,m=d&&d.width||c.data.width,_=d&&d.height||c.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,d=!0){const m=this.getImage(r);if(d&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,c){let d=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(d=!1);this.isLoaded()||d?this._notify(r,c):this.requestors.push({ids:r,callback:c})}_notify(r,c){const d={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?d[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,d)}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],d=this.getImage(r);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new l.I(m,d);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Fe(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:c,h:d}=l.p(r),m=this.atlasImage;m.resize({width:c||1,height:d||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],C=T.x+1,P=T.y+1,D=this.getImage(_).data,z=D.width,R=D.height;l.R.copy(D,m,{x:0,y:0},{x:C,y:P},{width:z,height:R}),l.R.copy(D,m,{x:0,y:R-1},{x:C,y:P-1},{width:z,height:1}),l.R.copy(D,m,{x:0,y:0},{x:C,y:P+R},{width:z,height:1}),l.R.copy(D,m,{x:z-1,y:0},{x:C-1,y:P},{width:1,height:R}),l.R.copy(D,m,{x:0,y:0},{x:C+z,y:P},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.getImage(c);d||l.w(`Image with ID: "${c}" was not found`),pt(d)&&this.updateImage(c,d)}}}const Et=1e20;function Ze(g,r,c,d,m,_,T,C,P){for(let D=r;D<r+d;D++)dt(g,c*_+D,_,m,T,C,P);for(let D=c;D<c+m;D++)dt(g,D*_+r,1,d,T,C,P)}function dt(g,r,c,d,m,_,T){_[0]=0,T[0]=-Et,T[1]=Et,m[0]=g[r];for(let C=1,P=0,D=0;C<d;C++){m[C]=g[r+C*c];const z=C*C;do{const R=_[P];D=(m[C]-m[R]+z-R*R)/(C-R)/2}while(D<=T[P]&&--P>-1);P++,_[P]=C,T[P]=D,T[P+1]=Et}for(let C=0,P=0;C<d;C++){for(;T[P+1]<C;)P++;const D=_[P],z=C-D;g[r+C*c]=m[D]+z*z}}class mt{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r,c){const d=[];for(const m in r)for(const _ of r[m])d.push({stack:m,id:_});l.o(d,({stack:m,id:_},T)=>{let C=this.entries[m];C||(C=this.entries[m]={glyphs:{},requests:{},ranges:{}});let P=C.glyphs[_];if(P!==void 0)return void T(null,{stack:m,id:_,glyph:P});if(P=this._tinySDF(C,m,_),P)return C.glyphs[_]=P,void T(null,{stack:m,id:_,glyph:P});const D=Math.floor(_/256);if(256*D>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[D])return void T(null,{stack:m,id:_,glyph:P});if(!this.url)return void T(new Error("glyphsUrl is not set"));let z=C.requests[D];z||(z=C.requests[D]=[],mt.loadGlyphRange(m,D,this.url,this.requestManager,(R,q)=>{if(q){for(const te in q)this._doesCharSupportLocalGlyph(+te)||(C.glyphs[+te]=q[+te]);C.ranges[D]=!0}for(const te of z)te(R,q);delete C.requests[D]})),z.push((R,q)=>{R?T(R):q&&T(null,{stack:m,id:_,glyph:q[_]||null})})},(m,_)=>{if(m)c(m);else if(_){const T={};for(const{stack:C,id:P,glyph:D}of _)(T[C]||(T[C]={}))[P]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};c(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r))}_tinySDF(r,c,d){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let _=r.tinySDF;if(!_){let C="400";/bold/i.test(c)?C="900":/medium/i.test(c)?C="500":/light/i.test(c)&&(C="200"),_=r.tinySDF=new mt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:C})}const T=_.draw(String.fromCharCode(d));return{id:d,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}mt.loadGlyphRange=function(g,r,c,d,m){const _=256*r,T=_+255,C=d.transformRequest(c.replace("{fontstack}",g).replace("{range}",`${_}-${T}`),B.Glyphs);l.l(C,(P,D)=>{if(P)m(P);else if(D){const z={};for(const R of l.n(D))z[R.id]=R;m(null,z)}})},mt.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:c=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=c;const C=this.size=g+4*r,P=this._createCanvas(C),D=this.ctx=P.getContext("2d",{willReadFrequently:!0});D.font=`${T} ${_} ${g}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(g){const r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(g),T=Math.ceil(c),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),P=Math.min(this.size-this.buffer,T+Math.ceil(d)),D=C+2*this.buffer,z=P+2*this.buffer,R=Math.max(D*z,0),q=new Uint8ClampedArray(R),te={data:q,width:D,height:z,glyphWidth:C,glyphHeight:P,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(C===0||P===0)return te;const{ctx:ee,buffer:ie,gridInner:Q,gridOuter:me}=this;ee.clearRect(ie,ie,C,P),ee.fillText(g,ie,ie+T);const be=ee.getImageData(ie,ie,C,P);me.fill(Et,0,R),Q.fill(0,0,R);for(let ce=0;ce<P;ce++)for(let ge=0;ge<C;ge++){const Ce=be.data[4*(ce*C+ge)+3]/255;if(Ce===0)continue;const Ee=(ce+ie)*D+ge+ie;if(Ce===1)me[Ee]=0,Q[Ee]=Et;else{const De=.5-Ce;me[Ee]=De>0?De*De:0,Q[Ee]=De<0?De*De:0}}Ze(me,0,0,D,z,D,this.f,this.v,this.z),Ze(Q,ie,ie,C,P,D,this.f,this.v,this.z);for(let ce=0;ce<R;ce++){const ge=Math.sqrt(me[ce])-Math.sqrt(Q[ce]);q[ce]=Math.round(255-255*(ge/this.radius+this.cutoff))}return te}};class Pt{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,c){return l.z(r.expression.evaluate(c))}interpolate(r,c,d){return{x:l.B.number(r.x,c.x,d),y:l.B.number(r.y,c.y,d),z:l.B.number(r.z,c.z,d)}}}let Pe;class We extends l.E{constructor(r){super(),Pe=Pe||new l.r({anchor:new l.D(l.v.light.anchor),position:new Pt,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Pe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(l.t,r,c))for(const d in r){const m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d){return(!d||d.validate!==!1)&&l.x(this,r.call(l.y,l.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class yt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const d=r.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,c)),this.dashEntry[d]}getDashRanges(r,c,d){const m=[];let _=r.length%2==1?-r[r.length-1]*d:0,T=r[0]*d,C=!0;m.push({left:_,right:T,isDash:C,zeroLength:r[0]===0});let P=r[0];for(let D=1;D<r.length;D++){C=!C;const z=r[D];_=P*d,P+=z,T=P*d,m.push({left:_,right:T,isDash:C,zeroLength:z===0})}return m}addRoundDash(r,c,d){const m=c/2;for(let _=-d;_<=d;_++){const T=this.width*(this.nextRow+d+_);let C=0,P=r[C];for(let D=0;D<this.width;D++){D/P.right>1&&(P=r[++C]);const z=Math.abs(D-P.left),R=Math.abs(D-P.right),q=Math.min(z,R);let te;const ee=_/d*(m+1);if(P.isDash){const ie=m-Math.abs(ee);te=Math.sqrt(q*q+ie*ie)}else te=m-Math.sqrt(q*q+ee*ee);this.data[T+D]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const P=r[C],D=r[C+1];P.zeroLength?r.splice(C,1):D&&D.isDash===P.isDash&&(D.left=P.left,r.splice(C,1))}const c=r[0],d=r[r.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let C=0;C<this.width;C++){C/T.right>1&&(T=r[++_]);const P=Math.abs(C-T.left),D=Math.abs(C-T.right),z=Math.min(P,D);this.data[m+C]=Math.max(0,Math.min(255,(T.isDash?z:-z)+128))}}addDash(r,c){const d=c?7:0,m=2*d+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let C=0;C<r.length;C++)_+=r[C];if(_!==0){const C=this.width/_,P=this.getDashRanges(r,this.width,C);c?this.addRoundDash(P,C,d):this.addRegularDash(P)}const T={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class ot{constructor(r,c,d){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=d;const m=this.workerPool.acquire(d);for(let _=0;_<m.length;_++){const T=new l.C(m[_],c,d);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c,d){l.o(this.actors,(m,_)=>{m.send(r,c,_)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function _t(g,r,c){const d=function(m,_){if(m)return c(m);if(_){const T=l.F(l.e(_,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),c(null,T)}};return g.url?l.f(r.transformRequest(g.url,B.Source),d):l.h.frame(()=>d(null,g))}class vt{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}extend(r){const c=this._sw,d=this._ne;let m,_;if(r instanceof l.L)m=r,_=r;else{if(!(r instanceof vt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(vt.convert(r)):this.extend(l.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.L.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return c||d?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:d}=l.L.convert(r);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(r){return r instanceof vt?r:r&&new vt(r)}static fromLngLat(r,c=0){const d=360*c/40075017,m=d/Math.cos(Math.PI/180*r.lat);return new vt(new l.L(r.lng-m,r.lat-d),new l.L(r.lng+m,r.lat+d))}}class Nt{constructor(r,c,d){this.bounds=vt.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),d=Math.floor(l.G(this.bounds.getWest())*c),m=Math.floor(l.H(this.bounds.getNorth())*c),_=Math.ceil(l.G(this.bounds.getEast())*c),T=Math.ceil(l.H(this.bounds.getSouth())*c);return r.x>=d&&r.x<_&&r.y>=m&&r.y<T}}class Dn extends l.E{constructor(r,c,d,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_t(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new Nt(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(c,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(d,B.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,C){return delete r.request,r.aborted?c(null):T&&T.status!==404?c(T):(C&&C.resourceTiming&&(r.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&r.setExpiryData(C),r.loadVectorData(C,this.map.painter),c(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=c:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Gt extends l.E{constructor(r,c,d,m){super(),this.id=r,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},c),l.e(this,l.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_t(this._options,this.map._requestManager,(r,c)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.j(r)):c&&(l.e(this,c),c.bounds&&(this.tileBounds=new Nt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=H.getImage(this.map._requestManager.transformRequest(d,B.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(m)r.state="errored",c(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const C=this.map.painter.context,P=C.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new Fe(C,_,P.RGBA,{useMipmap:!0}),r.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),r.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(r,c){r.request&&(r.request.cancel(),delete r.request),c()}unloadTile(r,c){r.texture&&this.map.painter.saveTileTexture(r.texture),c()}hasTransition(){return!1}}class sr extends Gt{constructor(r,c,d,m){super(r,c,d,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(d,B.Tile);function _(T,C){T&&(r.state="errored",c(T)),C&&(r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",c(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=H.getImage(m,(T,C,P)=>l._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(T)r.state="errored",c(T);else if(C){this.map._refreshExpiredTiles&&r.setExpiryData(P);const D=l.a(C)&&l.J()?C:yield function(R){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const q=R.width+2,te=R.height+2;try{return new l.R({width:q,height:te},yield l.M(R,-1,-1,q,te))}catch{}}return l.h.getImageData(R,1)})}(C),z={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",z,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const c=r.canonical,d=Math.pow(2,c.z),m=(c.x-1+d)%d,_=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+d)%d,C=c.x+1===d?r.wrap+1:r.wrap,P={};return P[new l.O(r.overscaledZ,_,c.z,m,c.y).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(P[new l.O(r.overscaledZ,_,c.z,m,c.y-1).key]={backfilled:!1},P[new l.O(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<d&&(P[new l.O(r.overscaledZ,_,c.z,m,c.y+1).key]={backfilled:!1},P[new l.O(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y+1).key]={backfilled:!1}),P}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class cr extends l.E{constructor(r,c,d,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(m),this._data=c.data,this._options=l.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.N,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},c),this}getClusterChildren(r,c){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},c),this}getClusterLeaves(r,c,d,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:c,offset:d},m),this}_updateWorkerData(r){const c=l.e({},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),B.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(d,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),d)return void this.fire(new l.j(d));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(T,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,c){const d=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(d,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?c(null):_?c(_):(r.loadVectorData(T,this.map.painter,d==="reloadTile"),c(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var $n=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ln extends l.E{constructor(r,c,d,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=H.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(C,P)=>{this._request=null,this._loaded=!0,C?this.fire(new l.j(C)):P&&(this.image=P,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,$n.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Fe(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,C=-1/0,P=-1/0;for(const q of m)_=Math.min(_,q.x),T=Math.min(T,q.y),C=Math.max(C,q.x),P=Math.max(P,q.y);const D=Math.max(C-_,P-T),z=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),R=Math.pow(2,z);return new l.W(z,Math.floor((_+C)/2*R),Math.floor((T+P)/2*R))}(c),this.minzoom=this.maxzoom=this.tileID.z;const d=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.N,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.N),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,c){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},c(null)):(r.state="errored",c(null))}hasTransition(){return!1}}class cs extends Ln{constructor(r,c,d,m){super(r,c,d,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,B.Source).url);l.X(this.urls,(T,C)=>{this._loaded=!0,T?this.fire(new l.j(T)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,$n.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new Fe(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class kr extends Ln{constructor(r,c,d,m){super(r,c,d,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,C=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,$n.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Fe(T,this.canvas,C.RGBA,{premultiply:!0});let P=!1;for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,P=!0)}P&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ai={},Ar=g=>{switch(g){case"geojson":return cr;case"image":return Ln;case"raster":return Gt;case"raster-dem":return sr;case"vector":return Dn;case"video":return cs;case"canvas":return kr}return ai[g]};function Gi(g,r){const c=l.Z();return l.$(c,c,[1,1,0]),l.a0(c,c,[.5*g.width,.5*g.height,1]),l.a1(c,c,g.calculatePosMatrix(r.toUnwrapped()))}function yr(g,r,c,d,m,_){const T=function(R,q,te){if(R)for(const ee of R){const ie=q[ee];if(ie&&ie.source===te&&ie.type==="fill-extrusion")return!0}else for(const ee in q){const ie=q[ee];if(ie.source===te&&ie.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,g.id),C=_.maxPitchScaleFactor(),P=g.tilesIn(d,C,T);P.sort(Pi);const D=[];for(const R of P)D.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(r,c,g._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,m,_,C,Gi(g.transform,R.tileID))});const z=function(R){const q={},te={};for(const ee of R){const ie=ee.queryResults,Q=ee.wrappedTileID,me=te[Q]=te[Q]||{};for(const be in ie){const ce=ie[be],ge=me[be]=me[be]||{},Ce=q[be]=q[be]||[];for(const Ee of ce)ge[Ee.featureIndex]||(ge[Ee.featureIndex]=!0,Ce.push(Ee))}}return q}(D);for(const R in z)z[R].forEach(q=>{const te=q.feature,ee=g.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ee});return z}function Pi(g,r){const c=g.tileID,d=r.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}class ki{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const C of m){const P=C.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(P.length!==0){C.layers=P,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(D=>P.filter(z=>z.id===D)[0]));for(const D of P)T[D.id]=C}}return T}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const m=this.buckets[d];m.uploadPending()&&m.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fe(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fe(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,d,m,_,T,C,P,D,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:z,transform:P,params:C,queryPadding:this.queryPadding*D},r,c,d):{}}querySourceFeatures(r,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const m=d.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const C=l.a6(c&&c.filter),{z:P,x:D,y:z}=this.tileID.canonical,R={z:P,x:D,y:z};for(let q=0;q<T.length;q++){const te=T.feature(q);if(C.needGeometry){const Q=l.a7(te,!0);if(!C.filter(new l.a8(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!C.filter(new l.a8(this.tileID.overscaledZ),te))continue;const ee=d.getId(te,_),ie=new l.a9(te,P,D,z,ee);ie.tile=R,r.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const d=l.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let m=!1;if(this.expirationTime>d)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const _=this.expirationTime-c;_?this.expirationTime=d+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",C=d[T],P=r[T];if(!C||!P||Object.keys(P).length===0)continue;_.update(P,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=c&&c.style&&c.style.getLayer(m);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.h.now()+r}setDependencies(r,c){const d={};for(const m of c)d[m]=!0;this.dependencies[r]=d}hasDependency(r,c){for(const d of r){const m=this.dependencies[d];if(m){for(const _ of c)if(m[_])return!0}}return!1}}class dn{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,d){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:c,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},d)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const d=r.wrapped().key,m=c===void 0?0:this.data[d].indexOf(c),_=this.data[d][m];return this.data[d].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const d in this.data)for(const m of this.data[d])r(m.value)||c.push(m);for(const d of c)this.remove(d.value.tileID,d)}}class Ae{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,d){const m=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])d[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in d)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,c,d){if(this.deletedStates[r]===null)return;const m=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&c!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][d]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(d in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][d]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,c){const d=String(c),m=l.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][c];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const d={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),l.e(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];d[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const C of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][C];_[T]=this.state[m][T]}d[m]=d[m]||{},l.e(d[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const m in r)r[m].setFeatureState(d,c)}}class vr extends l.E{constructor(r,c,d){super(),this.id=r,this.dispatcher=d,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,C)=>{const P=new(Ar(_.type))(m,_,T,C);if(P.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${P.id}`);return P})(r,c,d,this),this._tiles={},this._cache=new dn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ae,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c){return this._source.loadTile(r,c)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(jr).map(r=>r.key)}getRenderableIds(r){const c=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&c.push(this._tiles[d]);return r?c.sort((d,m)=>{const _=d.tileID,T=m.tileID,C=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||P.y-C.y||P.x-C.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(jr).map(d=>d.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,r,c)))}_tileLoaded(r,c,d,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.h.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const _=c[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);d(r,T),d(T,r)}}function d(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const C=_.tileID.canonical.y-m.tileID.canonical.y,P=Math.pow(2,m.tileID.canonical.z),D=_.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+P)===1?T+=P:Math.abs(T-P)===1&&(T-=P)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,C),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,d,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>d)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const D=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[D.key],T&&T.hasData()&&(C=D)}let P=C;for(;P.overscaledZ>c;)if(P=P.scaledTo(P.overscaledZ-1),r[P.key]){m[C.key]=C;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=r.overscaledZ-1;d>=c;d--){const m=r.scaledTo(d),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const d={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),d[_.tileID.key]=_}this._tiles=d;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,c){if(this.transform=r,this.terrain=c,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new l.O(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(d=d.filter(z=>this._source.hasTile(z)))):d=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-vr.maxOverzooming,this._source.minzoom),T=Math.max(m+vr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const R of d)if(R.canonical.z>this._source.minzoom){const q=R.scaledTo(R.canonical.z-1);z[q.key]=q;const te=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));z[te.key]=te}d=d.concat(Object.values(z))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(d,m);if(Ht(this._source.type)){const z={},R={},q=Object.keys(P),te=l.h.now();for(const ee of q){const ie=P[ee],Q=this._tiles[ee];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=te)continue;const me=this.findLoadedParent(ie,_);me&&(this._addTile(me.tileID),z[me.tileID.key]=me.tileID),R[ee]=ie}this._retainLoadedChildren(R,m,T,P);for(const ee in z)P[ee]||(this._coveredTiles[ee]=!0,P[ee]=z[ee]);if(c){const ee={},ie={};for(const Q of d)this._tiles[Q.key].hasData()?ee[Q.key]=Q:ie[Q.key]=Q;for(const Q in ie){const me=ie[Q].children(this._source.maxzoom);this._tiles[me[0].key]&&this._tiles[me[1].key]&&this._tiles[me[2].key]&&this._tiles[me[3].key]&&(ee[me[0].key]=P[me[0].key]=me[0],ee[me[1].key]=P[me[1].key]=me[1],ee[me[2].key]=P[me[2].key]=me[2],ee[me[3].key]=P[me[3].key]=me[3],delete ie[Q])}for(const Q in ie){const me=this.findLoadedParent(ie[Q],this._source.minzoom);if(me){ee[me.tileID.key]=P[me.tileID.key]=me.tileID;for(const be in ee)ee[be].isChildOf(me.tileID)&&delete ee[be]}}for(const Q in this._tiles)ee[Q]||(this._coveredTiles[Q]=!0)}}for(const z in P)this._tiles[z].clearFadeHold();const D=l.ab(this._tiles,P);for(const z of D){const R=this._tiles[z];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){const d={},m={},_=Math.max(c-vr.maxOverzooming,this._source.minzoom),T=Math.max(c+vr.maxUnderzooming,this._source.minzoom),C={};for(const P of r){const D=this._addTile(P);d[P.key]=P,D.hasData()||c<this._source.maxzoom&&(C[P.key]=P)}this._retainLoadedChildren(C,c,T,d);for(const P of r){let D=this._tiles[P.key];if(D.hasData())continue;if(c+1>this._source.maxzoom){const R=P.children(this._source.maxzoom)[0],q=this.getTile(R);if(q&&q.hasData()){d[R.key]=R;continue}}else{const R=P.children(this._source.maxzoom);if(d[R[0].key]&&d[R[1].key]&&d[R[2].key]&&d[R[3].key])continue}let z=D.wasRequested();for(let R=P.overscaledZ-1;R>=_;--R){const q=P.scaledTo(R);if(m[q.key])break;if(m[q.key]=!0,D=this.getTile(q),!D&&z&&(D=this._addTile(q)),D){const te=D.hasData();if((z||te)&&(d[q.key]=q),z=D.wasRequested(),te)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let d,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}c.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;m=_}for(const _ of c)this._loadedParentTiles[_]=d}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const d=c;return c||(c=new ki(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,r.key,c.state))),c.uses++,this._tiles[r.key]=c,d||this._source.fire(new l.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=c.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,d){const m=[],_=this.transform;if(!_)return m;const T=d?_.getCameraQueryGeometry(r):r,C=r.map(ee=>_.pointCoordinate(ee,this.terrain)),P=T.map(ee=>_.pointCoordinate(ee,this.terrain)),D=this.getIds();let z=1/0,R=1/0,q=-1/0,te=-1/0;for(const ee of P)z=Math.min(z,ee.x),R=Math.min(R,ee.y),q=Math.max(q,ee.x),te=Math.max(te,ee.y);for(let ee=0;ee<D.length;ee++){const ie=this._tiles[D[ee]];if(ie.holdingForFade())continue;const Q=ie.tileID,me=Math.pow(2,_.zoom-ie.tileID.overscaledZ),be=c*ie.queryPadding*l.N/ie.tileSize/me,ce=[Q.getTilePoint(new l.U(z,R)),Q.getTilePoint(new l.U(q,te))];if(ce[0].x-be<l.N&&ce[0].y-be<l.N&&ce[1].x+be>=0&&ce[1].y+be>=0){const ge=C.map(Ee=>Q.getTilePoint(Ee)),Ce=P.map(Ee=>Q.getTilePoint(Ee));m.push({tile:ie,tileID:Q,queryGeometry:ge,cameraQueryGeometry:Ce,scale:me})}}return m}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ht(this._source.type)){const r=l.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,d){this._state.updateState(r=r||"_geojsonTileLayer",c,d)}removeFeatureState(r,c,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,d)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,d){const m=this._tiles[r];m&&m.setDependencies(c,d)}reloadTilesForDependencies(r,c){for(const d in this._tiles)this._tiles[d].hasDependency(r,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,c))}}function jr(g,r){const c=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||d-c||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function Ht(g){return g==="raster"||g==="image"||g==="video"}vr.maxOverzooming=10,vr.maxUnderzooming=3;const qt="mapboxgl_preloaded_worker_pool";class li{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<li.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qt]}numActive(){return Object.keys(this.active).length}}const us=Math.floor(l.h.hardwareConcurrency/2);let _r;function wo(){return _r||(_r=new li),_r}li.workerCount=l.ac(globalThis)?Math.max(Math.min(us,3),1):1;class ci{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let c=1,d=this._distances[c];const m=r*this.paddedLength+this.padding;for(;d<m&&c<this._distances.length;)d=this._distances[++c];const _=c-1,T=this._distances[_],C=d-T,P=C>0?(m-T)/C:0;return this.points[_].mult(1-P).add(this.points[c].mult(P))}}function qi(g,r){let c=!0;return g==="always"||g!=="never"&&r!=="never"||(c=!1),c}class As{constructor(r,c,d){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(c/d);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,d,m,_){this._forEachCell(c,d,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,c,d,m){this._forEachCell(c-m,d-m,c+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(d),this.circles.push(m)}_insertBoxCell(r,c,d,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,c,d,m,_,T){this.circleCells[_].push(T)}_query(r,c,d,m,_,T,C){if(d<0||r>this.width||m<0||c>this.height)return[];const P=[];if(r<=0&&c<=0&&this.width<=d&&this.height<=m){if(_)return[{key:null,x1:r,y1:c,x2:d,y2:m}];for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const z=this.circles[3*D],R=this.circles[3*D+1],q=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:z-q,y1:R-q,x2:z+q,y2:R+q})}}else this._forEachCell(r,c,d,m,this._queryCell,P,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},C);return P}query(r,c,d,m){return this._query(r,c,d,m,!1,null)}hitTest(r,c,d,m,_,T){return this._query(r,c,d,m,!0,_,T).length>0}hitTestCircle(r,c,d,m,_){const T=r-d,C=r+d,P=c-d,D=c+d;if(C<0||T>this.width||D<0||P>this.height)return!1;const z=[];return this._forEachCell(T,P,C,D,this._queryCellCircle,z,{hitTest:!0,overlapMode:m,circle:{x:r,y:c,radius:d},seenUids:{box:{},circle:{}}},_),z.length>0}_queryCell(r,c,d,m,_,T,C,P){const{seenUids:D,hitTest:z,overlapMode:R}=C,q=this.boxCells[_];if(q!==null){const ee=this.bboxes;for(const ie of q)if(!D.box[ie]){D.box[ie]=!0;const Q=4*ie,me=this.boxKeys[ie];if(r<=ee[Q+2]&&c<=ee[Q+3]&&d>=ee[Q+0]&&m>=ee[Q+1]&&(!P||P(me))&&(!z||!qi(R,me.overlapMode))&&(T.push({key:me,x1:ee[Q],y1:ee[Q+1],x2:ee[Q+2],y2:ee[Q+3]}),z))return!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!D.circle[ie]){D.circle[ie]=!0;const Q=3*ie,me=this.circleKeys[ie];if(this._circleAndRectCollide(ee[Q],ee[Q+1],ee[Q+2],r,c,d,m)&&(!P||P(me))&&(!z||!qi(R,me.overlapMode))){const be=ee[Q],ce=ee[Q+1],ge=ee[Q+2];if(T.push({key:me,x1:be-ge,y1:ce-ge,x2:be+ge,y2:ce+ge}),z)return!0}}}return!1}_queryCellCircle(r,c,d,m,_,T,C,P){const{circle:D,seenUids:z,overlapMode:R}=C,q=this.boxCells[_];if(q!==null){const ee=this.bboxes;for(const ie of q)if(!z.box[ie]){z.box[ie]=!0;const Q=4*ie,me=this.boxKeys[ie];if(this._circleAndRectCollide(D.x,D.y,D.radius,ee[Q+0],ee[Q+1],ee[Q+2],ee[Q+3])&&(!P||P(me))&&!qi(R,me.overlapMode))return T.push(!0),!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!z.circle[ie]){z.circle[ie]=!0;const Q=3*ie,me=this.circleKeys[ie];if(this._circlesCollide(ee[Q],ee[Q+1],ee[Q+2],D.x,D.y,D.radius)&&(!P||P(me))&&!qi(R,me.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,d,m,_,T,C,P){const D=this._convertToXCellCoord(r),z=this._convertToYCellCoord(c),R=this._convertToXCellCoord(d),q=this._convertToYCellCoord(m);for(let te=D;te<=R;te++)for(let ee=z;ee<=q;ee++)if(_.call(this,r,c,d,m,this.xCellCount*ee+te,T,C,P))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,d,m,_,T){const C=m-r,P=_-c,D=d+T;return D*D>C*C+P*P}_circleAndRectCollide(r,c,d,m,_,T,C){const P=(T-m)/2,D=Math.abs(r-(m+P));if(D>P+d)return!1;const z=(C-_)/2,R=Math.abs(c-(_+z));if(R>z+d)return!1;if(D<=P||R<=z)return!0;const q=D-P,te=R-z;return q*q+te*te<=d*d}}function je(g,r,c,d,m){const _=l.Z();return r?(l.a0(_,_,[1/m,1/m,1]),c||l.ae(_,_,d.angle)):l.a1(_,d.labelPlaneMatrix,g),_}function ui(g,r,c,d,m){if(r){const _=l.af(g);return l.a0(_,_,[m,m,1]),c||l.ae(_,_,-d.angle),_}return d.glCoordMatrix}function pn(g,r,c){let d;c?(d=[g.x,g.y,c(g.x,g.y),1],l.ag(d,d,r)):(d=[g.x,g.y,0,1],se(d,d,r));const m=d[3];return{point:new l.P(d[0]/m,d[1]/m),signedDistanceFromCamera:m}}function Zi(g,r){return .5+g/r*.5}function or(g,r){const c=g[0]/g[3],d=g[1]/g[3];return c>=-r[0]&&c<=r[0]&&d>=-r[1]&&d<=r[1]}function $e(g,r,c,d,m,_,T,C,P,D){const z=d?g.textSizeData:g.iconSizeData,R=l.ah(z,c.transform.zoom),q=[256/c.width*2+1,256/c.height*2+1],te=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;te.clear();const ee=g.lineVertexArray,ie=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Q=c.transform.width/c.transform.height;let me=!1;for(let be=0;be<ie.length;be++){const ce=ie.get(be);if(ce.hidden||ce.writingMode===l.ai.vertical&&!me){Y(ce.numGlyphs,te);continue}let ge;if(me=!1,D?(ge=[ce.anchorX,ce.anchorY,D(ce.anchorX,ce.anchorY),1],l.ag(ge,ge,r)):(ge=[ce.anchorX,ce.anchorY,0,1],se(ge,ge,r)),!or(ge,q)){Y(ce.numGlyphs,te);continue}const Ce=Zi(c.transform.cameraToCenterDistance,ge[3]),Ee=l.aj(z,R,ce),De=T?Ee/Ce:Ee*Ce,Be=new l.P(ce.anchorX,ce.anchorY),Re=pn(Be,m,D).point,Ve={projections:{},offsets:{}},lt=Dt(ce,De,!1,C,r,m,_,g.glyphOffsetArray,ee,te,Re,Be,Ve,Q,P,D);me=lt.useVertical,(lt.notEnoughRoom||me||lt.needsFlipping&&Dt(ce,De,!0,C,r,m,_,g.glyphOffsetArray,ee,te,Re,Be,Ve,Q,P,D).notEnoughRoom)&&Y(ce.numGlyphs,te)}d?g.text.dynamicLayoutVertexBuffer.updateData(te):g.icon.dynamicLayoutVertexBuffer.updateData(te)}function Xe(g,r,c,d,m,_,T,C,P,D,z,R,q){const te=C.glyphStartIndex+C.numGlyphs,ee=C.lineStartIndex,ie=C.lineStartIndex+C.lineLength,Q=r.getoffsetX(C.glyphStartIndex),me=r.getoffsetX(te-1),be=N(g*Q,c,d,m,_,T,C.segment,ee,ie,P,D,z,R,q);if(!be)return null;const ce=N(g*me,c,d,m,_,T,C.segment,ee,ie,P,D,z,R,q);return ce?{first:be,last:ce}:null}function rt(g,r,c,d){return g===l.ai.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*d?{useVertical:!0}:(g===l.ai.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Dt(g,r,c,d,m,_,T,C,P,D,z,R,q,te,ee,ie){const Q=r/24,me=g.lineOffsetX*Q,be=g.lineOffsetY*Q;let ce;if(g.numGlyphs>1){const ge=g.glyphStartIndex+g.numGlyphs,Ce=g.lineStartIndex,Ee=g.lineStartIndex+g.lineLength,De=Xe(Q,C,me,be,c,z,R,g,P,_,q,ee,ie);if(!De)return{notEnoughRoom:!0};const Be=pn(De.first.point,T,ie).point,Re=pn(De.last.point,T,ie).point;if(d&&!c){const Ve=rt(g.writingMode,Be,Re,te);if(Ve)return Ve}ce=[De.first];for(let Ve=g.glyphStartIndex+1;Ve<ge-1;Ve++)ce.push(N(Q*C.getoffsetX(Ve),me,be,c,z,R,g.segment,Ce,Ee,P,_,q,ee,ie));ce.push(De.last)}else{if(d&&!c){const Ce=pn(R,m,ie).point,Ee=g.lineStartIndex+g.segment+1,De=new l.P(P.getx(Ee),P.gety(Ee)),Be=pn(De,m,ie),Re=Be.signedDistanceFromCamera>0?Be.point:zn(R,De,Ce,1,m,ie),Ve=rt(g.writingMode,Ce,Re,te);if(Ve)return Ve}const ge=N(Q*C.getoffsetX(g.glyphStartIndex),me,be,c,z,R,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,P,_,q,ee,ie);if(!ge)return{notEnoughRoom:!0};ce=[ge]}for(const ge of ce)l.ak(D,ge.point,ge.angle);return{}}function zn(g,r,c,d,m,_){const T=pn(g.add(g.sub(r)._unit()),m,_).point,C=c.sub(T);return c.add(C._mult(d/C.mag()))}function St(g,r){const{projectionCache:c,lineVertexArray:d,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:C,previousVertex:P,direction:D,absOffsetX:z}=r;if(c.projections[g])return c.projections[g];const R=new l.P(d.getx(g),d.gety(g)),q=pn(R,m,C);if(q.signedDistanceFromCamera>0)return c.projections[g]=q.point,q.point;const te=g-D;return zn(T===0?_:new l.P(d.getx(te),d.gety(te)),R,P,z-T+1,m,C)}function Ur(g,r,c){return g._unit()._perp()._mult(r*c)}function re(g,r,c,d,m,_,T,C){const{projectionCache:P,direction:D}=C;if(P.offsets[g])return P.offsets[g];const z=c.add(r);if(g+D<d||g+D>=m)return P.offsets[g]=z,z;const R=St(g+D,C),q=Ur(R.sub(c),T,D),te=c.add(q),ee=R.add(q);return P.offsets[g]=l.al(_,z,te,ee)||z,P.offsets[g]}function N(g,r,c,d,m,_,T,C,P,D,z,R,q,te){const ee=d?g-r:g+r;let ie=ee>0?1:-1,Q=0;d&&(ie*=-1,Q=Math.PI),ie<0&&(Q+=Math.PI);let me,be,ce=ie>0?C+T:C+T+1,ge=m,Ce=m,Ee=0,De=0;const Be=Math.abs(ee),Re=[];let Ve;for(;Ee+De<=Be;){if(ce+=ie,ce<C||ce>=P)return null;Ee+=De,Ce=ge,be=me;const He={projectionCache:R,lineVertexArray:D,labelPlaneMatrix:z,tileAnchorPoint:_,distanceFromAnchor:Ee,getElevation:te,previousVertex:Ce,direction:ie,absOffsetX:Be};if(ge=St(ce,He),c===0)Re.push(Ce),Ve=ge.sub(Ce);else{let Ct;const ut=ge.sub(Ce);Ct=ut.mag()===0?Ur(St(ce+ie,He).sub(ge),c,ie):Ur(ut,c,ie),be||(be=Ce.add(Ct)),me=re(ce,Ct,ge,C,P,be,c,He),Re.push(be),Ve=me.sub(be)}De=Ve.mag()}const lt=Ve._mult((Be-Ee)/De)._add(be||Ce),Rt=Q+Math.atan2(ge.y-Ce.y,ge.x-Ce.x);return Re.push(lt),{point:lt,angle:q?Rt:0,path:Re}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Y(g,r){for(let c=0;c<g;c++){const d=r.length;r.resize(d+4),r.float32.set(G,3*d)}}function se(g,r,c){const d=r[0],m=r[1];return g[0]=c[0]*d+c[4]*m+c[12],g[1]=c[1]*d+c[5]*m+c[13],g[3]=c[3]*d+c[7]*m+c[15],g}const le=100;class _e{constructor(r,c=new As(r.width+200,r.height+200,25),d=new As(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+le,this.screenBottomBoundary=r.height+le,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,d,m,_,T){const C=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),P=d*C.perspectiveRatio,D=r.x1*P+C.point.x,z=r.y1*P+C.point.y,R=r.x2*P+C.point.x,q=r.y2*P+C.point.y;return!this.isInsideGrid(D,z,R,q)||c!=="always"&&this.grid.hitTest(D,z,R,q,c,_)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,z,R,q],offscreen:this.isOffscreen(D,z,R,q)}}placeCollisionCircles(r,c,d,m,_,T,C,P,D,z,R,q,te,ee){const ie=[],Q=new l.P(c.anchorX,c.anchorY),me=pn(Q,T,ee),be=Zi(this.transform.cameraToCenterDistance,me.signedDistanceFromCamera),ce=(z?_/be:_*be)/l.ap,ge=pn(Q,C,ee).point,Ce=Xe(ce,m,c.lineOffsetX*ce,c.lineOffsetY*ce,!1,ge,Q,c,d,C,{projections:{},offsets:{}},!1,ee);let Ee=!1,De=!1,Be=!0;if(Ce){const Re=.5*q*be+te,Ve=new l.P(-100,-100),lt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new ci,He=Ce.first,Ct=Ce.last;let ut=[];for(let It=He.path.length-1;It>=1;It--)ut.push(He.path[It]);for(let It=1;It<Ct.path.length;It++)ut.push(Ct.path[It]);const tn=2.5*Re;if(P){const It=ut.map(Ft=>pn(Ft,P,ee));ut=It.some(Ft=>Ft.signedDistanceFromCamera<=0)?[]:It.map(Ft=>Ft.point)}let zt=[];if(ut.length>0){const It=ut[0].clone(),Ft=ut[0].clone();for(let kn=1;kn<ut.length;kn++)It.x=Math.min(It.x,ut[kn].x),It.y=Math.min(It.y,ut[kn].y),Ft.x=Math.max(Ft.x,ut[kn].x),Ft.y=Math.max(Ft.y,ut[kn].y);zt=It.x>=Ve.x&&Ft.x<=lt.x&&It.y>=Ve.y&&Ft.y<=lt.y?[ut]:Ft.x<Ve.x||It.x>lt.x||Ft.y<Ve.y||It.y>lt.y?[]:l.am([ut],Ve.x,Ve.y,lt.x,lt.y)}for(const It of zt){Rt.reset(It,.25*Re);let Ft=0;Ft=Rt.length<=.5*Re?1:Math.ceil(Rt.paddedLength/tn)+1;for(let kn=0;kn<Ft;kn++){const an=kn/Math.max(Ft-1,1),dr=Rt.lerp(an),Kn=dr.x+le,Fn=dr.y+le;ie.push(Kn,Fn,Re,0);const gi=Kn-Re,un=Fn-Re,ds=Kn+Re,ps=Fn+Re;if(Be=Be&&this.isOffscreen(gi,un,ds,ps),De=De||this.isInsideGrid(gi,un,ds,ps),r!=="always"&&this.grid.hitTestCircle(Kn,Fn,Re,r,R)&&(Ee=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!D&&Ee||!De||be<this.perspectiveRatioCutoff?[]:ie,offscreen:Be,collisionDetected:Ee}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let d=1/0,m=1/0,_=-1/0,T=-1/0;for(const z of r){const R=new l.P(z.x+le,z.y+le);d=Math.min(d,R.x),m=Math.min(m,R.y),_=Math.max(_,R.x),T=Math.max(T,R.y),c.push(R)}const C=this.grid.query(d,m,_,T).concat(this.ignoredGrid.query(d,m,_,T)),P={},D={};for(const z of C){const R=z.key;if(P[R.bucketInstanceId]===void 0&&(P[R.bucketInstanceId]={}),P[R.bucketInstanceId][R.featureIndex])continue;const q=[new l.P(z.x1,z.y1),new l.P(z.x2,z.y1),new l.P(z.x2,z.y2),new l.P(z.x1,z.y2)];l.an(c,q)&&(P[R.bucketInstanceId][R.featureIndex]=!0,D[R.bucketInstanceId]===void 0&&(D[R.bucketInstanceId]=[]),D[R.bucketInstanceId].push(R.featureIndex))}return D}insertCollisionBox(r,c,d,m,_,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,d,m,_,T){const C=d?this.ignoredGrid:this.grid,P={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:c};for(let D=0;D<r.length;D+=4)C.insertCircle(P,r[D],r[D+1],r[D+2])}projectAndGetPerspectiveRatio(r,c,d,m){let _;return m?(_=[c,d,m(c,d),1],l.ag(_,_,r)):(_=[c,d,0,1],se(_,_,r)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+le,(-_[1]/_[3]+1)/2*this.transform.height+le),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,c,d,m){return d<le||r>=this.screenRightBoundary||m<le||c>this.screenBottomBoundary}isInsideGrid(r,c,d,m){return d>=0&&r<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=l.ao([]);return l.$(r,r,[-100,-100,0]),r}}function fe(g,r,c){return r*(l.N/(g.tileSize*Math.pow(2,c-g.tileID.overscaledZ)))}class he{constructor(r,c,d,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class ye{constructor(r,c,d,m,_){this.text=new he(r?r.text:null,c,d,_),this.icon=new he(r?r.icon:null,c,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Me{constructor(r,c,d){this.text=r,this.icon=c,this.skipFade=d}}class Ie{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class ze{constructor(r,c,d,m,_){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=_}}class xt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[r]}}function kt(g,r,c,d,m){const{horizontalAlign:_,verticalAlign:T}=l.au(g);return new l.P(-(_-.5)*r+d[0]*m,-(T-.5)*c+d[1]*m)}function at(g,r,c,d,m,_){const{x1:T,x2:C,y1:P,y2:D,anchorPointX:z,anchorPointY:R}=g,q=new l.P(r,c);return d&&q._rotate(m?_:-_),{x1:T+q.x,y1:P+q.y,x2:C+q.x,y2:D+q.y,anchorPointX:z,anchorPointY:R}}class bt{constructor(r,c,d,m,_){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new _e(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new xt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,c,d,m){const _=d.getBucket(c),T=d.latestFeatureIndex;if(!_||!T||c.id!==_.layerIds[0])return;const C=d.collisionBoxArray,P=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/l.N,R=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),q=P.get("text-pitch-alignment")==="map",te=P.get("text-rotation-alignment")==="map",ee=fe(d,1,this.transform.zoom),ie=je(R,q,te,this.transform,ee);let Q=null;if(q){const be=ui(R,q,te,this.transform,ee);Q=l.a1([],this.transform.labelPlaneMatrix,be)}this.retainedQueryData[_.bucketInstanceId]=new ze(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,d.tileID);const me={bucket:_,layout:P,posMatrix:R,textLabelPlaneMatrix:ie,labelToScreenMatrix:Q,scale:D,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const be of _.sortKeyRanges){const{sortKey:ce,symbolInstanceStart:ge,symbolInstanceEnd:Ce}=be;r.push({sortKey:ce,symbolInstanceStart:ge,symbolInstanceEnd:Ce,parameters:me})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:me})}attemptAnchorPlacement(r,c,d,m,_,T,C,P,D,z,R,q,te,ee,ie,Q){const me=l.aq[r.textAnchor],be=[r.textOffset0,r.textOffset1],ce=kt(me,d,m,be,_),ge=this.collisionIndex.placeCollisionBox(at(c,ce.x,ce.y,T,C,this.transform.angle),R,P,D,z.predicate,Q);if((!ie||this.collisionIndex.placeCollisionBox(at(ie,ce.x,ce.y,T,C,this.transform.angle),R,P,D,z.predicate,Q).box.length!==0)&&ge.box.length>0){let Ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(Ce=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:be,width:d,height:m,anchor:me,textBoxScale:_,prevAnchor:Ce},this.markUsedJustification(te,me,q,ee),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ee,q),this.placedOrientations[q.crossTileID]=ee),{shift:ce,placedGlyphBoxes:ge}}}placeLayerBucketPart(r,c,d){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:P,textPixelRatio:D,holdingForFade:z,collisionBoxArray:R,partiallyEvaluatedTextSize:q,collisionGroup:te}=r.parameters,ee=_.get("text-optional"),ie=_.get("icon-optional"),Q=l.ar(_,"text-overlap","text-allow-overlap"),me=Q==="always",be=l.ar(_,"icon-overlap","icon-allow-overlap"),ce=be==="always",ge=_.get("text-rotation-alignment")==="map",Ce=_.get("text-pitch-alignment")==="map",Ee=_.get("icon-text-fit")!=="none",De=_.get("symbol-z-order")==="viewport-y",Be=me&&(ce||!m.hasIconData()||ie),Re=ce&&(me||!m.hasTextData()||ee);!m.collisionArrays&&R&&m.deserializeCollisionBoxes(R);const Ve=this.retainedQueryData[m.bucketInstanceId].tileID,lt=this.terrain?(He,Ct)=>this.terrain.getElevation(Ve,He,Ct):null,Rt=(He,Ct)=>{var ut,tn;if(c[He.crossTileID])return;if(z)return void(this.placements[He.crossTileID]=new Me(!1,!1,!1));let zt=!1,It=!1,Ft=!0,kn=null,an={box:null,offscreen:null},dr={box:null,offscreen:null},Kn=null,Fn=null,gi=null,un=0,ds=0,ps=0;Ct.textFeatureIndex?un=Ct.textFeatureIndex:He.useRuntimeCollisionCircles&&(un=He.featureIndex),Ct.verticalTextFeatureIndex&&(ds=Ct.verticalTextFeatureIndex);const so=Ct.textBox;if(so){const br=An=>{let Xn=l.ai.horizontal;if(m.allowVerticalPlacement&&!An&&this.prevPlacement){const qr=this.prevPlacement.placedOrientations[He.crossTileID];qr&&(this.placedOrientations[He.crossTileID]=qr,Xn=qr,this.markUsedOrientation(m,Xn,He))}return Xn},pr=(An,Xn)=>{if(m.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(const qr of m.writingModes)if(qr===l.ai.vertical?(an=Xn(),dr=an):an=An(),an&&an.box&&an.box.length)break}else an=An()},Ir=He.textAnchorOffsetStartIndex,Io=He.textAnchorOffsetEndIndex;if(Io===Ir){const An=(Xn,qr)=>{const Mn=this.collisionIndex.placeCollisionBox(Xn,Q,D,T,te.predicate,lt);return Mn&&Mn.box&&Mn.box.length&&(this.markUsedOrientation(m,qr,He),this.placedOrientations[He.crossTileID]=qr),Mn};pr(()=>An(so,l.ai.horizontal),()=>{const Xn=Ct.verticalTextBox;return m.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Xn?An(Xn,l.ai.vertical):{box:null,offscreen:null}}),br(an&&an.box&&an.box.length)}else{let An=l.aq[(tn=(ut=this.prevPlacement)===null||ut===void 0?void 0:ut.variableOffsets[He.crossTileID])===null||tn===void 0?void 0:tn.anchor];const Xn=(Mn,Do,Nc)=>{const hf=Mn.x2-Mn.x1,df=Mn.y2-Mn.y1,xy=He.textBoxScale,qh=Ee&&be==="never"?Do:null;let fs={box:[],offscreen:!1},Lo=Q==="never"?1:2,ms="never";An&&Lo++;for(let Ri=0;Ri<Lo;Ri++){for(let gs=Ir;gs<Io;gs++){const Zh=m.textAnchorOffsets.get(gs);if(An&&Zh.textAnchor!==An)continue;const Rs=this.attemptAnchorPlacement(Zh,Mn,hf,df,xy,ge,Ce,D,T,te,ms,He,m,Nc,qh,lt);if(Rs&&(fs=Rs.placedGlyphBoxes,fs&&fs.box&&fs.box.length))return zt=!0,kn=Rs.shift,fs}An?An=null:ms=Q}return fs};pr(()=>Xn(so,Ct.iconBox,l.ai.horizontal),()=>{const Mn=Ct.verticalTextBox;return m.allowVerticalPlacement&&!(an&&an.box&&an.box.length)&&He.numVerticalGlyphVertices>0&&Mn?Xn(Mn,Ct.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),an&&(zt=an.box,Ft=an.offscreen);const qr=br(an&&an.box);if(!zt&&this.prevPlacement){const Mn=this.prevPlacement.variableOffsets[He.crossTileID];Mn&&(this.variableOffsets[He.crossTileID]=Mn,this.markUsedJustification(m,Mn.anchor,He,qr))}}}if(Kn=an,zt=Kn&&Kn.box&&Kn.box.length>0,Ft=Kn&&Kn.offscreen,He.useRuntimeCollisionCircles){const br=m.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),pr=l.aj(m.textSizeData,q,br),Ir=_.get("text-padding");Fn=this.collisionIndex.placeCollisionCircles(Q,br,m.lineVertexArray,m.glyphOffsetArray,pr,T,C,P,d,Ce,te.predicate,He.collisionCircleDiameter,Ir,lt),Fn.circles.length&&Fn.collisionDetected&&!d&&l.w("Collisions detected, but collision boxes are not shown"),zt=me||Fn.circles.length>0&&!Fn.collisionDetected,Ft=Ft&&Fn.offscreen}if(Ct.iconFeatureIndex&&(ps=Ct.iconFeatureIndex),Ct.iconBox){const br=pr=>{const Ir=Ee&&kn?at(pr,kn.x,kn.y,ge,Ce,this.transform.angle):pr;return this.collisionIndex.placeCollisionBox(Ir,be,D,T,te.predicate,lt)};dr&&dr.box&&dr.box.length&&Ct.verticalIconBox?(gi=br(Ct.verticalIconBox),It=gi.box.length>0):(gi=br(Ct.iconBox),It=gi.box.length>0),Ft=Ft&&gi.offscreen}const Mo=ee||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,ga=ie||He.numIconVertices===0;if(Mo||ga?ga?Mo||(It=It&&zt):zt=It&&zt:It=zt=It&&zt,zt&&Kn&&Kn.box&&this.collisionIndex.insertCollisionBox(Kn.box,Q,_.get("text-ignore-placement"),m.bucketInstanceId,dr&&dr.box&&ds?ds:un,te.ID),It&&gi&&this.collisionIndex.insertCollisionBox(gi.box,be,_.get("icon-ignore-placement"),m.bucketInstanceId,ps,te.ID),Fn&&(zt&&this.collisionIndex.insertCollisionCircles(Fn.circles,Q,_.get("text-ignore-placement"),m.bucketInstanceId,un,te.ID),d)){const br=m.bucketInstanceId;let pr=this.collisionCircleArrays[br];pr===void 0&&(pr=this.collisionCircleArrays[br]=new Ie);for(let Ir=0;Ir<Fn.circles.length;Ir+=4)pr.circles.push(Fn.circles[Ir+0]),pr.circles.push(Fn.circles[Ir+1]),pr.circles.push(Fn.circles[Ir+2]),pr.circles.push(Fn.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new Me(zt||Be,It||Re,Ft||m.justReloaded),c[He.crossTileID]=!0};if(De){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=m.getSortedSymbolIndexes(this.transform.angle);for(let Ct=He.length-1;Ct>=0;--Ct){const ut=He[Ct];Rt(m.symbolInstances.get(ut),m.collisionArrays[ut])}}else for(let He=r.symbolInstanceStart;He<r.symbolInstanceEnd;He++)Rt(m.symbolInstances.get(He),m.collisionArrays[He]);if(d&&m.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[m.bucketInstanceId];l.as(He.invProjMatrix,T),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,c,d,m){let _;_=m===l.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.at(c)];const T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=_>=0&&C!==_?0:d.crossTileID)}markUsedOrientation(r,c,d){const m=c===l.ai.horizontal||c===l.ai.horizontalOnly?c:0,_=c===l.ai.vertical?c:0,T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of T)r.text.placedSymbolArray.get(C).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(r):1,_=c?c.opacities:{},T=c?c.variableOffsets:{},C=c?c.placedOrientations:{};for(const P in this.placements){const D=this.placements[P],z=_[P];z?(this.opacities[P]=new ye(z,m,D.text,D.icon),d=d||D.text!==z.text.placed||D.icon!==z.icon.placed):(this.opacities[P]=new ye(null,m,D.text,D.icon,D.skipFade),d=d||D.text||D.icon)}for(const P in _){const D=_[P];if(!this.opacities[P]){const z=new ye(D,m,!1,!1);z.isHidden()||(this.opacities[P]=z,d=d||D.text.placed||D.icon.placed)}}for(const P in T)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=T[P]);for(const P in C)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=C[P]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const d={};for(const m of c){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,d,m.collisionBoxArray)}}updateBucketOpacities(r,c,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new ye(null,0,!1,!1,!0),C=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),D=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=_.get("text-rotation-alignment")==="map",R=_.get("text-pitch-alignment")==="map",q=_.get("icon-text-fit")!=="none",te=new ye(null,0,C&&(P||!r.hasIconData()||_.get("icon-optional")),P&&(C||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const ee=(ie,Q,me)=>{for(let be=0;be<Q/4;be++)ie.opacityVertexArray.emplaceBack(me);ie.hasVisibleVertices=ie.hasVisibleVertices||me!==Ai};for(let ie=0;ie<r.symbolInstances.length;ie++){const Q=r.symbolInstances.get(ie),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:be,crossTileID:ce}=Q;let ge=this.opacities[ce];c[ce]?ge=T:ge||(ge=te,this.opacities[ce]=ge),c[ce]=!0;const Ce=Q.numIconVertices>0,Ee=this.placedOrientations[Q.crossTileID],De=Ee===l.ai.vertical,Be=Ee===l.ai.horizontal||Ee===l.ai.horizontalOnly;if(me>0||be>0){const Re=ur(ge.text);ee(r.text,me,De?Ai:Re),ee(r.text,be,Be?Ai:Re);const Ve=ge.text.isHidden();[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(He=>{He>=0&&(r.text.placedSymbolArray.get(He).hidden=Ve||De?1:0)}),Q.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).hidden=Ve||Be?1:0);const lt=this.variableOffsets[Q.crossTileID];lt&&this.markUsedJustification(r,lt.anchor,Q,Ee);const Rt=this.placedOrientations[Q.crossTileID];Rt&&(this.markUsedJustification(r,"left",Q,Rt),this.markUsedOrientation(r,Rt,Q))}if(Ce){const Re=ur(ge.icon),Ve=!(q&&Q.verticalPlacedIconSymbolIndex&&De);Q.placedIconSymbolIndex>=0&&(ee(r.icon,Q.numIconVertices,Ve?Re:Ai),r.icon.placedSymbolArray.get(Q.placedIconSymbolIndex).hidden=ge.icon.isHidden()),Q.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,Q.numVerticalIconVertices,Ve?Ai:Re),r.icon.placedSymbolArray.get(Q.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Re=r.collisionArrays[ie];if(Re){let Ve=new l.P(0,0);if(Re.textBox||Re.verticalTextBox){let Rt=!0;if(D){const He=this.variableOffsets[ce];He?(Ve=kt(He.anchor,He.width,He.height,He.textOffset,He.textBoxScale),z&&Ve._rotate(R?this.transform.angle:-this.transform.angle)):Rt=!1}Re.textBox&&At(r.textCollisionBox.collisionVertexArray,ge.text.placed,!Rt||De,Ve.x,Ve.y),Re.verticalTextBox&&At(r.textCollisionBox.collisionVertexArray,ge.text.placed,!Rt||Be,Ve.x,Ve.y)}const lt=!!(!Be&&Re.verticalIconBox);Re.iconBox&&At(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,lt,q?Ve.x:0,q?Ve.y:0),Re.verticalIconBox&&At(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,!lt,q?Ve.x:0,q?Ve.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ie.invProjMatrix,r.placementViewportMatrix=ie.viewportMatrix,r.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function At(g,r,c,d,m){g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0)}const Qt=Math.pow(2,25),nn=Math.pow(2,24),Zt=Math.pow(2,17),$t=Math.pow(2,16),xr=Math.pow(2,9),on=Math.pow(2,8),Gn=Math.pow(2,1);function ur(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const r=g.placed?1:0,c=Math.floor(127*g.opacity);return c*Qt+r*nn+c*Zt+r*$t+c*xr+r*on+c*Gn+r}const Ai=0;class Ep{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,d,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,P)=>C.sortKey-P.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class ra{constructor(r,c,d,m,_,T,C,P){this.placement=new bt(r,c,T,C,P),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,c,d){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Ep(T)),this._inProgressLayer.continuePlacement(d[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ia=512/l.N/2;class ry{constructor(r,c,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const m=new Map;for(let _=0;_<c.length;_++){const T=c.get(_),C=T.key,P=m.get(C);P?P.push(T):m.set(C,[T])}for(const[_,T]of m){const C={positions:T.map(P=>({x:Math.floor(P.anchorX*ia),y:Math.floor(P.anchorY*ia)})),crossTileIDs:T.map(P=>P.crossTileID)};if(C.positions.length>128){const P=new l.av(C.positions.length,16,Uint16Array);for(const{x:D,y:z}of C.positions)P.add(D,z);P.finish(),delete C.positions,C.index=P}this._symbolsByKey[_]=C}}getScaledCoordinates(r,c){const{x:d,y:m,z:_}=this.tileID.canonical,{x:T,y:C,z:P}=c.canonical,D=ia/Math.pow(2,P-_),z=(C*l.N+r.anchorY)*D,R=m*l.N*ia;return{x:Math.floor((T*l.N+r.anchorX)*D-d*l.N*ia),y:Math.floor(z-R)}}findMatches(r,c,d){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const C=this._symbolsByKey[T.key];if(!C)continue;const P=this.getScaledCoordinates(T,c);if(C.index){const D=C.index.range(P.x-m,P.y-m,P.x+m,P.y+m).sort();for(const z of D){const R=C.crossTileIDs[z];if(!d[R]){d[R]=!0,T.crossTileID=R;break}}}else if(C.positions)for(let D=0;D<C.positions.length;D++){const z=C.positions[D],R=C.crossTileIDs[D];if(Math.abs(z.x-P.x)<=m&&Math.abs(z.y-P.y)<=m&&!d[R]){d[R]=!0,T.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class en{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ih{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const d in this.indexes){const m=this.indexes[d],_={};for(const T in m){const C=m[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),_[C.tileID.key]=C}this.indexes[d]=_}this.lng=r}addBucket(r,c,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const C in T){const P=T[C];P.tileID.isChildOf(r)&&P.findMatches(c.symbolInstances,r,m)}else{const C=T[r.scaledTo(Number(_)).key];C&&C.findMatches(c.symbolInstances,r,m)}}for(let _=0;_<c.symbolInstances.length;_++){const T=c.symbolInstances.get(_);T.crossTileID||(T.crossTileID=d.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ry(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const d of c.getCrossTileIDsLists())for(const m of d)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let c=!1;for(const d in this.indexes){const m=this.indexes[d];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[_]),delete m[_],c=!0)}return c}}class hc{constructor(){this.layerIndexes={},this.crossTileIDs=new en,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,d){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new ih);let _=!1;const T={};m.handleWrapJump(d);for(const C of c){const P=C.getBucket(r);P&&r.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,P,this.crossTileIDs)&&(_=!0),T[P.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const c={};r.forEach(d=>{c[d]=!0});for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}const wr=(g,r)=>l.x(g,r&&r.filter(c=>c.identifier!=="source.canvas")),hi=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),iy=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Mi=l.aw();class hr extends l.E{constructor(r,c={}){super(),this.map=r,this.dispatcher=new ot(wo(),this,r._getMapId()),this.imageManager=new nt,this.imageManager.setEventedParent(this),this.glyphManager=new mt(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new yt(256,512),this.crossTileSymbolIndex=new hc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const d=this;this._rtlTextPluginCallback=hr.registerForPluginStateChange(m=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(l.aA(_),T&&T.every(C=>C))for(const C in d.sourceCaches){const P=d.sourceCaches[C].getSource().type;P!=="vector"&&P!=="geojson"||d.sourceCaches[C].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const P=this._layers[C];P.source===T.id&&this._validateLayer(P)}})}loadURL(r,c={},d){this.fire(new l.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(r,B.Style);this._request=l.f(m,(_,T)=>{this._request=null,_?this.fire(new l.j(_)):T&&this._load(T,c,d)})}loadJSON(r,c={},d){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(r,c,d)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Mi,{validate:!1})}_load(r,c,d){var m;const _=c.transformStyle?c.transformStyle(d,r):r;if(!c.validate||!wr(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new We(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const d=l.aC(c);d.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=d}}_loadSprite(r,c=!1,d=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,C){const P=we(m),D=P.length,z=T>1?"@2x":"",R={},q={},te={};for(const{id:ee,url:ie}of P){const Q=_.transformRequest(_.normalizeSpriteURL(ie,z,".json"),B.SpriteJSON),me=`${ee}_${Q.url}`;R[me]=l.f(Q,(ge,Ce)=>{delete R[me],q[ee]=Ce,Ye(C,q,te,ge,D)});const be=_.transformRequest(_.normalizeSpriteURL(ie,z,".png"),B.SpriteImage),ce=`${ee}_${be.url}`;R[ce]=H.getImage(be,(ge,Ce)=>{delete R[ce],te[ee]=Ce,Ye(C,q,te,ge,D)})}return{cancel(){for(const ee of Object.values(R))ee.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const C=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(P=>!(P in _)):[];for(const P of C)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in _[T]){const D=T==="default"?P:`${T}:${P}`;this._spritesImagesIds[T].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[T][P],!1):this.imageManager.addImage(D,_[T][P]),c&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const d=r.sourceLayer;if(!d)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.j(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const c=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c);const d=[];for(const m of r)c[m]&&d.push(c[m]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const d of c){const m=this._layers[d];m.type!=="custom"&&(r[d]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const C=this._updatedSources[T];if(C==="reload")this._reloadSource(T);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];d[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in d){const _=this.sourceCaches[m];d[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){this._checkLoaded();const d=this.serialize();if(r=c.transformStyle?c.transformStyle(d,r):r,wr(this,l.y(r)))return!1;(r=l.aD(r)).layers=l.aB(r.layers);const m=l.aE(d,r).filter(T=>!(T.command in iy));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in hi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,c){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.y.source,`sources.${r}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[r]=new vr(r,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,d={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(wr(this,l.aF(r)))return;_=l.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aD(r),r=l.e(r,{source:m})),this._validate(l.y.layer,`layers.${m}`,r,{arrayIndex:-1},d))return;_=l.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const C=this._removedLayers[m];delete this._removedLayers[m],C.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const d=this._order.indexOf(r);this._order.splice(d,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,d){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===c&&m.maxzoom===d||(c!=null&&(m.minzoom=c),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,d={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aG(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,c,null,d)||(m.filter=l.aD(c),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aD(this.getLayer(r).filter)}setLayoutProperty(r,c,d,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getLayoutProperty(c),d)||(_.setLayoutProperty(c,d,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const d=this.getLayer(r);if(d)return d.getLayoutProperty(c);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,d,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getPaintProperty(c),d)||(_.setPaintProperty(c,d,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const d=r.source,m=r.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,c)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const d=r.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,c):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,d=r.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aH(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:c,terrain:d},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",d={},m=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(c(C)){d[C]=T;for(const P of r){const D=P[C];if(D)for(const z of D)m.push(z)}}}m.sort((T,C)=>C.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(c(C))for(let P=m.length-1;P>=0;P--){const D=m[P].feature;if(d[D.layer.id]<T)break;_.push(D),m.pop()}else for(const P of r){const D=P[C];if(D)for(const z of D)_.push(z.feature)}}return _}queryRenderedFeatures(r,c,d){c&&c.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const C of c.layers){const P=this._layers[C];if(!P)return this.fire(new l.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];m[P.source]=!0}}const _=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const C in this.sourceCaches)c.layers&&!m[C]||_.push(yr(this.sourceCaches[C],this._layers,T,r,c,d));return this.placement&&_.push(function(C,P,D,z,R,q,te){const ee={},ie=q.queryRenderedSymbols(z),Q=[];for(const me of Object.keys(ie).map(Number))Q.push(te[me]);Q.sort(Pi);for(const me of Q){const be=me.featureIndex.lookupSymbolFeatures(ie[me.bucketInstanceId],P,me.bucketIndex,me.sourceLayerIndex,R.filter,R.layers,R.availableImages,C);for(const ce in be){const ge=ee[ce]=ee[ce]||[],Ce=be[ce];Ce.sort((Ee,De)=>{const Be=me.featureSortOrder;if(Be){const Re=Be.indexOf(Ee.featureIndex);return Be.indexOf(De.featureIndex)-Re}return De.featureIndex-Ee.featureIndex});for(const Ee of Ce)ge.push(Ee)}}for(const me in ee)ee[me].forEach(be=>{const ce=be.feature,ge=D[C[me].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=ge});return ee}(this._layers,T,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,c){c&&c.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.sourceCaches[r];return d?function(m,_){const T=m.getRenderableIds().map(D=>m.getTileByID(D)),C=[],P={};for(let D=0;D<T.length;D++){const z=T[D],R=z.tileID.canonical.key;P[R]||(P[R]=!0,z.querySourceFeatures(C,_))}return C}(d,c):[]}addSourceType(r,c,d){return Ar(r)?d(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{ai[m]=_})(r,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:c.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const d=this.light.getLight();let m=!1;for(const T in r)if(!l.aG(r[T],d[T])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(_)}_validate(r,c,d,m,_={}){return(!_||_.validate!==!1)&&wr(this,r.call(l.y,l.e({key:c,style:this.serialize(),value:d,styleSpec:l.v},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const d=this.sourceCaches[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,d,m,_=!1){let T=!1,C=!1;const P={};for(const D of this._order){const z=this._layers[D];if(z.type!=="symbol")continue;if(!P[z.source]){const q=this.sourceCaches[z.source];P[z.source]=q.getRenderableIds(!0).map(te=>q.getTileByID(te)).sort((te,ee)=>ee.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(ee.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(z,P[z.source],r.center.lng);T=T||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),r.zoom))&&(this.pauseablePlacement=new ra(r,this.map.terrain,this._order,_,c,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const D of this._order){const z=this._layers[D];z.type==="symbol"&&this.placement.updateLayerOpacities(z,P[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(r,c,d){this.glyphManager.getGlyphs(c.stacks,d);const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,[""])}getResource(r,c,d){return l.m(c,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,d={},m){this._checkLoaded();const _=[{id:r,url:c}],T=[...we(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",T,null,d)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const c=we(this.stylesheet.sprite);if(c.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex(d=>d.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(r,c={},d){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}hr.registerForPluginStateChange=l.aK;var dc=l.Q([{name:"a_pos",type:"Int16",components:2}]),sa="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const gn={prelude:Kt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",sa),terrainDepth:Kt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",sa),terrainCoords:Kt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",sa)};function Kt(g,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,C={};return{fragmentSource:g=g.replace(c,(P,D,z,R,q)=>(C[q]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${z} ${R} ${q};
#else
uniform ${z} ${R} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${z} ${R} ${q} = u_${q};
#endif
`)),vertexSource:r=r.replace(c,(P,D,z,R,q)=>{const te=R==="float"?"vec2":"vec4",ee=q.match(/color/)?"color":te;return C[q]?D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${z} ${te} a_${q};
varying ${z} ${R} ${q};
#else
uniform ${z} ${R} u_${q};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${z} ${R} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${ee}(a_${q}, u_${q}_t);
#else
    ${z} ${R} ${q} = u_${q};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${z} ${te} a_${q};
#else
uniform ${z} ${R} u_${q};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${z} ${R} ${q} = a_${q};
#else
    ${z} ${R} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${z} ${R} ${q} = unpack_mix_${ee}(a_${q}, u_${q}_t);
#else
    ${z} ${R} ${q} = u_${q};
#endif
`}),staticAttributes:d,staticUniforms:T}}class bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,d,m,_,T,C,P,D){this.context=r;let z=this.boundPaintVertexBuffers.length!==m.length;for(let R=0;!z&&R<m.length;R++)this.boundPaintVertexBuffers[R]!==m[R]&&(z=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||z||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==D?this.freshBind(c,d,m,_,T,C,P,D):(r.bindVertexArray.set(this.vao),C&&C.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),D&&D.bind())}freshBind(r,c,d,m,_,T,C,P){const D=r.numAttributes,z=this.context,R=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=P,c.enableAttributes(R,r);for(const q of d)q.enableAttributes(R,r);T&&T.enableAttributes(R,r),C&&C.enableAttributes(R,r),P&&P.enableAttributes(R,r),c.bind(),c.setVertexAttribPointers(R,r,_);for(const q of d)q.bind(),q.setVertexAttribPointers(R,r,_);T&&(T.bind(),T.setVertexAttribPointers(R,r,_)),m&&m.bind(),C&&(C.bind(),C.setVertexAttribPointers(R,r,_)),P&&(P.bind(),P.setVertexAttribPointers(R,r,_)),z.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function wn(g){const r=[];for(let c=0;c<g.length;c++){if(g[c]===null)continue;const d=g[c].split(" ");r.push(d.pop())}return r}class pc{constructor(r,c,d,m,_,T){const C=r.gl;this.program=C.createProgram();const P=wn(c.staticAttributes),D=d?d.getBinderAttributes():[],z=P.concat(D),R=gn.prelude.staticUniforms?wn(gn.prelude.staticUniforms):[],q=c.staticUniforms?wn(c.staticUniforms):[],te=d?d.getBinderUniforms():[],ee=R.concat(q).concat(te),ie=[];for(const Ee of ee)ie.indexOf(Ee)<0&&ie.push(Ee);const Q=d?d.defines():[];_&&Q.push("#define OVERDRAW_INSPECTOR;"),T&&Q.push("#define TERRAIN3D;");const me=Q.concat(gn.prelude.fragmentSource,c.fragmentSource).join(`
`),be=Q.concat(gn.prelude.vertexSource,c.vertexSource).join(`
`),ce=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ce,me),C.compileShader(ce),!C.getShaderParameter(ce,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(ce)}`);C.attachShader(this.program,ce);const ge=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ge,be),C.compileShader(ge),!C.getShaderParameter(ge,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(ge)}`);C.attachShader(this.program,ge),this.attributes={};const Ce={};this.numAttributes=z.length;for(let Ee=0;Ee<this.numAttributes;Ee++)z[Ee]&&(C.bindAttribLocation(this.program,Ee,z[Ee]),this.attributes[z[Ee]]=Ee);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(ge),C.deleteShader(ce);for(let Ee=0;Ee<ie.length;Ee++){const De=ie[Ee];if(De&&!Ce[De]){const Be=C.getUniformLocation(this.program,De);Be&&(Ce[De]=Be)}}this.fixedUniforms=m(r,Ce),this.terrainUniforms=((Ee,De)=>({u_depth:new l.aL(Ee,De.u_depth),u_terrain:new l.aL(Ee,De.u_terrain),u_terrain_dim:new l.aM(Ee,De.u_terrain_dim),u_terrain_matrix:new l.aN(Ee,De.u_terrain_matrix),u_terrain_unpack:new l.aO(Ee,De.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Ee,De.u_terrain_exaggeration)}))(r,Ce),this.binderUniforms=d?d.getUniforms(r,Ce):[]}draw(r,c,d,m,_,T,C,P,D,z,R,q,te,ee,ie,Q,me,be){const ce=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),P){r.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,P.depthTexture),r.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,P.texture);for(const Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(P[Ce])}for(const Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(C[Ce]);ie&&ie.setUniforms(r,this.binderUniforms,te,{zoom:ee});let ge=0;switch(c){case ce.LINES:ge=2;break;case ce.TRIANGLES:ge=3;break;case ce.LINE_STRIP:ge=1}for(const Ce of q.get()){const Ee=Ce.vaos||(Ce.vaos={});(Ee[D]||(Ee[D]=new bo)).bind(r,this,z,ie?ie.getPaintVertexBuffers():[],R,Ce.vertexOffset,Q,me,be),ce.drawElements(c,Ce.primitiveLength*ge,ce.UNSIGNED_SHORT,Ce.primitiveOffset*ge*2)}}}function Ii(g,r,c){const d=1/fe(c,1,r.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(c.tileID.canonical.x+c.tileID.wrap*m),C=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const sh=(g,r,c,d)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],C=function(){var D=new l.A(9);return l.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();m.properties.get("anchor")==="viewport"&&function(D,z){var R=Math.sin(z),q=Math.cos(z);D[0]=q,D[1]=R,D[2]=0,D[3]=-R,D[4]=q,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(C,-r.transform.angle),function(D,z,R){var q=z[0],te=z[1],ee=z[2];D[0]=q*R[0]+te*R[3]+ee*R[6],D[1]=q*R[1]+te*R[4]+ee*R[7],D[2]=q*R[2]+te*R[5]+ee*R[8]}(T,T,C);const P=m.properties.get("color");return{u_matrix:g,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+c,u_opacity:d}},Js=(g,r,c,d,m,_,T)=>l.e(sh(g,r,c,d),Ii(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),Pp=g=>({u_matrix:g}),oh=(g,r,c,d)=>l.e(Pp(g),Ii(c,r,d)),fc=(g,r)=>({u_matrix:g,u_world:r}),mc=(g,r,c,d,m)=>l.e(oh(g,r,c,d),{u_world:m}),eo=(g,r,c,d)=>{const m=g.transform;let _,T;if(d.paint.get("circle-pitch-alignment")==="map"){const C=fe(c,1,m.zoom);_=!0,T=[C,C]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(r.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:T}},ah=(g,r,c)=>{const d=fe(c,1,r.zoom),m=Math.pow(2,r.zoom-c.tileID.overscaledZ),_=c.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*m),r.pixelsToGLUnits[1]/(d*m)],u_overscale_factor:_}},fl=(g,r,c=1)=>({u_matrix:g,u_color:r,u_overlay:0,u_overlay_scale:c}),kp=g=>({u_matrix:g}),sy=(g,r,c,d)=>({u_matrix:g,u_extrude_scale:fe(r,1,c),u_intensity:d});function lh(g,r){const c=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new l.U(0,d/c).toLngLat().lat,new l.U(0,(d+1)/c).toLngLat().lat]}const ch=(g,r,c,d)=>{const m=g.transform;return{u_matrix:gc(g,r,c,d),u_ratio:1/fe(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ap=(g,r,c,d,m)=>l.e(ch(g,r,c,m),{u_image:0,u_image_height:d}),oy=(g,r,c,d,m)=>{const _=g.transform,T=Ip(r,_);return{u_matrix:gc(g,r,c,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/fe(r,1,_.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[T,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Mp=(g,r,c,d,m,_)=>{const T=g.lineAtlas,C=Ip(r,g.transform),P=c.layout.get("line-cap")==="round",D=T.getDash(d.from,P),z=T.getDash(d.to,P),R=D.width*m.fromScale,q=z.width*m.toScale;return l.e(ch(g,r,c,_),{u_patternscale_a:[C/R,-D.height/2],u_patternscale_b:[C/q,-z.height/2],u_sdfgamma:T.width/(256*Math.min(R,q)*g.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:z.y,u_mix:m.t})};function Ip(g,r){return 1/fe(g,1,r.tileZoom)}function gc(g,r,c,d){return g.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Dp=(g,r,c,d,m)=>{return{u_matrix:g,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Lp(m.paint.get("raster-hue-rotate"))};var _,T};function Lp(g){g*=Math.PI/180;const r=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const uh=(g,r,c,d,m,_,T,C,P,D)=>{const z=m.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:z.width/z.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+P,u_pitch_with_map:+d,u_texsize:D,u_texture:0}},hh=(g,r,c,d,m,_,T,C,P,D,z)=>{const R=m.transform;return l.e(uh(g,r,c,d,m,_,T,C,P,D),{u_gamma_scale:d?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+z})},So=(g,r,c,d,m,_,T,C,P,D)=>l.e(hh(g,r,c,d,m,_,T,C,!0,P,!0),{u_texsize_icon:D,u_texture_icon:1}),yc=(g,r,c)=>({u_matrix:g,u_opacity:r,u_color:c}),Di=(g,r,c,d,m,_)=>l.e(function(T,C,P,D){const z=P.imageManager.getPattern(T.from.toString()),R=P.imageManager.getPattern(T.to.toString()),{width:q,height:te}=P.imageManager.getPixelSize(),ee=Math.pow(2,D.tileID.overscaledZ),ie=D.tileSize*Math.pow(2,P.transform.tileZoom)/ee,Q=ie*(D.tileID.canonical.x+D.tileID.wrap*ee),me=ie*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[q,te],u_mix:C.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/fe(D,1,P.transform.tileZoom),u_pixel_coord_upper:[Q>>16,me>>16],u_pixel_coord_lower:[65535&Q,65535&me]}}(d,_,c,m),{u_matrix:g,u_opacity:r}),vc={fillExtrusion:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_lightpos:new l.aP(g,r.u_lightpos),u_lightintensity:new l.aM(g,r.u_lightintensity),u_lightcolor:new l.aP(g,r.u_lightcolor),u_vertical_gradient:new l.aM(g,r.u_vertical_gradient),u_opacity:new l.aM(g,r.u_opacity)}),fillExtrusionPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_lightpos:new l.aP(g,r.u_lightpos),u_lightintensity:new l.aM(g,r.u_lightintensity),u_lightcolor:new l.aP(g,r.u_lightcolor),u_vertical_gradient:new l.aM(g,r.u_vertical_gradient),u_height_factor:new l.aM(g,r.u_height_factor),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade),u_opacity:new l.aM(g,r.u_opacity)}),fill:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix)}),fillPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),fillOutline:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world)}),fillOutlinePattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),circle:(g,r)=>({u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_scale_with_map:new l.aL(g,r.u_scale_with_map),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_extrude_scale:new l.aQ(g,r.u_extrude_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_matrix:new l.aN(g,r.u_matrix)}),collisionBox:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(g,r.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(g,r.u_extrude_scale),u_overscale_factor:new l.aM(g,r.u_overscale_factor)}),collisionCircle:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_inv_matrix:new l.aN(g,r.u_inv_matrix),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_viewport_size:new l.aQ(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new l.aR(g,r.u_color),u_matrix:new l.aN(g,r.u_matrix),u_overlay:new l.aL(g,r.u_overlay),u_overlay_scale:new l.aM(g,r.u_overlay_scale)}),clippingMask:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix)}),heatmap:(g,r)=>({u_extrude_scale:new l.aM(g,r.u_extrude_scale),u_intensity:new l.aM(g,r.u_intensity),u_matrix:new l.aN(g,r.u_matrix)}),heatmapTexture:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world),u_image:new l.aL(g,r.u_image),u_color_ramp:new l.aL(g,r.u_color_ramp),u_opacity:new l.aM(g,r.u_opacity)}),hillshade:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_latrange:new l.aQ(g,r.u_latrange),u_light:new l.aQ(g,r.u_light),u_shadow:new l.aR(g,r.u_shadow),u_highlight:new l.aR(g,r.u_highlight),u_accent:new l.aR(g,r.u_accent)}),hillshadePrepare:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_dimension:new l.aQ(g,r.u_dimension),u_zoom:new l.aM(g,r.u_zoom),u_unpack:new l.aO(g,r.u_unpack)}),line:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_image:new l.aL(g,r.u_image),u_image_height:new l.aM(g,r.u_image_height)}),linePattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texsize:new l.aQ(g,r.u_texsize),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_image:new l.aL(g,r.u_image),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),lineSDF:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_patternscale_a:new l.aQ(g,r.u_patternscale_a),u_patternscale_b:new l.aQ(g,r.u_patternscale_b),u_sdfgamma:new l.aM(g,r.u_sdfgamma),u_image:new l.aL(g,r.u_image),u_tex_y_a:new l.aM(g,r.u_tex_y_a),u_tex_y_b:new l.aM(g,r.u_tex_y_b),u_mix:new l.aM(g,r.u_mix)}),raster:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_tl_parent:new l.aQ(g,r.u_tl_parent),u_scale_parent:new l.aM(g,r.u_scale_parent),u_buffer_scale:new l.aM(g,r.u_buffer_scale),u_fade_t:new l.aM(g,r.u_fade_t),u_opacity:new l.aM(g,r.u_opacity),u_image0:new l.aL(g,r.u_image0),u_image1:new l.aL(g,r.u_image1),u_brightness_low:new l.aM(g,r.u_brightness_low),u_brightness_high:new l.aM(g,r.u_brightness_high),u_saturation_factor:new l.aM(g,r.u_saturation_factor),u_contrast_factor:new l.aM(g,r.u_contrast_factor),u_spin_weights:new l.aP(g,r.u_spin_weights)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texture:new l.aL(g,r.u_texture)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texture:new l.aL(g,r.u_texture),u_gamma_scale:new l.aM(g,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_is_halo:new l.aL(g,r.u_is_halo)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texsize_icon:new l.aQ(g,r.u_texsize_icon),u_texture:new l.aL(g,r.u_texture),u_texture_icon:new l.aL(g,r.u_texture_icon),u_gamma_scale:new l.aM(g,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_is_halo:new l.aL(g,r.u_is_halo)}),background:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_opacity:new l.aM(g,r.u_opacity),u_color:new l.aR(g,r.u_color)}),backgroundPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_opacity:new l.aM(g,r.u_opacity),u_image:new l.aL(g,r.u_image),u_pattern_tl_a:new l.aQ(g,r.u_pattern_tl_a),u_pattern_br_a:new l.aQ(g,r.u_pattern_br_a),u_pattern_tl_b:new l.aQ(g,r.u_pattern_tl_b),u_pattern_br_b:new l.aQ(g,r.u_pattern_br_b),u_texsize:new l.aQ(g,r.u_texsize),u_mix:new l.aM(g,r.u_mix),u_pattern_size_a:new l.aQ(g,r.u_pattern_size_a),u_pattern_size_b:new l.aQ(g,r.u_pattern_size_b),u_scale_a:new l.aM(g,r.u_scale_a),u_scale_b:new l.aM(g,r.u_scale_b),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texture:new l.aL(g,r.u_texture),u_ele_delta:new l.aM(g,r.u_ele_delta)}),terrainDepth:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ele_delta:new l.aM(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texture:new l.aL(g,r.u_texture),u_terrain_coords_id:new l.aM(g,r.u_terrain_coords_id),u_ele_delta:new l.aM(g,r.u_ele_delta)})};class _c{constructor(r,c,d){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ml={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xc{constructor(r,c,d,m){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let d=0;d<this.attributes.length;d++){const m=c.attributes[this.attributes[d].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,c,d){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=c.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[ml[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const oa=new WeakMap;function to(g){var r;if(oa.has(g))return oa.get(g);{const c=(r=g.getParameter(g.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return oa.set(g,c),c}}class Vt{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wc extends Vt{getDefault(){return l.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class di extends Vt{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class pi extends Vt{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class dh extends Vt{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class bc extends Vt{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Sc extends Vt{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ph extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class fh extends Vt{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Tc extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class mh extends Vt{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class gh extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Cc extends Vt{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class zp extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Rp extends Vt{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class aa extends Vt{getDefault(){return l.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ay extends Vt{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ly extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class cy extends Vt{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class uy extends Vt{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class hy extends Vt{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class dy extends Vt{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class yh extends Vt{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ec extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class vh extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _h extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class la extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Fp extends Vt{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Op extends Vt{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const d=this.gl;to(d)?d.bindVertexArray(r):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class xh extends Vt{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class To extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Bp extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class no extends Vt{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class ca extends no{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Np extends no{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wh extends no{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xt{constructor(r,c,d,m,_){this.context=r,this.width=c,this.height=d;const T=r.gl,C=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new ca(r,C),m)this.depthAttachment=_?new wh(r,C):new Np(r,C);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class yn{constructor(r,c,d){this.blendFunction=r,this.blendColor=c,this.mask=d}}yn.Replace=[1,0],yn.disabled=new yn(yn.Replace,l.aT.transparent,[!1,!1,!1,!1]),yn.unblended=new yn(yn.Replace,l.aT.transparent,[!0,!0,!0,!0]),yn.alphaBlended=new yn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class py{constructor(r){var c,d;if(this.gl=r,this.clearColor=new wc(this),this.clearDepth=new di(this),this.clearStencil=new pi(this),this.colorMask=new dh(this),this.depthMask=new bc(this),this.stencilMask=new Sc(this),this.stencilFunc=new ph(this),this.stencilOp=new fh(this),this.stencilTest=new Tc(this),this.depthRange=new mh(this),this.depthTest=new gh(this),this.depthFunc=new Cc(this),this.blend=new zp(this),this.blendFunc=new Rp(this),this.blendColor=new aa(this),this.blendEquation=new ay(this),this.cullFace=new ly(this),this.cullFaceSide=new cy(this),this.frontFace=new uy(this),this.program=new hy(this),this.activeTexture=new dy(this),this.viewport=new yh(this),this.bindFramebuffer=new Ec(this),this.bindRenderbuffer=new vh(this),this.bindTexture=new _h(this),this.bindVertexBuffer=new la(this),this.bindElementBuffer=new Fp(this),this.bindVertexArray=new Op(this),this.pixelStoreUnpack=new xh(this),this.pixelStoreUnpackPremultiplyAlpha=new To(this),this.pixelStoreUnpackFlipY=new Bp(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),to(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new _c(this,r,c)}createVertexBuffer(r,c,d){return new xc(this,r,c,d)}createRenderbuffer(r,c,d){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,c,d),this.bindRenderbuffer.set(null),_}createFramebuffer(r,c,d,m){return new Xt(this,r,c,d,m)}clear({color:r,depth:c,stencil:d}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aG(r.blendFunction,yn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return to(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return to(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class jt{constructor(r,c,d){this.func=r,this.mask=c,this.range=d}}jt.ReadOnly=!1,jt.ReadWrite=!0,jt.disabled=new jt(519,jt.ReadOnly,[0,1]);const Co=7680;class vn{constructor(r,c,d,m,_,T){this.test=r,this.ref=c,this.mask=d,this.fail=m,this.depthFail=_,this.pass=T}}vn.disabled=new vn({func:519,mask:0},0,0,Co,Co,Co);class fn{constructor(r,c,d){this.enable=r,this.mode=c,this.frontFace=d}}let gl;function Vp(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D=g.useProgram("collisionBox"),z=[];let R=0,q=0;for(let ce=0;ce<d.length;ce++){const ge=d[ce],Ce=r.getTile(ge),Ee=Ce.getBucket(c);if(!Ee)continue;let De=ge.posMatrix;m[0]===0&&m[1]===0||(De=g.translatePosMatrix(ge.posMatrix,Ce,m,_));const Be=T?Ee.textCollisionBox:Ee.iconCollisionBox,Re=Ee.collisionCircleArray;if(Re.length>0){const Ve=l.Z(),lt=De;l.aU(Ve,Ee.placementInvProjMatrix,g.transform.glCoordMatrix),l.aU(Ve,Ve,Ee.placementViewportMatrix),z.push({circleArray:Re,circleOffset:q,transform:lt,invTransform:Ve,coord:ge}),R+=Re.length/4,q=R}Be&&D.draw(C,P.LINES,jt.disabled,vn.disabled,g.colorModeForRenderPass(),fn.disabled,ah(De,g.transform,Ce),g.style.map.terrain&&g.style.map.terrain.getTerrainData(ge),c.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,null,g.transform.zoom,null,null,Be.collisionVertexBuffer)}if(!T||!z.length)return;const te=g.useProgram("collisionCircle"),ee=new l.aV;ee.resize(4*R),ee._trim();let ie=0;for(const ce of z)for(let ge=0;ge<ce.circleArray.length/4;ge++){const Ce=4*ge,Ee=ce.circleArray[Ce+0],De=ce.circleArray[Ce+1],Be=ce.circleArray[Ce+2],Re=ce.circleArray[Ce+3];ee.emplace(ie++,Ee,De,Be,Re,0),ee.emplace(ie++,Ee,De,Be,Re,1),ee.emplace(ie++,Ee,De,Be,Re,2),ee.emplace(ie++,Ee,De,Be,Re,3)}(!gl||gl.length<2*R)&&(gl=function(ce){const ge=2*ce,Ce=new l.aX;Ce.resize(ge),Ce._trim();for(let Ee=0;Ee<ge;Ee++){const De=6*Ee;Ce.uint16[De+0]=4*Ee+0,Ce.uint16[De+1]=4*Ee+1,Ce.uint16[De+2]=4*Ee+2,Ce.uint16[De+3]=4*Ee+2,Ce.uint16[De+4]=4*Ee+3,Ce.uint16[De+5]=4*Ee+0}return Ce}(R));const Q=C.createIndexBuffer(gl,!0),me=C.createVertexBuffer(ee,l.aW.members,!0);for(const ce of z){const ge={u_matrix:ce.transform,u_inv_matrix:ce.invTransform,u_camera_to_center_distance:(be=g.transform).cameraToCenterDistance,u_viewport_size:[be.width,be.height]};te.draw(C,P.TRIANGLES,jt.disabled,vn.disabled,g.colorModeForRenderPass(),fn.disabled,ge,g.style.map.terrain&&g.style.map.terrain.getTerrainData(ce.coord),c.id,me,Q,l.S.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,g.transform.zoom,null,null,null)}var be;me.destroy(),Q.destroy()}fn.disabled=new fn(!1,1029,2305),fn.backCCW=new fn(!0,1029,2305);const bh=l.ao(new Float32Array(16));function Pc(g,r,c,d,m,_){const{horizontalAlign:T,verticalAlign:C}=l.au(g);return new l.P((-(T-.5)*r/m+d[0])*_,(-(C-.5)*c/m+d[1])*_)}function kc(g,r,c,d,m,_,T,C,P,D,z){const R=g.text.placedSymbolArray,q=g.text.dynamicLayoutVertexArray,te=g.icon.dynamicLayoutVertexArray,ee={};q.clear();for(let ie=0;ie<R.length;ie++){const Q=R.get(ie),me=Q.hidden||!Q.crossTileID||g.allowVerticalPlacement&&!Q.placedOrientation?null:d[Q.crossTileID];if(me){const be=new l.P(Q.anchorX,Q.anchorY),ce=pn(be,c?T:_,z),ge=Zi(m.cameraToCenterDistance,ce.signedDistanceFromCamera);let Ce=l.aj(g.textSizeData,P,Q)*ge/l.ap;c&&(Ce*=g.tilePixelRatio/C);const{width:Ee,height:De,anchor:Be,textOffset:Re,textBoxScale:Ve}=me,lt=Pc(Be,Ee,De,Re,Ve,Ce),Rt=c?pn(be.add(lt),_,z).point:ce.point.add(r?lt.rotate(-m.angle):lt),He=g.allowVerticalPlacement&&Q.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let Ct=0;Ct<Q.numGlyphs;Ct++)l.ak(q,Rt,He);D&&Q.associatedIconIndex>=0&&(ee[Q.associatedIconIndex]={shiftedAnchor:Rt,angle:He})}else Y(Q.numGlyphs,q)}if(D){te.clear();const ie=g.icon.placedSymbolArray;for(let Q=0;Q<ie.length;Q++){const me=ie.get(Q);if(me.hidden)Y(me.numGlyphs,te);else{const be=ee[Q];if(be)for(let ce=0;ce<me.numGlyphs;ce++)l.ak(te,be.shiftedAnchor,be.angle);else Y(me.numGlyphs,te)}}g.icon.dynamicLayoutVertexBuffer.updateData(te)}g.text.dynamicLayoutVertexBuffer.updateData(q)}function Sh(g,r,c){return c.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Ac(g,r,c,d,m,_,T,C,P,D,z,R){const q=g.context,te=q.gl,ee=g.transform,ie=C==="map",Q=P==="map",me=C!=="viewport"&&c.layout.get("symbol-placement")!=="point",be=ie&&!Q&&!me,ce=!c.layout.get("symbol-sort-key").isConstant();let ge=!1;const Ce=g.depthModeForSublayer(0,jt.ReadOnly),Ee=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[];for(const Be of d){const Re=r.getTile(Be),Ve=Re.getBucket(c);if(!Ve)continue;const lt=m?Ve.text:Ve.icon;if(!lt||!lt.segments.get().length||!lt.hasVisibleVertices)continue;const Rt=lt.programConfigurations.get(c.id),He=m||Ve.sdfIcons,Ct=m?Ve.textSizeData:Ve.iconSizeData,ut=Q||ee.pitch!==0,tn=g.useProgram(Sh(He,m,Ve),Rt),zt=l.ah(Ct,ee.zoom),It=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Be);let Ft,kn,an,dr,Kn=[0,0],Fn=null;if(m)kn=Re.glyphAtlasTexture,an=te.LINEAR,Ft=Re.glyphAtlasTexture.size,Ve.iconsInText&&(Kn=Re.imageAtlasTexture.size,Fn=Re.imageAtlasTexture,dr=ut||g.options.rotating||g.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?te.LINEAR:te.NEAREST);else{const An=c.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;kn=Re.imageAtlasTexture,an=He||g.options.rotating||g.options.zooming||An||ut?te.LINEAR:te.NEAREST,Ft=Re.imageAtlasTexture.size}const gi=fe(Re,1,g.transform.zoom),un=je(Be.posMatrix,Q,ie,g.transform,gi),ds=ui(Be.posMatrix,Q,ie,g.transform,gi),ps=Ee&&Ve.hasTextData(),so=c.layout.get("icon-text-fit")!=="none"&&ps&&Ve.hasIconData();if(me){const An=g.style.map.terrain?(qr,Mn)=>g.style.map.terrain.getElevation(Be,qr,Mn):null,Xn=c.layout.get("text-rotation-alignment")==="map";$e(Ve,Be.posMatrix,g,m,un,ds,Q,D,Xn,An)}const Mo=g.translatePosMatrix(Be.posMatrix,Re,_,T),ga=me||m&&Ee||so?bh:un,br=g.translatePosMatrix(ds,Re,_,T,!0),pr=He&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ir;Ir=He?Ve.iconsInText?So(Ct.kind,zt,be,Q,g,Mo,ga,br,Ft,Kn):hh(Ct.kind,zt,be,Q,g,Mo,ga,br,m,Ft,!0):uh(Ct.kind,zt,be,Q,g,Mo,ga,br,m,Ft);const Io={program:tn,buffers:lt,uniformValues:Ir,atlasTexture:kn,atlasTextureIcon:Fn,atlasInterpolation:an,atlasInterpolationIcon:dr,isSDF:He,hasHalo:pr};if(ce&&Ve.canOverlap){ge=!0;const An=lt.segments.get();for(const Xn of An)De.push({segments:new l.S([Xn]),sortKey:Xn.sortKey,state:Io,terrainData:It})}else De.push({segments:lt.segments,sortKey:0,state:Io,terrainData:It})}ge&&De.sort((Be,Re)=>Be.sortKey-Re.sortKey);for(const Be of De){const Re=Be.state;if(q.activeTexture.set(te.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,te.CLAMP_TO_EDGE),Re.atlasTextureIcon&&(q.activeTexture.set(te.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Re.isSDF){const Ve=Re.uniformValues;Re.hasHalo&&(Ve.u_is_halo=1,Th(Re.buffers,Be.segments,c,g,Re.program,Ce,z,R,Ve,Be.terrainData)),Ve.u_is_halo=0}Th(Re.buffers,Be.segments,c,g,Re.program,Ce,z,R,Re.uniformValues,Be.terrainData)}}function Th(g,r,c,d,m,_,T,C,P,D){const z=d.context;m.draw(z,z.gl.TRIANGLES,_,T,C,fn.disabled,P,D,c.id,g.layoutVertexBuffer,g.indexBuffer,r,c.paint,d.transform.zoom,g.programConfigurations.get(c.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function yl(g,r,c,d,m){if(!c||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let T=_[c.to.toString()],C=_[c.from.toString()];if(!T&&C&&(T=C),!C&&T&&(C=T),!T||!C){const P=m.getPaintProperty(r);T=_[P],C=_[P]}T&&C&&g.setConstantPatternPositions(T,C)}function vl(g,r,c,d,m,_,T){const C=g.context.gl,P="fill-pattern",D=c.paint.get(P),z=D&&D.constantOr(1),R=c.getCrossfadeParameters();let q,te,ee,ie,Q;T?(te=z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=C.LINES):(te=z?"fillPattern":"fill",q=C.TRIANGLES);const me=D.constantOr(null);for(const be of d){const ce=r.getTile(be);if(z&&!ce.patternsLoaded())continue;const ge=ce.getBucket(c);if(!ge)continue;const Ce=ge.programConfigurations.get(c.id),Ee=g.useProgram(te,Ce),De=g.style.map.terrain&&g.style.map.terrain.getTerrainData(be);z&&(g.context.activeTexture.set(C.TEXTURE0),ce.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ce.updatePaintBuffers(R)),yl(Ce,P,me,ce,c);const Be=De?be:null,Re=g.translatePosMatrix(Be?Be.posMatrix:be.posMatrix,ce,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(T){ie=ge.indexBuffer2,Q=ge.segments2;const Ve=[C.drawingBufferWidth,C.drawingBufferHeight];ee=te==="fillOutlinePattern"&&z?mc(Re,g,R,ce,Ve):fc(Re,Ve)}else ie=ge.indexBuffer,Q=ge.segments,ee=z?oh(Re,g,R,ce):Pp(Re);Ee.draw(g.context,q,m,g.stencilModeForClipping(be),_,fn.disabled,ee,De,c.id,ge.layoutVertexBuffer,ie,Q,c.paint,g.transform.zoom,Ce)}}function _l(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D="fill-extrusion-pattern",z=c.paint.get(D),R=z.constantOr(1),q=c.getCrossfadeParameters(),te=c.paint.get("fill-extrusion-opacity"),ee=z.constantOr(null);for(const ie of d){const Q=r.getTile(ie),me=Q.getBucket(c);if(!me)continue;const be=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ie),ce=me.programConfigurations.get(c.id),ge=g.useProgram(R?"fillExtrusionPattern":"fillExtrusion",ce);R&&(g.context.activeTexture.set(P.TEXTURE0),Q.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ce.updatePaintBuffers(q)),yl(ce,D,ee,Q,c);const Ce=g.translatePosMatrix(ie.posMatrix,Q,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ee=c.paint.get("fill-extrusion-vertical-gradient"),De=R?Js(Ce,g,Ee,te,ie,q,Q):sh(Ce,g,Ee,te);ge.draw(C,C.gl.TRIANGLES,m,_,T,fn.backCCW,De,be,c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,c.paint,g.transform.zoom,ce,g.style.map.terrain&&me.centroidVertexBuffer)}}function fy(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D=c.fbo;if(!D)return;const z=g.useProgram("hillshade"),R=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);C.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),z.draw(C,P.TRIANGLES,m,_,T,fn.disabled,((q,te,ee,ie)=>{const Q=ee.paint.get("hillshade-shadow-color"),me=ee.paint.get("hillshade-highlight-color"),be=ee.paint.get("hillshade-accent-color");let ce=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=q.transform.angle);const ge=!q.options.moving;return{u_matrix:ie?ie.posMatrix:q.transform.calculatePosMatrix(te.tileID.toUnwrapped(),ge),u_image:0,u_latrange:lh(0,te.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),ce],u_shadow:Q,u_highlight:me,u_accent:be}})(g,c,d,R?r:null),R,d.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Ch(g,r,c,d,m,_){const T=g.context,C=T.gl,P=r.dem;if(P&&P.data){const D=P.dim,z=P.stride,R=P.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||g.getTileTexture(z),r.demTexture){const te=r.demTexture;te.update(R,{premultiply:!1}),te.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else r.demTexture=new Fe(T,R,C.RGBA,{premultiply:!1}),r.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let q=r.fbo;if(!q){const te=new Fe(T,{width:D,height:D,data:null},C.RGBA);te.bind(C.LINEAR,C.CLAMP_TO_EDGE),q=r.fbo=T.createFramebuffer(D,D,!0,!1),q.colorAttachment.set(te.texture)}T.bindFramebuffer.set(q.framebuffer),T.viewport.set([0,0,D,D]),g.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,d,m,_,fn.disabled,((te,ee)=>{const ie=ee.stride,Q=l.Z();return l.aS(Q,0,l.N,-l.N,0,0,1),l.$(Q,Q,[0,-l.N,0]),{u_matrix:Q,u_image:1,u_dimension:[ie,ie],u_zoom:te.overscaledZ,u_unpack:ee.getUnpackVector()}})(r.tileID,P),null,c.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function my(g,r,c,d,m,_){const T=d.paint.get("raster-fade-duration");if(!_&&T>0){const C=l.h.now(),P=(C-g.timeAdded)/T,D=r?(C-r.timeAdded)/T:-1,z=c.getSource(),R=m.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),q=!r||Math.abs(r.tileID.overscaledZ-R)>Math.abs(g.tileID.overscaledZ-R),te=q&&g.refreshedUponExpiration?1:l.ad(q?P:1-D,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const jp=new l.aT(1,0,0,1),Mc=new l.aT(0,1,0,1),Eh=new l.aT(0,0,1,1),Up=new l.aT(1,0,1,1),$p=new l.aT(0,1,1,1);function xl(g,r,c,d){Dc(g,0,r+c/2,g.transform.width,c,d)}function Ic(g,r,c,d){Dc(g,r-c/2,0,c,g.transform.height,d)}function Dc(g,r,c,d,m,_){const T=g.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*g.pixelRatio,c*g.pixelRatio,d*g.pixelRatio,m*g.pixelRatio),T.clear({color:_}),C.disable(C.SCISSOR_TEST)}function Gp(g,r,c){const d=g.context,m=d.gl,_=c.posMatrix,T=g.useProgram("debug"),C=jt.disabled,P=vn.disabled,D=g.colorModeForRenderPass(),z="$debug",R=g.style.map.terrain&&g.style.map.terrain.getTerrainData(c);d.activeTexture.set(m.TEXTURE0);const q=r.getTileByID(c.key).latestRawTileData,te=Math.floor((q&&q.byteLength||0)/1024),ee=r.getTile(c).tileSize,ie=512/Math.min(ee,512)*(c.overscaledZ/g.transform.zoom)*.5;let Q=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Q+=` => ${c.overscaledZ}`),function(me,be){me.initDebugOverlayCanvas();const ce=me.debugOverlayCanvas,ge=me.context.gl,Ce=me.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,ce.width,ce.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(be,5,5),Ce.strokeText(be,5,5),me.debugOverlayTexture.update(ce),me.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(g,`${Q} ${te}kB`),T.draw(d,m.TRIANGLES,C,P,yn.alphaBlended,fn.disabled,fl(_,l.aT.transparent,ie),null,z,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),T.draw(d,m.LINE_STRIP,C,P,D,fn.disabled,fl(_,l.aT.red),R,z,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function bn(g,r,c){const d=g.context,m=d.gl,_=g.colorModeForRenderPass(),T=new jt(m.LEQUAL,jt.ReadWrite,g.depthRangeFor3D),C=g.useProgram("terrain"),P=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,g.width,g.height]);for(const D of c){const z=g.renderToTexture.getTexture(D),R=r.getTerrainData(D.tileID);d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,z.texture);const q={u_matrix:g.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(g.transform.zoom)};C.draw(d,m.TRIANGLES,T,vn.disabled,_,fn.backCCW,q,R,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class Eo{constructor(r,c){this.context=new py(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=vr.maxUnderzooming+vr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hc}resize(r,c,d){if(this.width=Math.floor(r*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,c=new l.a_;c.emplaceBack(0,0),c.emplaceBack(l.N,0),c.emplaceBack(0,l.N),c.emplaceBack(l.N,l.N),this.tileExtentBuffer=r.createVertexBuffer(c,dc.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const d=new l.a_;d.emplaceBack(0,0),d.emplaceBack(l.N,0),d.emplaceBack(0,l.N),d.emplaceBack(l.N,l.N),this.debugBuffer=r.createVertexBuffer(d,dc.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=r.createVertexBuffer(m,$n.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,dc.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const C=new l.b0;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(C);const P=this.context.gl;this.stencilClearMode=new vn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.Z();l.aS(d,0,this.width,this.height,0,0,1),l.a0(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,jt.disabled,this.stencilClearMode,yn.disabled,fn.disabled,kp(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const d=this.context,m=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(yn.disabled),d.setDepthMode(jt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of c){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(d,m.TRIANGLES,jt.disabled,new vn({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),yn.disabled,fn.disabled,kp(T.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new vn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new vn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,d=r.sort((T,C)=>C.overscaledZ-T.overscaledZ),m=d[d.length-1].overscaledZ,_=d[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let C=0;C<_;C++)T[C+m]=new vn({func:c.GEQUAL,mask:255},C+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[T,d]}return[{[m]:vn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new yn([r.CONSTANT_COLOR,r.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yn.unblended:yn.alphaBlended}depthModeForSublayer(r,c,d){if(!this.opaquePassEnabledForLayer())return jt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new jt(d||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const d=this.style._order,m=this.style.sourceCaches,_={},T={},C={};for(const P in m){const D=m[P];D.used&&D.prepare(this.context),_[P]=D.getVisibleCoordinates(),T[P]=_[P].slice().reverse(),C[P]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<d.length;P++)if(this.style._layers[d[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,z){const R=D.context,q=R.gl,te=yn.unblended,ee=new jt(q.LEQUAL,jt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Q=z.sourceCache.getRenderableTiles(),me=D.useProgram("terrainDepth");R.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:l.aT.transparent,depth:1});for(const be of Q){const ce=z.getTerrainData(be.tileID),ge={u_matrix:D.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_ele_delta:z.getMeshFrameDelta(D.transform.zoom)};me.draw(R,q.TRIANGLES,ee,vn.disabled,te,fn.backCCW,ge,ce,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,z){const R=D.context,q=R.gl,te=yn.unblended,ee=new jt(q.LEQUAL,jt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Q=z.getCoordsTexture(),me=z.sourceCache.getRenderableTiles(),be=D.useProgram("terrainCoords");R.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:l.aT.transparent,depth:1}),z.coordsIndex=[];for(const ce of me){const ge=z.getTerrainData(ce.tileID);R.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,Q.texture);const Ce={u_matrix:D.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(D.transform.zoom)};be.draw(R,q.TRIANGLES,ee,vn.disabled,te,fn.backCCW,Ce,ge,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments),z.coordsIndex.push(ce.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of d){const D=this.style._layers[P];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const z=T[D.source];(D.type==="custom"||z.length)&&this.renderLayer(this,m[D.source],D,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[d[this.currentLayer]],D=m[P.source],z=_[P.source];this._renderTileClippingMasks(P,z),this.renderLayer(this,D,P,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const P=this.style._layers[d[this.currentLayer]],D=m[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const z=(P.type==="symbol"?C:T)[P.source];this._renderTileClippingMasks(P,_[P.source]),this.renderLayer(this,D,P,z)}if(this.options.showTileBoundaries){const P=function(D,z){let R=null;const q=Object.values(D._layers).flatMap(Q=>Q.source&&!Q.isHidden(z)?[D.sourceCaches[Q.source]]:[]),te=q.filter(Q=>Q.getSource().type==="vector"),ee=q.filter(Q=>Q.getSource().type!=="vector"),ie=Q=>{(!R||R.getSource().maxzoom<Q.getSource().maxzoom)&&(R=Q)};return te.forEach(Q=>ie(Q)),R||ee.forEach(Q=>ie(Q)),R}(this.style,this.transform.zoom);P&&function(D,z,R){for(let q=0;q<R.length;q++)Gp(D,z,R[q])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const D=P.transform.padding;xl(P,P.transform.height-(D.top||0),3,jp),xl(P,D.bottom||0,3,Mc),Ic(P,D.left||0,3,Eh),Ic(P,P.transform.width-(D.right||0),3,Up);const z=P.transform.centerPoint;(function(R,q,te,ee){Dc(R,q-1,te-10,2,20,ee),Dc(R,q-10,te-1,20,2,ee)})(P,z.x,P.transform.height-z.y,$p)}(this),this.context.setDefault()}renderLayer(r,c,d,m){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(m||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,T,C,P,D){if(_.renderPass!=="translucent")return;const z=vn.disabled,R=_.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(q,te,ee,ie,Q,me,be){const ce=te.transform,ge=Q==="map",Ce=me==="map";for(const Ee of q){const De=ie.getTile(Ee),Be=De.getBucket(ee);if(!Be||!Be.text||!Be.text.segments.get().length)continue;const Re=l.ah(Be.textSizeData,ce.zoom),Ve=fe(De,1,te.transform.zoom),lt=je(Ee.posMatrix,Ce,ge,te.transform,Ve),Rt=ee.layout.get("icon-text-fit")!=="none"&&Be.hasIconData();if(Re){const He=Math.pow(2,ce.zoom-De.tileID.overscaledZ);kc(Be,ge,Ce,be,ce,lt,Ee.posMatrix,He,Re,Rt,te.style.map.terrain?(Ct,ut)=>te.style.map.terrain.getElevation(Ee,Ct,ut):null)}}}(P,_,C,T,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),D),C.paint.get("icon-opacity").constantOr(1)!==0&&Ac(_,T,C,P,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),z,R),C.paint.get("text-opacity").constantOr(1)!==0&&Ac(_,T,C,P,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),z,R),T.map.showCollisionBoxes&&(Vp(_,T,C,P,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),Vp(_,T,C,P,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))})(r,c,d,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,C,P){if(_.renderPass!=="translucent")return;const D=C.paint.get("circle-opacity"),z=C.paint.get("circle-stroke-width"),R=C.paint.get("circle-stroke-opacity"),q=!C.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(z.constantOr(1)===0||R.constantOr(1)===0))return;const te=_.context,ee=te.gl,ie=_.depthModeForSublayer(0,jt.ReadOnly),Q=vn.disabled,me=_.colorModeForRenderPass(),be=[];for(let ce=0;ce<P.length;ce++){const ge=P[ce],Ce=T.getTile(ge),Ee=Ce.getBucket(C);if(!Ee)continue;const De=Ee.programConfigurations.get(C.id),Be=_.useProgram("circle",De),Re=Ee.layoutVertexBuffer,Ve=Ee.indexBuffer,lt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge),Rt={programConfiguration:De,program:Be,layoutVertexBuffer:Re,indexBuffer:Ve,uniformValues:eo(_,ge,Ce,C),terrainData:lt};if(q){const He=Ee.segments.get();for(const Ct of He)be.push({segments:new l.S([Ct]),sortKey:Ct.sortKey,state:Rt})}else be.push({segments:Ee.segments,sortKey:0,state:Rt})}q&&be.sort((ce,ge)=>ce.sortKey-ge.sortKey);for(const ce of be){const{programConfiguration:ge,program:Ce,layoutVertexBuffer:Ee,indexBuffer:De,uniformValues:Be,terrainData:Re}=ce.state;Ce.draw(te,ee.TRIANGLES,ie,Q,me,fn.disabled,Be,Re,C.id,Ee,De,ce.segments,C.paint,_.transform.zoom,ge)}})(r,c,d,m);break;case"heatmap":(function(_,T,C,P){if(C.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,z=D.gl,R=vn.disabled,q=new yn([z.ONE,z.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(te,ee,ie){const Q=te.gl;te.activeTexture.set(Q.TEXTURE1),te.viewport.set([0,0,ee.width/4,ee.height/4]);let me=ie.heatmapFbo;if(me)Q.bindTexture(Q.TEXTURE_2D,me.colorAttachment.get()),te.bindFramebuffer.set(me.framebuffer);else{const be=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,be),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),me=ie.heatmapFbo=te.createFramebuffer(ee.width/4,ee.height/4,!1,!1),function(ce,ge,Ce,Ee){var De,Be;const Re=ce.gl,Ve=(De=ce.HALF_FLOAT)!==null&&De!==void 0?De:Re.UNSIGNED_BYTE,lt=(Be=ce.RGBA16F)!==null&&Be!==void 0?Be:Re.RGBA;Re.texImage2D(Re.TEXTURE_2D,0,lt,ge.width/4,ge.height/4,0,Re.RGBA,Ve,null),Ee.colorAttachment.set(Ce)}(te,ee,be,me)}})(D,_,C),D.clear({color:l.aT.transparent});for(let te=0;te<P.length;te++){const ee=P[te];if(T.hasRenderableParent(ee))continue;const ie=T.getTile(ee),Q=ie.getBucket(C);if(!Q)continue;const me=Q.programConfigurations.get(C.id),be=_.useProgram("heatmap",me),{zoom:ce}=_.transform;be.draw(D,z.TRIANGLES,jt.disabled,R,q,fn.disabled,sy(ee.posMatrix,ie,ce,C.paint.get("heatmap-intensity")),null,C.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,C.paint,_.transform.zoom,me)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,z){const R=D.context,q=R.gl,te=z.heatmapFbo;if(!te)return;R.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,te.colorAttachment.get()),R.activeTexture.set(q.TEXTURE1);let ee=z.colorRampTexture;ee||(ee=z.colorRampTexture=new Fe(R,z.colorRamp,q.RGBA)),ee.bind(q.LINEAR,q.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(R,q.TRIANGLES,jt.disabled,vn.disabled,D.colorModeForRenderPass(),fn.disabled,((ie,Q,me,be)=>{const ce=l.Z();l.aS(ce,0,ie.width,ie.height,0,0,1);const ge=ie.context.gl;return{u_matrix:ce,u_world:[ge.drawingBufferWidth,ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Q.paint.get("heatmap-opacity")}})(D,z),null,z.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,z.paint,D.transform.zoom)}(_,C))})(r,c,d,m);break;case"line":(function(_,T,C,P){if(_.renderPass!=="translucent")return;const D=C.paint.get("line-opacity"),z=C.paint.get("line-width");if(D.constantOr(1)===0||z.constantOr(1)===0)return;const R=_.depthModeForSublayer(0,jt.ReadOnly),q=_.colorModeForRenderPass(),te=C.paint.get("line-dasharray"),ee=C.paint.get("line-pattern"),ie=ee.constantOr(1),Q=C.paint.get("line-gradient"),me=C.getCrossfadeParameters(),be=ie?"linePattern":te?"lineSDF":Q?"lineGradient":"line",ce=_.context,ge=ce.gl;let Ce=!0;for(const Ee of P){const De=T.getTile(Ee);if(ie&&!De.patternsLoaded())continue;const Be=De.getBucket(C);if(!Be)continue;const Re=Be.programConfigurations.get(C.id),Ve=_.context.program.get(),lt=_.useProgram(be,Re),Rt=Ce||lt.program!==Ve,He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ee),Ct=ee.constantOr(null);if(Ct&&De.imageAtlas){const zt=De.imageAtlas,It=zt.patternPositions[Ct.to.toString()],Ft=zt.patternPositions[Ct.from.toString()];It&&Ft&&Re.setConstantPatternPositions(It,Ft)}const ut=He?Ee:null,tn=ie?oy(_,De,C,me,ut):te?Mp(_,De,C,te,me,ut):Q?Ap(_,De,C,Be.lineClipsArray.length,ut):ch(_,De,C,ut);if(ie)ce.activeTexture.set(ge.TEXTURE0),De.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Re.updatePaintBuffers(me);else if(te&&(Rt||_.lineAtlas.dirty))ce.activeTexture.set(ge.TEXTURE0),_.lineAtlas.bind(ce);else if(Q){const zt=Be.gradients[C.id];let It=zt.texture;if(C.gradientVersion!==zt.version){let Ft=256;if(C.stepInterpolant){const kn=T.getSource().maxzoom,an=Ee.canonical.z===kn?Math.ceil(1<<_.transform.maxZoom-Ee.canonical.z):1;Ft=l.ad(l.aY(Be.maxLineLength/l.N*1024*an),256,ce.maxTextureSize)}zt.gradient=l.aZ({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:zt.gradient||void 0,clips:Be.lineClipsArray}),zt.texture?zt.texture.update(zt.gradient):zt.texture=new Fe(ce,zt.gradient,ge.RGBA),zt.version=C.gradientVersion,It=zt.texture}ce.activeTexture.set(ge.TEXTURE0),It.bind(C.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}lt.draw(ce,ge.TRIANGLES,R,_.stencilModeForClipping(Ee),q,fn.disabled,tn,He,C.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,C.paint,_.transform.zoom,Re,Be.layoutVertexBuffer2),Ce=!1}})(r,c,d,m);break;case"fill":(function(_,T,C,P){const D=C.paint.get("fill-color"),z=C.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const R=_.colorModeForRenderPass(),q=C.paint.get("fill-pattern"),te=_.opaquePassEnabledForLayer()&&!q.constantOr(1)&&D.constantOr(l.aT.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===te){const ee=_.depthModeForSublayer(1,_.renderPass==="opaque"?jt.ReadWrite:jt.ReadOnly);vl(_,T,C,P,ee,R,!1)}if(_.renderPass==="translucent"&&C.paint.get("fill-antialias")){const ee=_.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,jt.ReadOnly);vl(_,T,C,P,ee,R,!0)}})(r,c,d,m);break;case"fill-extrusion":(function(_,T,C,P){const D=C.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const z=new jt(_.context.gl.LEQUAL,jt.ReadWrite,_.depthRangeFor3D);if(D!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))_l(_,T,C,P,z,vn.disabled,yn.disabled),_l(_,T,C,P,z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const R=_.colorModeForRenderPass();_l(_,T,C,P,z,vn.disabled,R)}}})(r,c,d,m);break;case"hillshade":(function(_,T,C,P){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,z=_.depthModeForSublayer(0,jt.ReadOnly),R=_.colorModeForRenderPass(),[q,te]=_.renderPass==="translucent"?_.stencilConfigForOverlap(P):[{},P];for(const ee of te){const ie=T.getTile(ee);ie.needsHillshadePrepare!==void 0&&ie.needsHillshadePrepare&&_.renderPass==="offscreen"?Ch(_,ie,C,z,vn.disabled,R):_.renderPass==="translucent"&&fy(_,ee,ie,C,z,q[ee.overscaledZ],R)}D.viewport.set([0,0,_.width,_.height])})(r,c,d,m);break;case"raster":(function(_,T,C,P){if(_.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!P.length)return;const D=_.context,z=D.gl,R=T.getSource(),q=_.useProgram("raster"),te=_.colorModeForRenderPass(),[ee,ie]=R instanceof Ln?[{},P]:_.stencilConfigForOverlap(P),Q=ie[ie.length-1].overscaledZ,me=!_.options.moving;for(const be of ie){const ce=_.depthModeForSublayer(be.overscaledZ-Q,C.paint.get("raster-opacity")===1?jt.ReadWrite:jt.ReadOnly,z.LESS),ge=T.getTile(be);ge.registerFadeDuration(C.paint.get("raster-fade-duration"));const Ce=T.findLoadedParent(be,0),Ee=my(ge,Ce,T,C,_.transform,_.style.map.terrain);let De,Be;const Re=C.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;D.activeTexture.set(z.TEXTURE0),ge.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(z.TEXTURE1),Ce?(Ce.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Ce.tileID.overscaledZ-ge.tileID.overscaledZ),Be=[ge.tileID.canonical.x*De%1,ge.tileID.canonical.y*De%1]):ge.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),lt=Ve?be:null,Rt=lt?lt.posMatrix:_.transform.calculatePosMatrix(be.toUnwrapped(),me),He=Dp(Rt,Be||[0,0],De||1,Ee,C);R instanceof Ln?q.draw(D,z.TRIANGLES,ce,vn.disabled,te,fn.disabled,He,Ve,C.id,R.boundsBuffer,_.quadTriangleIndexBuffer,R.boundsSegments):q.draw(D,z.TRIANGLES,ce,ee[be.overscaledZ],te,fn.disabled,He,Ve,C.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,c,d,m);break;case"background":(function(_,T,C,P){const D=C.paint.get("background-color"),z=C.paint.get("background-opacity");if(z===0)return;const R=_.context,q=R.gl,te=_.transform,ee=te.tileSize,ie=C.paint.get("background-pattern");if(_.isPatternMissing(ie))return;const Q=!ie&&D.a===1&&z===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Q)return;const me=vn.disabled,be=_.depthModeForSublayer(0,Q==="opaque"?jt.ReadWrite:jt.ReadOnly),ce=_.colorModeForRenderPass(),ge=_.useProgram(ie?"backgroundPattern":"background"),Ce=P||te.coveringTiles({tileSize:ee,terrain:_.style.map.terrain});ie&&(R.activeTexture.set(q.TEXTURE0),_.imageManager.bind(_.context));const Ee=C.getCrossfadeParameters();for(const De of Ce){const Be=P?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),Re=ie?Di(Be,z,_,ie,{tileID:De,tileSize:ee},Ee):yc(Be,z,D),Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);ge.draw(R,q.TRIANGLES,be,me,ce,fn.disabled,Re,Ve,C.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,d,m);break;case"custom":(function(_,T,C){const P=_.context,D=C.implementation;if(_.renderPass==="offscreen"){const z=D.prerender;z&&(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),z.call(D,P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(vn.disabled);const z=D.renderingMode==="3d"?new jt(_.context.gl.LEQUAL,jt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,jt.ReadOnly);P.setDepthMode(z),D.render(P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,c,d,m,_){if(!d[0]&&!d[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const D=Math.sin(T),z=Math.cos(T);d=[d[0]*z-d[1]*D,d[0]*D+d[1]*z]}const C=[_?d[0]:fe(c,d[0],this.transform.zoom),_?d[1]:fe(c,d[1],this.transform.zoom),0],P=new Float32Array(16);return l.$(P,r,C),P}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!c||!d}useProgram(r,c){this.cache=this.cache||{};const d=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new pc(this.context,gn[r],c,vc[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Fe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class $r{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,d){const m=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const P=1/(C=l.ag([],C,r))[3]/c*m;return l.b3(C,C,[P,P,1/C[3],P])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const P=function(q,te){var ee=te[0],ie=te[1],Q=te[2],me=ee*ee+ie*ie+Q*Q;return me>0&&(me=1/Math.sqrt(me)),q[0]=te[0]*me,q[1]=te[1]*me,q[2]=te[2]*me,q}([],function(q,te,ee){var ie=te[0],Q=te[1],me=te[2],be=ee[0],ce=ee[1],ge=ee[2];return q[0]=Q*ge-me*ce,q[1]=me*be-ie*ge,q[2]=ie*ce-Q*be,q}([],Se([],_[C[0]],_[C[1]]),Se([],_[C[2]],_[C[1]]))),D=-((z=P)[0]*(R=_[C[1]])[0]+z[1]*R[1]+z[2]*R[2]);var z,R;return P.concat(D)});return new $r(_,T)}}class ua{constructor(r,c){this.min=r,this.max=c,this.center=function(d,m,_){return d[0]=.5*m[0],d[1]=.5*m[1],d[2]=.5*m[2],d}([],function(d,m,_){return d[0]=m[0]+_[0],d[1]=m[1]+_[1],d[2]=m[2]+_[2],d}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],d=ne(this.min),m=ne(this.max);for(let _=0;_<c.length;_++)d[_]=c[_]?this.min[_]:this.center[_],m[_]=c[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new ua(d,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let C=0;C<c.length;C++)l.b4(_,c[C])>=0&&T++;if(T===0)return 0;T!==c.length&&(d=!1)}if(d)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<r.points.length;C++){const P=r.points[C][m]-this.min[m];_=Math.min(_,P),T=Math.max(T,P)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class wl{constructor(r=0,c=0,d=0,m=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=d,this.right=m}interpolate(r,c,d){return c.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,c.top,d)),c.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,c.bottom,d)),c.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,c.left,d)),c.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,c.right,d)),this}getCenter(r,c){const d=l.ad((this.left+r-this.right)/2,0,r),m=l.ad((this.top+c-this.bottom)/2,0,c);return new l.P(d,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new wl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Lc{constructor(r,c,d,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=d??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Lc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-l.b5(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new l.A(4);return l.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,m,_){var T=m[0],C=m[1],P=m[2],D=m[3],z=Math.sin(_),R=Math.cos(_);d[0]=T*R+P*z,d[1]=C*R+D*z,d[2]=T*-z+P*R,d[3]=C*-z+D*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,d){this._unmodified=!1,this._edgeInsets.interpolate(r,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new l.b6(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),C=Math.floor(Math.min(d.x,m.x,_.x,T.x)),P=Math.floor(Math.max(d.x,m.x,_.x,T.x)),D=1;for(let z=C-D;z<=P+D;z++)z!==0&&c.push(new l.b6(z,r))}return c}coveringTiles(r){var c,d;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),C=l.U.fromLngLat(this.center),P=Math.pow(2,m),D=[P*T.x,P*T.y,0],z=[P*C.x,P*C.y,0],R=$r.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let q=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(q=m);const te=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ee=ce=>({aabb:new ua([ce*P,0,0],[(ce+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),ie=[],Q=[],me=m,be=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)ie.push(ee(-ce)),ie.push(ee(ce));for(ie.push(ee(0));ie.length>0;){const ce=ie.pop(),ge=ce.x,Ce=ce.y;let Ee=ce.fullyVisible;if(!Ee){const lt=ce.aabb.intersects(R);if(lt===0)continue;Ee=lt===2}const De=r.terrain?D:z,Be=ce.aabb.distanceX(De),Re=ce.aabb.distanceY(De),Ve=Math.max(Math.abs(Be),Math.abs(Re));if(ce.zoom===me||Ve>te+(1<<me-ce.zoom)-2&&ce.zoom>=q){const lt=me-ce.zoom,Rt=D[0]-.5-(ge<<lt),He=D[1]-.5-(Ce<<lt);Q.push({tileID:new l.O(ce.zoom===me?be:ce.zoom,ce.wrap,ce.zoom,ge,Ce),distanceSq:ke([z[0]-.5-ge,z[1]-.5-Ce]),tileDistanceToCamera:Math.sqrt(Rt*Rt+He*He)})}else for(let lt=0;lt<4;lt++){const Rt=(ge<<1)+lt%2,He=(Ce<<1)+(lt>>1),Ct=ce.zoom+1;let ut=ce.aabb.quadrant(lt);if(r.terrain){const tn=new l.O(Ct,ce.wrap,Ct,Rt,He),zt=r.terrain.getMinMaxElevation(tn),It=(c=zt.minElevation)!==null&&c!==void 0?c:this.elevation,Ft=(d=zt.maxElevation)!==null&&d!==void 0?d:this.elevation;ut=new ua([ut.min[0],ut.min[1],It],[ut.max[0],ut.max[1],Ft])}ie.push({aabb:ut,zoom:Ct,x:Rt,y:He,wrap:ce.wrap,fullyVisible:Ee})}}return Q.sort((ce,ge)=>ce.distanceSq-ge.distanceSq).map(ce=>ce.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=l.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(r.lng)*this.worldSize,l.H(c)*this.worldSize)}unproject(r){return new l.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.pointLocation(this.centerPoint,r),d=r.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-d))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),T=l.U.fromLngLat(c,d),C=_.x-T.x,P=_.y-T.y,D=_.z-T.z,z=Math.sqrt(C*C+P*P+D*D),R=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=d,this._center=c,this.zoom=R}setLocationAtPoint(r,c){const d=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new l.U(_.x-(d.x-m.x),_.y-(d.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return l.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const q=c.pointCoordinate(r);if(q!=null)return q}const d=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.ag(d,d,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=d[3],T=m[3],C=d[1]/_,P=m[1]/T,D=d[2]/_,z=m[2]/T,R=D===z?0:(0-D)/(z-D);return new l.U(l.B.number(d[0]/_,m[0]/T,R)/this.worldSize,l.B.number(C,P,R)/this.worldSize)}coordinatePoint(r,c=0,d=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,c,1];return l.ag(m,m,d),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new vt().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new vt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,c=!1){const d=r.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[d])return m[d];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),C=_.x+Math.pow(2,_.z)*r.wrap,P=l.ao(new Float64Array(16));return l.$(P,P,[C*T,_.y*T,0]),l.a0(P,P,[T/l.N,T/l.N,1]),l.a1(P,c?this.alignedProjMatrix:this.projMatrix,P),m[d]=new Float32Array(P),m[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,c,d,m,_=-90,T=90,C=-180,P=180;const D=this.size,z=this._unmodified;if(this.latRange){const te=this.latRange;_=l.H(te[1])*this.worldSize,T=l.H(te[0])*this.worldSize,r=T-_<D.y?D.y/(T-_):0}if(this.lngRange){const te=this.lngRange;C=l.b5(l.G(te[0])*this.worldSize,0,this.worldSize),P=l.b5(l.G(te[1])*this.worldSize,0,this.worldSize),P<C&&(P+=this.worldSize),c=P-C<D.x?D.x/(P-C):0}const R=this.point,q=Math.max(c||0,r||0);if(q)return this.center=this.unproject(new l.P(c?(P+C)/2:R.x,r?(T+_)/2:R.y)),this.zoom+=this.scaleZoom(q),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const te=R.y,ee=D.y/2;te-ee<_&&(m=_+ee),te+ee>T&&(m=T-ee)}if(this.lngRange){const te=(C+P)/2,ee=l.b5(R.x,te-this.worldSize/2,te+this.worldSize/2),ie=D.x/2;ee-ie<C&&(d=C+ie),ee+ie>P&&(d=P-ie)}d===void 0&&m===void 0||(this.center=this.unproject(new l.P(d!==void 0?d:R.x,m!==void 0?m:R.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),C=_-T*this._pixelPerMeter/Math.cos(this._pitch),P=T<0?C:_,D=Math.PI/2+this._pitch,z=this._fov*(.5+r.y/this.height),R=Math.sin(z)*P/Math.sin(l.ad(Math.PI-D-z,.01,Math.PI-.01)),q=this.getHorizon(),te=2*Math.atan(q/this.cameraToCenterDistance)*(.5+r.y/(2*q)),ee=Math.sin(te)*P/Math.sin(l.ad(Math.PI-D-te,.01,Math.PI-.01)),ie=Math.min(R,ee),Q=1.01*(Math.cos(Math.PI/2-this._pitch)*ie+P),me=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,me,Q),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-c,-d,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const be=this.width%2/2,ce=this.height%2/2,ge=Math.cos(this.angle),Ce=Math.sin(this.angle),Ee=c-Math.round(c)+ge*be+Ce*ce,De=d-Math.round(d)+ge*ce+Ce*be,Be=new Float64Array(m);if(l.$(Be,Be,[Ee>.5?Ee-1:Ee,De>.5?De-1:De,0]),this.alignedProjMatrix=Be,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let d=c.x,m=c.y,_=c.x,T=c.y;for(const C of r)d=Math.min(d,C.x),m=Math.min(m,C.y),_=Math.max(_,C.x),T=Math.max(T,C.y);return[new l.P(d,m),new l.P(_,m),new l.P(_,T),new l.P(d,T),new l.P(d,m)]}}}function Po(g,r){let c,d=!1,m=null,_=null;const T=()=>{m=null,d&&(g.apply(_,c),m=setTimeout(T,r),d=!1)};return(...C)=>(d=!0,_=this,c=C,m||T(),m)}class bl{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Po(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(c.lng*_)/_,C=Math.round(c.lat*_)/_,P=this._map.getBearing(),D=this._map.getPitch();let z="";if(z+=r?`/${T}/${C}/${d}`:`${d}/${C}/${T}`,(P||D)&&(z+="/"+Math.round(10*P)/10),D&&(z+=`/${Math.round(D)}`),this._hashName){const R=this._hashName;let q=!1;const te=window.location.hash.slice(1).split("&").map(ee=>{const ie=ee.split("=")[0];return ie===R?(q=!0,`${ie}=${z}`):ee}).filter(ee=>ee);return q||te.push(`${R}=${z}`),`#${te.join("&")}`}return`#${z}`}}const ha={linearity:.3,easing:l.ba(0,0,.3,1)},qp=l.e({deceleration:2500,maxSpeed:1400},ha),Zp=l.e({deceleration:20,maxSpeed:1400},ha),Wp=l.e({deceleration:1e3,maxSpeed:360},ha),Hp=l.e({deceleration:1e3,maxSpeed:90},ha);class Kp{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=l.h.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const _=Sl(c.pan.mag(),d,l.e({},qp,r||{}));m.offset=c.pan.mult(_.amount/c.pan.mag()),m.center=this._map.transform.center,hs(m,_)}if(c.zoom){const _=Sl(c.zoom,d,Zp);m.zoom=this._map.transform.zoom+_.amount,hs(m,_)}if(c.bearing){const _=Sl(c.bearing,d,Wp);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),hs(m,_)}if(c.pitch){const _=Sl(c.pitch,d,Hp);m.pitch=this._map.transform.pitch+_.amount,hs(m,_)}if(m.zoom||m.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function hs(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function Sl(g,r,c){const{maxSpeed:d,linearity:m,deceleration:_}=c,T=l.ad(g*m/(r/1e3),-d,d),C=Math.abs(T)/(_*m);return{easing:c.easing,duration:1e3*C,amount:T*(C/2)}}class fi extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d,m={}){const _=w.mousePos(c.getCanvasContainer(),d),T=c.unproject(_);super(r,l.e({point:_,lngLat:T,originalEvent:d},m)),this._defaultPrevented=!1,this.target=c}}class Tl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){const m=r==="touchend"?d.changedTouches:d.touches,_=w.touchPos(c.getCanvasContainer(),m),T=_.map(P=>c.unproject(P)),C=_.reduce((P,D,z,R)=>P.add(D.div(R.length)),new l.P(0,0));super(r,{points:_,point:C,lngLats:T,lngLat:c.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Xp extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Yp{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Xp(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new fi(r.type,this._map,r))}mouseup(r){this._map.fire(new fi(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new fi(r.type,this._map,r))}dblclick(r){return this._firePreventable(new fi(r.type,this._map,r))}mouseover(r){this._map.fire(new fi(r.type,this._map,r))}mouseout(r){this._map.fire(new fi(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Tl(r.type,this._map,r))}touchmove(r){this._map.fire(new Tl(r.type,this._map,r))}touchend(r){this._map.fire(new Tl(r.type,this._map,r))}touchcancel(r){this._map.fire(new Tl(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qp{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new fi(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new fi(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ms{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Jp{constructor(r,c){this._map=r,this._tr=new Ms(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=d,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,d.x),T=Math.max(m.x,d.x),C=Math.min(m.y,d.y),P=Math.max(m.y,d.y);w.setTransform(this._box,`translate(${_}px,${C}px)`),this._box.style.width=T-_+"px",this._box.style.height=P-C+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const d=this._startPos,m=c;if(this.reset(),w.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new l.k(r,{originalEvent:c}))}}function Li(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);const c={};for(let d=0;d<g.length;d++)c[g[d].identifier]=r[d];return c}class Is{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const T of m)_._add(T);return _.div(m.length)}(c),this.touches=Li(d,c)))}touchmove(r,c,d){if(this.aborted||!this.centroid)return;const m=Li(d,c);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,c,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class zc{constructor(r){this.singleTap=new Is(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,d){this.singleTap.touchstart(r,c,d)}touchmove(r,c,d){this.singleTap.touchmove(r,c,d)}touchend(r,c,d){const m=this.singleTap.touchend(r,c,d);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ds{constructor(r){this._tr=new Ms(r),this._zoomIn=new zc({numTouches:1,numTaps:2}),this._zoomOut=new zc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,d){this._zoomIn.touchstart(r,c,d),this._zoomOut.touchstart(r,c,d)}touchmove(r,c,d){this._zoomIn.touchmove(r,c,d),this._zoomOut.touchmove(r,c,d)}touchend(r,c,d){const m=this._zoomIn.touchend(r,c,d),_=this._zoomOut.touchend(r,c,d),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ls{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=c.length?c[0]:c;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const gy={0:1,2:2};class Ph{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=w.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,d){const m=gy[d];return c.buttons===void 0||(c.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class ef{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Rc=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(r){r.preventDefault()}},da=({enable:g,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const d=new Ph({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new Ls({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*c}),moveStateManager:d,enable:g,assignEvents:Rc})},zs=({enable:g,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const d=new Ph({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new Ls({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*c}),moveStateManager:d,enable:g,assignEvents:Rc})};class it{constructor(r,c){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,c,d){return this._calculateTransform(r,c,d)}touchmove(r,c,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,c,d)}touchend(r,c,d){this._calculateTransform(r,c,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,d){d.length>0&&(this._active=!0);const m=Li(d,c),_=new l.P(0,0),T=new l.P(0,0);let C=0;for(const D in m){const z=m[D],R=this._touches[D];R&&(_._add(z),T._add(z.sub(R)),C++,m[D]=z)}if(this._touches=m,C<this._minTouches||!T.mag())return;const P=T.div(C);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(C),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,d){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=ro(d,c,m),C=ro(d,c,_);if(!T||!C)return;const P=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],P,r)}touchend(r,c,d){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=ro(d,c,m),C=ro(d,c,_);T&&C||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ro(g,r,c){for(let d=0;d<g.length;d++)if(g[d].identifier===c)return r[d]}function pa(g,r){return Math.log(g/r)/Math.LN2}class tf extends Fc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(pa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pa(this._distance,d),pinchAround:c}}}function Je(g,r){return 180*g.angleWith(r)/Math.PI}class kh extends Fc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Je(this._vector,d),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Je(r,this._startVector);return Math.abs(d)<c}}function Ah(g){return Math.abs(g.y)>Math.abs(g.x)}class yy extends Fc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,d){super.touchstart(r,c,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ah(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,d){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=c.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Ah(r)&&Ah(c)&&T}}const Mh={panStep:100,bearingStep:15,pitchStep:10};class nf{constructor(r){this._tr=new Ms(r);const c=Mh;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,d=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:C=>{const P=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:rf,zoom:c?Math.round(P.zoom)+c*(r.shiftKey?2:1):P.zoom,bearing:P.bearing+d*this._bearingStep,pitch:P.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:P.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rf(g){return g*(2-g)}const sf=4.000244140625;class vy{constructor(r,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Ms(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=l.h.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%sf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=w.mousePos(this._el,r),d=this._tr;this._around=l.L.convert(this._aroundCenter?d.center:d.unproject(c)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>sf?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&P!==0&&(P=1/P);const D=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(D*P))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&d&&m){const C=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),P=m(C);_=l.B.number(d,c,P),C<1?this._frameId||(this._frameId=!0):T=!0}else _=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=l.bb;if(this._prevEase){const d=this._prevEase,m=(l.h.now()-d.start)/d.duration,_=d.easing(m+.01)-d.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,C=Math.sqrt(.0729-T*T);c=l.ba(T,C,.25,1)}return this._prevEase={start:l.h.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ih{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dh{constructor(r){this._tr=new Ms(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lh{constructor(){this._tap=new zc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,d){if(!this._swipePoint)if(this._tapTime){const m=c[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,c,d)}touchmove(r,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const m=c[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,c,d)}touchend(r,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const m=this._tap.touchend(r,c,d);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zh{constructor(r,c,d){this._el=r,this._mousePan=c,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gr{constructor(r,c,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class io{constructor(r,c,d,m){this._el=r,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Cl=g=>g.zoom||g.drag||g.pitch||g.rotate;class Rh extends l.k{}function El(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Fh{constructor(r,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,C={needsRenderFrame:!1},P={},D={},z=m.touches,R=z?this._getMapTouches(z):void 0,q=R?w.touchPos(this._el,R):w.mousePos(this._el,m);for(const{handlerName:ie,handler:Q,allowed:me}of this._handlers){if(!Q.isEnabled())continue;let be;this._blockedByActive(D,me,ie)?Q.reset():Q[_||m.type]&&(be=Q[_||m.type](m,q,R),this.mergeHandlerResult(C,P,be,ie,T),be&&be.needsRenderFrame&&this._triggerRenderFrame()),(be||Q.isActive())&&(D[ie]=Q)}const te={};for(const ie in this._previousActiveHandlers)D[ie]||(te[ie]=T);this._previousActiveHandlers=D,(Object.keys(te).length||El(C))&&(this._changes.push([C,P,te]),this._triggerRenderFrame()),(Object.keys(D).length||El(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=C;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kp(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,d]of this._listeners)w.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new Yp(c,r));const m=c.boxZoom=new Jp(c,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new Ds(c),T=new Dh(c);c.doubleClickZoom=new Ih(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const C=new Lh;this._add("tapDragZoom",C);const P=c.touchPitch=new yy(c);this._add("touchPitch",P),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const D=da(r),z=zs(r);c.dragRotate=new Gr(r,D,z),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const R=(({enable:me,clickTolerance:be})=>{const ce=new Ph({checkCorrectEvent:ge=>w.mouseButton(ge)===0&&!ge.ctrlKey});return new Ls({clickTolerance:be,move:(ge,Ce)=>({around:Ce,panDelta:Ce.sub(ge)}),activateOnStart:!0,moveStateManager:ce,enable:me,assignEvents:Rc})})(r),q=new it(r,c);c.dragPan=new zh(d,R,q),this._add("mousePan",R),this._add("touchPan",q,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const te=new kh,ee=new tf;c.touchZoomRotate=new io(d,ee,te,C),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const ie=c.scrollZoom=new vy(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ie,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const Q=c.keyboard=new nf(c);this._add("keyboard",Q),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Qp(c))}_add(r,c,d){this._handlers.push({handlerName:r,handler:c,allowed:d}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cl(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,d){for(const m in r)if(m!==d&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const d of r)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(r,c,d,m,_){if(!d)return;l.e(r,d);const T={handlerName:m,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(c.zoom=T),d.panDelta!==void 0&&(c.drag=T),d.pitchDelta!==void 0&&(c.pitch=T),d.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},d={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(c,_),l.e(d,T);this._updateMapTransform(r,c,d),this._changes=[]}_updateMapTransform(r,c,d){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(El(r)||T&&this._terrainMovement))return this._fireEvents(c,d,!0);let{panDelta:C,zoomDelta:P,bearingDelta:D,pitchDelta:z,around:R,pinchAround:q}=r;q!==void 0&&(R=q),m._stop(!0),R=R||m.transform.centerPoint;const te=_.pointLocation(C?R.sub(C):R);D&&(_.bearing+=D),z&&(_.pitch+=z),P&&(_.zoom+=P),T?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(C)):_.setLocationAtPoint(te,R):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(te,R),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(te,R),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,d,!0)}_fireEvents(r,c,d){const m=Cl(this._eventsInProgress),_=Cl(r),T={};for(const z in r){const{originalEvent:R}=r[z];this._eventsInProgress[z]||(T[`${z}start`]=R),this._eventsInProgress[z]=r[z]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const z in T)this._fireEvent(z,T[z]);_&&this._fireEvent("move",_.originalEvent);for(const z in r){const{originalEvent:R}=r[z];this._fireEvent(z,R)}const C={};let P;for(const z in this._eventsInProgress){const{handlerName:R,originalEvent:q}=this._eventsInProgress[z];this._handlersById[R].isActive()||(delete this._eventsInProgress[z],P=c[R]||q,C[`${z}end`]=P)}for(const z in C)this._fireEvent(z,C[z]);const D=Cl(this._eventsInProgress);if(d&&(m||_)&&!D){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;!z||!z.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:P})),R(this._map.getBearing())&&this._map.resetNorth()):(R(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new l.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Rh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class of extends l.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const d=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,d){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},c),d)}panTo(r,c,d){return this.easeTo(l.e({center:r},c),d)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,d){return this.easeTo(l.e({zoom:r},c),d)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,d){return this.easeTo(l.e({bearing:r},c),d)}resetNorth(r,c){return this.rotateTo(0,l.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=vt.convert(r);const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,c)}_cameraForBoxAndBearing(r,c,d,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Ce=m.padding;m.padding={top:Ce,bottom:Ce,right:Ce,left:Ce}}m.padding=l.e(_,m.padding);const T=this.transform,C=T.padding,P=T.project(l.L.convert(r)),D=T.project(l.L.convert(c)),z=P.rotate(-d*Math.PI/180),R=D.rotate(-d*Math.PI/180),q=new l.P(Math.max(z.x,R.x),Math.max(z.y,R.y)),te=new l.P(Math.min(z.x,R.x),Math.min(z.y,R.y)),ee=q.sub(te),ie=(T.width-(C.left+C.right+m.padding.left+m.padding.right))/ee.x,Q=(T.height-(C.top+C.bottom+m.padding.top+m.padding.bottom))/ee.y;if(Q<0||ie<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const me=Math.min(T.scaleZoom(T.scale*Math.min(ie,Q)),m.maxZoom),be=l.P.convert(m.offset),ce=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(d*Math.PI/180),ge=be.add(ce).mult(T.scale/T.zoomScale(me));return{center:T.unproject(P.add(D).div(2).sub(ge)),zoom:me,bearing:d}}fitBounds(r,c,d){return this._fitInternal(this.cameraForBounds(r,c),c,d)}fitScreenCoordinates(r,c,d,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(c)),d,m),m,_)}_fitInternal(r,c,d){return r?(delete(c=l.e(r,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(r,c){this.stop();const d=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(m=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=l.L.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(_=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(T=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new l.k("movestart",c)).fire(new l.k("move",c)),m&&this.fire(new l.k("zoomstart",c)).fire(new l.k("zoom",c)).fire(new l.k("zoomend",c)),_&&this.fire(new l.k("rotatestart",c)).fire(new l.k("rotate",c)).fire(new l.k("rotateend",c)),T&&this.fire(new l.k("pitchstart",c)).fire(new l.k("pitch",c)).fire(new l.k("pitchend",c)),this.fire(new l.k("moveend",c))}calculateCameraOptionsFromTo(r,c,d,m=0){const _=l.U.fromLngLat(r,c),T=l.U.fromLngLat(d,m),C=T.x-_.x,P=T.y-_.y,D=T.z-_.z,z=Math.hypot(C,P,D);if(z===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(C,P),q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),te=180*Math.atan2(C,-P)/Math.PI;let ee=180*Math.acos(R/z)/Math.PI;return ee=D<0?90-ee:90+ee,{center:T.toLngLat(),zoom:q,pitch:ee,bearing:te}}easeTo(r,c){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.bb},r)).animate===!1||!r.essential&&l.h.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),C=this.getPadding(),P="zoom"in r?+r.zoom:m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,z="pitch"in r?+r.pitch:T,R="padding"in r?r.padding:d.padding,q=l.P.convert(r.offset);let te=d.centerPoint.add(q);const ee=d.pointLocation(te),ie=l.L.convert(r.center||ee);this._normalizeCenter(ie);const Q=d.project(ee),me=d.project(ie).sub(Q),be=d.zoomScale(P-m);let ce,ge;r.around&&(ce=l.L.convert(r.around),ge=d.locationPoint(ce));const Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==m,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||z!==T,this._padding=!d.isPaddingEqual(R),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,Ce),this.terrain&&this._prepareElevation(ie),this._ease(Ee=>{if(this._zooming&&(d.zoom=l.B.number(m,P,Ee)),this._rotating&&(d.bearing=l.B.number(_,D,Ee)),this._pitching&&(d.pitch=l.B.number(T,z,Ee)),this._padding&&(d.interpolatePadding(C,R,Ee),te=d.centerPoint.add(q)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ee),ce)d.setLocationAtPoint(ce,ge);else{const De=d.zoomScale(d.zoom-m),Be=P>m?Math.min(2,be):Math.max(.5,be),Re=Math.pow(Be,1-Ee),Ve=d.unproject(Q.add(me.mult(Ee*Re)).mult(De));d.setLocationAtPoint(d.renderWorldCopies?Ve.wrap():Ve,te)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},Ee=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Ee)},r),this}_prepareEase(r,c,d={}){this._moving=!0,c||d.moving||this.fire(new l.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(c-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const c=r.clone(),{center:d,zoom:m,pitch:_,bearing:T,elevation:C}=this.transformCameraUpdate(c);d&&(c.center=d),m!==void 0&&(c.zoom=m),_!==void 0&&(c.pitch=_),T!==void 0&&(c.bearing=T),C!==void 0&&(c.elevation=C),this.transform.apply(c)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),_&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,c){if(!r.essential&&l.h.prefersReducedMotion){const ut=l.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,c)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},r);const d=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),C=this.getPadding(),P="zoom"in r?l.ad(+r.zoom,d.minZoom,d.maxZoom):m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,z="pitch"in r?+r.pitch:T,R="padding"in r?r.padding:d.padding,q=d.zoomScale(P-m),te=l.P.convert(r.offset);let ee=d.centerPoint.add(te);const ie=d.pointLocation(ee),Q=l.L.convert(r.center||ie);this._normalizeCenter(Q);const me=d.project(ie),be=d.project(Q).sub(me);let ce=r.curve;const ge=Math.max(d.width,d.height),Ce=ge/q,Ee=be.mag();if("minZoom"in r){const ut=l.ad(Math.min(r.minZoom,m,P),d.minZoom,d.maxZoom),tn=ge/d.zoomScale(ut-m);ce=Math.sqrt(tn/Ee*2)}const De=ce*ce;function Be(ut){const tn=(Ce*Ce-ge*ge+(ut?-1:1)*De*De*Ee*Ee)/(2*(ut?Ce:ge)*De*Ee);return Math.log(Math.sqrt(tn*tn+1)-tn)}function Re(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function Ve(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const lt=Be(!1);let Rt=function(ut){return Ve(lt)/Ve(lt+ce*ut)},He=function(ut){return ge*((Ve(lt)*(Re(tn=lt+ce*ut)/Ve(tn))-Re(lt))/De)/Ee;var tn},Ct=(Be(!0)-lt)/ce;if(Math.abs(Ee)<1e-6||!isFinite(Ct)){if(Math.abs(ge-Ce)<1e-6)return this.easeTo(r,c);const ut=Ce<ge?-1:1;Ct=Math.abs(Math.log(Ce/ge))/ce,He=function(){return 0},Rt=function(tn){return Math.exp(ut*ce*tn)}}return r.duration="duration"in r?+r.duration:1e3*Ct/("screenSpeed"in r?+r.screenSpeed/ce:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=z!==T,this._padding=!d.isPaddingEqual(R),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Q),this._ease(ut=>{const tn=ut*Ct,zt=1/Rt(tn);d.zoom=ut===1?P:m+d.scaleZoom(zt),this._rotating&&(d.bearing=l.B.number(_,D,ut)),this._pitching&&(d.pitch=l.B.number(T,z,ut)),this._padding&&(d.interpolatePadding(C,R,ut),ee=d.centerPoint.add(te)),this.terrain&&!r.freezeElevation&&this._updateElevation(ut);const It=ut===1?Q:d.unproject(me.add(be.mult(He(tn))).mult(zt));d.setLocationAtPoint(d.renderWorldCopies?It.wrap():It,ee),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,c,d){d.animate===!1||d.duration===0?(r(1),c()):(this._easeStart=l.h.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=l.b5(r,-180,180);const d=Math.abs(r-c);return Math.abs(r-360-c)<d&&(r-=360),Math.abs(r+360-c)<d&&(r+=360),r}_normalizeCenter(r){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const d=r.lng-c.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class mi{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const d=this._map._getUIString(`AttributionControl.${c}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const _=c[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cn{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const c=w.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Oc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const m of d)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Oh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var af=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class lf extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const d={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new ki(m,this.tileSize));for(const m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(r){for(const c in this._tiles){const d=this._tiles[c];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const d of this._renderableTilesKeys){const m=this._tiles[d].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),c[d]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,C=m.canonical.x-(m.canonical.x>>T<<T),P=m.canonical.y-(m.canonical.y>>T<<T),D=l.N>>T;l.aS(_.posMatrix,0,D,0,D,0,1),l.$(_.posMatrix,_.posMatrix,[-C*D,-P*D,0]),c[d]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,C=r.canonical.x-(r.canonical.x>>T<<T),P=r.canonical.y-(r.canonical.y>>T<<T),D=l.N>>T;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[C*D,P*D,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),c[d]=_}}return c}getSourceTile(r,c){const d=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&c)for(;m>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class cf{constructor(r,c,d){this.painter=r,this.sourceCache=new lf(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,d,m=l.N){var _;if(!(c>=0&&c<m&&d>=0&&d<m))return 0;const T=this.getTerrainData(r),C=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!C)return 0;const P=function(ee,ie,Q){var me=ie[0],be=ie[1];return ee[0]=Q[0]*me+Q[4]*be+Q[12],ee[1]=Q[1]*me+Q[5]*be+Q[13],ee}([],[c/m*l.N,d/m*l.N],T.u_terrain_matrix),D=[P[0]*C.dim,P[1]*C.dim],z=Math.floor(D[0]),R=Math.floor(D[1]),q=D[0]-z,te=D[1]-R;return C.get(z,R)*(1-q)*(1-te)+C.get(z+1,R)*q*(1-te)+C.get(z,R+1)*(1-q)*te+C.get(z+1,R+1)*q*te}getElevationForLngLatZoom(r,c){const{tileID:d,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(d,m%l.N,_%l.N,l.N)}getElevation(r,c,d,m=l.N){return this.getDEMElevation(r,c,d,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Fe(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Fe(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Fe(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const d=c&&c+c.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),C=r.canonical.y-(r.canonical.y>>_<<_),P=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(P,P,[T*l.N,C*l.N,0]),this._demMatrixCache[r.key]={matrix:P,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,d=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Fe(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Fe(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let C=0;C<this._coordsTextureSize;C++,T+=4)c[T+0]=255&C,c[T+1]=255&_,c[T+2]=C>>8<<4|_>>8,c[T+3]=0;const d=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new Fe(r,d,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const c=new Uint8Array(4),d=this.painter.context,m=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);const _=c[0]+(c[2]>>4<<8),T=c[1]+((15&c[2])<<8),C=this.coordsIndex[255-c[3]],P=C&&this.sourceCache.getTileByID(C);if(!P)return null;const D=this._coordsTextureSize,z=(1<<P.tileID.canonical.z)*D;return new l.U(this._allowMercatorOverflow(r,(P.tileID.canonical.x*D+_)/z),(P.tileID.canonical.y*D+T)/z,this.getElevation(P.tileID,_,T,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new l.bd,d=new l.b0,m=this.meshSize,_=l.N/m,T=m*m;for(let R=0;R<=m;R++)for(let q=0;q<=m;q++)c.emplaceBack(q*_,R*_,0);for(let R=0;R<T;R+=m+1)for(let q=0;q<m;q++)d.emplaceBack(q+R,m+q+R+1,m+q+R+2),d.emplaceBack(q+R,m+q+R+2,q+R+1);const C=c.length,P=C+2*(m+1);for(const R of[0,1])for(let q=0;q<=m;q++)for(const te of[0,1])c.emplaceBack(q*_,R*l.N,te);for(let R=0;R<2*m;R+=2)d.emplaceBack(P+R,P+R+1,P+R+3),d.emplaceBack(P+R,P+R+3,P+R+2),d.emplaceBack(C+R,C+R+3,C+R+1),d.emplaceBack(C+R,C+R+2,C+R+3);const D=c.length,z=D+2*(m+1);for(const R of[0,1])for(let q=0;q<=m;q++)for(const te of[0,1])c.emplaceBack(R*l.N,q*_,te);for(let R=0;R<2*m;R+=2)d.emplaceBack(D+R,D+R+1,D+R+3),d.emplaceBack(D+R,D+R+3,D+R+2),d.emplaceBack(z+R,z+R+3,z+R+1),d.emplaceBack(z+R,z+R+2,z+R+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(c,af.members),segments:l.S.simpleSegment(0,0,c.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var d;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(d=this.getMinMaxElevation(m).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,c){const d=l.U.fromLngLat(r.wrap()),m=(1<<c)*l.N,_=d.x*m,T=d.y*m,C=Math.floor(_/l.N),P=Math.floor(T/l.N);return{tileID:new l.O(c,0,c,C,P),mercatorX:_,mercatorY:T}}_allowMercatorOverflow(r,c){const d=r.x<this.painter.width/2;let m=l.bf(c);const _=this.painter.transform.center.lng;return d&&Math.sign(m)>0&&Math.sign(_)<0||!d&&Math.sign(m)<0&&Math.sign(_)>0?(m=360*Math.sign(_)+m,l.G(m)):c}}class _y{constructor(r,c,d){this._context=r,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Fe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:r,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Mr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bc{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new _y(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(c)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const m=r.sourceCaches[d].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const C in T)this._coordsDescendingInv[d][C]||(this._coordsDescendingInv[d][C]=[]),this._coordsDescendingInv[d][C].push(T[C])}}this._coordsDescendingInvStr={};for(const d of r._order){const m=r._layers[d],_=m.source;if(Mr[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][d.tileID.key];_&&_!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,d=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Mr[c]&&(this._prevType&&Mr[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Mr[this._prevType]||Mr[c]&&m){this._prevType=c;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[_]){const D=this.pool.getObjectForId(C.rtt[_].id);if(D.stamp===C.rtt[_].stamp){this.pool.useObject(D);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),C.rtt[_]={id:P.id,stamp:P.stamp},d.context.bindFramebuffer.set(P.fbo.framebuffer),d.context.clear({color:l.aT.transparent,stencil:0}),d.currentStencilSource=void 0;for(let D=0;D<T.length;D++){const z=d.style._layers[T[D]],R=z.source?this._coordsDescendingInv[z.source][C.tileID.key]:[C.tileID];d.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),d._renderTileClippingMasks(z,R),d.renderLayer(d,d.style.sourceCaches[z.source],z,R),z.source&&(C.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][C.tileID.key])}}return bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Mr[c]}return!1}}const ft=S,Tt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Pl=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Bh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Nh{constructor(r,c,d=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=da({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:C,bearingDegreesPerPixelMoved:P=.8})=>{const D=new ef;return new Ls({clickTolerance:C,move:(z,R)=>({bearingDelta:(R.x-z.x)*P}),moveStateManager:D,enable:T,assignEvents:Pl})})({clickTolerance:m,enable:!0}),this.map=r,d&&(this.mousePitch=zs({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:C,pitchDegreesPerPixelMoved:P=-.5})=>{const D=new ef;return new Ls({clickTolerance:C,move:(z,R)=>({pitchDelta:(R.y-z.y)*P}),moveStateManager:D,enable:T,assignEvents:Pl})})({clickTolerance:_,enable:!0})),w.addEventListener(c,"mousedown",this.mousedown),w.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),w.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),w.disableDrag()}moveMouse(r,c){const d=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,c)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(r,c){const d=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,c)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Rn;function Vh(g,r,c){if(g=new l.L(g.lng,g.lat),r){const d=new l.L(g.lng-360,g.lat),m=new l.L(g.lng+360,g.lat),_=c.locationPoint(g).distSqr(r);c.locationPoint(d).distSqr(r)<_?g=d:c.locationPoint(m).distSqr(r)<_&&(g=m)}for(;Math.abs(g.lng-c.center.lng)>180;){const d=c.locationPoint(g);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g}const zi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uf(g,r,c){const d=g.classList;for(const m in zi)d.remove(`maplibregl-${c}-anchor-${m}`);d.add(`maplibregl-${c}-anchor-${r}`)}class ko extends l.E{constructor(r){if(super(),this._onKeyPress=c=>{const d=c.code,m=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const d=c.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Vh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${zi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const c=w.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of P){const be=w.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",me.rx),be.setAttributeNS(null,"ry",me.ry),C.appendChild(be)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const z=w.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(z);const R=w.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"opacity","0.25"),R.setAttributeNS(null,"fill","#000000");const q=w.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),R.appendChild(q);const te=w.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const ee=w.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=w.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const Q=w.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ie),ee.appendChild(Q),T.appendChild(C),T.appendChild(D),T.appendChild(R),T.appendChild(te),T.appendChild(ee),c.appendChild(T),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),uf(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Sn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let _n=0,fa=!1;const kl={maxWidth:100,unit:"metric"};function Al(g,r,c){const d=c&&c.maxWidth||100,m=g._container.clientHeight/2,_=g.unproject([0,m]),T=g.unproject([d,m]),C=_.distanceTo(T);if(c&&c.unit==="imperial"){const P=3.2808*C;P>5280?Ao(r,d,P/5280,g._getUIString("ScaleControl.Miles")):Ao(r,d,P,g._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ao(r,d,C/1852,g._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Ao(r,d,C/1e3,g._getUIString("ScaleControl.Kilometers")):Ao(r,d,C,g._getUIString("ScaleControl.Meters"))}function Ao(g,r,c,d){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let C=_/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(P){const D=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*D)/D}(C),T*C}(c);g.style.width=r*(m/c)+"px",g.innerHTML=`${m}&nbsp;${d}`}const jh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Uh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(g){if(g){if(typeof g=="number"){const r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,g),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-g),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(g,0),right:new l.P(-g,0)}}if(g instanceof l.P||Array.isArray(g)){const r=l.P.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(g.center||[0,0]),top:l.P.convert(g.top||[0,0]),"top-left":l.P.convert(g["top-left"]||[0,0]),"top-right":l.P.convert(g["top-right"]||[0,0]),bottom:l.P.convert(g.bottom||[0,0]),"bottom-left":l.P.convert(g["bottom-left"]||[0,0]),"bottom-right":l.P.convert(g["bottom-right"]||[0,0]),left:l.P.convert(g.left||[0,0]),right:l.P.convert(g.right||[0,0])}}return ma(new l.P(0,0))}const $h={extend:(g,...r)=>l.e(g,...r),run(g){g()},logToElement(g,r=!1,c="log"){const d=window.document.getElementById(c);d&&(r&&(d.innerHTML=""),d.innerHTML+=`<br>${g}`)}},Gh=S;class Yt{static get version(){return Gh}static get workerCount(){return li.workerCount}static set workerCount(r){li.workerCount=r}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(r){l.c.WORKER_URL=r}static addProtocol(r,c){l.c.REGISTERED_PROTOCOLS[r]=c}static removeProtocol(r){delete l.c.REGISTERED_PROTOCOLS[r]}}return Yt.Map=class extends of{constructor(g){if(l.bg.mark(l.bh.create),(g=l.e({},Tt,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Lc(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Oc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Oh,g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const c=Po(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?c(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Fh(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new bl(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,l.e({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new mi({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new cn,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=g.onAdd(this);this._controls.push(g);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,r,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,c,d)}resize(g){var r;const c=this._containerDimensions(),d=c[0],m=c[1],_=this._getClampedPixelRatio(d,m);if(this._resizeCanvas(d,m,_),this.painter.resize(d,m,_),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const P=this._getClampedPixelRatio(d,m);this._resizeCanvas(d,m,P),this.painter.resize(d,m,P)}this.transform.resize(d,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,m);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",g)).fire(new l.k("move",g))),this.fire(new l.k("resize",g)),T&&this.fire(new l.k("moveend",g)),this}_getClampedPixelRatio(g,r){const{0:c,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),_=g*m,T=r*m;return Math.min(_>c?c/_:1,T>d?d/T:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(vt.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(g){return this.transform.locationPoint(l.L.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,c){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layer:r,listener:c,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?d||(d=!0,c.call(this,new fi(g,this,_.originalEvent,{features:T}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layer:r,listener:c,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,c.call(this,new fi(g,this,T.originalEvent)))},mouseout:T=>{d&&(d=!1,c.call(this,new fi(g,this,T.originalEvent)))}}}}{const d=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,c.call(this,m),delete m.features)};return{layer:r,listener:c,delegates:{[g]:d}}}}on(g,r,c){if(c===void 0)return super.on(g,r);const d=this._createDelegatedListener(g,r,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(d);for(const m in d.delegates)this.on(m,d.delegates[m]);return this}once(g,r,c){if(c===void 0)return super.once(g,r);const d=this._createDelegatedListener(g,r,c);for(const m in d.delegates)this.once(m,d.delegates[m]);return this}off(g,r,c){return c===void 0?super.off(g,r):(this._delegatedListeners&&this._delegatedListeners[g]&&(d=>{const m=this._delegatedListeners[g];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===c){for(const C in T.delegates)this.off(C,T.delegates[C]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let c;const d=g instanceof l.P||Array.isArray(g),m=d?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:g)||{},m instanceof l.P||typeof m[0]=="number")c=[l.P.convert(m)];else{const _=l.P.convert(m[0]),T=l.P.convert(m[1]);c=[_,new l.P(T.x,_.y),T,new l.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new hr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,c):this.style.loadJSON(g,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){const c=this._requestManager.transformRequest(g,B.Style);l.f(c,(d,m)=>{d?this.fire(new l.j(d)):m&&this._updateDiff(m,r)})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(c){l.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){const r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);for(const c in this.style._layers){const d=this.style._layers[c];d.type==="hillshade"&&d.source===g.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new cf(this.painter,r,g),this.painter.renderToTexture=new Bc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==g.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const r in g){const c=g[r]._tiles;for(const d in c){const m=c[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(g,r,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,r,c)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,r,c={}){const{pixelRatio:d=1,sdf:m=!1,stretchX:_,stretchY:T,content:C}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:D,data:z}=r,R=r;return this.style.addImage(g,{data:new l.R({width:P,height:D},new Uint8Array(z)),pixelRatio:d,stretchX:_,stretchY:T,content:C,sdf:m,version:0,userImage:R}),R.onAdd&&R.onAdd(this,g),this}}{const{width:P,height:D,data:z}=l.h.getImageData(r);this.style.addImage(g,{data:new l.R({width:P,height:D},z),pixelRatio:d,stretchX:_,stretchY:T,content:C,sdf:m,version:0})}}updateImage(g,r){const c=this.style.getImage(g);if(!c)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||l.a(r)?l.h.getImageData(r):r,{width:m,height:_,data:T}=d;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||_!==c.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||l.a(r));return c.data.replace(T,C),this.style.updateImage(g,c),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,r){H.getImage(this._requestManager.transformRequest(g,B.Image),r)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,r,c){return this.style.setLayerZoomRange(g,r,c),this._update(!0)}setFilter(g,r,c={}){return this.style.setFilter(g,r,c),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,c,d={}){return this.style.setPaintProperty(g,r,c,d),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,c,d={}){return this.style.setLayoutProperty(g,r,c,d),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,c,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,c=>{c||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);const m=this._controlContainer=w.create("div","maplibregl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=w.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${g}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(g,r,c){this._canvas.width=Math.floor(c*g),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:g},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const c=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!c){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new Eo(c,this.transform),M.testSupport(c)}_onCooperativeGesture(g,r,c){return!r&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const T=new l.a8(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=T.crossFadingFactor();C===1&&C===this._crossFadingFactor||(c=!0,this._crossFadingFactor=C),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(g=>{l.bg.frame(g),this._frame=null,this._render(g)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return ft}getCameraTargetElevation(){return this.transform.elevation}},Yt.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const d=this._map._getUIString(`NavigationControl.${c}`);r.title=d,r.setAttribute("aria-label",d)},this.options=l.e({},Bh,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){const c=w.create("button",g,this._container);return c.type="button",c.addEventListener("click",r),c}},Yt.GeolocateControl=class extends l.E{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new l.L(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),T=vt.fromLngLat(c,d);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new l.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&fa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ko({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ko({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},Sn,g)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,c=!1){Rn===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{Rn=d.state!=="denied",r(Rn)}).catch(()=>{Rn=!!window.navigator.geolocation,r(Rn)}):(Rn=!!window.navigator.geolocation,r(Rn)):r(Rn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_n=0,fa=!1}_isOutOfMapMaxBounds(g){const r=this._map.getMaxBounds(),c=g.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),r=g.getSouthEast(),c=g.getNorthEast(),d=r.distanceTo(c),m=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_n--,fa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),_n++,_n>1?(g={maximumAge:6e5,timeout:0},fa=!0):(g=this.options.positionOptions,fa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Yt.AttributionControl=mi,Yt.LogoControl=cn,Yt.ScaleControl=class{constructor(g){this._onMove=()=>{Al(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Al(this._map,this._container,this.options)},this.options=l.e({},kl,g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Yt.FullscreenControl=class extends l.E{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Yt.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=g}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Yt.Popup=class extends l.E{constructor(g){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Vh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const c=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let d=this.options.anchor;const m=ma(this.options.offset);if(!d){const T=this._container.offsetWidth,C=this._container.offsetHeight;let P;P=c.y+m.bottom.y<C?["top"]:c.y>this._map.transform.height-C?["bottom"]:[],c.x<T/2?P.push("left"):c.x>this._map.transform.width-T/2&&P.push("right"),d=P.length===0?"bottom":P.join("-")}const _=c.add(m[d]).round();w.setTransform(this._container,`${zi[d]} translate(${_.x}px,${_.y}px)`),uf(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(jh),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.L.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const r=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=g;d=c.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Uh);g&&g.focus()}},Yt.Marker=ko,Yt.Style=hr,Yt.LngLat=l.L,Yt.LngLatBounds=vt,Yt.Point=l.P,Yt.MercatorCoordinate=l.U,Yt.Evented=l.E,Yt.AJAXError=l.bi,Yt.config=l.c,Yt.CanvasSource=kr,Yt.GeoJSONSource=cr,Yt.ImageSource=Ln,Yt.RasterDEMTileSource=sr,Yt.RasterTileSource=Gt,Yt.VectorTileSource=Dn,Yt.VideoSource=cs,Yt.setRTLTextPlugin=l.bj,Yt.getRTLTextPluginStatus=l.bk,Yt.prewarm=function(){wo().acquire(qt)},Yt.clearPrewarmedResources=function(){const g=_r;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(qt),_r=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},$h.extend(Yt,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Yt});var y=u;return y})})(wk);var Q7=wk.exports;const Rl=F_(Q7),Xa={timeout:1e4,updateInterval:5e3,distanceThreshold:5,highAccuracy:!0,maxAge:2e3,retryAttempts:3,retryDelay:1e3,accuracyThreshold:20},rm={className:"bg-background/95 border-border/50 text-foreground"},Cd={success:e=>ql.success(e,rm),error:e=>ql.error(e,rm),info:e=>ql.info(e,rm),warning:e=>ql.warning(e,rm)},Q2=e=>{const{latitude:t,longitude:i,accuracy:o}=e.coords;return!(isNaN(t)||isNaN(i)||o>Xa.accuracyThreshold)},J7=e=>{if(e instanceof GeolocationPositionError)switch(e.code){case GeolocationPositionError.PERMISSION_DENIED:return"Permission refusée. Veuillez activer la géolocalisation.";case GeolocationPositionError.POSITION_UNAVAILABLE:return"Position indisponible. Vérifiez votre connexion GPS.";case GeolocationPositionError.TIMEOUT:return"Délai d'attente dépassé. Tentative de reconnexion...";default:return"Erreur de géolocalisation"}return e.message},eF=e=>{const t=J7(e);(!(e instanceof GeolocationPositionError)||e.code!==GeolocationPositionError.TIMEOUT)&&Cd.error(t),console.error("Geolocation error:",e)},J2=(e=1)=>({enableHighAccuracy:Xa.highAccuracy,timeout:Xa.timeout*e,maximumAge:Xa.maxAge}),tF=(e={})=>{const[t,i]=$.useState({isTracking:!1,isPaused:!1,error:null,isLoading:!1}),[o,u]=$.useState(null),[p,y]=$.useState(null),l={...Xa,...e},S=(O,H,B)=>{i(V=>({...V,isLoading:!1,error:null})),B==null||B({...t,isLoading:!1,error:null}),H(O)},w=(O,H,B)=>{eF(O),i(V=>({...V,isLoading:!1,error:O})),B==null||B({...t,isLoading:!1,error:O}),H(O)},M=$.useCallback(async O=>{const{onSuccess:H,onError:B,onStateChange:V}=O;if(!navigator.geolocation){const de=new Error("Geolocation is not supported");w(de,B,V);return}i(de=>({...de,isLoading:!0})),V==null||V({...t,isLoading:!0});let Z=1;const ne=()=>{navigator.geolocation.getCurrentPosition(de=>{if(!Q2(de)){const Se=new Error("Invalid position data");w(Se,B,V);return}S(de,H,V)},de=>{de.code===de.TIMEOUT&&Z<l.retryAttempts?(Z++,setTimeout(ne,l.retryDelay)):w(de,B,V)},J2(Z))};ne()},[l,t]),I=$.useCallback(O=>{const{onSuccess:H,onError:B,onStateChange:V}=O;if(y(O),!navigator.geolocation){const ne=new Error("Geolocation is not supported");w(ne,B,V);return}i(ne=>({...ne,isTracking:!0,isLoading:!0})),V==null||V({...t,isTracking:!0,isLoading:!0});const Z=navigator.geolocation.watchPosition(ne=>{if(!Q2(ne)){const de=new Error("Invalid position data");w(de,B,V);return}S(ne,H,V)},ne=>w(ne,B,V),J2());u(Z),Cd.success("Début de l'enregistrement")},[t]),k=$.useCallback(()=>{o!==null&&(navigator.geolocation.clearWatch(o),u(null)),i(O=>({...O,isPaused:!0})),Cd.info("Enregistrement en pause")},[o]),j=$.useCallback(()=>{p&&I(p),i(O=>({...O,isPaused:!1})),Cd.success("Reprise de l'enregistrement")},[p,I]),X=$.useCallback(()=>{o!==null&&(navigator.geolocation.clearWatch(o),u(null)),y(null),i(O=>({...O,isTracking:!1,isPaused:!1})),Cd.success("Fin de l'enregistrement")},[o]);return $.useEffect(()=>()=>{o!==null&&navigator.geolocation.clearWatch(o)},[o]),{...t,getCurrentPosition:M,startTracking:I,stopTracking:X,pauseTracking:k,resumeTracking:j}};var Oi=63710088e-1,nF={centimeters:Oi*100,centimetres:Oi*100,degrees:Oi/111325,feet:Oi*3.28084,inches:Oi*39.37,kilometers:Oi/1e3,kilometres:Oi/1e3,meters:Oi,metres:Oi,miles:Oi/1609.344,millimeters:Oi*1e3,millimetres:Oi*1e3,nauticalmiles:Oi/1852,radians:1,yards:Oi*1.0936};function cg(e,t,i){i===void 0&&(i={});var o={type:"Feature"};return(i.id===0||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=t||{},o.geometry=e,o}function eS(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!tS(e[0])||!tS(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return cg(o,t,i)}function Sk(e,t,i){if(i===void 0&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return cg(o,t,i)}function rF(e,t){t===void 0&&(t="kilometers");var i=nF[t];if(!i)throw new Error(t+" units is invalid");return e*i}function im(e){var t=e%360;return t*Math.PI/180}function tS(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Tk(e,t,i){if(e!==null)for(var o,u,p,y,l,S,w,M=0,I=0,k,j=e.type,X=j==="FeatureCollection",O=j==="Feature",H=X?e.features.length:1,B=0;B<H;B++){w=X?e.features[B].geometry:O?e.geometry:e,k=w?w.type==="GeometryCollection":!1,l=k?w.geometries.length:1;for(var V=0;V<l;V++){var Z=0,ne=0;if(y=k?w.geometries[V]:w,y!==null){S=y.coordinates;var de=y.type;switch(M=0,de){case null:break;case"Point":if(t(S,I,B,Z,ne)===!1)return!1;I++,Z++;break;case"LineString":case"MultiPoint":for(o=0;o<S.length;o++){if(t(S[o],I,B,Z,ne)===!1)return!1;I++,de==="MultiPoint"&&Z++}de==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(o=0;o<S.length;o++){for(u=0;u<S[o].length-M;u++){if(t(S[o][u],I,B,Z,ne)===!1)return!1;I++}de==="MultiLineString"&&Z++,de==="Polygon"&&ne++}de==="Polygon"&&Z++;break;case"MultiPolygon":for(o=0;o<S.length;o++){for(ne=0,u=0;u<S[o].length;u++){for(p=0;p<S[o][u].length-M;p++){if(t(S[o][u][p],I,B,Z,ne)===!1)return!1;I++}ne++}Z++}break;case"GeometryCollection":for(o=0;o<y.geometries.length;o++)if(Tk(y.geometries[o],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function iF(e,t){var i,o,u,p,y,l,S,w,M,I,k=0,j=e.type==="FeatureCollection",X=e.type==="Feature",O=j?e.features.length:1;for(i=0;i<O;i++){for(l=j?e.features[i].geometry:X?e.geometry:e,w=j?e.features[i].properties:X?e.properties:{},M=j?e.features[i].bbox:X?e.bbox:void 0,I=j?e.features[i].id:X?e.id:void 0,S=l?l.type==="GeometryCollection":!1,y=S?l.geometries.length:1,u=0;u<y;u++){if(p=S?l.geometries[u]:l,p===null){if(t(null,k,w,M,I)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(p,k,w,M,I)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<p.geometries.length;o++)if(t(p.geometries[o],k,w,M,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}k++}}function sF(e,t){iF(e,function(i,o,u,p,y){var l=i===null?null:i.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(cg(i,u,{bbox:p,id:y}),o,0)===!1?!1:void 0}var S;switch(l){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var w=0;w<i.coordinates.length;w++){var M=i.coordinates[w],I={type:S,coordinates:M};if(t(cg(I,u),o,w)===!1)return!1}})}function oF(e,t){sF(e,function(i,o,u){var p=0;if(i.geometry){var y=i.geometry.type;if(!(y==="Point"||y==="MultiPoint")){var l,S=0,w=0,M=0;if(Tk(i,function(I,k,j,X,O){if(l===void 0||o>S||X>w||O>M){l=I,S=o,w=X,M=O,p=0;return}var H=Sk([l,I],i.properties);if(t(H,o,u,O,p)===!1)return!1;p++,l=I})===!1)return!1}}})}function aF(e,t,i){var o=i,u=!1;return oF(e,function(p,y,l,S,w){u===!1&&i===void 0?o=p:o=t(o,p,y,l,S,w),u=!0}),o}function nS(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ck(e,t,i){i===void 0&&(i={});var o=nS(e),u=nS(t),p=im(u[1]-o[1]),y=im(u[0]-o[0]),l=im(o[1]),S=im(u[1]),w=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(y/2),2)*Math.cos(l)*Math.cos(S);return rF(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)),i.units)}function lF(e,t){return t===void 0&&(t={}),aF(e,function(i,o){var u=o.geometry.coordinates;return i+Ck(u[0],u[1],t)},0)}const cF=()=>({q:.0015,r:1.2,p:[1,1],v:[0,0],lastPos:null,lastTime:0,heading:null,speed:0,reset(){this.p=[1,1],this.v=[0,0],this.lastPos=null,this.lastTime=0,this.heading=null,this.speed=0}}),uF=(e=.15)=>({alpha:e,lastValue:null,filter(t){if(this.lastValue===null)return this.lastValue=t,t;const i=this.lastValue+this.alpha*(t-this.lastValue);return this.lastValue=i,i},reset(){this.lastValue=null}}),hF=cF(),dF=uF(),pF=()=>{const[e,t]=$.useState([]),[i,o]=$.useState(null),[u,p]=$.useState(null),[y,l]=$.useState([]),[S,w]=$.useState(""),[M,I]=$.useState(0),[k,j]=$.useState(null),[X,O]=$.useState(!1),H=$.useCallback((ne,de,Se)=>{if(e.length===0)return!0;const ke=e[e.length-1].coordinates;return Ck(eS(ke),eS(ne),{units:"meters"})>Xa.distanceThreshold&&de<=Xa.accuracyThreshold||Se-M>=Xa.updateInterval*3},[e,M]),B=$.useCallback((ne,de)=>{const{latitude:Se,longitude:ke,altitude:we,accuracy:Ye}=ne.coords,Fe=[ke,Se],pt=Date.now();if(o(Fe),p(we),!X){if(de){!k&&e.length>0&&j(e[e.length-1]);return}if(k){const nt={coordinates:Fe,altitude:we,timestamp:ne.timestamp};t(Et=>[...Et,nt]),j(null),I(pt);return}if(H(Fe,Ye,pt)){I(pt);const nt={coordinates:Fe,altitude:we,timestamp:ne.timestamp};t(Et=>[...Et,nt])}}},[e,M,k,H,X]),V=$.useCallback(ne=>{l(de=>[...de,ne])},[]),Z=$.useCallback(()=>{t([]),l([]),I(0),j(null),hF.reset(),dF.reset()},[]);return{currentPath:e,currentLocation:i,currentAltitude:u,pois:y,trackName:S,isPoiOnlyMode:X,setTrackName:w,updatePosition:B,addPOI:V,resetTrack:Z,setPoiOnlyMode:O}},Ek=$.createContext(void 0),fF=({children:e})=>{const{isTracking:t,isPaused:i,error:o,isLoading:u,getCurrentPosition:p,startTracking:y,stopTracking:l,pauseTracking:S,resumeTracking:w}=tF(),{currentPath:M,currentLocation:I,currentAltitude:k,pois:j,trackName:X,isPoiOnlyMode:O,setTrackName:H,updatePosition:B,addPOI:V,resetTrack:Z,setPoiOnlyMode:ne}=pF(),de=(Se,ke=!1)=>{H(Se),ne(ke),Z(),y({onSuccess:we=>B(we,i),onError:console.error})};return oe.jsx(Ek.Provider,{value:{isTracking:t,isPaused:i,currentPath:M,currentLocation:I,currentAltitude:k,trackName:X,pois:j,error:o,isLoading:u,isPoiOnlyMode:O,startTracking:de,stopTracking:l,pauseTracking:S,resumeTracking:w,addPOI:V,setPoiOnlyMode:ne},children:e})},dl=()=>{const e=$.useContext(Ek);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},Fl={INITIAL_LOCATION:[2.3488,48.8534],ZOOM:17,MAX_ZOOM:19,MIN_ZOOM:3},Yc={line:{color:"#ace47c",width:3,opacity:.8},marker:{color:"#ace47c"}},mF=Fx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),is=$.forwardRef(({className:e,variant:t,size:i,asChild:o=!1,...u},p)=>{const y=o?$u:"button";return oe.jsx(y,{className:lr(mF({variant:t,size:i,className:e})),ref:p,...u})});is.displayName="Button";const Pk=$.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Xg=$.createContext({}),Kx=$.createContext(null),Xx=typeof document<"u",gF=Xx?$.useLayoutEffect:$.useEffect,kk=$.createContext({strict:!1}),Yx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yF="framerAppearId",Ak="data-"+Yx(yF),vF={skipAnimations:!1,useManualTiming:!1};class rS{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const i=this.order.indexOf(t);i!==-1&&(this.order.splice(i,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function _F(e){let t=new rS,i=new rS,o=0,u=!1,p=!1;const y=new WeakSet,l={schedule:(S,w=!1,M=!1)=>{const I=M&&u,k=I?t:i;return w&&y.add(S),k.add(S)&&I&&u&&(o=t.order.length),S},cancel:S=>{i.remove(S),y.delete(S)},process:S=>{if(u){p=!0;return}if(u=!0,[t,i]=[i,t],i.clear(),o=t.order.length,o)for(let w=0;w<o;w++){const M=t.order[w];y.has(M)&&(l.schedule(M),e()),M(S)}u=!1,p&&(p=!1,l.process(S))}};return l}const sm=["read","resolveKeyframes","update","preRender","render","postRender"],xF=40;function Mk(e,t){let i=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},p=sm.reduce((I,k)=>(I[k]=_F(()=>i=!0),I),{}),y=I=>{p[I].process(u)},l=()=>{const I=performance.now();i=!1,u.delta=o?1e3/60:Math.max(Math.min(I-u.timestamp,xF),1),u.timestamp=I,u.isProcessing=!0,sm.forEach(y),u.isProcessing=!1,i&&t&&(o=!1,e(l))},S=()=>{i=!0,o=!0,u.isProcessing||e(l)};return{schedule:sm.reduce((I,k)=>{const j=p[k];return I[k]=(X,O=!1,H=!1)=>(i||S(),j.schedule(X,O,H)),I},{}),cancel:I=>sm.forEach(k=>p[k].cancel(I)),state:u,steps:p}}const{schedule:Qx,cancel:vV}=Mk(queueMicrotask,!1);function wF(e,t,i,o){const{visualElement:u}=$.useContext(Xg),p=$.useContext(kk),y=$.useContext(Kx),l=$.useContext(Pk).reducedMotion,S=$.useRef();o=o||p.renderer,!S.current&&o&&(S.current=o(e,{visualState:t,parent:u,props:i,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:l}));const w=S.current;$.useInsertionEffect(()=>{w&&w.update(i,y)});const M=$.useRef(!!(i[Ak]&&!window.HandoffComplete));return gF(()=>{w&&(Qx.postRender(w.render),M.current&&w.animationState&&w.animationState.animateChanges())}),$.useEffect(()=>{w&&(w.updateFeatures(),!M.current&&w.animationState&&w.animationState.animateChanges(),M.current&&(M.current=!1,window.HandoffComplete=!0))}),w}function pu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function bF(e,t,i){return $.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),i&&(typeof i=="function"?i(o):pu(i)&&(i.current=o))},[t])}function lp(e){return typeof e=="string"||Array.isArray(e)}function Yg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Jx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e1=["initial",...Jx];function Qg(e){return Yg(e.animate)||e1.some(t=>lp(e[t]))}function Ik(e){return!!(Qg(e)||e.variants)}function SF(e,t){if(Qg(e)){const{initial:i,animate:o}=e;return{initial:i===!1||lp(i)?i:void 0,animate:lp(o)?o:void 0}}return e.inherit!==!1?t:{}}function TF(e){const{initial:t,animate:i}=SF(e,$.useContext(Xg));return $.useMemo(()=>({initial:t,animate:i}),[iS(t),iS(i)])}function iS(e){return Array.isArray(e)?e.join(" "):e}const sS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cp={};for(const e in sS)cp[e]={isEnabled:t=>sS[e].some(i=>!!t[i])};function CF(e){for(const t in e)cp[t]={...cp[t],...e[t]}}const Dk=$.createContext({}),Lk=$.createContext({}),EF=Symbol.for("motionComponentSymbol");function PF({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:o,Component:u}){e&&CF(e);function p(l,S){let w;const M={...$.useContext(Pk),...l,layoutId:kF(l)},{isStatic:I}=M,k=TF(l),j=o(l,I);if(!I&&Xx){k.visualElement=wF(u,j,M,t);const X=$.useContext(Lk),O=$.useContext(kk).strict;k.visualElement&&(w=k.visualElement.loadFeatures(M,O,e,X))}return $.createElement(Xg.Provider,{value:k},w&&k.visualElement?$.createElement(w,{visualElement:k.visualElement,...M}):null,i(u,l,bF(j,k.visualElement,S),j,I,k.visualElement))}const y=$.forwardRef(p);return y[EF]=u,y}function kF({layoutId:e}){const t=$.useContext(Dk).id;return t&&e!==void 0?t+"-"+e:e}function AF(e){function t(o,u={}){return PF(e(o,u))}if(typeof Proxy>"u")return t;const i=new Map;return new Proxy(t,{get:(o,u)=>(i.has(u)||i.set(u,t(u)),i.get(u))})}const MF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t1(e){return typeof e!="string"||e.includes("-")?!1:!!(MF.indexOf(e)>-1||/[A-Z]/u.test(e))}const ug={};function IF(e){Object.assign(ug,e)}const bp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uc=new Set(bp);function zk(e,{layout:t,layoutId:i}){return uc.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!ug[e]||e==="opacity")}const ri=e=>!!(e&&e.getVelocity),DF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LF=bp.length;function zF(e,{enableHardwareAcceleration:t=!0,allowTransformNone:i=!0},o,u){let p="";for(let y=0;y<LF;y++){const l=bp[y];if(e[l]!==void 0){const S=DF[l]||l;p+=`${S}(${e[l]}) `}}return t&&!e.z&&(p+="translateZ(0)"),p=p.trim(),u?p=u(e,o?"":p):i&&o&&(p="none"),p}const Rk=e=>t=>typeof t=="string"&&t.startsWith(e),Fk=Rk("--"),RF=Rk("var(--"),n1=e=>RF(e)?FF.test(e.split("/*")[0].trim()):!1,FF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,OF=(e,t)=>t&&typeof e=="number"?t.transform(e):e,sl=(e,t,i)=>i>t?t:i<e?e:i,rh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Od={...rh,transform:e=>sl(0,1,e)},om={...rh,default:1},Bd=e=>Math.round(e*1e5)/1e5,r1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,BF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,NF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Sp(e){return typeof e=="string"}const Tp=e=>({test:t=>Sp(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pa=Tp("deg"),vo=Tp("%"),Mt=Tp("px"),VF=Tp("vh"),jF=Tp("vw"),oS={...vo,parse:e=>vo.parse(e)/100,transform:e=>vo.transform(e*100)},aS={...rh,transform:Math.round},Ok={borderWidth:Mt,borderTopWidth:Mt,borderRightWidth:Mt,borderBottomWidth:Mt,borderLeftWidth:Mt,borderRadius:Mt,radius:Mt,borderTopLeftRadius:Mt,borderTopRightRadius:Mt,borderBottomRightRadius:Mt,borderBottomLeftRadius:Mt,width:Mt,maxWidth:Mt,height:Mt,maxHeight:Mt,size:Mt,top:Mt,right:Mt,bottom:Mt,left:Mt,padding:Mt,paddingTop:Mt,paddingRight:Mt,paddingBottom:Mt,paddingLeft:Mt,margin:Mt,marginTop:Mt,marginRight:Mt,marginBottom:Mt,marginLeft:Mt,rotate:Pa,rotateX:Pa,rotateY:Pa,rotateZ:Pa,scale:om,scaleX:om,scaleY:om,scaleZ:om,skew:Pa,skewX:Pa,skewY:Pa,distance:Mt,translateX:Mt,translateY:Mt,translateZ:Mt,x:Mt,y:Mt,z:Mt,perspective:Mt,transformPerspective:Mt,opacity:Od,originX:oS,originY:oS,originZ:Mt,zIndex:aS,backgroundPositionX:Mt,backgroundPositionY:Mt,fillOpacity:Od,strokeOpacity:Od,numOctaves:aS};function i1(e,t,i,o){const{style:u,vars:p,transform:y,transformOrigin:l}=e;let S=!1,w=!1,M=!0;for(const I in t){const k=t[I];if(Fk(I)){p[I]=k;continue}const j=Ok[I],X=OF(k,j);if(uc.has(I)){if(S=!0,y[I]=X,!M)continue;k!==(j.default||0)&&(M=!1)}else I.startsWith("origin")?(w=!0,l[I]=X):u[I]=X}if(t.transform||(S||o?u.transform=zF(e.transform,i,M,o):u.transform&&(u.transform="none")),w){const{originX:I="50%",originY:k="50%",originZ:j=0}=l;u.transformOrigin=`${I} ${k} ${j}`}}const s1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bk(e,t,i){for(const o in t)!ri(t[o])&&!zk(o,i)&&(e[o]=t[o])}function UF({transformTemplate:e},t,i){return $.useMemo(()=>{const o=s1();return i1(o,t,{enableHardwareAcceleration:!i},e),Object.assign({},o.vars,o.style)},[t])}function $F(e,t,i){const o=e.style||{},u={};return Bk(u,o,e),Object.assign(u,UF(e,t,i)),u}function GF(e,t,i){const o={},u=$F(e,t,i);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=u,o}const qF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hg(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qF.has(e)}let Nk=e=>!hg(e);function ZF(e){e&&(Nk=t=>t.startsWith("on")?!hg(t):e(t))}try{ZF(require("@emotion/is-prop-valid").default)}catch{}function WF(e,t,i){const o={};for(const u in e)u==="values"&&typeof e.values=="object"||(Nk(u)||i===!0&&hg(u)||!t&&!hg(u)||e.draggable&&u.startsWith("onDrag"))&&(o[u]=e[u]);return o}function lS(e,t,i){return typeof e=="string"?e:Mt.transform(t+i*e)}function HF(e,t,i){const o=lS(t,e.x,e.width),u=lS(i,e.y,e.height);return`${o} ${u}`}const KF={offset:"stroke-dashoffset",array:"stroke-dasharray"},XF={offset:"strokeDashoffset",array:"strokeDasharray"};function YF(e,t,i=1,o=0,u=!0){e.pathLength=1;const p=u?KF:XF;e[p.offset]=Mt.transform(-o);const y=Mt.transform(t),l=Mt.transform(i);e[p.array]=`${y} ${l}`}function o1(e,{attrX:t,attrY:i,attrScale:o,originX:u,originY:p,pathLength:y,pathSpacing:l=1,pathOffset:S=0,...w},M,I,k){if(i1(e,w,M,k),I){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:j,style:X,dimensions:O}=e;j.transform&&(O&&(X.transform=j.transform),delete j.transform),O&&(u!==void 0||p!==void 0||X.transform)&&(X.transformOrigin=HF(O,u!==void 0?u:.5,p!==void 0?p:.5)),t!==void 0&&(j.x=t),i!==void 0&&(j.y=i),o!==void 0&&(j.scale=o),y!==void 0&&YF(j,y,l,S,!1)}const Vk=()=>({...s1(),attrs:{}}),a1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function QF(e,t,i,o){const u=$.useMemo(()=>{const p=Vk();return o1(p,t,{enableHardwareAcceleration:!1},a1(o),e.transformTemplate),{...p.attrs,style:{...p.style}}},[t]);if(e.style){const p={};Bk(p,e.style,e),u.style={...p,...u.style}}return u}function JF(e=!1){return(i,o,u,{latestValues:p},y)=>{const S=(t1(i)?QF:GF)(o,p,y,i),w=WF(o,typeof i=="string",e),M=i!==$.Fragment?{...w,...S,ref:u}:{},{children:I}=o,k=$.useMemo(()=>ri(I)?I.get():I,[I]);return $.createElement(i,{...M,children:k})}}function jk(e,{style:t,vars:i},o,u){Object.assign(e.style,t,u&&u.getProjectionStyles(o));for(const p in i)e.style.setProperty(p,i[p])}const Uk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $k(e,t,i,o){jk(e,t,void 0,o);for(const u in t.attrs)e.setAttribute(Uk.has(u)?u:Yx(u),t.attrs[u])}function l1(e,t){const{style:i}=e,o={};for(const u in i)(ri(i[u])||t.style&&ri(t.style[u])||zk(u,e))&&(o[u]=i[u]);return o}function Gk(e,t){const i=l1(e,t);for(const o in e)if(ri(e[o])||ri(t[o])){const u=bp.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[u]=e[o]}return i}function c1(e,t,i,o={},u={}){return typeof t=="function"&&(t=t(i!==void 0?i:e.custom,o,u)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(i!==void 0?i:e.custom,o,u)),t}function e6(e){const t=$.useRef(null);return t.current===null&&(t.current=e()),t.current}const __=e=>Array.isArray(e),t6=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),n6=e=>__(e)?e[e.length-1]||0:e;function Pm(e){const t=ri(e)?e.get():e;return t6(t)?t.toValue():t}function r6({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:i},o,u,p){const y={latestValues:i6(o,u,p,e),renderState:t()};return i&&(y.mount=l=>i(o,l,y)),y}const qk=e=>(t,i)=>{const o=$.useContext(Xg),u=$.useContext(Kx),p=()=>r6(e,t,o,u);return i?p():e6(p)};function i6(e,t,i,o){const u={},p=o(e,{});for(const k in p)u[k]=Pm(p[k]);let{initial:y,animate:l}=e;const S=Qg(e),w=Ik(e);t&&w&&!S&&e.inherit!==!1&&(y===void 0&&(y=t.initial),l===void 0&&(l=t.animate));let M=i?i.initial===!1:!1;M=M||y===!1;const I=M?l:y;return I&&typeof I!="boolean"&&!Yg(I)&&(Array.isArray(I)?I:[I]).forEach(j=>{const X=c1(e,j);if(!X)return;const{transitionEnd:O,transition:H,...B}=X;for(const V in B){let Z=B[V];if(Array.isArray(Z)){const ne=M?Z.length-1:0;Z=Z[ne]}Z!==null&&(u[V]=Z)}for(const V in O)u[V]=O[V]}),u}const ii=e=>e,{schedule:Nr,cancel:ol,state:Or,steps:qv}=Mk(typeof requestAnimationFrame<"u"?requestAnimationFrame:ii,!0),s6={useVisualState:qk({scrapeMotionValuesFromProps:Gk,createRenderState:Vk,onMount:(e,t,{renderState:i,latestValues:o})=>{Nr.read(()=>{try{i.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}),Nr.render(()=>{o1(i,o,{enableHardwareAcceleration:!1},a1(t.tagName),e.transformTemplate),$k(t,i)})}})},o6={useVisualState:qk({scrapeMotionValuesFromProps:l1,createRenderState:s1})};function a6(e,{forwardMotionProps:t=!1},i,o){return{...t1(e)?s6:o6,preloadedFeatures:i,useRender:JF(t),createVisualElement:o,Component:e}}function Go(e,t,i,o={passive:!0}){return e.addEventListener(t,i,o),()=>e.removeEventListener(t,i)}const Zk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Jg(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const l6=e=>t=>Zk(t)&&e(t,Jg(t));function Zo(e,t,i,o){return Go(e,t,l6(i),o)}const c6=(e,t)=>i=>t(e(i)),Wo=(...e)=>e.reduce(c6);function Wk(e){let t=null;return()=>{const i=()=>{t=null};return t===null?(t=e,i):!1}}const cS=Wk("dragHorizontal"),uS=Wk("dragVertical");function Hk(e){let t=!1;if(e==="y")t=uS();else if(e==="x")t=cS();else{const i=cS(),o=uS();i&&o?t=()=>{i(),o()}:(i&&i(),o&&o())}return t}function Kk(){const e=Hk(!0);return e?(e(),!1):!0}class pl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function hS(e,t){const i="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),u=(p,y)=>{if(p.pointerType==="touch"||Kk())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&l[o](p,y)};return Zo(e.current,i,u,{passive:!e.getProps()[o]})}class u6 extends pl{mount(){this.unmount=Wo(hS(this.node,!0),hS(this.node,!1))}unmount(){}}class h6 extends pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wo(Go(this.node.current,"focus",()=>this.onFocus()),Go(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Xk=(e,t)=>t?e===t?!0:Xk(e,t.parentElement):!1;function Zv(e,t){if(!t)return;const i=new PointerEvent("pointer"+e);t(i,Jg(i))}class d6 extends pl{constructor(){super(...arguments),this.removeStartListeners=ii,this.removeEndListeners=ii,this.removeAccessibleListeners=ii,this.startPointerPress=(t,i)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),p=Zo(window,"pointerup",(l,S)=>{if(!this.checkPressEnd())return;const{onTap:w,onTapCancel:M,globalTapTarget:I}=this.node.getProps();!I&&!Xk(this.node.current,l.target)?M&&M(l,S):w&&w(l,S)},{passive:!(o.onTap||o.onPointerUp)}),y=Zo(window,"pointercancel",(l,S)=>this.cancelPress(l,S),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=Wo(p,y),this.startPress(t,i)},this.startAccessiblePress=()=>{const t=p=>{if(p.key!=="Enter"||this.isPressing)return;const y=l=>{l.key!=="Enter"||!this.checkPressEnd()||Zv("up",(S,w)=>{const{onTap:M}=this.node.getProps();M&&M(S,w)})};this.removeEndListeners(),this.removeEndListeners=Go(this.node.current,"keyup",y),Zv("down",(l,S)=>{this.startPress(l,S)})},i=Go(this.node.current,"keydown",t),o=()=>{this.isPressing&&Zv("cancel",(p,y)=>this.cancelPress(p,y))},u=Go(this.node.current,"blur",o);this.removeAccessibleListeners=Wo(i,u)}}startPress(t,i){this.isPressing=!0;const{onTapStart:o,whileTap:u}=this.node.getProps();u&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&o(t,i)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Kk()}cancelPress(t,i){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&o(t,i)}mount(){const t=this.node.getProps(),i=Zo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Go(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wo(i,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const x_=new WeakMap,Wv=new WeakMap,p6=e=>{const t=x_.get(e.target);t&&t(e)},f6=e=>{e.forEach(p6)};function m6({root:e,...t}){const i=e||document;Wv.has(i)||Wv.set(i,{});const o=Wv.get(i),u=JSON.stringify(t);return o[u]||(o[u]=new IntersectionObserver(f6,{root:e,...t})),o[u]}function g6(e,t,i){const o=m6(t);return x_.set(e,i),o.observe(e),()=>{x_.delete(e),o.unobserve(e)}}const y6={some:0,all:1};class v6 extends pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:o,amount:u="some",once:p}=t,y={root:i?i.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:y6[u]},l=S=>{const{isIntersecting:w}=S;if(this.isInView===w||(this.isInView=w,p&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:M,onViewportLeave:I}=this.node.getProps(),k=w?M:I;k&&k(S)};return g6(this.node.current,y,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(_6(t,i))&&this.startObserver()}unmount(){}}function _6({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const x6={inView:{Feature:v6},tap:{Feature:d6},focus:{Feature:h6},hover:{Feature:u6}};function Yk(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}function w6(e){const t={};return e.values.forEach((i,o)=>t[o]=i.get()),t}function b6(e){const t={};return e.values.forEach((i,o)=>t[o]=i.getVelocity()),t}function ey(e,t,i){const o=e.getProps();return c1(o,t,i!==void 0?i:o.custom,w6(e),b6(e))}const Jl=e=>e*1e3,Ho=e=>e/1e3,S6={type:"spring",stiffness:500,damping:25,restSpeed:10},T6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),C6={type:"keyframes",duration:.8},E6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P6=(e,{keyframes:t})=>t.length>2?C6:uc.has(e)?e.startsWith("scale")?T6(t[1]):S6:E6;function k6({when:e,delay:t,delayChildren:i,staggerChildren:o,staggerDirection:u,repeat:p,repeatType:y,repeatDelay:l,from:S,elapsed:w,...M}){return!!Object.keys(M).length}function u1(e,t){return e[t]||e.default||e}const A6=e=>e!==null;function ty(e,{repeat:t,repeatType:i="loop"},o){const u=e.filter(A6),p=t&&i!=="loop"&&t%2===1?0:u.length-1;return!p||o===void 0?u[p]:o}let km;function M6(){km=void 0}const Ya={now:()=>(km===void 0&&Ya.set(Or.isProcessing||vF.useManualTiming?Or.timestamp:performance.now()),km),set:e=>{km=e,queueMicrotask(M6)}},Qk=e=>/^0[^.\s]+$/u.test(e);function I6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Qk(e):!0}let w_=ii;const Jk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),D6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L6(e){const t=D6.exec(e);if(!t)return[,];const[,i,o,u]=t;return[`--${i??o}`,u]}function eA(e,t,i=1){const[o,u]=L6(e);if(!o)return;const p=window.getComputedStyle(t).getPropertyValue(o);if(p){const y=p.trim();return Jk(y)?parseFloat(y):y}return n1(u)?eA(u,t,i+1):u}const z6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),dS=e=>e===rh||e===Mt,pS=(e,t)=>parseFloat(e.split(", ")[t]),fS=(e,t)=>(i,{transform:o})=>{if(o==="none"||!o)return 0;const u=o.match(/^matrix3d\((.+)\)$/u);if(u)return pS(u[1],t);{const p=o.match(/^matrix\((.+)\)$/u);return p?pS(p[1],e):0}},R6=new Set(["x","y","z"]),F6=bp.filter(e=>!R6.has(e));function mS(e){const t=[];return F6.forEach(i=>{const o=e.getValue(i);o!==void 0&&(t.push([i,o.get()]),o.set(i.startsWith("scale")?1:0))}),t}const Zu={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:fS(4,13),y:fS(5,14)};Zu.translateX=Zu.x;Zu.translateY=Zu.y;const tA=e=>t=>t.test(e),O6={test:e=>e==="auto",parse:e=>e},nA=[rh,Mt,vo,Pa,jF,VF,O6],gS=e=>nA.find(tA(e)),ec=new Set;let b_=!1,S_=!1;function rA(){if(S_){const e=Array.from(ec).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),i=new Map;t.forEach(o=>{mS(o).length&&(i.set(o,mS(o)),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render()}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}S_=!1,b_=!1,ec.forEach(e=>e.complete()),ec.clear()}function iA(){ec.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(S_=!0)})}function B6(){iA(),rA()}class h1{constructor(t,i,o,u,p,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=o,this.motionValue=u,this.element=p,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ec.add(this),b_||(b_=!0,Nr.read(iA),Nr.resolveKeyframes(rA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:o,motionValue:u}=this;for(let p=0;p<t.length;p++)if(t[p]===null)if(p===0){const y=u==null?void 0:u.get(),l=t[t.length-1];if(y!==void 0)t[0]=y;else if(o&&i){const S=o.readValue(i,l);S!=null&&(t[0]=S)}t[0]===void 0&&(t[0]=l),u&&y===void 0&&u.set(t[0])}else t[p]=t[p-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ec.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ec.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const d1=(e,t)=>i=>!!(Sp(i)&&NF.test(i)&&i.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(i,t)),sA=(e,t,i)=>o=>{if(!Sp(o))return o;const[u,p,y,l]=o.match(r1);return{[e]:parseFloat(u),[t]:parseFloat(p),[i]:parseFloat(y),alpha:l!==void 0?parseFloat(l):1}},N6=e=>sl(0,255,e),Hv={...rh,transform:e=>Math.round(N6(e))},Zl={test:d1("rgb","red"),parse:sA("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:o=1})=>"rgba("+Hv.transform(e)+", "+Hv.transform(t)+", "+Hv.transform(i)+", "+Bd(Od.transform(o))+")"};function V6(e){let t="",i="",o="",u="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),o=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),o=e.substring(3,4),u=e.substring(4,5),t+=t,i+=i,o+=o,u+=u),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const T_={test:d1("#"),parse:V6,transform:Zl.transform},fu={test:d1("hsl","hue"),parse:sA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:o=1})=>"hsla("+Math.round(e)+", "+vo.transform(Bd(t))+", "+vo.transform(Bd(i))+", "+Bd(Od.transform(o))+")"},ti={test:e=>Zl.test(e)||T_.test(e)||fu.test(e),parse:e=>Zl.test(e)?Zl.parse(e):fu.test(e)?fu.parse(e):T_.parse(e),transform:e=>Sp(e)?e:e.hasOwnProperty("red")?Zl.transform(e):fu.transform(e)};function j6(e){var t,i;return isNaN(e)&&Sp(e)&&(((t=e.match(r1))===null||t===void 0?void 0:t.length)||0)+(((i=e.match(BF))===null||i===void 0?void 0:i.length)||0)>0}const oA="number",aA="color",U6="var",$6="var(",yS="${}",G6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dg(e){const t=e.toString(),i=[],o={color:[],number:[],var:[]},u=[];let p=0;const l=t.replace(G6,S=>(ti.test(S)?(o.color.push(p),u.push(aA),i.push(ti.parse(S))):S.startsWith($6)?(o.var.push(p),u.push(U6),i.push(S)):(o.number.push(p),u.push(oA),i.push(parseFloat(S))),++p,yS)).split(yS);return{values:i,split:l,indexes:o,types:u}}function lA(e){return dg(e).values}function cA(e){const{split:t,types:i}=dg(e),o=t.length;return u=>{let p="";for(let y=0;y<o;y++)if(p+=t[y],u[y]!==void 0){const l=i[y];l===oA?p+=Bd(u[y]):l===aA?p+=ti.transform(u[y]):p+=u[y]}return p}}const q6=e=>typeof e=="number"?0:e;function Z6(e){const t=lA(e);return cA(e)(t.map(q6))}const al={test:j6,parse:lA,createTransformer:cA,getAnimatableNone:Z6},W6=new Set(["brightness","contrast","saturate","opacity"]);function H6(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=i.match(r1)||[];if(!o)return e;const u=i.replace(o,"");let p=W6.has(t)?1:0;return o!==i&&(p*=100),t+"("+p+u+")"}const K6=/\b([a-z-]*)\(.*?\)/gu,C_={...al,getAnimatableNone:e=>{const t=e.match(K6);return t?t.map(H6).join(" "):e}},X6={...Ok,color:ti,backgroundColor:ti,outlineColor:ti,fill:ti,stroke:ti,borderColor:ti,borderTopColor:ti,borderRightColor:ti,borderBottomColor:ti,borderLeftColor:ti,filter:C_,WebkitFilter:C_},p1=e=>X6[e];function uA(e,t){let i=p1(e);return i!==C_&&(i=al),i.getAnimatableNone?i.getAnimatableNone(t):void 0}function Y6(e,t,i){let o=0,u;for(;o<e.length&&!u;)typeof e[o]=="string"&&e[o]!=="none"&&e[o]!=="0"&&(u=e[o]),o++;if(u&&i)for(const p of t)e[p]=uA(i,u)}class hA extends h1{constructor(t,i,o,u){super(t,i,o,u,u==null?void 0:u.owner,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:o}=this;if(!i.current)return;super.readKeyframes();for(let S=0;S<t.length;S++){const w=t[S];if(typeof w=="string"&&n1(w)){const M=eA(w,i.current);M!==void 0&&(t[S]=M)}}if(!z6.has(o)||t.length!==2)return this.resolveNoneKeyframes();const[u,p]=t,y=gS(u),l=gS(p);if(y!==l)if(dS(y)&&dS(l))for(let S=0;S<t.length;S++){const w=t[S];typeof w=="string"&&(t[S]=parseFloat(w))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,o=[];for(let u=0;u<t.length;u++)I6(t[u])&&o.push(u);o.length&&Y6(t,o,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:o}=this;if(!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zu[o](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const u=i[i.length-1];u!==void 0&&t.getValue(o,u).jump(u,!1)}measureEndState(){var t;const{element:i,name:o,unresolvedKeyframes:u}=this;if(!i.current)return;const p=i.getValue(o);p&&p.jump(this.measuredOrigin,!1);const y=u.length-1,l=u[y];u[y]=Zu[o](i.measureViewportBox(),window.getComputedStyle(i.current)),l!==null&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([S,w])=>{i.getValue(S).set(w)}),this.resolveNoneKeyframes()}}function Q6(e){let t;return()=>(t===void 0&&(t=e()),t)}const vS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(al.test(e)||e==="0")&&!e.startsWith("url("));function J6(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function eO(e,t,i,o){const u=e[0];if(u===null)return!1;const p=e[e.length-1],y=vS(u,t),l=vS(p,t);return!y||!l?!1:J6(e)||i==="spring"&&o}class dA{constructor({autoplay:t=!0,delay:i=0,type:o="keyframes",repeat:u=0,repeatDelay:p=0,repeatType:y="loop",...l}){this.isStopped=!1,this.options={autoplay:t,delay:i,type:o,repeat:u,repeatDelay:p,repeatType:y,...l},this.updateFinishedPromise()}get resolved(){return this._resolved||B6(),this._resolved}onKeyframesResolved(t,i){const{name:o,type:u,velocity:p,delay:y,onComplete:l,onUpdate:S}=this.options;if(!eO(t,o,u,p))if(y)this.options.duration=0;else{S==null||S(ty(t,this.options,i)),l==null||l(),this.resolveFinishedPromise(),this.updateFinishedPromise();return}this._resolved={keyframes:t,finalKeyframe:i,...this.initPlayback(t,i)},this.onPostResolved()}onPostResolved(){}then(t,i){return this.currentFinishedPromise.then(t,i)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=()=>{t(),this.updateFinishedPromise()}})}}function pA(e,t){return t?e*(1e3/t):0}const tO=5;function fA(e,t,i){const o=Math.max(t-tO,0);return pA(i-e(o),t-o)}const Kv=.001,nO=.01,rO=10,iO=.05,sO=1;function oO({duration:e=800,bounce:t=.25,velocity:i=0,mass:o=1}){let u,p,y=1-t;y=sl(iO,sO,y),e=sl(nO,rO,Ho(e)),y<1?(u=w=>{const M=w*y,I=M*e,k=M-i,j=E_(w,y),X=Math.exp(-I);return Kv-k/j*X},p=w=>{const I=w*y*e,k=I*i+i,j=Math.pow(y,2)*Math.pow(w,2)*e,X=Math.exp(-I),O=E_(Math.pow(w,2),y);return(-u(w)+Kv>0?-1:1)*((k-j)*X)/O}):(u=w=>{const M=Math.exp(-w*e),I=(w-i)*e+1;return-Kv+M*I},p=w=>{const M=Math.exp(-w*e),I=(i-w)*(e*e);return M*I});const l=5/e,S=lO(u,p,l);if(e=Jl(e),isNaN(S))return{stiffness:100,damping:10,duration:e};{const w=Math.pow(S,2)*o;return{stiffness:w,damping:y*2*Math.sqrt(o*w),duration:e}}}const aO=12;function lO(e,t,i){let o=i;for(let u=1;u<aO;u++)o=o-e(o)/t(o);return o}function E_(e,t){return e*Math.sqrt(1-t*t)}const cO=["duration","bounce"],uO=["stiffness","damping","mass"];function _S(e,t){return t.some(i=>e[i]!==void 0)}function hO(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!_S(e,uO)&&_S(e,cO)){const i=oO(e);t={...t,...i,mass:1},t.isResolvedFromDuration=!0}return t}function mA({keyframes:e,restDelta:t,restSpeed:i,...o}){const u=e[0],p=e[e.length-1],y={done:!1,value:u},{stiffness:l,damping:S,mass:w,duration:M,velocity:I,isResolvedFromDuration:k}=hO({...o,velocity:-Ho(o.velocity||0)}),j=I||0,X=S/(2*Math.sqrt(l*w)),O=p-u,H=Ho(Math.sqrt(l/w)),B=Math.abs(O)<5;i||(i=B?.01:2),t||(t=B?.005:.5);let V;if(X<1){const Z=E_(H,X);V=ne=>{const de=Math.exp(-X*H*ne);return p-de*((j+X*H*O)/Z*Math.sin(Z*ne)+O*Math.cos(Z*ne))}}else if(X===1)V=Z=>p-Math.exp(-H*Z)*(O+(j+H*O)*Z);else{const Z=H*Math.sqrt(X*X-1);V=ne=>{const de=Math.exp(-X*H*ne),Se=Math.min(Z*ne,300);return p-de*((j+X*H*O)*Math.sinh(Se)+Z*O*Math.cosh(Se))/Z}}return{calculatedDuration:k&&M||null,next:Z=>{const ne=V(Z);if(k)y.done=Z>=M;else{let de=j;Z!==0&&(X<1?de=fA(V,Z,ne):de=0);const Se=Math.abs(de)<=i,ke=Math.abs(p-ne)<=t;y.done=Se&&ke}return y.value=y.done?p:ne,y}}}function xS({keyframes:e,velocity:t=0,power:i=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:p=500,modifyTarget:y,min:l,max:S,restDelta:w=.5,restSpeed:M}){const I=e[0],k={done:!1,value:I},j=we=>l!==void 0&&we<l||S!==void 0&&we>S,X=we=>l===void 0?S:S===void 0||Math.abs(l-we)<Math.abs(S-we)?l:S;let O=i*t;const H=I+O,B=y===void 0?H:y(H);B!==H&&(O=B-I);const V=we=>-O*Math.exp(-we/o),Z=we=>B+V(we),ne=we=>{const Ye=V(we),Fe=Z(we);k.done=Math.abs(Ye)<=w,k.value=k.done?B:Fe};let de,Se;const ke=we=>{j(k.value)&&(de=we,Se=mA({keyframes:[k.value,X(k.value)],velocity:fA(Z,we,k.value),damping:u,stiffness:p,restDelta:w,restSpeed:M}))};return ke(0),{calculatedDuration:null,next:we=>{let Ye=!1;return!Se&&de===void 0&&(Ye=!0,ne(we),ke(we)),de!==void 0&&we>=de?Se.next(we-de):(!Ye&&ne(we),k)}}}const gA=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,dO=1e-7,pO=12;function fO(e,t,i,o,u){let p,y,l=0;do y=t+(i-t)/2,p=gA(y,o,u)-e,p>0?i=y:t=y;while(Math.abs(p)>dO&&++l<pO);return y}function Cp(e,t,i,o){if(e===t&&i===o)return ii;const u=p=>fO(p,0,1,e,i);return p=>p===0||p===1?p:gA(u(p),t,o)}const mO=Cp(.42,0,1,1),gO=Cp(0,0,.58,1),yA=Cp(.42,0,.58,1),yO=e=>Array.isArray(e)&&typeof e[0]!="number",vA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_A=e=>t=>1-e(1-t),f1=e=>1-Math.sin(Math.acos(e)),xA=_A(f1),vO=vA(f1),wA=Cp(.33,1.53,.69,.99),m1=_A(wA),_O=vA(m1),xO=e=>(e*=2)<1?.5*m1(e):.5*(2-Math.pow(2,-10*(e-1))),wS={linear:ii,easeIn:mO,easeInOut:yA,easeOut:gO,circIn:f1,circInOut:vO,circOut:xA,backIn:m1,backInOut:_O,backOut:wA,anticipate:xO},bS=e=>{if(Array.isArray(e)){w_(e.length===4);const[t,i,o,u]=e;return Cp(t,i,o,u)}else if(typeof e=="string")return w_(wS[e]!==void 0),wS[e];return e},up=(e,t,i)=>{const o=t-e;return o===0?1:(i-e)/o},Nn=(e,t,i)=>e+(t-e)*i;function Xv(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function wO({hue:e,saturation:t,lightness:i,alpha:o}){e/=360,t/=100,i/=100;let u=0,p=0,y=0;if(!t)u=p=y=i;else{const l=i<.5?i*(1+t):i+t-i*t,S=2*i-l;u=Xv(S,l,e+1/3),p=Xv(S,l,e),y=Xv(S,l,e-1/3)}return{red:Math.round(u*255),green:Math.round(p*255),blue:Math.round(y*255),alpha:o}}const Yv=(e,t,i)=>{const o=e*e,u=i*(t*t-o)+o;return u<0?0:Math.sqrt(u)},bO=[T_,Zl,fu],SO=e=>bO.find(t=>t.test(e));function SS(e){const t=SO(e);let i=t.parse(e);return t===fu&&(i=wO(i)),i}const TS=(e,t)=>{const i=SS(e),o=SS(t),u={...i};return p=>(u.red=Yv(i.red,o.red,p),u.green=Yv(i.green,o.green,p),u.blue=Yv(i.blue,o.blue,p),u.alpha=Nn(i.alpha,o.alpha,p),Zl.transform(u))};function P_(e,t){return i=>i>0?t:e}function TO(e,t){return i=>Nn(e,t,i)}function g1(e){return typeof e=="number"?TO:typeof e=="string"?n1(e)?P_:ti.test(e)?TS:PO:Array.isArray(e)?bA:typeof e=="object"?ti.test(e)?TS:CO:P_}function bA(e,t){const i=[...e],o=i.length,u=e.map((p,y)=>g1(p)(p,t[y]));return p=>{for(let y=0;y<o;y++)i[y]=u[y](p);return i}}function CO(e,t){const i={...e,...t},o={};for(const u in i)e[u]!==void 0&&t[u]!==void 0&&(o[u]=g1(e[u])(e[u],t[u]));return u=>{for(const p in o)i[p]=o[p](u);return i}}function EO(e,t){var i;const o=[],u={color:0,var:0,number:0};for(let p=0;p<t.values.length;p++){const y=t.types[p],l=e.indexes[y][u[y]],S=(i=e.values[l])!==null&&i!==void 0?i:0;o[p]=S,u[y]++}return o}const PO=(e,t)=>{const i=al.createTransformer(t),o=dg(e),u=dg(t);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?Wo(bA(EO(o,u),u.values),i):P_(e,t)};function SA(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Nn(e,t,i):g1(e)(e,t)}function kO(e,t,i){const o=[],u=i||SA,p=e.length-1;for(let y=0;y<p;y++){let l=u(e[y],e[y+1]);if(t){const S=Array.isArray(t)?t[y]||ii:t;l=Wo(S,l)}o.push(l)}return o}function AO(e,t,{clamp:i=!0,ease:o,mixer:u}={}){const p=e.length;if(w_(p===t.length),p===1)return()=>t[0];if(p===2&&e[0]===e[1])return()=>t[1];e[0]>e[p-1]&&(e=[...e].reverse(),t=[...t].reverse());const y=kO(t,o,u),l=y.length,S=w=>{let M=0;if(l>1)for(;M<e.length-2&&!(w<e[M+1]);M++);const I=up(e[M],e[M+1],w);return y[M](I)};return i?w=>S(sl(e[0],e[p-1],w)):S}function MO(e,t){const i=e[e.length-1];for(let o=1;o<=t;o++){const u=up(0,t,o);e.push(Nn(i,1,u))}}function IO(e){const t=[0];return MO(t,e.length-1),t}function DO(e,t){return e.map(i=>i*t)}function LO(e,t){return e.map(()=>t||yA).splice(0,e.length-1)}function pg({duration:e=300,keyframes:t,times:i,ease:o="easeInOut"}){const u=yO(o)?o.map(bS):bS(o),p={done:!1,value:t[0]},y=DO(i&&i.length===t.length?i:IO(t),e),l=AO(y,t,{ease:Array.isArray(u)?u:LO(t,u)});return{calculatedDuration:e,next:S=>(p.value=l(S),p.done=S>=e,p)}}const CS=2e4;function zO(e){let t=0;const i=50;let o=e.next(t);for(;!o.done&&t<CS;)t+=i,o=e.next(t);return t>=CS?1/0:t}const RO=e=>{const t=({timestamp:i})=>e(i);return{start:()=>Nr.update(t,!0),stop:()=>ol(t),now:()=>Or.isProcessing?Or.timestamp:Ya.now()}},FO={decay:xS,inertia:xS,tween:pg,keyframes:pg,spring:mA},OO=e=>e/100;class y1 extends dA{constructor({KeyframeResolver:t=h1,...i}){super(i),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle";const{name:o,motionValue:u,keyframes:p}=this.options,y=(l,S)=>this.onKeyframesResolved(l,S);o&&u&&u.owner?this.resolver=u.owner.resolveKeyframes(p,y,o,u):this.resolver=new t(p,y,o,u),this.resolver.scheduleResolve()}initPlayback(t){const{type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:p,velocity:y=0}=this.options,l=FO[i]||pg;let S,w;l!==pg&&typeof t[0]!="number"&&(S=Wo(OO,SA(t[0],t[1])),t=[0,100]);const M=l({...this.options,keyframes:t});p==="mirror"&&(w=l({...this.options,keyframes:[...t].reverse(),velocity:-y})),M.calculatedDuration===null&&(M.calculatedDuration=zO(M));const{calculatedDuration:I}=M,k=I+u,j=k*(o+1)-u;return{generator:M,mirroredGenerator:w,mapPercentToKeyframes:S,calculatedDuration:I,resolvedDuration:k,totalDuration:j}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,i=!1){const{resolved:o}=this;if(!o){const{keyframes:we}=this.options;return{done:!0,value:we[we.length-1]}}const{finalKeyframe:u,generator:p,mirroredGenerator:y,mapPercentToKeyframes:l,keyframes:S,calculatedDuration:w,totalDuration:M,resolvedDuration:I}=o;if(this.startTime===null)return p.next(0);const{delay:k,repeat:j,repeatType:X,repeatDelay:O,onUpdate:H}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-M/this.speed,this.startTime)),i?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const B=this.currentTime-k*(this.speed>=0?1:-1),V=this.speed>=0?B<0:B>M;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=M);let Z=this.currentTime,ne=p;if(j){const we=Math.min(this.currentTime,M)/I;let Ye=Math.floor(we),Fe=we%1;!Fe&&we>=1&&(Fe=1),Fe===1&&Ye--,Ye=Math.min(Ye,j+1),!!(Ye%2)&&(X==="reverse"?(Fe=1-Fe,O&&(Fe-=O/I)):X==="mirror"&&(ne=y)),Z=sl(0,1,Fe)*I}const de=V?{done:!1,value:S[0]}:ne.next(Z);l&&(de.value=l(de.value));let{done:Se}=de;!V&&w!==null&&(Se=this.speed>=0?this.currentTime>=M:this.currentTime<=0);const ke=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Se);return ke&&u!==void 0&&(de.value=ty(S,this.options,u)),H&&H(de.value),ke&&this.finish(),de}get duration(){const{resolved:t}=this;return t?Ho(t.calculatedDuration):0}get time(){return Ho(this.currentTime)}set time(t){t=Jl(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=Ho(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=RO,onPlay:i}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),i&&i();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=o),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}stop(){if(this.isStopped=!0,this.state==="idle")return;this.state="idle";const{onStop:t}=this.options;t&&t(),this.teardown()}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const TA=e=>Array.isArray(e)&&typeof e[0]=="number";function CA(e){return!!(!e||typeof e=="string"&&EA[e]||TA(e)||Array.isArray(e)&&e.every(CA))}const Ed=([e,t,i,o])=>`cubic-bezier(${e}, ${t}, ${i}, ${o})`,EA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ed([0,.65,.55,1]),circOut:Ed([.55,0,1,.45]),backIn:Ed([.31,.01,.66,-.59]),backOut:Ed([.33,1.53,.69,.99])};function PA(e){if(e)return TA(e)?Ed(e):Array.isArray(e)?e.map(PA):EA[e]}function BO(e,t,i,{delay:o=0,duration:u=300,repeat:p=0,repeatType:y="loop",ease:l,times:S}={}){const w={[t]:i};S&&(w.offset=S);const M=PA(l);return Array.isArray(M)&&(w.easing=M),e.animate(w,{delay:o,duration:u,easing:Array.isArray(M)?"linear":M,fill:"both",iterations:p+1,direction:y==="reverse"?"alternate":"normal"})}const NO=Q6(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),VO=new Set(["opacity","clipPath","filter","transform"]),fg=10,jO=2e4;function UO(e){return e.type==="spring"||e.name==="backgroundColor"||!CA(e.ease)}function $O(e,t){const i=new y1({...t,keyframes:e,repeat:0,delay:0});let o={done:!1,value:e[0]};const u=[];let p=0;for(;!o.done&&p<jO;)o=i.sample(p),u.push(o.value),p+=fg;return{times:void 0,keyframes:u,duration:p-fg,ease:"linear"}}class ES extends dA{constructor(t){super(t);const{name:i,motionValue:o,keyframes:u}=this.options;this.resolver=new hA(u,(p,y)=>this.onKeyframesResolved(p,y),i,o),this.resolver.scheduleResolve()}initPlayback(t,i){let o=this.options.duration||300;if(UO(this.options)){const{onComplete:l,onUpdate:S,motionValue:w,...M}=this.options,I=$O(t,M);t=I.keyframes,o=I.duration,this.options.times=I.times,this.options.ease=I.ease}const{motionValue:u,name:p}=this.options,y=BO(u.owner.current,p,t,{...this.options,duration:o});return y.startTime=Ya.now(),this.pendingTimeline?(y.timeline=this.pendingTimeline,this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:l}=this.options;u.set(ty(t,this.options,i)),l&&l(),this.cancel(),this.resolveFinishedPromise(),this.updateFinishedPromise()},{animation:y,duration:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:i}=t;return Ho(i)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:i}=t;return Ho(i.currentTime||0)}set time(t){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.currentTime=Jl(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:i}=t;return i.playbackRate}set speed(t){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:i}=t;return i.playState}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:i}=this;if(!i)return ii;const{animation:o}=i;o.timeline=t,o.onfinish=null}return ii}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.pause()}stop(){this.isStopped=!0;const{resolved:t}=this;if(!t)return;const{animation:i,keyframes:o}=t;if(!(i.playState==="idle"||i.playState==="finished")){if(this.time){const{motionValue:u,onUpdate:p,onComplete:y,...l}=this.options,S=new y1({...l,keyframes:o});u.setWithVelocity(S.sample(this.time-fg).value,S.sample(this.time).value,fg)}this.cancel()}}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:i,name:o,repeatDelay:u,repeatType:p,damping:y,type:l}=t;return NO()&&o&&VO.has(o)&&i&&i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate&&!u&&p!=="mirror"&&y!==0&&l!=="inertia"}}const v1=(e,t,i,o={},u,p)=>y=>{const l=u1(o,e)||{},S=l.delay||o.delay||0;let{elapsed:w=0}=o;w=w-Jl(S);let M={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-w,onUpdate:k=>{t.set(k),l.onUpdate&&l.onUpdate(k)},onComplete:()=>{y(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:p?void 0:u};k6(l)||(M={...M,...P6(e,M)}),M.duration&&(M.duration=Jl(M.duration)),M.repeatDelay&&(M.repeatDelay=Jl(M.repeatDelay)),M.from!==void 0&&(M.keyframes[0]=M.from);let I=!1;if(M.type===!1&&(M.duration=0,M.delay===0&&(I=!0)),I&&!p&&t.get()!==void 0){const k=ty(M.keyframes,l);if(k!==void 0){Nr.update(()=>{M.onUpdate(k),M.onComplete()});return}}return!p&&ES.supports(M)?new ES(M):new y1(M)};function mg(e){return!!(ri(e)&&e.add)}function _1(e,t){e.indexOf(t)===-1&&e.push(t)}function x1(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}class w1{constructor(){this.subscriptions=[]}add(t){return _1(this.subscriptions,t),()=>x1(this.subscriptions,t)}notify(t,i,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,i,o);else for(let p=0;p<u;p++){const y=this.subscriptions[p];y&&y(t,i,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const PS=30,GO=e=>!isNaN(parseFloat(e));class qO{constructor(t,i={}){this.version="11.0.15",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,u=!0)=>{const p=Ya.now();this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),u&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=GO(this.current),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Ya.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new w1);const o=this.events[t].add(i);return t==="change"?()=>{o(),Nr.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,o){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ya.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>PS)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,PS);return pA(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hp(e,t){return new qO(e,t)}function ZO(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,hp(i))}function WO(e,t){const i=ey(e,t);let{transitionEnd:o={},transition:u={},...p}=i||{};p={...p,...o};for(const y in p){const l=n6(p[y]);ZO(e,y,l)}}function HO({protectedKeys:e,needsAnimating:t},i){const o=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,o}function kA(e,t,{delay:i=0,transitionOverride:o,type:u}={}){var p;let{transition:y=e.getDefaultTransition(),transitionEnd:l,...S}=t;const w=e.getValue("willChange");o&&(y=o);const M=[],I=u&&e.animationState&&e.animationState.getState()[u];for(const k in S){const j=e.getValue(k,(p=e.latestValues[k])!==null&&p!==void 0?p:null),X=S[k];if(X===void 0||I&&HO(I,k))continue;const O={delay:i,elapsed:0,...u1(y||{},k)};let H=!1;if(window.HandoffAppearAnimations){const V=e.getProps()[Ak];if(V){const Z=window.HandoffAppearAnimations(V,k);Z!==null&&(O.elapsed=Z,H=!0)}}j.start(v1(k,j,X,e.shouldReduceMotion&&uc.has(k)?{type:!1}:O,e,H));const B=j.animation;B&&(mg(w)&&(w.add(k),B.then(()=>w.remove(k))),M.push(B))}return l&&Promise.all(M).then(()=>{Nr.update(()=>{l&&WO(e,l)})}),M}function k_(e,t,i={}){var o;const u=ey(e,t,i.type==="exit"?(o=e.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:p=e.getDefaultTransition()||{}}=u||{};i.transitionOverride&&(p=i.transitionOverride);const y=u?()=>Promise.all(kA(e,u,i)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:M=0,staggerChildren:I,staggerDirection:k}=p;return KO(e,t,M+w,I,k,i)}:()=>Promise.resolve(),{when:S}=p;if(S){const[w,M]=S==="beforeChildren"?[y,l]:[l,y];return w().then(()=>M())}else return Promise.all([y(),l(i.delay)])}function KO(e,t,i=0,o=0,u=1,p){const y=[],l=(e.variantChildren.size-1)*o,S=u===1?(w=0)=>w*o:(w=0)=>l-w*o;return Array.from(e.variantChildren).sort(XO).forEach((w,M)=>{w.notify("AnimationStart",t),y.push(k_(w,t,{...p,delay:i+S(M)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(y)}function XO(e,t){return e.sortNodePosition(t)}function YO(e,t,i={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const u=t.map(p=>k_(e,p,i));o=Promise.all(u)}else if(typeof t=="string")o=k_(e,t,i);else{const u=typeof t=="function"?ey(e,t,i.custom):t;o=Promise.all(kA(e,u,i))}return o.then(()=>{Nr.postRender(()=>{e.notify("AnimationComplete",t)})})}const QO=[...Jx].reverse(),JO=Jx.length;function e8(e){return t=>Promise.all(t.map(({animation:i,options:o})=>YO(e,i,o)))}function t8(e){let t=e8(e);const i=r8();let o=!0;const u=S=>(w,M)=>{var I;const k=ey(e,M,S==="exit"?(I=e.presenceContext)===null||I===void 0?void 0:I.custom:void 0);if(k){const{transition:j,transitionEnd:X,...O}=k;w={...w,...O,...X}}return w};function p(S){t=S(e)}function y(S){const w=e.getProps(),M=e.getVariantContext(!0)||{},I=[],k=new Set;let j={},X=1/0;for(let H=0;H<JO;H++){const B=QO[H],V=i[B],Z=w[B]!==void 0?w[B]:M[B],ne=lp(Z),de=B===S?V.isActive:null;de===!1&&(X=H);let Se=Z===M[B]&&Z!==w[B]&&ne;if(Se&&o&&e.manuallyAnimateOnMount&&(Se=!1),V.protectedKeys={...j},!V.isActive&&de===null||!Z&&!V.prevProp||Yg(Z)||typeof Z=="boolean")continue;let we=n8(V.prevProp,Z)||B===S&&V.isActive&&!Se&&ne||H>X&&ne,Ye=!1;const Fe=Array.isArray(Z)?Z:[Z];let pt=Fe.reduce(u(B),{});de===!1&&(pt={});const{prevResolvedValues:nt={}}=V,Et={...nt,...pt},Ze=dt=>{we=!0,k.has(dt)&&(Ye=!0,k.delete(dt)),V.needsAnimating[dt]=!0};for(const dt in Et){const mt=pt[dt],Pt=nt[dt];if(j.hasOwnProperty(dt))continue;let Pe=!1;__(mt)&&__(Pt)?Pe=!Yk(mt,Pt):Pe=mt!==Pt,Pe?mt!=null?Ze(dt):k.add(dt):mt!==void 0&&k.has(dt)?Ze(dt):V.protectedKeys[dt]=!0}V.prevProp=Z,V.prevResolvedValues=pt,V.isActive&&(j={...j,...pt}),o&&e.blockInitialAnimation&&(we=!1),we&&(!Se||Ye)&&I.push(...Fe.map(dt=>({animation:dt,options:{type:B}})))}if(k.size){const H={};k.forEach(B=>{const V=e.getBaseTarget(B);H[B]=V===void 0?null:V}),I.push({animation:H})}let O=!!I.length;return o&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(O=!1),o=!1,O?t(I):Promise.resolve()}function l(S,w){var M;if(i[S].isActive===w)return Promise.resolve();(M=e.variantChildren)===null||M===void 0||M.forEach(k=>{var j;return(j=k.animationState)===null||j===void 0?void 0:j.setActive(S,w)}),i[S].isActive=w;const I=y(S);for(const k in i)i[k].protectedKeys={};return I}return{animateChanges:y,setActive:l,setAnimateFunction:p,getState:()=>i}}function n8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Yk(t,e):!1}function Ol(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r8(){return{animate:Ol(!0),whileInView:Ol(),whileHover:Ol(),whileTap:Ol(),whileDrag:Ol(),whileFocus:Ol(),exit:Ol()}}class i8 extends pl{constructor(t){super(t),t.animationState||(t.animationState=t8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yg(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){}}let s8=0;class o8 extends pl{constructor(){super(...arguments),this.id=s8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const u=this.node.animationState.setActive("exit",!t);i&&!t&&u.then(()=>i(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const a8={animation:{Feature:i8},exit:{Feature:o8}},kS=(e,t)=>Math.abs(e-t);function l8(e,t){const i=kS(e.x,t.x),o=kS(e.y,t.y);return Math.sqrt(i**2+o**2)}class AA{constructor(t,i,{transformPagePoint:o,contextWindow:u,dragSnapToOrigin:p=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Jv(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,j=l8(I.offset,{x:0,y:0})>=3;if(!k&&!j)return;const{point:X}=I,{timestamp:O}=Or;this.history.push({...X,timestamp:O});const{onStart:H,onMove:B}=this.handlers;k||(H&&H(this.lastMoveEvent,I),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,I)},this.handlePointerMove=(I,k)=>{this.lastMoveEvent=I,this.lastMoveEventInfo=Qv(k,this.transformPagePoint),Nr.update(this.updatePoint,!0)},this.handlePointerUp=(I,k)=>{this.end();const{onEnd:j,onSessionEnd:X,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const H=Jv(I.type==="pointercancel"?this.lastMoveEventInfo:Qv(k,this.transformPagePoint),this.history);this.startEvent&&j&&j(I,H),X&&X(I,H)},!Zk(t))return;this.dragSnapToOrigin=p,this.handlers=i,this.transformPagePoint=o,this.contextWindow=u||window;const y=Jg(t),l=Qv(y,this.transformPagePoint),{point:S}=l,{timestamp:w}=Or;this.history=[{...S,timestamp:w}];const{onSessionStart:M}=i;M&&M(t,Jv(l,this.history)),this.removeListeners=Wo(Zo(this.contextWindow,"pointermove",this.handlePointerMove),Zo(this.contextWindow,"pointerup",this.handlePointerUp),Zo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ol(this.updatePoint)}}function Qv(e,t){return t?{point:t(e.point)}:e}function AS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Jv({point:e},t){return{point:e,delta:AS(e,MA(t)),offset:AS(e,c8(t)),velocity:u8(t,.1)}}function c8(e){return e[0]}function MA(e){return e[e.length-1]}function u8(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,o=null;const u=MA(e);for(;i>=0&&(o=e[i],!(u.timestamp-o.timestamp>Jl(t)));)i--;if(!o)return{x:0,y:0};const p=Ho(u.timestamp-o.timestamp);if(p===0)return{x:0,y:0};const y={x:(u.x-o.x)/p,y:(u.y-o.y)/p};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function os(e){return e.max-e.min}function A_(e,t=0,i=.01){return Math.abs(e-t)<=i}function MS(e,t,i,o=.5){e.origin=o,e.originPoint=Nn(t.min,t.max,e.origin),e.scale=os(i)/os(t),(A_(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Nn(i.min,i.max,e.origin)-e.originPoint,(A_(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Nd(e,t,i,o){MS(e.x,t.x,i.x,o?o.originX:void 0),MS(e.y,t.y,i.y,o?o.originY:void 0)}function IS(e,t,i){e.min=i.min+t.min,e.max=e.min+os(t)}function h8(e,t,i){IS(e.x,t.x,i.x),IS(e.y,t.y,i.y)}function DS(e,t,i){e.min=t.min-i.min,e.max=e.min+os(t)}function Vd(e,t,i){DS(e.x,t.x,i.x),DS(e.y,t.y,i.y)}function d8(e,{min:t,max:i},o){return t!==void 0&&e<t?e=o?Nn(t,e,o.min):Math.max(e,t):i!==void 0&&e>i&&(e=o?Nn(i,e,o.max):Math.min(e,i)),e}function LS(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function p8(e,{top:t,left:i,bottom:o,right:u}){return{x:LS(e.x,i,u),y:LS(e.y,t,o)}}function zS(e,t){let i=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,o]=[o,i]),{min:i,max:o}}function f8(e,t){return{x:zS(e.x,t.x),y:zS(e.y,t.y)}}function m8(e,t){let i=.5;const o=os(e),u=os(t);return u>o?i=up(t.min,t.max-o,e.min):o>u&&(i=up(e.min,e.max-u,t.min)),sl(0,1,i)}function g8(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const M_=.35;function y8(e=M_){return e===!1?e=0:e===!0&&(e=M_),{x:RS(e,"left","right"),y:RS(e,"top","bottom")}}function RS(e,t,i){return{min:FS(e,t),max:FS(e,i)}}function FS(e,t){return typeof e=="number"?e:e[t]||0}const OS=()=>({translate:0,scale:1,origin:0,originPoint:0}),mu=()=>({x:OS(),y:OS()}),BS=()=>({min:0,max:0}),rr=()=>({x:BS(),y:BS()});function xs(e){return[e("x"),e("y")]}function IA({top:e,left:t,right:i,bottom:o}){return{x:{min:t,max:i},y:{min:e,max:o}}}function v8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function _8(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}}function e0(e){return e===void 0||e===1}function I_({scale:e,scaleX:t,scaleY:i}){return!e0(e)||!e0(t)||!e0(i)}function Vl(e){return I_(e)||DA(e)||e.z||e.rotate||e.rotateX||e.rotateY}function DA(e){return NS(e.x)||NS(e.y)}function NS(e){return e&&e!=="0%"}function gg(e,t,i){const o=e-i,u=t*o;return i+u}function VS(e,t,i,o,u){return u!==void 0&&(e=gg(e,u,o)),gg(e,i,o)+t}function D_(e,t=0,i=1,o,u){e.min=VS(e.min,t,i,o,u),e.max=VS(e.max,t,i,o,u)}function LA(e,{x:t,y:i}){D_(e.x,t.translate,t.scale,t.originPoint),D_(e.y,i.translate,i.scale,i.originPoint)}function x8(e,t,i,o=!1){const u=i.length;if(!u)return;t.x=t.y=1;let p,y;for(let l=0;l<u;l++){p=i[l],y=p.projectionDelta;const S=p.instance;S&&S.style&&S.style.display==="contents"||(o&&p.options.layoutScroll&&p.scroll&&p!==p.root&&gu(e,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),y&&(t.x*=y.x.scale,t.y*=y.y.scale,LA(e,y)),o&&Vl(p.latestValues)&&gu(e,p.latestValues))}t.x=jS(t.x),t.y=jS(t.y)}function jS(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ia(e,t){e.min=e.min+t,e.max=e.max+t}function US(e,t,[i,o,u]){const p=t[u]!==void 0?t[u]:.5,y=Nn(e.min,e.max,p);D_(e,t[i],t[o],y,t.scale)}const w8=["x","scaleX","originX"],b8=["y","scaleY","originY"];function gu(e,t){US(e.x,t,w8),US(e.y,t,b8)}function zA(e,t){return IA(_8(e.getBoundingClientRect(),t))}function S8(e,t,i){const o=zA(e,i),{scroll:u}=t;return u&&(Ia(o.x,u.offset.x),Ia(o.y,u.offset.y)),o}const RA=({current:e})=>e?e.ownerDocument.defaultView:null,T8=new WeakMap;class C8{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rr(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=M=>{const{dragSnapToOrigin:I}=this.getProps();I?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Jg(M,"page").point)},p=(M,I)=>{const{drag:k,dragPropagation:j,onDragStart:X}=this.getProps();if(k&&!j&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Hk(k),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xs(H=>{let B=this.getAxisMotionValue(H).get()||0;if(vo.test(B)){const{projection:V}=this.visualElement;if(V&&V.layout){const Z=V.layout.layoutBox[H];Z&&(B=os(Z)*(parseFloat(B)/100))}}this.originPoint[H]=B}),X&&X(M,I);const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},y=(M,I)=>{const{dragPropagation:k,dragDirectionLock:j,onDirectionLock:X,onDrag:O}=this.getProps();if(!k&&!this.openGlobalLock)return;const{offset:H}=I;if(j&&this.currentDirection===null){this.currentDirection=E8(H),this.currentDirection!==null&&X&&X(this.currentDirection);return}this.updateAxis("x",I.point,H),this.updateAxis("y",I.point,H),this.visualElement.render(),O&&O(M,I)},l=(M,I)=>this.stop(M,I),S=()=>xs(M=>{var I;return this.getAnimationState(M)==="paused"&&((I=this.getAxisMotionValue(M).animation)===null||I===void 0?void 0:I.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new AA(t,{onSessionStart:u,onStart:p,onMove:y,onSessionEnd:l,resumeAnimation:S},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,contextWindow:RA(this.visualElement)})}stop(t,i){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&p(t,i)}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,o){const{drag:u}=this.getProps();if(!o||!am(t,u,this.currentDirection))return;const p=this.getAxisMotionValue(t);let y=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(y=d8(y,this.constraints[t],this.elastic[t])),p.set(y)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:o}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,p=this.constraints;i&&pu(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=p8(u.layoutBox,i):this.constraints=!1,this.elastic=y8(o),p!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&xs(y=>{this.getAxisMotionValue(y)&&(this.constraints[y]=g8(u.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!pu(t))return!1;const o=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const p=S8(o,u.root,this.visualElement.getTransformPagePoint());let y=f8(u.layout.layoutBox,p);if(i){const l=i(v8(y));this.hasMutatedConstraints=!!l,l&&(y=IA(l))}return y}startAnimation(t){const{drag:i,dragMomentum:o,dragElastic:u,dragTransition:p,dragSnapToOrigin:y,onDragTransitionEnd:l}=this.getProps(),S=this.constraints||{},w=xs(M=>{if(!am(M,i,this.currentDirection))return;let I=S&&S[M]||{};y&&(I={min:0,max:0});const k=u?200:1e6,j=u?40:1e7,X={type:"inertia",velocity:o?t[M]:0,bounceStiffness:k,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...p,...I};return this.startAxisValueAnimation(M,X)});return Promise.all(w).then(l)}startAxisValueAnimation(t,i){const o=this.getAxisMotionValue(t);return o.start(v1(t,o,0,i,this.visualElement))}stopAnimation(){xs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){xs(t=>{var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(t){const i="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),u=o[i];return u||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){xs(i=>{const{drag:o}=this.getProps();if(!am(i,o,this.currentDirection))return;const{projection:u}=this.visualElement,p=this.getAxisMotionValue(i);if(u&&u.layout){const{min:y,max:l}=u.layout.layoutBox[i];p.set(t[i]-Nn(y,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:o}=this.visualElement;if(!pu(i)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};xs(y=>{const l=this.getAxisMotionValue(y);if(l){const S=l.get();u[y]=m8({min:S,max:S},this.constraints[y])}});const{transformTemplate:p}=this.visualElement.getProps();this.visualElement.current.style.transform=p?p({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),xs(y=>{if(!am(y,t,null))return;const l=this.getAxisMotionValue(y),{min:S,max:w}=this.constraints[y];l.set(Nn(S,w,u[y]))})}addListeners(){if(!this.visualElement.current)return;T8.set(this.visualElement,this);const t=this.visualElement.current,i=Zo(t,"pointerdown",S=>{const{drag:w,dragListener:M=!0}=this.getProps();w&&M&&this.start(S)}),o=()=>{const{dragConstraints:S}=this.getProps();pu(S)&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,p=u.addEventListener("measure",o);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),o();const y=Go(window,"resize",()=>this.scalePositionWithinConstraints()),l=u.addEventListener("didUpdate",({delta:S,hasLayoutChanged:w})=>{this.isDragging&&w&&(xs(M=>{const I=this.getAxisMotionValue(M);I&&(this.originPoint[M]+=S[M].translate,I.set(I.get()+S[M].translate))}),this.visualElement.render())});return()=>{y(),i(),p(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:p=!1,dragElastic:y=M_,dragMomentum:l=!0}=t;return{...t,drag:i,dragDirectionLock:o,dragPropagation:u,dragConstraints:p,dragElastic:y,dragMomentum:l}}}function am(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function E8(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class P8 extends pl{constructor(t){super(t),this.removeGroupControls=ii,this.removeListeners=ii,this.controls=new C8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const $S=e=>(t,i)=>{e&&e(t,i)};class k8 extends pl{constructor(){super(...arguments),this.removePointerDownListener=ii}onPointerDown(t){this.session=new AA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:$S(t),onStart:$S(i),onMove:o,onEnd:(p,y)=>{delete this.session,u&&u(p,y)}}}mount(){this.removePointerDownListener=Zo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function A8(){const e=$.useContext(Kx);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,u=$.useId();return $.useEffect(()=>o(u),[]),!t&&i?[!1,()=>i&&i(u)]:[!0]}const Am={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Mt.test(e))e=parseFloat(e);else return e;const i=GS(e,t.target.x),o=GS(e,t.target.y);return`${i}% ${o}%`}},M8={correct:(e,{treeScale:t,projectionDelta:i})=>{const o=e,u=al.parse(e);if(u.length>5)return o;const p=al.createTransformer(e),y=typeof u[0]!="number"?1:0,l=i.x.scale*t.x,S=i.y.scale*t.y;u[0+y]/=l,u[1+y]/=S;const w=Nn(l,S,.5);return typeof u[2+y]=="number"&&(u[2+y]/=w),typeof u[3+y]=="number"&&(u[3+y]/=w),p(u)}};class I8 extends tt.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:o,layoutId:u}=this.props,{projection:p}=t;IF(D8),p&&(i.group&&i.group.add(p),o&&o.register&&u&&o.register(p),p.root.didUpdate(),p.addEventListener("animationComplete",()=>{this.safeToRemove()}),p.setOptions({...p.options,onExitComplete:()=>this.safeToRemove()})),Am.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:o,drag:u,isPresent:p}=this.props,y=o.projection;return y&&(y.isPresent=p,u||t.layoutDependency!==i||i===void 0?y.willUpdate():this.safeToRemove(),t.isPresent!==p&&(p?y.promote():y.relegate()||Nr.postRender(()=>{const l=y.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Qx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:o}=this.props,{projection:u}=t;u&&(u.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function FA(e){const[t,i]=A8(),o=$.useContext(Dk);return tt.createElement(I8,{...e,layoutGroup:o,switchLayoutGroup:$.useContext(Lk),isPresent:t,safeToRemove:i})}const D8={borderRadius:{...xd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xd,borderTopRightRadius:xd,borderBottomLeftRadius:xd,borderBottomRightRadius:xd,boxShadow:M8},OA=["TopLeft","TopRight","BottomLeft","BottomRight"],L8=OA.length,qS=e=>typeof e=="string"?parseFloat(e):e,ZS=e=>typeof e=="number"||Mt.test(e);function z8(e,t,i,o,u,p){u?(e.opacity=Nn(0,i.opacity!==void 0?i.opacity:1,R8(o)),e.opacityExit=Nn(t.opacity!==void 0?t.opacity:1,0,F8(o))):p&&(e.opacity=Nn(t.opacity!==void 0?t.opacity:1,i.opacity!==void 0?i.opacity:1,o));for(let y=0;y<L8;y++){const l=`border${OA[y]}Radius`;let S=WS(t,l),w=WS(i,l);if(S===void 0&&w===void 0)continue;S||(S=0),w||(w=0),S===0||w===0||ZS(S)===ZS(w)?(e[l]=Math.max(Nn(qS(S),qS(w),o),0),(vo.test(w)||vo.test(S))&&(e[l]+="%")):e[l]=w}(t.rotate||i.rotate)&&(e.rotate=Nn(t.rotate||0,i.rotate||0,o))}function WS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const R8=BA(0,.5,xA),F8=BA(.5,.95,ii);function BA(e,t,i){return o=>o<e?0:o>t?1:i(up(e,t,o))}function HS(e,t){e.min=t.min,e.max=t.max}function _s(e,t){HS(e.x,t.x),HS(e.y,t.y)}function KS(e,t,i,o,u){return e-=t,e=gg(e,1/i,o),u!==void 0&&(e=gg(e,1/u,o)),e}function O8(e,t=0,i=1,o=.5,u,p=e,y=e){if(vo.test(t)&&(t=parseFloat(t),t=Nn(y.min,y.max,t/100)-y.min),typeof t!="number")return;let l=Nn(p.min,p.max,o);e===p&&(l-=t),e.min=KS(e.min,t,i,l,u),e.max=KS(e.max,t,i,l,u)}function XS(e,t,[i,o,u],p,y){O8(e,t[i],t[o],t[u],t.scale,p,y)}const B8=["x","scaleX","originX"],N8=["y","scaleY","originY"];function YS(e,t,i,o){XS(e.x,t,B8,i?i.x:void 0,o?o.x:void 0),XS(e.y,t,N8,i?i.y:void 0,o?o.y:void 0)}function QS(e){return e.translate===0&&e.scale===1}function NA(e){return QS(e.x)&&QS(e.y)}function V8(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function VA(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function JS(e){return os(e.x)/os(e.y)}class j8{constructor(){this.members=[]}add(t){_1(this.members,t),t.scheduleRender()}remove(t){if(x1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(u=>t===u);if(i===0)return!1;let o;for(let u=i;u>=0;u--){const p=this.members[u];if(p.isPresent!==!1){o=p;break}}return o?(this.promote(o),!0):!1}promote(t,i){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,i&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:o}=t;i.onExitComplete&&i.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eT(e,t,i){let o="";const u=e.x.translate/t.x,p=e.y.translate/t.y;if((u||p)&&(o=`translate3d(${u}px, ${p}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),i){const{rotate:S,rotateX:w,rotateY:M}=i;S&&(o+=`rotate(${S}deg) `),w&&(o+=`rotateX(${w}deg) `),M&&(o+=`rotateY(${M}deg) `)}const y=e.x.scale*t.x,l=e.y.scale*t.y;return(y!==1||l!==1)&&(o+=`scale(${y}, ${l})`),o||"none"}const U8=(e,t)=>e.depth-t.depth;class $8{constructor(){this.children=[],this.isDirty=!1}add(t){_1(this.children,t),this.isDirty=!0}remove(t){x1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(U8),this.isDirty=!1,this.children.forEach(t)}}function G8(e,t){const i=Ya.now(),o=({timestamp:u})=>{const p=u-i;p>=t&&(ol(o),e(p-t))};return Nr.read(o,!0),()=>ol(o)}function q8(e){window.MotionDebug&&window.MotionDebug.record(e)}function Z8(e){return e instanceof SVGElement&&e.tagName!=="svg"}function W8(e,t,i){const o=ri(e)?e:hp(e);return o.start(v1("",o,t,i)),o.animation}const tT=["","X","Y","Z"],H8={visibility:"hidden"},nT=1e3;let K8=0;const jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function jA({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(y={},l=t==null?void 0:t()){this.id=K8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jl.totalNodes=jl.resolvedTargetDeltas=jl.recalculatedProjection=0,this.nodes.forEach(Q8),this.nodes.forEach(rB),this.nodes.forEach(iB),this.nodes.forEach(J8),q8(jl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let S=0;S<this.path.length;S++)this.path[S].shouldResetTransform=!0;this.root===this&&(this.nodes=new $8)}addEventListener(y,l){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new w1),this.eventHandlers.get(y).add(l)}notifyListeners(y,...l){const S=this.eventHandlers.get(y);S&&S.notify(...l)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z8(y),this.instance=y;const{layoutId:S,layout:w,visualElement:M}=this.options;if(M&&!M.current&&M.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(w||S)&&(this.isLayoutDirty=!0),e){let I;const k=()=>this.root.updateBlockedByResize=!1;e(y,()=>{this.root.updateBlockedByResize=!0,I&&I(),I=G8(k,250),Am.hasAnimatedSinceResize&&(Am.hasAnimatedSinceResize=!1,this.nodes.forEach(iT))})}S&&this.root.registerSharedNode(S,this),this.options.animate!==!1&&M&&(S||w)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:k,hasRelativeTargetChanged:j,layout:X})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||M.getDefaultTransition()||cB,{onLayoutAnimationStart:H,onLayoutAnimationComplete:B}=M.getProps(),V=!this.targetLayout||!VA(this.targetLayout,X)||j,Z=!k&&j;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Z||k&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(I,Z);const ne={...u1(O,"layout"),onPlay:H,onComplete:B};(M.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else k||iT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=X})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ol(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sB),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let M=0;M<this.path.length;M++){const I=this.path[M];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:l,layout:S}=this.options;if(l===void 0&&!S)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rT);return}this.isUpdating||this.nodes.forEach(tB),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(nB),this.nodes.forEach(X8),this.nodes.forEach(Y8),this.clearAllSnapshots();const l=Ya.now();Or.delta=sl(0,1e3/60,l-Or.timestamp),Or.timestamp=l,Or.isProcessing=!0,qv.update.process(Or),qv.preRender.process(Or),qv.render.process(Or),Or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qx.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eB),this.sharedNodes.forEach(oB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let S=0;S<this.path.length;S++)this.path[S].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:y,isRoot:o(this.instance),offset:i(this.instance)})}resetTransform(){if(!u)return;const y=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!NA(this.projectionDelta),S=this.getTransformTemplate(),w=S?S(this.latestValues,""):void 0,M=w!==this.prevTransformTemplateValue;y&&(l||Vl(this.latestValues)||M)&&(u(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const l=this.measurePageBox();let S=this.removeElementScroll(l);return y&&(S=this.removeTransform(S)),uB(S),{animationId:this.root.animationId,measuredBox:l,layoutBox:S,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:y}=this.options;if(!y)return rr();const l=y.measureViewportBox(),{scroll:S}=this.root;return S&&(Ia(l.x,S.offset.x),Ia(l.y,S.offset.y)),l}removeElementScroll(y){const l=rr();_s(l,y);for(let S=0;S<this.path.length;S++){const w=this.path[S],{scroll:M,options:I}=w;if(w!==this.root&&M&&I.layoutScroll){if(M.isRoot){_s(l,y);const{scroll:k}=this.root;k&&(Ia(l.x,-k.offset.x),Ia(l.y,-k.offset.y))}Ia(l.x,M.offset.x),Ia(l.y,M.offset.y)}}return l}applyTransform(y,l=!1){const S=rr();_s(S,y);for(let w=0;w<this.path.length;w++){const M=this.path[w];!l&&M.options.layoutScroll&&M.scroll&&M!==M.root&&gu(S,{x:-M.scroll.offset.x,y:-M.scroll.offset.y}),Vl(M.latestValues)&&gu(S,M.latestValues)}return Vl(this.latestValues)&&gu(S,this.latestValues),S}removeTransform(y){const l=rr();_s(l,y);for(let S=0;S<this.path.length;S++){const w=this.path[S];if(!w.instance||!Vl(w.latestValues))continue;I_(w.latestValues)&&w.updateSnapshot();const M=rr(),I=w.measurePageBox();_s(M,I),YS(l,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,M)}return Vl(this.latestValues)&&YS(l,this.latestValues),l}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var l;const S=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=S.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=S.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=S.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==S;if(!(y||w&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:I,layoutId:k}=this.options;if(!(!this.layout||!(I||k))){if(this.resolvedRelativeTargetAt=Or.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),Vd(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rr(),this.targetWithTransforms=rr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_s(this.target,this.layout.layoutBox),LA(this.target,this.targetDelta)):_s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),Vd(this.relativeTargetOrigin,this.target,j.target),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I_(this.parent.latestValues)||DA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const l=this.getLead(),S=!!this.resumingFrom||this!==l;let w=!0;if((this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty)&&(w=!1),S&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Or.timestamp&&(w=!1),w)return;const{layout:M,layoutId:I}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(M||I))return;_s(this.layoutCorrected,this.layout.layoutBox);const k=this.treeScale.x,j=this.treeScale.y;x8(this.layoutCorrected,this.treeScale,this.path,S),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=rr());const{target:X}=l;if(!X){this.projectionTransform&&(this.projectionDelta=mu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=mu(),this.projectionDeltaWithTransform=mu());const O=this.projectionTransform;Nd(this.projectionDelta,this.layoutCorrected,X,this.latestValues),this.projectionTransform=eT(this.projectionDelta,this.treeScale),(this.projectionTransform!==O||this.treeScale.x!==k||this.treeScale.y!==j)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",X)),jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),y){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(y,l=!1){const S=this.snapshot,w=S?S.latestValues:{},M={...this.latestValues},I=mu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const k=rr(),j=S?S.source:void 0,X=this.layout?this.layout.source:void 0,O=j!==X,H=this.getStack(),B=!H||H.members.length<=1,V=!!(O&&!B&&this.options.crossfade===!0&&!this.path.some(lB));this.animationProgress=0;let Z;this.mixTargetDelta=ne=>{const de=ne/1e3;sT(I.x,y.x,de),sT(I.y,y.y,de),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vd(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aB(this.relativeTarget,this.relativeTargetOrigin,k,de),Z&&V8(this.relativeTarget,Z)&&(this.isProjectionDirty=!1),Z||(Z=rr()),_s(Z,this.relativeTarget)),O&&(this.animationValues=M,z8(M,w,this.latestValues,de,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=de},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ol(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nr.update(()=>{Am.hasAnimatedSinceResize=!0,this.currentAnimation=W8(0,nT,{...y,onUpdate:l=>{this.mixTargetDelta(l),y.onUpdate&&y.onUpdate(l)},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:l,target:S,layout:w,latestValues:M}=y;if(!(!l||!S||!w)){if(this!==y&&this.layout&&w&&UA(this.options.animationType,this.layout.layoutBox,w.layoutBox)){S=this.target||rr();const I=os(this.layout.layoutBox.x);S.x.min=y.target.x.min,S.x.max=S.x.min+I;const k=os(this.layout.layoutBox.y);S.y.min=y.target.y.min,S.y.max=S.y.min+k}_s(l,S),gu(l,M),Nd(this.projectionDeltaWithTransform,this.layoutCorrected,l,M)}}registerSharedNode(y,l){this.sharedNodes.has(y)||this.sharedNodes.set(y,new j8),this.sharedNodes.get(y).add(l);const w=l.options.initialPromotionConfig;l.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(l):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var y;const{layoutId:l}=this.options;return l?((y=this.getStack())===null||y===void 0?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:l}=this.options;return l?(y=this.getStack())===null||y===void 0?void 0:y.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:l,preserveFollowOpacity:S}={}){const w=this.getStack();w&&w.promote(this,S),y&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetRotation(){const{visualElement:y}=this.options;if(!y)return;let l=!1;const{latestValues:S}=y;if((S.rotate||S.rotateX||S.rotateY||S.rotateZ)&&(l=!0),!l)return;const w={};for(let M=0;M<tT.length;M++){const I="rotate"+tT[M];S[I]&&(w[I]=S[I],y.setStaticValue(I,0))}y.render();for(const M in w)y.setStaticValue(M,w[M]);y.scheduleRender()}getProjectionStyles(y){var l,S;if(!this.instance||this.isSVG)return;if(!this.isVisible)return H8;const w={visibility:""},M=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,w.opacity="",w.pointerEvents=Pm(y==null?void 0:y.pointerEvents)||"",w.transform=M?M(this.latestValues,""):"none",w;const I=this.getLead();if(!this.projectionDelta||!this.layout||!I.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=Pm(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Vl(this.latestValues)&&(O.transform=M?M({},""):"none",this.hasProjected=!1),O}const k=I.animationValues||I.latestValues;this.applyTransformsToTarget(),w.transform=eT(this.projectionDeltaWithTransform,this.treeScale,k),M&&(w.transform=M(k,w.transform));const{x:j,y:X}=this.projectionDelta;w.transformOrigin=`${j.origin*100}% ${X.origin*100}% 0`,I.animationValues?w.opacity=I===this?(S=(l=k.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&S!==void 0?S:1:this.preserveOpacity?this.latestValues.opacity:k.opacityExit:w.opacity=I===this?k.opacity!==void 0?k.opacity:"":k.opacityExit!==void 0?k.opacityExit:0;for(const O in ug){if(k[O]===void 0)continue;const{correct:H,applyTo:B}=ug[O],V=w.transform==="none"?k[O]:H(k[O],I);if(B){const Z=B.length;for(let ne=0;ne<Z;ne++)w[B[ne]]=V}else w[O]=V}return this.options.layoutId&&(w.pointerEvents=I===this?Pm(y==null?void 0:y.pointerEvents)||"":"none"),w}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var l;return(l=y.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(rT),this.root.sharedNodes.clear()}}}function X8(e){e.updateLayout()}function Y8(e){var t;const i=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:u}=e.layout,{animationType:p}=e.options,y=i.source!==e.layout.source;p==="size"?xs(I=>{const k=y?i.measuredBox[I]:i.layoutBox[I],j=os(k);k.min=o[I].min,k.max=k.min+j}):UA(p,i.layoutBox,o)&&xs(I=>{const k=y?i.measuredBox[I]:i.layoutBox[I],j=os(o[I]);k.max=k.min+j,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[I].max=e.relativeTarget[I].min+j)});const l=mu();Nd(l,o,i.layoutBox);const S=mu();y?Nd(S,e.applyTransform(u,!0),i.measuredBox):Nd(S,o,i.layoutBox);const w=!NA(l);let M=!1;if(!e.resumeFrom){const I=e.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:k,layout:j}=I;if(k&&j){const X=rr();Vd(X,i.layoutBox,k.layoutBox);const O=rr();Vd(O,o,j.layoutBox),VA(X,O)||(M=!0),I.options.layoutRoot&&(e.relativeTarget=O,e.relativeTargetOrigin=X,e.relativeParent=I)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:S,layoutDelta:l,hasLayoutChanged:w,hasRelativeTargetChanged:M})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function Q8(e){jl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function J8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function eB(e){e.clearSnapshot()}function rT(e){e.clearMeasurements()}function tB(e){e.isLayoutDirty=!1}function nB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function iT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function rB(e){e.resolveTargetDelta()}function iB(e){e.calcProjection()}function sB(e){e.resetRotation()}function oB(e){e.removeLeadSnapshot()}function sT(e,t,i){e.translate=Nn(t.translate,0,i),e.scale=Nn(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function oT(e,t,i,o){e.min=Nn(t.min,i.min,o),e.max=Nn(t.max,i.max,o)}function aB(e,t,i,o){oT(e.x,t.x,i.x,o),oT(e.y,t.y,i.y,o)}function lB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cB={duration:.45,ease:[.4,0,.1,1]},aT=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),lT=aT("applewebkit/")&&!aT("chrome/")?Math.round:ii;function cT(e){e.min=lT(e.min),e.max=lT(e.max)}function uB(e){cT(e.x),cT(e.y)}function UA(e,t,i){return e==="position"||e==="preserve-aspect"&&!A_(JS(t),JS(i),.2)}const hB=jA({attachResizeListener:(e,t)=>Go(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),t0={current:void 0},$A=jA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!t0.current){const e=new hB({});e.mount(window),e.setOptions({layoutScroll:!0}),t0.current=e}return t0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),dB={pan:{Feature:k8},drag:{Feature:P8,ProjectionNode:$A,MeasureLayout:FA}},L_={current:null},GA={current:!1};function pB(){if(GA.current=!0,!!Xx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>L_.current=e.matches;e.addListener(t),t()}else L_.current=!1}function fB(e,t,i){const{willChange:o}=t;for(const u in t){const p=t[u],y=i[u];if(ri(p))e.addValue(u,p),mg(o)&&o.add(u);else if(ri(y))e.addValue(u,hp(p,{owner:e})),mg(o)&&o.remove(u);else if(y!==p)if(e.hasValue(u)){const l=e.getValue(u);!l.hasAnimated&&l.set(p)}else{const l=e.getStaticValue(u);e.addValue(u,hp(l!==void 0?l:p,{owner:e}))}}for(const u in i)t[u]===void 0&&e.removeValue(u);return t}const uT=new WeakMap,mB=[...nA,ti,al],gB=e=>mB.find(tA(e)),qA=Object.keys(cp),yB=qA.length,hT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],vB=e1.length;class _B{constructor({parent:t,props:i,presenceContext:o,reducedMotionConfig:u,blockInitialAnimation:p,visualState:y},l={}){this.resolveKeyframes=(k,j,X,O)=>new this.KeyframeResolver(k,j,X,O,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=h1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Nr.render(this.render,!1,!0);const{latestValues:S,renderState:w}=y;this.latestValues=S,this.baseTarget={...S},this.initialValues=i.initial?{...S}:{},this.renderState=w,this.parent=t,this.props=i,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=l,this.blockInitialAnimation=!!p,this.isControllingVariants=Qg(i),this.isVariantNode=Ik(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:M,...I}=this.scrapeMotionValuesFromProps(i,{});for(const k in I){const j=I[k];S[k]!==void 0&&ri(j)&&(j.set(S[k],!1),mg(M)&&M.add(k))}}scrapeMotionValuesFromProps(t,i){return{}}mount(t){this.current=t,uT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),GA.current||pB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:L_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uT.delete(this.current),this.projection&&this.projection.unmount(),ol(this.notifyUpdate),ol(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,i){const o=uc.has(t),u=i.on("change",y=>{this.latestValues[t]=y,this.props.onUpdate&&Nr.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),p=i.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{u(),p()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...i},o,u,p){let y,l;for(let S=0;S<yB;S++){const w=qA[S],{isEnabled:M,Feature:I,ProjectionNode:k,MeasureLayout:j}=cp[w];k&&(y=k),M(i)&&(!this.features[w]&&I&&(this.features[w]=new I(this)),j&&(l=j))}if((this.type==="html"||this.type==="svg")&&!this.projection&&y){this.projection=new y(this.latestValues,this.parent&&this.parent.projection);const{layoutId:S,layout:w,drag:M,dragConstraints:I,layoutScroll:k,layoutRoot:j}=i;this.projection.setOptions({layoutId:S,layout:w,alwaysMeasureLayout:!!M||I&&pu(I),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof w=="string"?w:"both",initialPromotionConfig:p,layoutScroll:k,layoutRoot:j})}return l}updateFeatures(){for(const t in this.features){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let o=0;o<hT.length;o++){const u=hT[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const p=t["on"+u];p&&(this.propEventSubscriptions[u]=this.on(u,p))}this.prevMotionValues=fB(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const i={};for(let o=0;o<vB;o++){const u=e1[o],p=this.props[u];(lp(p)||p===!1)&&(i[u]=p)}return i}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){i!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,i)),this.values.set(t,i),this.latestValues[t]=i.get()}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&i!==void 0&&(o=hp(i===null?void 0:i,{owner:this}),this.addValue(t,o)),o}readValue(t,i){var o;let u=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,t,this.options);return u!=null&&(typeof u=="string"&&(Jk(u)||Qk(u))?u=parseFloat(u):!gB(u)&&al.test(i)&&(u=uA(t,i)),this.setBaseTarget(t,ri(u)?u.get():u)),ri(u)?u.get():u}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i,o;const{initial:u}=this.props,p=typeof u=="string"||typeof u=="object"?(o=c1(this.props,u,(i=this.presenceContext)===null||i===void 0?void 0:i.custom))===null||o===void 0?void 0:o[t]:void 0;if(u&&p!==void 0)return p;const y=this.getBaseTargetFromProps(this.props,t);return y!==void 0&&!ri(y)?y:this.initialValues[t]!==void 0&&p===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new w1),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class ZA extends _B{constructor(){super(...arguments),this.KeyframeResolver=hA}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:o}){delete i[t],delete o[t]}}function xB(e){return window.getComputedStyle(e)}class wB extends ZA{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,i){if(uc.has(i)){const o=p1(i);return o&&o.default||0}else{const o=xB(t),u=(Fk(i)?o.getPropertyValue(i):o[i])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:i}){return zA(t,i)}build(t,i,o,u){i1(t,i,o,u.transformTemplate)}scrapeMotionValuesFromProps(t,i){return l1(t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ri(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}renderInstance(t,i,o,u){jk(t,i,o,u)}}class bB extends ZA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(uc.has(i)){const o=p1(i);return o&&o.default||0}return i=Uk.has(i)?i:Yx(i),t.getAttribute(i)}measureInstanceViewportBox(){return rr()}scrapeMotionValuesFromProps(t,i){return Gk(t,i)}build(t,i,o,u){o1(t,i,o,this.isSVGTag,u.transformTemplate)}renderInstance(t,i,o,u){$k(t,i,o,u)}mount(t){this.isSVGTag=a1(t.tagName),super.mount(t)}}const SB=(e,t)=>t1(e)?new bB(t,{enableHardwareAcceleration:!1}):new wB(t,{enableHardwareAcceleration:!0}),TB={layout:{ProjectionNode:$A,MeasureLayout:FA}},CB={...a8,...x6,...dB,...TB},Zs=AF((e,t)=>a6(e,t,CB,SB)),EB=({currentStyle:e,onStyleChange:t})=>oe.jsxs(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed z-10 flex flex-col gap-2",style:{top:"96px",right:"10px"},children:[oe.jsx(is,{onClick:()=>t("terrain"),className:lr("w-12 h-12 bg-[#343f3c]/90 backdrop-blur-sm hover:bg-[#343f3c] border border-[#ace47c]/10 rounded-xl shadow-lg transition-all duration-200",e==="terrain"&&"border-[#ace47c]/50"),title:"Terrain",children:oe.jsx(tz,{className:"w-6 h-6",style:{color:"#ace47c"}})}),oe.jsx(is,{onClick:()=>t("satellite"),className:lr("w-12 h-12 bg-[#343f3c]/90 backdrop-blur-sm hover:bg-[#343f3c] border border-[#ace47c]/10 rounded-xl shadow-lg transition-all duration-200",e==="satellite"&&"border-[#ace47c]/50"),title:"Satellite",children:oe.jsx(rz,{className:"w-6 h-6",style:{color:"#ace47c"}})})]}),n0={version:8,sources:{terrain:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attribution">CARTO</a>'}},layers:[{id:"terrain",type:"raster",source:"terrain",minzoom:0,maxzoom:19}]},PB={version:8,sources:{satellite:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:'&copy; <a href="https://www.arcgis.com/">Esri</a>'}},layers:[{id:"satellite",type:"raster",source:"satellite",minzoom:0,maxzoom:19}]},kB=(e,t)=>`
  <div class="p-3 min-w-[200px]">
    <h3 class="text-black text-lg font-semibold mb-1" style="color: black !important;">
      ${e}
    </h3>
    ${t?`<p class="text-black text-base" style="color: black !important;">${t}</p>`:""}
  </div>
`,AB=()=>{const e=$.useRef(null),t=$.useRef(null),i=$.useRef(null),o=$.useRef([]),{currentLocation:u,currentPath:p,isTracking:y,isPaused:l,pois:S,isPoiOnlyMode:w}=dl(),[M,I]=$.useState(!1),[k,j]=$.useState("terrain"),X=O=>{if(!t.current)return;const H=O==="terrain"?n0:PB;t.current.setStyle(H),j(O)};return $.useEffect(()=>{if(!(!e.current||t.current))return navigator.geolocation.getCurrentPosition(O=>{const H=[O.coords.longitude,O.coords.latitude],B=new Rl.Map({container:e.current,style:n0,center:H,zoom:Fl.ZOOM,maxZoom:Fl.MAX_ZOOM,minZoom:Fl.MIN_ZOOM,attributionControl:!0,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0});B.addControl(new Rl.NavigationControl({showCompass:!1,showZoom:!0,visualizePitch:!1})),B.on("load",()=>{w||(B.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:p.map(V=>V.coordinates)}}}),B.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Yc.line.color,"line-width":Yc.line.width,"line-opacity":Yc.line.opacity}})),i.current=new Rl.Marker({color:Yc.marker.color}).setLngLat(H).addTo(B),I(!0)}),t.current=B},O=>{console.error("Error getting initial location:",O),ql.error("Impossible d'accéder à votre position");const H=new Rl.Map({container:e.current,style:n0,center:Fl.INITIAL_LOCATION,zoom:Fl.ZOOM,maxZoom:Fl.MAX_ZOOM,minZoom:Fl.MIN_ZOOM,attributionControl:!0,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0});t.current=H,I(!0)}),()=>{t.current&&(t.current.remove(),t.current=null)}},[]),$.useEffect(()=>{!t.current||!M||(o.current.forEach(O=>O.remove()),o.current=[],S.forEach(O=>{const H=new Rl.Popup({closeButton:!0,closeOnClick:!1,maxWidth:"300px",className:"custom-popup"}).setHTML(kB(O.name,O.comment)),B=new Rl.Marker({color:Yc.marker.color}).setLngLat(O.coordinates).setPopup(H).addTo(t.current);o.current.push(B)}))},[S,M]),$.useEffect(()=>{if(!(!t.current||!M)&&(u&&(i.current?i.current.setLngLat(u):i.current=new Rl.Marker({color:Yc.marker.color}).setLngLat(u).addTo(t.current),y&&!l&&t.current.easeTo({center:u,duration:1e3})),!w)){const O=t.current.getSource("route");O&&O.setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:p.map(H=>H.coordinates)}})}},[u,p,y,l,M,w]),oe.jsxs("div",{className:"absolute inset-0 bg-background",children:[oe.jsx("div",{ref:e,className:"h-full w-full brightness-90 contrast-120"}),oe.jsx(EB,{currentStyle:k,onStyleChange:X}),oe.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-b from-background/10 to-transparent"}),l&&oe.jsx("div",{className:"absolute inset-0 bg-black/40 pointer-events-none backdrop-blur-[2px] transition-opacity duration-200"})]})};var r0="focusScope.autoFocusOnMount",i0="focusScope.autoFocusOnUnmount",dT={bubbles:!1,cancelable:!0},MB="FocusScope",WA=$.forwardRef((e,t)=>{const{loop:i=!1,trapped:o=!1,onMountAutoFocus:u,onUnmountAutoFocus:p,...y}=e,[l,S]=$.useState(null),w=ks(u),M=ks(p),I=$.useRef(null),k=oi(t,O=>S(O)),j=$.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;$.useEffect(()=>{if(o){let O=function(Z){if(j.paused||!l)return;const ne=Z.target;l.contains(ne)?I.current=ne:ka(I.current,{select:!0})},H=function(Z){if(j.paused||!l)return;const ne=Z.relatedTarget;ne!==null&&(l.contains(ne)||ka(I.current,{select:!0}))},B=function(Z){if(document.activeElement===document.body)for(const de of Z)de.removedNodes.length>0&&ka(l)};document.addEventListener("focusin",O),document.addEventListener("focusout",H);const V=new MutationObserver(B);return l&&V.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",O),document.removeEventListener("focusout",H),V.disconnect()}}},[o,l,j.paused]),$.useEffect(()=>{if(l){fT.add(j);const O=document.activeElement;if(!l.contains(O)){const B=new CustomEvent(r0,dT);l.addEventListener(r0,w),l.dispatchEvent(B),B.defaultPrevented||(IB(FB(HA(l)),{select:!0}),document.activeElement===O&&ka(l))}return()=>{l.removeEventListener(r0,w),setTimeout(()=>{const B=new CustomEvent(i0,dT);l.addEventListener(i0,M),l.dispatchEvent(B),B.defaultPrevented||ka(O??document.body,{select:!0}),l.removeEventListener(i0,M),fT.remove(j)},0)}}},[l,w,M,j]);const X=$.useCallback(O=>{if(!i&&!o||j.paused)return;const H=O.key==="Tab"&&!O.altKey&&!O.ctrlKey&&!O.metaKey,B=document.activeElement;if(H&&B){const V=O.currentTarget,[Z,ne]=DB(V);Z&&ne?!O.shiftKey&&B===ne?(O.preventDefault(),i&&ka(Z,{select:!0})):O.shiftKey&&B===Z&&(O.preventDefault(),i&&ka(ne,{select:!0})):B===V&&O.preventDefault()}},[i,o,j.paused]);return oe.jsx(Un.div,{tabIndex:-1,...y,ref:k,onKeyDown:X})});WA.displayName=MB;function IB(e,{select:t=!1}={}){const i=document.activeElement;for(const o of e)if(ka(o,{select:t}),document.activeElement!==i)return}function DB(e){const t=HA(e),i=pT(t,e),o=pT(t.reverse(),e);return[i,o]}function HA(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const u=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||u?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function pT(e,t){for(const i of e)if(!LB(i,{upTo:t}))return i}function LB(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zB(e){return e instanceof HTMLInputElement&&"select"in e}function ka(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&zB(e)&&t&&e.select()}}var fT=RB();function RB(){let e=[];return{add(t){const i=e[0];t!==i&&(i==null||i.pause()),e=mT(e,t),e.unshift(t)},remove(t){var i;e=mT(e,t),(i=e[0])==null||i.resume()}}}function mT(e,t){const i=[...e],o=i.indexOf(t);return o!==-1&&i.splice(o,1),i}function FB(e){return e.filter(t=>t.tagName!=="A")}var s0=0;function OB(){$.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gT()),document.body.insertAdjacentElement("beforeend",e[1]??gT()),s0++,()=>{s0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),s0--}},[])}function gT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var mo=function(){return mo=Object.assign||function(t){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var p in i)Object.prototype.hasOwnProperty.call(i,p)&&(t[p]=i[p])}return t},mo.apply(this,arguments)};function KA(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)t.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(i[o[u]]=e[o[u]]);return i}function BB(e,t,i){if(i||arguments.length===2)for(var o=0,u=t.length,p;o<u;o++)(p||!(o in t))&&(p||(p=Array.prototype.slice.call(t,0,o)),p[o]=t[o]);return e.concat(p||Array.prototype.slice.call(t))}var Mm="right-scroll-bar-position",Im="width-before-scroll-bar",NB="with-scroll-bars-hidden",VB="--removed-body-scroll-bar-size";function o0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jB(e,t){var i=$.useState(function(){return{value:e,callback:t,facade:{get current(){return i.value},set current(o){var u=i.value;u!==o&&(i.value=o,i.callback(o,u))}}}})[0];return i.callback=t,i.facade}var UB=typeof window<"u"?$.useLayoutEffect:$.useEffect,yT=new WeakMap;function $B(e,t){var i=jB(null,function(o){return e.forEach(function(u){return o0(u,o)})});return UB(function(){var o=yT.get(i);if(o){var u=new Set(o),p=new Set(e),y=i.current;u.forEach(function(l){p.has(l)||o0(l,null)}),p.forEach(function(l){u.has(l)||o0(l,y)})}yT.set(i,e)},[e]),i}function GB(e){return e}function qB(e,t){t===void 0&&(t=GB);var i=[],o=!1,u={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(p){var y=t(p,o);return i.push(y),function(){i=i.filter(function(l){return l!==y})}},assignSyncMedium:function(p){for(o=!0;i.length;){var y=i;i=[],y.forEach(p)}i={push:function(l){return p(l)},filter:function(){return i}}},assignMedium:function(p){o=!0;var y=[];if(i.length){var l=i;i=[],l.forEach(p),y=i}var S=function(){var M=y;y=[],M.forEach(p)},w=function(){return Promise.resolve().then(S)};w(),i={push:function(M){y.push(M),w()},filter:function(M){return y=y.filter(M),i}}}};return u}function ZB(e){e===void 0&&(e={});var t=qB(null);return t.options=mo({async:!0,ssr:!1},e),t}var XA=function(e){var t=e.sideCar,i=KA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return $.createElement(o,mo({},i))};XA.isSideCarExport=!0;function WB(e,t){return e.useMedium(t),XA}var YA=ZB(),a0=function(){},ny=$.forwardRef(function(e,t){var i=$.useRef(null),o=$.useState({onScrollCapture:a0,onWheelCapture:a0,onTouchMoveCapture:a0}),u=o[0],p=o[1],y=e.forwardProps,l=e.children,S=e.className,w=e.removeScrollBar,M=e.enabled,I=e.shards,k=e.sideCar,j=e.noIsolation,X=e.inert,O=e.allowPinchZoom,H=e.as,B=H===void 0?"div":H,V=e.gapMode,Z=KA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=k,de=$B([i,t]),Se=mo(mo({},Z),u);return $.createElement($.Fragment,null,M&&$.createElement(ne,{sideCar:YA,removeScrollBar:w,shards:I,noIsolation:j,inert:X,setCallbacks:p,allowPinchZoom:!!O,lockRef:i,gapMode:V}),y?$.cloneElement($.Children.only(l),mo(mo({},Se),{ref:de})):$.createElement(B,mo({},Se,{className:S,ref:de}),l))});ny.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ny.classNames={fullWidth:Im,zeroRight:Mm};var HB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=HB();return t&&e.setAttribute("nonce",t),e}function XB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function YB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QB=function(){var e=0,t=null;return{add:function(i){e==0&&(t=KB())&&(XB(t,i),YB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JB=function(){var e=QB();return function(t,i){$.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&i])}},QA=function(){var e=JB(),t=function(i){var o=i.styles,u=i.dynamic;return e(o,u),null};return t},eN={left:0,top:0,right:0,gap:0},l0=function(e){return parseInt(e||"",10)||0},tN=function(e){var t=window.getComputedStyle(document.body),i=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],u=t[e==="padding"?"paddingRight":"marginRight"];return[l0(i),l0(o),l0(u)]},nN=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eN;var t=tN(e),i=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-i+t[2]-t[0])}},rN=QA(),Eu="data-scroll-locked",iN=function(e,t,i,o){var u=e.left,p=e.top,y=e.right,l=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(NB,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(l,"px ").concat(o,`;
  }
  body[`).concat(Eu,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),i==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(p,`px;
    padding-right: `).concat(y,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(o,`;
    `),i==="padding"&&"padding-right: ".concat(l,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mm,` {
    right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(Im,` {
    margin-right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(Mm," .").concat(Mm,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Im," .").concat(Im,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Eu,`] {
    `).concat(VB,": ").concat(l,`px;
  }
`)},vT=function(){var e=parseInt(document.body.getAttribute(Eu)||"0",10);return isFinite(e)?e:0},sN=function(){$.useEffect(function(){return document.body.setAttribute(Eu,(vT()+1).toString()),function(){var e=vT()-1;e<=0?document.body.removeAttribute(Eu):document.body.setAttribute(Eu,e.toString())}},[])},oN=function(e){var t=e.noRelative,i=e.noImportant,o=e.gapMode,u=o===void 0?"margin":o;sN();var p=$.useMemo(function(){return nN(u)},[u]);return $.createElement(rN,{styles:iN(p,!t,u,i?"":"!important")})},z_=!1;if(typeof window<"u")try{var lm=Object.defineProperty({},"passive",{get:function(){return z_=!0,!0}});window.addEventListener("test",lm,lm),window.removeEventListener("test",lm,lm)}catch{z_=!1}var Qc=z_?{passive:!1}:!1,aN=function(e){return e.tagName==="TEXTAREA"},JA=function(e,t){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[t]!=="hidden"&&!(i.overflowY===i.overflowX&&!aN(e)&&i[t]==="visible")},lN=function(e){return JA(e,"overflowY")},cN=function(e){return JA(e,"overflowX")},_T=function(e,t){var i=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var u=eM(e,o);if(u){var p=tM(e,o),y=p[1],l=p[2];if(y>l)return!0}o=o.parentNode}while(o&&o!==i.body);return!1},uN=function(e){var t=e.scrollTop,i=e.scrollHeight,o=e.clientHeight;return[t,i,o]},hN=function(e){var t=e.scrollLeft,i=e.scrollWidth,o=e.clientWidth;return[t,i,o]},eM=function(e,t){return e==="v"?lN(t):cN(t)},tM=function(e,t){return e==="v"?uN(t):hN(t)},dN=function(e,t){return e==="h"&&t==="rtl"?-1:1},pN=function(e,t,i,o,u){var p=dN(e,window.getComputedStyle(t).direction),y=p*o,l=i.target,S=t.contains(l),w=!1,M=y>0,I=0,k=0;do{var j=tM(e,l),X=j[0],O=j[1],H=j[2],B=O-H-p*X;(X||B)&&eM(e,l)&&(I+=B,k+=X),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!S&&l!==document.body||S&&(t.contains(l)||t===l));return(M&&(Math.abs(I)<1||!u)||!M&&(Math.abs(k)<1||!u))&&(w=!0),w},cm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},xT=function(e){return[e.deltaX,e.deltaY]},wT=function(e){return e&&"current"in e?e.current:e},fN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},mN=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},gN=0,Jc=[];function yN(e){var t=$.useRef([]),i=$.useRef([0,0]),o=$.useRef(),u=$.useState(gN++)[0],p=$.useState(QA)[0],y=$.useRef(e);$.useEffect(function(){y.current=e},[e]),$.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var O=BB([e.lockRef.current],(e.shards||[]).map(wT),!0).filter(Boolean);return O.forEach(function(H){return H.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),O.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var l=$.useCallback(function(O,H){if("touches"in O&&O.touches.length===2||O.type==="wheel"&&O.ctrlKey)return!y.current.allowPinchZoom;var B=cm(O),V=i.current,Z="deltaX"in O?O.deltaX:V[0]-B[0],ne="deltaY"in O?O.deltaY:V[1]-B[1],de,Se=O.target,ke=Math.abs(Z)>Math.abs(ne)?"h":"v";if("touches"in O&&ke==="h"&&Se.type==="range")return!1;var we=_T(ke,Se);if(!we)return!0;if(we?de=ke:(de=ke==="v"?"h":"v",we=_T(ke,Se)),!we)return!1;if(!o.current&&"changedTouches"in O&&(Z||ne)&&(o.current=de),!de)return!0;var Ye=o.current||de;return pN(Ye,H,O,Ye==="h"?Z:ne,!0)},[]),S=$.useCallback(function(O){var H=O;if(!(!Jc.length||Jc[Jc.length-1]!==p)){var B="deltaY"in H?xT(H):cm(H),V=t.current.filter(function(de){return de.name===H.type&&(de.target===H.target||H.target===de.shadowParent)&&fN(de.delta,B)})[0];if(V&&V.should){H.cancelable&&H.preventDefault();return}if(!V){var Z=(y.current.shards||[]).map(wT).filter(Boolean).filter(function(de){return de.contains(H.target)}),ne=Z.length>0?l(H,Z[0]):!y.current.noIsolation;ne&&H.cancelable&&H.preventDefault()}}},[]),w=$.useCallback(function(O,H,B,V){var Z={name:O,delta:H,target:B,should:V,shadowParent:vN(B)};t.current.push(Z),setTimeout(function(){t.current=t.current.filter(function(ne){return ne!==Z})},1)},[]),M=$.useCallback(function(O){i.current=cm(O),o.current=void 0},[]),I=$.useCallback(function(O){w(O.type,xT(O),O.target,l(O,e.lockRef.current))},[]),k=$.useCallback(function(O){w(O.type,cm(O),O.target,l(O,e.lockRef.current))},[]);$.useEffect(function(){return Jc.push(p),e.setCallbacks({onScrollCapture:I,onWheelCapture:I,onTouchMoveCapture:k}),document.addEventListener("wheel",S,Qc),document.addEventListener("touchmove",S,Qc),document.addEventListener("touchstart",M,Qc),function(){Jc=Jc.filter(function(O){return O!==p}),document.removeEventListener("wheel",S,Qc),document.removeEventListener("touchmove",S,Qc),document.removeEventListener("touchstart",M,Qc)}},[]);var j=e.removeScrollBar,X=e.inert;return $.createElement($.Fragment,null,X?$.createElement(p,{styles:mN(u)}):null,j?$.createElement(oN,{gapMode:e.gapMode}):null)}function vN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _N=WB(YA,yN);var nM=$.forwardRef(function(e,t){return $.createElement(ny,mo({},e,{ref:t,sideCar:_N}))});nM.classNames=ny.classNames;var xN=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},eu=new WeakMap,um=new WeakMap,hm={},c0=0,rM=function(e){return e&&(e.host||rM(e.parentNode))},wN=function(e,t){return t.map(function(i){if(e.contains(i))return i;var o=rM(i);return o&&e.contains(o)?o:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},bN=function(e,t,i,o){var u=wN(t,Array.isArray(e)?e:[e]);hm[i]||(hm[i]=new WeakMap);var p=hm[i],y=[],l=new Set,S=new Set(u),w=function(I){!I||l.has(I)||(l.add(I),w(I.parentNode))};u.forEach(w);var M=function(I){!I||S.has(I)||Array.prototype.forEach.call(I.children,function(k){if(l.has(k))M(k);else try{var j=k.getAttribute(o),X=j!==null&&j!=="false",O=(eu.get(k)||0)+1,H=(p.get(k)||0)+1;eu.set(k,O),p.set(k,H),y.push(k),O===1&&X&&um.set(k,!0),H===1&&k.setAttribute(i,"true"),X||k.setAttribute(o,"true")}catch(B){console.error("aria-hidden: cannot operate on ",k,B)}})};return M(t),l.clear(),c0++,function(){y.forEach(function(I){var k=eu.get(I)-1,j=p.get(I)-1;eu.set(I,k),p.set(I,j),k||(um.has(I)||I.removeAttribute(o),um.delete(I)),j||I.removeAttribute(i)}),c0--,c0||(eu=new WeakMap,eu=new WeakMap,um=new WeakMap,hm={})}},SN=function(e,t,i){i===void 0&&(i="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),u=xN(e);return u?(o.push.apply(o,Array.from(u.querySelectorAll("[aria-live]"))),bN(o,u,i,"aria-hidden")):function(){return null}},b1="Dialog",[iM,xV]=zg(b1),[TN,Qs]=iM(b1),sM=e=>{const{__scopeDialog:t,children:i,open:o,defaultOpen:u,onOpenChange:p,modal:y=!0}=e,l=$.useRef(null),S=$.useRef(null),[w=!1,M]=Dx({prop:o,defaultProp:u,onChange:p});return oe.jsx(TN,{scope:t,triggerRef:l,contentRef:S,contentId:jv(),titleId:jv(),descriptionId:jv(),open:w,onOpenChange:M,onOpenToggle:$.useCallback(()=>M(I=>!I),[M]),modal:y,children:i})};sM.displayName=b1;var oM="DialogTrigger",CN=$.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Qs(oM,i),p=oi(t,u.triggerRef);return oe.jsx(Un.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":C1(u.open),...o,ref:p,onClick:En(e.onClick,u.onOpenToggle)})});CN.displayName=oM;var S1="DialogPortal",[EN,aM]=iM(S1,{forceMount:void 0}),lM=e=>{const{__scopeDialog:t,forceMount:i,children:o,container:u}=e,p=Qs(S1,t);return oe.jsx(EN,{scope:t,forceMount:i,children:$.Children.map(o,y=>oe.jsx(Ju,{present:i||p.open,children:oe.jsx(Ix,{asChild:!0,container:u,children:y})}))})};lM.displayName=S1;var yg="DialogOverlay",cM=$.forwardRef((e,t)=>{const i=aM(yg,e.__scopeDialog),{forceMount:o=i.forceMount,...u}=e,p=Qs(yg,e.__scopeDialog);return p.modal?oe.jsx(Ju,{present:o||p.open,children:oe.jsx(PN,{...u,ref:t})}):null});cM.displayName=yg;var PN=$.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Qs(yg,i);return oe.jsx(nM,{as:$u,allowPinchZoom:!0,shards:[u.contentRef],children:oe.jsx(Un.div,{"data-state":C1(u.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),ac="DialogContent",uM=$.forwardRef((e,t)=>{const i=aM(ac,e.__scopeDialog),{forceMount:o=i.forceMount,...u}=e,p=Qs(ac,e.__scopeDialog);return oe.jsx(Ju,{present:o||p.open,children:p.modal?oe.jsx(kN,{...u,ref:t}):oe.jsx(AN,{...u,ref:t})})});uM.displayName=ac;var kN=$.forwardRef((e,t)=>{const i=Qs(ac,e.__scopeDialog),o=$.useRef(null),u=oi(t,i.contentRef,o);return $.useEffect(()=>{const p=o.current;if(p)return SN(p)},[]),oe.jsx(hM,{...e,ref:u,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:En(e.onCloseAutoFocus,p=>{var y;p.preventDefault(),(y=i.triggerRef.current)==null||y.focus()}),onPointerDownOutside:En(e.onPointerDownOutside,p=>{const y=p.detail.originalEvent,l=y.button===0&&y.ctrlKey===!0;(y.button===2||l)&&p.preventDefault()}),onFocusOutside:En(e.onFocusOutside,p=>p.preventDefault())})}),AN=$.forwardRef((e,t)=>{const i=Qs(ac,e.__scopeDialog),o=$.useRef(!1),u=$.useRef(!1);return oe.jsx(hM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:p=>{var y,l;(y=e.onCloseAutoFocus)==null||y.call(e,p),p.defaultPrevented||(o.current||(l=i.triggerRef.current)==null||l.focus(),p.preventDefault()),o.current=!1,u.current=!1},onInteractOutside:p=>{var S,w;(S=e.onInteractOutside)==null||S.call(e,p),p.defaultPrevented||(o.current=!0,p.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const y=p.target;((w=i.triggerRef.current)==null?void 0:w.contains(y))&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&u.current&&p.preventDefault()}})}),hM=$.forwardRef((e,t)=>{const{__scopeDialog:i,trapFocus:o,onOpenAutoFocus:u,onCloseAutoFocus:p,...y}=e,l=Qs(ac,i),S=$.useRef(null),w=oi(t,S);return OB(),oe.jsxs(oe.Fragment,{children:[oe.jsx(WA,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:u,onUnmountAutoFocus:p,children:oe.jsx(Rg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":C1(l.open),...y,ref:w,onDismiss:()=>l.onOpenChange(!1)})}),oe.jsxs(oe.Fragment,{children:[oe.jsx(IN,{titleId:l.titleId}),oe.jsx(LN,{contentRef:S,descriptionId:l.descriptionId})]})]})}),T1="DialogTitle",dM=$.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Qs(T1,i);return oe.jsx(Un.h2,{id:u.titleId,...o,ref:t})});dM.displayName=T1;var pM="DialogDescription",fM=$.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Qs(pM,i);return oe.jsx(Un.p,{id:u.descriptionId,...o,ref:t})});fM.displayName=pM;var mM="DialogClose",MN=$.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Qs(mM,i);return oe.jsx(Un.button,{type:"button",...o,ref:t,onClick:En(e.onClick,()=>u.onOpenChange(!1))})});MN.displayName=mM;function C1(e){return e?"open":"closed"}var gM="DialogTitleWarning",[wV,yM]=fL(gM,{contentName:ac,titleName:T1,docsSlug:"dialog"}),IN=({titleId:e})=>{const t=yM(gM),i=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return $.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},DN="DialogDescriptionWarning",LN=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yM(DN).contentName}}.`;return $.useEffect(()=>{var p;const u=(p=e.current)==null?void 0:p.getAttribute("aria-describedby");t&&u&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null},zN=sM,RN=lM,vM=cM,_M=uM,xM=dM,wM=fM;const FN=()=>{const[e,t]=$.useState(!1);return $.useEffect(()=>{const i=()=>{if(!window.visualViewport)return;const o=window.visualViewport.height<window.innerHeight*.8;t(o)};return window.visualViewport&&(window.visualViewport.addEventListener("resize",i),window.visualViewport.addEventListener("scroll",i)),window.addEventListener("resize",i),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",i),window.visualViewport.removeEventListener("scroll",i)),window.removeEventListener("resize",i)}},[]),e},dp=zN,ON=RN,bM=$.forwardRef(({className:e,...t},i)=>oe.jsx(vM,{ref:i,className:lr("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));bM.displayName=vM.displayName;const Wu=$.forwardRef(({className:e,children:t,...i},o)=>{const u=FN();return oe.jsxs(ON,{children:[oe.jsx(bM,{}),oe.jsx(_M,{ref:o,className:lr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-3xl sm:w-full",e),style:{background:"hsl(167 49% 7% / 0.95)",backdropFilter:"blur(12px)",transition:"all 0.2s ease-out",maxHeight:u?"50vh":"85vh",overflowY:"auto",margin:"auto",transform:u?"translate(-50%, -85%)":"translate(-50%, -50%)",position:"fixed"},...i,children:t})]})});Wu.displayName=_M.displayName;const Hu=({className:e,...t})=>oe.jsx("div",{className:lr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Hu.displayName="DialogHeader";const Ku=$.forwardRef(({className:e,...t},i)=>oe.jsx(xM,{ref:i,className:lr("text-lg font-semibold leading-none tracking-tight",e),...t}));Ku.displayName=xM.displayName;const BN=$.forwardRef(({className:e,...t},i)=>oe.jsx(wM,{ref:i,className:lr("text-sm text-muted-foreground",e),...t}));BN.displayName=wM.displayName;const SM=$.forwardRef(({className:e,...t},i)=>oe.jsx("textarea",{className:lr("flex min-h-[80px] w-full rounded-3xl border border-input bg-background px-4 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[0.5px] focus-visible:ring-primary/50 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));SM.displayName="Textarea";const E1=$.forwardRef(({className:e,type:t,...i},o)=>oe.jsx("input",{type:t,className:lr("flex h-10 w-full rounded-full border border-input bg-background px-4 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[0.5px] focus-visible:ring-primary/50 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...i}));E1.displayName="Input";const NN=({isOpen:e,onClose:t,capturedLocation:i})=>{const[o,u]=$.useState(""),[p,y]=$.useState(""),{addPOI:l}=dl(),S=()=>{o.trim()&&(l({coordinates:i,name:o.trim(),comment:p.trim()}),u(""),y(""),t())};return oe.jsx(dp,{open:e,modal:!0,children:oe.jsxs(Wu,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[oe.jsx(Hu,{children:oe.jsx(Ku,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Ajouter un Point d'Intérêt"})}),oe.jsxs(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[oe.jsx(E1,{placeholder:"Nom du point d'intérêt",value:o,onChange:w=>u(w.target.value),className:"h-12 text-base md:text-lg placeholder:text-foreground/50"}),oe.jsx(SM,{placeholder:"Description (optionnel)",value:p,onChange:w=>y(w.target.value),className:"resize-none h-24 text-base md:text-lg placeholder:text-foreground/50"}),oe.jsxs("div",{className:"flex justify-end gap-3",children:[oe.jsx(is,{variant:"outline",onClick:t,className:"bg-background/50 text-foreground hover:bg-accent/50 h-12",children:"Annuler"}),oe.jsx(is,{onClick:S,disabled:!o.trim(),className:"bg-primary text-primary-foreground hover:bg-primary/90 h-12 button-primary",children:"Ajouter"})]})]})]})})},VN=(e,t,i)=>{const o=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="QROSS Tracker"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t}</name>
    <time>${new Date().toISOString()}</time>
  </metadata>`,u=i.map(({coordinates:[S,w],name:M,comment:I})=>`  <wpt lat="${w.toFixed(6)}" lon="${S.toFixed(6)}">
    <name>${M}</name>
    <desc>${I}</desc>
    <sym>Flag, Blue</sym>
  </wpt>`).join(`
`),p=e.map(({coordinates:[S,w],altitude:M,timestamp:I})=>`      <trkpt lat="${w.toFixed(6)}" lon="${S.toFixed(6)}">
        ${M!==null?`<ele>${M.toFixed(1)}</ele>`:""}
        <time>${new Date(I).toISOString()}</time>
      </trkpt>`).join(`
`),y=`
  <trk>
    <name>${t}</name>
    <desc>Track recorded by QROSS Tracker</desc>
    <trkseg>
${p}
    </trkseg>
  </trk>`;return`${o}
${u}
${y}
</gpx>`},jN=(e,t,i=[])=>{const o=VN(e,t,i),u=new Blob([o],{type:"application/gpx+xml"}),p=URL.createObjectURL(u),y=document.createElement("a"),l=new Date().toISOString().split("T")[0],S=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();y.href=p,y.download=`${S}_${l}.gpx`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p)},UN=({isOpen:e,onClose:t,onNewTrack:i})=>{const{currentPath:o,trackName:u,pois:p}=dl(),[y,l]=$.useState(!1),S=()=>{o.length>0&&(jN(o,u,p),l(!0))},w=()=>{l(!1),t(),i()};return y?oe.jsx(dp,{open:!0,modal:!0,children:oe.jsxs(Wu,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[oe.jsx(Hu,{className:"mb-4",children:oe.jsx(Ku,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Fichier GPX exporté"})}),oe.jsx("div",{className:"flex justify-center",children:oe.jsx(is,{onClick:w,className:"w-full h-12 bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:"OK"})})]})}):oe.jsx(dp,{open:e,modal:!0,children:oe.jsxs(Wu,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[oe.jsx(Hu,{className:"mb-4",children:oe.jsx(Ku,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Enregistrement Terminé"})}),oe.jsx(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:oe.jsxs("div",{className:"flex flex-col gap-4",children:[oe.jsxs(is,{onClick:S,className:"h-12 bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:[oe.jsx(JL,{className:"mr-2 h-5 w-5"}),"Télécharger le GPX"]}),oe.jsxs(is,{onClick:w,className:"h-12 text-white hover:bg-muted/90 button-primary",style:{background:"hsl(167 37% 16%)"},children:[oe.jsx(_P,{className:"mr-2 h-5 w-5"}),"Nouveau Parcours"]})]})})]})})};function $N(e){const t=$.useRef({value:e,previous:e});return $.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var P1="Switch",[GN,bV]=zg(P1),[qN,ZN]=GN(P1),TM=$.forwardRef((e,t)=>{const{__scopeSwitch:i,name:o,checked:u,defaultChecked:p,required:y,disabled:l,value:S="on",onCheckedChange:w,form:M,...I}=e,[k,j]=$.useState(null),X=oi(t,Z=>j(Z)),O=$.useRef(!1),H=k?M||!!k.closest("form"):!0,[B=!1,V]=Dx({prop:u,defaultProp:p,onChange:w});return oe.jsxs(qN,{scope:i,checked:B,disabled:l,children:[oe.jsx(Un.button,{type:"button",role:"switch","aria-checked":B,"aria-required":y,"data-state":PM(B),"data-disabled":l?"":void 0,disabled:l,value:S,...I,ref:X,onClick:En(e.onClick,Z=>{V(ne=>!ne),H&&(O.current=Z.isPropagationStopped(),O.current||Z.stopPropagation())})}),H&&oe.jsx(WN,{control:k,bubbles:!O.current,name:o,value:S,checked:B,required:y,disabled:l,form:M,style:{transform:"translateX(-100%)"}})]})});TM.displayName=P1;var CM="SwitchThumb",EM=$.forwardRef((e,t)=>{const{__scopeSwitch:i,...o}=e,u=ZN(CM,i);return oe.jsx(Un.span,{"data-state":PM(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:t})});EM.displayName=CM;var WN=e=>{const{control:t,checked:i,bubbles:o=!0,...u}=e,p=$.useRef(null),y=$N(i),l=NP(t);return $.useEffect(()=>{const S=p.current,w=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(w,"checked").set;if(y!==i&&I){const k=new Event("click",{bubbles:o});I.call(S,i),S.dispatchEvent(k)}},[y,i,o]),oe.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...u,tabIndex:-1,ref:p,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function PM(e){return e?"checked":"unchecked"}var kM=TM,HN=EM;const AM=$.forwardRef(({className:e,...t},i)=>oe.jsx(kM,{className:lr("peer inline-flex h-8 w-16 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-primary",e),...t,ref:i,children:oe.jsx(HN,{className:lr("pointer-events-none block h-7 w-7 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-8 data-[state=unchecked]:translate-x-0")})}));AM.displayName=kM.displayName;var KN="Label",MM=$.forwardRef((e,t)=>oe.jsx(Un.label,{...e,ref:t,onMouseDown:i=>{var u;i.target.closest("button, input, select, textarea")||((u=e.onMouseDown)==null||u.call(e,i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));MM.displayName=KN;var IM=MM;const XN=Fx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R_=$.forwardRef(({className:e,...t},i)=>oe.jsx(IM,{ref:i,className:lr(XN(),e),...t}));R_.displayName=IM.displayName;const YN=({onClose:e})=>{const[t,i]=$.useState(""),[o,u]=$.useState(!1),{startTracking:p}=dl(),[y,l]=$.useState(!0),S=()=>{t.trim()&&(p(t.trim(),o),l(!1),e==null||e())};return oe.jsx(dp,{open:y,modal:!0,children:oe.jsxs(Wu,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[oe.jsx(Hu,{className:"mb-1",children:oe.jsx(Ku,{className:"text-lg md:text-xl font-bold tracking-tight text-foreground",children:"Créer un nouveau parcours"})}),oe.jsxs(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[oe.jsx("p",{className:"text-sm text-foreground/80 leading-snug -mt-1",children:"Pour créer un nouveau parcours, entrez le nom de votre parcours ci-dessous et autorisez la géolocalisation."}),oe.jsx("div",{children:oe.jsx(E1,{placeholder:"Nom du parcours",value:t,onChange:w=>i(w.target.value),className:"h-10 text-base placeholder:text-foreground/50"})}),oe.jsxs("div",{className:"flex items-center space-x-3 px-1",children:[oe.jsx("div",{className:"flex-1 text-right",children:oe.jsxs(R_,{htmlFor:"poi-only",className:`text-[13px] leading-[1.1] ${o?"text-foreground/80":"text-[#ace47c] font-bold"}`,children:["Parcours +",oe.jsx("br",{}),"Points d'intérêt"]})}),oe.jsx(AM,{id:"poi-only",checked:o,onCheckedChange:u,className:"data-[state=checked]:bg-[#ace47c] data-[state=unchecked]:bg-[#ace47c]"}),oe.jsx("div",{className:"flex-1",children:oe.jsxs(R_,{htmlFor:"poi-only",className:`text-[13px] leading-[1.1] ${o?"text-[#ace47c] font-bold":"text-foreground/80"}`,children:["Points d'intérêt",oe.jsx("br",{}),"uniquement"]})})]}),oe.jsx("div",{className:"flex justify-center pt-1",children:oe.jsx(is,{onClick:S,disabled:!t.trim(),className:"w-full h-12 px-6 text-base font-bold bg-[#ace47c] text-[#0f1a17] hover:bg-[#ace47c]/90 rounded-full button-primary",children:"Démarrer l'enregistrement"})})]})]})})},QN=({isOpen:e,onClose:t,onStop:i})=>{const{resumeTracking:o}=dl(),u=()=>{o(),t()},p=()=>{i(),t()};return oe.jsx(dp,{open:e,modal:!0,children:oe.jsxs(Wu,{className:"w-[90vw] max-w-md mx-auto",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[oe.jsx(Hu,{className:"mb-4",children:oe.jsx(Ku,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Enregistrement en pause"})}),oe.jsxs(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[oe.jsxs(is,{onClick:u,className:"w-full h-12 bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:[oe.jsx(_P,{className:"mr-2 h-5 w-5"}),"Reprendre l'enregistrement"]}),oe.jsxs(is,{onClick:p,className:"w-full h-12 text-white hover:bg-muted/90 button-primary",style:{background:"hsl(167 37% 16%)"},children:[oe.jsx(iz,{className:"mr-2 h-5 w-5"}),"Arrêter l'enregistrement"]})]})]})})},JN=()=>{const{isTracking:e,stopTracking:t,pauseTracking:i,currentLocation:o}=dl(),[u,p]=$.useState(!1),[y,l]=$.useState(!1),[S,w]=$.useState(!0),[M,I]=$.useState(!1),[k,j]=$.useState(null),X=()=>{i(),I(!0)},O=()=>{t(),I(!1),l(!0)},H=()=>{w(!0)},B=()=>{o&&(j(o),p(!0))};return oe.jsxs(oe.Fragment,{children:[e&&oe.jsx(Zs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-[25px] left-0 right-0 p-4 flex justify-center items-center gap-4 z-50 pointer-events-none",children:oe.jsxs("div",{className:"flex gap-4 pointer-events-auto",children:[oe.jsx(is,{onClick:X,className:"button-control button-primary",style:{background:"#343f3c",width:"128px",height:"64px"},children:oe.jsx(nz,{style:{color:"#ace47c",width:"40px",height:"40px"}})}),oe.jsx(is,{onClick:B,className:"button-control button-primary",style:{background:"#343f3c",width:"128px",height:"64px"},children:oe.jsx(ez,{style:{color:"#ace47c",width:"40px",height:"40px"}})})]})}),k&&oe.jsx(NN,{isOpen:u,onClose:()=>{p(!1),j(null)},capturedLocation:k}),oe.jsx(QN,{isOpen:M,onClose:()=>I(!1),onStop:O}),oe.jsx(UN,{isOpen:y,onClose:()=>l(!1),onNewTrack:H}),S&&oe.jsx(YN,{onClose:()=>w(!1)})]})},eV=e=>e.length<2?0:lF(Sk(e),{units:"kilometers"}),tV=e=>{if(e.length<2)return 0;let t=0;for(let i=1;i<e.length;i++){const o=e[i-1].altitude,u=e[i].altitude;if(o!==null&&u!==null){const p=u-o;p>0&&(t+=p)}}return t},bT=e=>e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(2)} km`,nV=e=>e===null?"-- m":`${Math.round(e)} m`,rV=e=>`${Math.round(e)}`,iV=()=>{const{isTracking:e,currentPath:t,currentAltitude:i,trackName:o,isPoiOnlyMode:u}=dl();if(!e||t.length===0)return null;const p=eV(t.map(l=>l.coordinates)),y=tV(t);return oe.jsxs(Zs.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"fixed top-24 -left-2 z-10 flex flex-col gap-1.5",children:[oe.jsx(Zs.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-auto min-w-[90px] mb-1",children:oe.jsxs("div",{className:"flex flex-col items-center",children:[oe.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Parcours"}),oe.jsx("p",{className:"text-base font-bold text-center",style:{color:"#ace47c"},children:o})]})}),oe.jsx(Zs.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:oe.jsxs("div",{className:"flex flex-col items-center",children:[oe.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Altitude"}),oe.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[oe.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:nV(i).split(" ")[0]}),oe.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:"m"})]})]})}),!u&&oe.jsxs(oe.Fragment,{children:[oe.jsx(Zs.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:oe.jsxs("div",{className:"flex flex-col items-center",children:[oe.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Distance"}),oe.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[oe.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:bT(p).split(" ")[0]}),oe.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:bT(p).split(" ")[1]})]})]})}),oe.jsx(Zs.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:oe.jsxs("div",{className:"flex flex-col items-center",children:[oe.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Dénivelé +"}),oe.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[oe.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:rV(y)}),oe.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:"m"})]})]})})]})]})},sV=()=>oe.jsxs("svg",{width:"125",height:"31",viewBox:"0 0 125 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-10 md:h-12 w-auto",children:[oe.jsx("path",{d:"M27.7573 28.4275C24.6873 28.4275 23.0073 25.9575 21.5173 23.7675C20.0973 21.6875 19.1373 20.4275 17.7573 20.4275C16.9273 20.4275 16.2573 19.7575 16.2573 18.9275C16.2573 18.0975 16.9273 17.4275 17.7573 17.4275C20.8273 17.4275 22.5073 19.8975 23.9973 22.0875C25.4173 24.1675 26.3773 25.4275 27.7573 25.4275C28.5873 25.4275 29.2573 26.0975 29.2573 26.9275C29.2573 27.7575 28.5873 28.4275 27.7573 28.4275Z",fill:"#DEAD78"}),oe.jsx("path",{d:"M19.4475 25.1775C19.7375 25.5975 20.0475 26.0575 20.4075 26.5375L17.1275 29.8175C16.6175 30.3175 15.9475 30.5775 15.2875 30.5775C14.6275 30.5775 13.9575 30.3175 13.4475 29.8175L8.4975 24.8675L10.7575 22.5975L15.2875 27.1275L18.5275 23.8875C18.8575 24.3175 19.1875 24.7975 19.4475 25.1775Z",fill:"#324540"}),oe.jsx("path",{d:"M30.5775 15.2875C30.5775 15.9775 30.3075 16.6375 29.8175 17.1275L26.1475 20.7975C26.1475 20.7975 26.0875 20.7075 26.0575 20.6675C25.5475 19.9075 24.9475 19.0375 24.2175 18.1975L27.1275 15.2875L22.5975 10.7575L24.8675 8.4975L29.8175 13.4475C30.3075 13.9375 30.5775 14.5875 30.5775 15.2875Z",fill:"#324540"}),oe.jsx("path",{d:"M19.8175 7.9675L15.2875 3.4375L10.7575 7.9675L8.4975 5.7075L13.4475 0.7575C14.4575 -0.2525 16.1075 -0.2525 17.1275 0.7575L22.0775 5.7075L19.8175 7.9675Z",fill:"#324540"}),oe.jsx("path",{d:"M5.7075 22.0775L0.7575 17.1275C-0.2525 16.1175 -0.2525 14.4675 0.7575 13.4475L5.7075 8.4975L7.9675 10.7575L3.4375 15.2875L7.9675 19.8175L5.7075 22.0775Z",fill:"#324540"}),oe.jsx("path",{d:"M55.7274 17.8287C55.0974 19.0487 54.2074 20.0487 53.0774 20.8287C51.9374 21.6087 50.6474 22.1087 49.1874 22.3187V25.4387H46.0674V22.3187C44.6074 22.1087 43.3174 21.6187 42.1774 20.8287C41.0374 20.0487 40.1574 19.0487 39.5274 17.8287C38.8974 16.6087 38.5774 15.2687 38.5774 13.7987C38.5774 12.1687 38.9674 10.6887 39.7574 9.36867C40.5374 8.04867 41.6174 7.01867 42.9974 6.26867C44.3774 5.51867 45.9174 5.14867 47.6274 5.14867C49.3374 5.14867 50.8874 5.51867 52.2574 6.26867C53.6374 7.00867 54.7174 8.03867 55.4974 9.34867C56.2774 10.6587 56.6774 12.1387 56.6774 13.7887C56.6774 15.2587 56.3574 16.6087 55.7274 17.8187V17.8287ZM52.3074 17.5387C53.1274 16.4987 53.5274 15.2487 53.5274 13.7987C53.5274 12.6787 53.2674 11.6687 52.7574 10.7587C52.2474 9.85867 51.5374 9.14867 50.6474 8.64867C49.7474 8.14867 48.7474 7.88867 47.6274 7.88867C46.5074 7.88867 45.4974 8.13867 44.6074 8.64867C43.7074 9.14867 43.0074 9.85867 42.4974 10.7587C41.9874 11.6587 41.7274 12.6787 41.7274 13.7987C41.7274 15.2587 42.1374 16.4987 42.9474 17.5287C43.7674 18.5587 44.8374 19.2287 46.1674 19.5287V15.8287H49.0674V19.5487C50.4074 19.2487 51.4874 18.5687 52.3074 17.5287V17.5387Z",fill:"#324540"}),oe.jsx("path",{d:"M70.9774 22.1987L67.5474 17.2787C67.4074 17.2987 67.1874 17.2987 66.8974 17.2987H63.1074V22.1987H59.9874V5.39867H66.8974C68.3574 5.39867 69.6174 5.63867 70.6974 6.11867C71.7774 6.59867 72.6074 7.28867 73.1774 8.17867C73.7574 9.07867 74.0374 10.1387 74.0374 11.3687C74.0374 12.5987 73.7274 13.7187 73.1174 14.6287C72.4974 15.5387 71.6174 16.2187 70.4674 16.6687L74.3274 22.1887H70.9674L70.9774 22.1987ZM69.8474 8.89867C69.1474 8.31867 68.1074 8.03867 66.7474 8.03867H63.0974V14.7387H66.7474C68.1074 14.7387 69.1374 14.4487 69.8474 13.8587C70.5574 13.2687 70.9074 12.4487 70.9074 11.3787C70.9074 10.3087 70.5574 9.47867 69.8474 8.90867V8.89867Z",fill:"#324540"}),oe.jsx("path",{d:"M80.7474 21.3187C79.3674 20.5787 78.2874 19.5387 77.5074 18.2187C76.7274 16.8987 76.3274 15.4187 76.3274 13.7887C76.3274 12.1587 76.7174 10.6787 77.5074 9.35867C78.2874 8.03867 79.3674 7.00867 80.7474 6.25867C82.1274 5.50867 83.6674 5.13867 85.3774 5.13867C87.0874 5.13867 88.6374 5.50867 90.0074 6.25867C91.3874 6.99867 92.4674 8.02867 93.2474 9.33867C94.0274 10.6487 94.4274 12.1287 94.4274 13.7787C94.4274 15.4287 94.0374 16.9087 93.2474 18.2187C92.4674 19.5287 91.3874 20.5587 90.0074 21.2987C88.6274 22.0387 87.0874 22.4187 85.3774 22.4187C83.6674 22.4187 82.1174 22.0487 80.7474 21.2987V21.3187ZM88.4074 18.9387C89.3074 18.4387 90.0074 17.7287 90.5174 16.8287C91.0274 15.9287 91.2874 14.9087 91.2874 13.7887C91.2874 12.6687 91.0274 11.6587 90.5174 10.7487C90.0074 9.84867 89.2974 9.13867 88.4074 8.63867C87.5074 8.13867 86.5074 7.87867 85.3874 7.87867C84.2674 7.87867 83.2574 8.12867 82.3674 8.63867C81.4674 9.13867 80.7674 9.84867 80.2574 10.7487C79.7474 11.6487 79.4874 12.6687 79.4874 13.7887C79.4874 14.9087 79.7474 15.9187 80.2574 16.8287C80.7674 17.7287 81.4774 18.4387 82.3674 18.9387C83.2674 19.4387 84.2674 19.6987 85.3874 19.6987C86.5074 19.6987 87.5174 19.4487 88.4074 18.9387Z",fill:"#324540"}),oe.jsx("path",{d:"M99.1874 21.8887C97.9774 21.5187 97.0274 21.0287 96.3174 20.4287L97.3974 18.0087C98.0874 18.5487 98.9274 18.9987 99.9274 19.3387C100.927 19.6787 101.927 19.8587 102.937 19.8587C104.187 19.8587 105.117 19.6587 105.737 19.2587C106.357 18.8587 106.657 18.3287 106.657 17.6787C106.657 17.1987 106.487 16.7987 106.137 16.4887C105.797 16.1787 105.357 15.9287 104.827 15.7587C104.297 15.5787 103.577 15.3787 102.667 15.1587C101.387 14.8587 100.347 14.5487 99.5574 14.2487C98.7674 13.9487 98.0874 13.4687 97.5174 12.8187C96.9474 12.1687 96.6674 11.2987 96.6674 10.1887C96.6674 9.25867 96.9174 8.41867 97.4274 7.65867C97.9374 6.89867 98.6874 6.29867 99.7074 5.84867C100.727 5.39867 101.967 5.17867 103.437 5.17867C104.457 5.17867 105.467 5.30867 106.457 5.55867C107.447 5.81867 108.307 6.17867 109.027 6.65867L108.047 9.07867C107.307 8.64867 106.547 8.31867 105.747 8.09867C104.947 7.87867 104.167 7.75867 103.417 7.75867C102.187 7.75867 101.267 7.96867 100.667 8.37867C100.067 8.79867 99.7674 9.34867 99.7674 10.0387C99.7674 10.5187 99.9374 10.9087 100.287 11.2187C100.627 11.5187 101.067 11.7587 101.597 11.9387C102.127 12.1187 102.847 12.3187 103.757 12.5387C105.007 12.8287 106.027 13.1287 106.827 13.4387C107.627 13.7487 108.307 14.2287 108.877 14.8687C109.447 15.5087 109.727 16.3687 109.727 17.4587C109.727 18.3887 109.477 19.2287 108.967 19.9787C108.467 20.7287 107.697 21.3287 106.677 21.7787C105.657 22.2287 104.407 22.4487 102.937 22.4487C101.637 22.4487 100.387 22.2687 99.1774 21.8987L99.1874 21.8887Z",fill:"#324540"}),oe.jsx("path",{d:"M114.287 21.8887C113.077 21.5187 112.127 21.0287 111.417 20.4287L112.497 18.0087C113.187 18.5487 114.027 18.9987 115.027 19.3387C116.027 19.6787 117.027 19.8587 118.037 19.8587C119.287 19.8587 120.217 19.6587 120.837 19.2587C121.457 18.8587 121.757 18.3287 121.757 17.6787C121.757 17.1987 121.587 16.7987 121.237 16.4887C120.897 16.1787 120.457 15.9287 119.927 15.7587C119.397 15.5787 118.677 15.3787 117.767 15.1587C116.487 14.8587 115.447 14.5487 114.657 14.2487C113.867 13.9487 113.187 13.4687 112.617 12.8187C112.047 12.1687 111.767 11.2987 111.767 10.1887C111.767 9.25867 112.017 8.41867 112.527 7.65867C113.037 6.89867 113.787 6.29867 114.807 5.84867C115.827 5.39867 117.067 5.17867 118.537 5.17867C119.557 5.17867 120.567 5.30867 121.557 5.55867C122.547 5.81867 123.407 6.17867 124.127 6.65867L123.147 9.07867C122.407 8.64867 121.647 8.31867 120.847 8.09867C120.047 7.87867 119.267 7.75867 118.517 7.75867C117.287 7.75867 116.367 7.96867 115.767 8.37867C115.167 8.79867 114.867 9.34867 114.867 10.0387C114.867 10.5187 115.037 10.9087 115.387 11.2187C115.727 11.5187 116.167 11.7587 116.697 11.9387C117.227 12.1187 117.947 12.3187 118.857 12.5387C120.107 12.8287 121.127 13.1287 121.927 13.4387C122.727 13.7487 123.407 14.2287 123.977 14.8687C124.547 15.5087 124.827 16.3687 124.827 17.4587C124.827 18.3887 124.577 19.2287 124.067 19.9787C123.567 20.7287 122.797 21.3287 121.777 21.7787C120.757 22.2287 119.507 22.4487 118.037 22.4487C116.737 22.4487 115.487 22.2687 114.277 21.8987L114.287 21.8887Z",fill:"#324540"})]}),oV=(e=!1)=>{const[t,i]=$.useState(null),o=async()=>{try{if("wakeLock"in navigator){const p=await navigator.wakeLock.request("screen");i(p)}}catch(p){console.error("Wake Lock error:",p),ql.error("Impossible de garder l'écran allumé",{className:"bg-background/95 border-border/50 text-foreground"})}},u=async()=>{if(t)try{await t.release(),i(null)}catch(p){console.error("Wake Lock release error:",p)}};return $.useEffect(()=>{e?o():u();const p=()=>{document.visibilityState==="visible"&&e&&o()};return document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p),u()}},[e]),{wakeLock:t}},aV=()=>{const{isTracking:e}=dl();return oV(e),oe.jsxs("div",{className:"fixed inset-0 overflow-hidden",children:[oe.jsx("div",{className:"absolute top-4 left-0 right-0 z-10 flex justify-center pointer-events-none",children:oe.jsx(sV,{})}),oe.jsx(AB,{}),oe.jsx(iV,{}),oe.jsx(JN,{})]})},lV=()=>oe.jsx(fF,{children:oe.jsx(aV,{})}),cV=()=>{const e=_k();return $.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),oe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:oe.jsxs("div",{className:"text-center",children:[oe.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),oe.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),oe.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},uV=new c7({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1,onError:e=>{ta(e)||console.error("Query error:",e)},useErrorBoundary:!0},mutations:{onError:e=>{ta(e)||console.error("Mutation error:",e)},useErrorBoundary:!0}}}),hV=()=>oe.jsx(Y7,{children:oe.jsx(h7,{client:uV,children:oe.jsxs(V3,{children:[oe.jsx(jz,{}),oe.jsx(dR,{}),oe.jsx(K7,{children:oe.jsxs(Z7,{children:[oe.jsx(y_,{path:"/",element:oe.jsx(lV,{})}),oe.jsx(y_,{path:"*",element:oe.jsx(cV,{})})]})})]})})});window.onerror=(e,t,i,o,u)=>{ta(u)||Kg("GlobalError",u,{message:e,source:t,lineno:i,colno:o})};window.addEventListener("unhandledrejection",e=>{ta(e.reason)||Kg("UnhandledRejection",e.reason)});window.addEventListener("error",e=>{ta(e.error)||Kg("UncaughtException",e.error,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno})});qE(document.getElementById("root")).render(oe.jsx(hV,{}));
