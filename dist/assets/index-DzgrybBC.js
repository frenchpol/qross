var mD=Object.defineProperty;var rb=e=>{throw TypeError(e)};var gD=(e,t,i)=>t in e?mD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ib=(e,t,i)=>gD(e,typeof t!="symbol"?t+"":t,i),cv=(e,t,i)=>t.has(e)||rb("Cannot "+i);var Oe=(e,t,i)=>(cv(e,t,"read from private field"),i?i.call(e):t.get(e)),sn=(e,t,i)=>t.has(e)?rb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Ut=(e,t,i,o)=>(cv(e,t,"write to private field"),o?o.call(e,i):t.set(e,i),i),Xr=(e,t,i)=>(cv(e,t,"access private method"),i);var Lf=(e,t,i,o)=>({set _(u){Ut(e,t,u,i)},get _(){return Oe(e,t,o)}});function yD(e,t){for(var i=0;i<t.length;i++){const o=t[i];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const p=Object.getOwnPropertyDescriptor(o,u);p&&Object.defineProperty(e,u,p.get?p:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function i(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(u){if(u.ep)return;u.ep=!0;const p=i(u);fetch(u.href,p)}})();var vD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var PT={exports:{}},yg={},kT={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=Symbol.for("react.element"),_D=Symbol.for("react.portal"),xD=Symbol.for("react.fragment"),wD=Symbol.for("react.strict_mode"),bD=Symbol.for("react.profiler"),SD=Symbol.for("react.provider"),TD=Symbol.for("react.context"),CD=Symbol.for("react.forward_ref"),ED=Symbol.for("react.suspense"),PD=Symbol.for("react.memo"),kD=Symbol.for("react.lazy"),sb=Symbol.iterator;function AD(e){return e===null||typeof e!="object"?null:(e=sb&&e[sb]||e["@@iterator"],typeof e=="function"?e:null)}var AT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MT=Object.assign,IT={};function Zu(e,t,i){this.props=e,this.context=t,this.refs=IT,this.updater=i||AT}Zu.prototype.isReactComponent={};Zu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DT(){}DT.prototype=Zu.prototype;function z_(e,t,i){this.props=e,this.context=t,this.refs=IT,this.updater=i||AT}var R_=z_.prototype=new DT;R_.constructor=z_;MT(R_,Zu.prototype);R_.isPureReactComponent=!0;var ob=Array.isArray,LT=Object.prototype.hasOwnProperty,F_={current:null},zT={key:!0,ref:!0,__self:!0,__source:!0};function RT(e,t,i){var o,u={},p=null,y=null;if(t!=null)for(o in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(p=""+t.key),t)LT.call(t,o)&&!zT.hasOwnProperty(o)&&(u[o]=t[o]);var l=arguments.length-2;if(l===1)u.children=i;else if(1<l){for(var S=Array(l),b=0;b<l;b++)S[b]=arguments[b+2];u.children=S}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)u[o]===void 0&&(u[o]=l[o]);return{$$typeof:hp,type:e,key:p,ref:y,props:u,_owner:F_.current}}function MD(e,t){return{$$typeof:hp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function O_(e){return typeof e=="object"&&e!==null&&e.$$typeof===hp}function ID(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var ab=/\/+/g;function uv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ID(""+e.key):t.toString(36)}function hm(e,t,i,o,u){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(p){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case hp:case _D:y=!0}}if(y)return y=e,u=u(y),e=o===""?"."+uv(y,0):o,ob(u)?(i="",e!=null&&(i=e.replace(ab,"$&/")+"/"),hm(u,t,i,"",function(b){return b})):u!=null&&(O_(u)&&(u=MD(u,i+(!u.key||y&&y.key===u.key?"":(""+u.key).replace(ab,"$&/")+"/")+e)),t.push(u)),1;if(y=0,o=o===""?".":o+":",ob(e))for(var l=0;l<e.length;l++){p=e[l];var S=o+uv(p,l);y+=hm(p,t,i,S,u)}else if(S=AD(e),typeof S=="function")for(e=S.call(e),l=0;!(p=e.next()).done;)p=p.value,S=o+uv(p,l++),y+=hm(p,t,i,S,u);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function zf(e,t,i){if(e==null)return e;var o=[],u=0;return hm(e,o,"","",function(p){return t.call(i,p,u++)}),o}function DD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ti={current:null},dm={transition:null},LD={ReactCurrentDispatcher:Ti,ReactCurrentBatchConfig:dm,ReactCurrentOwner:F_};function FT(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:zf,forEach:function(e,t,i){zf(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return zf(e,function(){t++}),t},toArray:function(e){return zf(e,function(t){return t})||[]},only:function(e){if(!O_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wt.Component=Zu;Wt.Fragment=xD;Wt.Profiler=bD;Wt.PureComponent=z_;Wt.StrictMode=wD;Wt.Suspense=ED;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LD;Wt.act=FT;Wt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=MT({},e.props),u=e.key,p=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,y=F_.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(S in t)LT.call(t,S)&&!zT.hasOwnProperty(S)&&(o[S]=t[S]===void 0&&l!==void 0?l[S]:t[S])}var S=arguments.length-2;if(S===1)o.children=i;else if(1<S){l=Array(S);for(var b=0;b<S;b++)l[b]=arguments[b+2];o.children=l}return{$$typeof:hp,type:e.type,key:u,ref:p,props:o,_owner:y}};Wt.createContext=function(e){return e={$$typeof:TD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SD,_context:e},e.Consumer=e};Wt.createElement=RT;Wt.createFactory=function(e){var t=RT.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:CD,render:e}};Wt.isValidElement=O_;Wt.lazy=function(e){return{$$typeof:kD,_payload:{_status:-1,_result:e},_init:DD}};Wt.memo=function(e,t){return{$$typeof:PD,type:e,compare:t===void 0?null:t}};Wt.startTransition=function(e){var t=dm.transition;dm.transition={};try{e()}finally{dm.transition=t}};Wt.unstable_act=FT;Wt.useCallback=function(e,t){return Ti.current.useCallback(e,t)};Wt.useContext=function(e){return Ti.current.useContext(e)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(e){return Ti.current.useDeferredValue(e)};Wt.useEffect=function(e,t){return Ti.current.useEffect(e,t)};Wt.useId=function(){return Ti.current.useId()};Wt.useImperativeHandle=function(e,t,i){return Ti.current.useImperativeHandle(e,t,i)};Wt.useInsertionEffect=function(e,t){return Ti.current.useInsertionEffect(e,t)};Wt.useLayoutEffect=function(e,t){return Ti.current.useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return Ti.current.useMemo(e,t)};Wt.useReducer=function(e,t,i){return Ti.current.useReducer(e,t,i)};Wt.useRef=function(e){return Ti.current.useRef(e)};Wt.useState=function(e){return Ti.current.useState(e)};Wt.useSyncExternalStore=function(e,t,i){return Ti.current.useSyncExternalStore(e,t,i)};Wt.useTransition=function(){return Ti.current.useTransition()};Wt.version="18.3.1";kT.exports=Wt;var Z=kT.exports;const tt=L_(Z),OT=yD({__proto__:null,default:tt},[Z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD=Z,RD=Symbol.for("react.element"),FD=Symbol.for("react.fragment"),OD=Object.prototype.hasOwnProperty,BD=zD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ND={key:!0,ref:!0,__self:!0,__source:!0};function BT(e,t,i){var o,u={},p=null,y=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(y=t.ref);for(o in t)OD.call(t,o)&&!ND.hasOwnProperty(o)&&(u[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)u[o]===void 0&&(u[o]=t[o]);return{$$typeof:RD,type:e,key:p,ref:y,props:u,_owner:BD.current}}yg.Fragment=FD;yg.jsx=BT;yg.jsxs=BT;PT.exports=yg;var de=PT.exports,NT={exports:{}},os={},VT={exports:{}},jT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Pe,He){var yt=Pe.length;Pe.push(He);e:for(;0<yt;){var ot=yt-1>>>1,_t=Pe[ot];if(0<u(_t,He))Pe[ot]=He,Pe[yt]=_t,yt=ot;else break e}}function i(Pe){return Pe.length===0?null:Pe[0]}function o(Pe){if(Pe.length===0)return null;var He=Pe[0],yt=Pe.pop();if(yt!==He){Pe[0]=yt;e:for(var ot=0,_t=Pe.length,vt=_t>>>1;ot<vt;){var Nt=2*(ot+1)-1,Dn=Pe[Nt],Gt=Nt+1,ir=Pe[Gt];if(0>u(Dn,yt))Gt<_t&&0>u(ir,Dn)?(Pe[ot]=ir,Pe[Gt]=yt,ot=Gt):(Pe[ot]=Dn,Pe[Nt]=yt,ot=Nt);else if(Gt<_t&&0>u(ir,yt))Pe[ot]=ir,Pe[Gt]=yt,ot=Gt;else break e}}return He}function u(Pe,He){var yt=Pe.sortIndex-He.sortIndex;return yt!==0?yt:Pe.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var S=[],b=[],I=1,M=null,k=3,j=!1,K=!1,O=!1,X=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(Pe){for(var He=i(b);He!==null;){if(He.callback===null)o(b);else if(He.startTime<=Pe)o(b),He.sortIndex=He.expirationTime,t(S,He);else break;He=i(b)}}function ne(Pe){if(O=!1,q(Pe),!K)if(i(S)!==null)K=!0,mt(he);else{var He=i(b);He!==null&&Et(ne,He.startTime-Pe)}}function he(Pe,He){K=!1,O&&(O=!1,B(we),we=-1),j=!0;var yt=k;try{for(q(He),M=i(S);M!==null&&(!(M.expirationTime>He)||Pe&&!pt());){var ot=M.callback;if(typeof ot=="function"){M.callback=null,k=M.priorityLevel;var _t=ot(M.expirationTime<=He);He=e.unstable_now(),typeof _t=="function"?M.callback=_t:M===i(S)&&o(S),q(He)}else o(S);M=i(S)}if(M!==null)var vt=!0;else{var Nt=i(b);Nt!==null&&Et(ne,Nt.startTime-He),vt=!1}return vt}finally{M=null,k=yt,j=!1}}var Se=!1,ke=null,we=-1,We=5,Fe=-1;function pt(){return!(e.unstable_now()-Fe<We)}function it(){if(ke!==null){var Pe=e.unstable_now();Fe=Pe;var He=!0;try{He=ke(!0,Pe)}finally{He?kt():(Se=!1,ke=null)}}else Se=!1}var kt;if(typeof V=="function")kt=function(){V(it)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,dt=Ze.port2;Ze.port1.onmessage=it,kt=function(){dt.postMessage(null)}}else kt=function(){X(it,0)};function mt(Pe){ke=Pe,Se||(Se=!0,kt())}function Et(Pe,He){we=X(function(){Pe(e.unstable_now())},He)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){K||j||(K=!0,mt(he))},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(Pe){switch(k){case 1:case 2:case 3:var He=3;break;default:He=k}var yt=k;k=He;try{return Pe()}finally{k=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Pe,He){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var yt=k;k=Pe;try{return He()}finally{k=yt}},e.unstable_scheduleCallback=function(Pe,He,yt){var ot=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?ot+yt:ot):yt=ot,Pe){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=yt+_t,Pe={id:I++,callback:He,priorityLevel:Pe,startTime:yt,expirationTime:_t,sortIndex:-1},yt>ot?(Pe.sortIndex=yt,t(b,Pe),i(S)===null&&Pe===i(b)&&(O?(B(we),we=-1):O=!0,Et(ne,yt-ot))):(Pe.sortIndex=_t,t(S,Pe),K||j||(K=!0,mt(he))),Pe},e.unstable_shouldYield=pt,e.unstable_wrapCallback=function(Pe){var He=k;return function(){var yt=k;k=He;try{return Pe.apply(this,arguments)}finally{k=yt}}}})(jT);VT.exports=jT;var VD=VT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD=Z,is=VD;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UT=new Set,Bd={};function ac(e,t){Ru(e,t),Ru(e+"Capture",t)}function Ru(e,t){for(Bd[e]=t,e=0;e<t.length;e++)UT.add(t[e])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l0=Object.prototype.hasOwnProperty,UD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lb={},cb={};function $D(e){return l0.call(cb,e)?!0:l0.call(lb,e)?!1:UD.test(e)?cb[e]=!0:(lb[e]=!0,!1)}function GD(e,t,i,o){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qD(e,t,i,o){if(t===null||typeof t>"u"||GD(e,t,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ci(e,t,i,o,u,p,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=y}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nr[e]=new Ci(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nr[t]=new Ci(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nr[e]=new Ci(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nr[e]=new Ci(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nr[e]=new Ci(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nr[e]=new Ci(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nr[e]=new Ci(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nr[e]=new Ci(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nr[e]=new Ci(e,5,!1,e.toLowerCase(),null,!1,!1)});var B_=/[\-:]([a-z])/g;function N_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(B_,N_);Nr[t]=new Ci(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(B_,N_);Nr[t]=new Ci(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(B_,N_);Nr[t]=new Ci(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nr[e]=new Ci(e,1,!1,e.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nr[e]=new Ci(e,1,!1,e.toLowerCase(),null,!0,!0)});function V_(e,t,i,o){var u=Nr.hasOwnProperty(t)?Nr[t]:null;(u!==null?u.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qD(t,i,u,o)&&(i=null),o||u===null?$D(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,o=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,o?e.setAttributeNS(o,t,i):e.setAttribute(t,i))))}var na=jD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rf=Symbol.for("react.element"),eu=Symbol.for("react.portal"),tu=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),$T=Symbol.for("react.provider"),GT=Symbol.for("react.context"),U_=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),h0=Symbol.for("react.suspense_list"),$_=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),qT=Symbol.for("react.offscreen"),ub=Symbol.iterator;function ad(e){return e===null||typeof e!="object"?null:(e=ub&&e[ub]||e["@@iterator"],typeof e=="function"?e:null)}var jn=Object.assign,hv;function vd(e){if(hv===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);hv=t&&t[1]||""}return`
`+hv+e}var dv=!1;function pv(e,t){if(!e||dv)return"";dv=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var o=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){o=b}e.call(t.prototype)}else{try{throw Error()}catch(b){o=b}e()}}catch(b){if(b&&o&&typeof b.stack=="string"){for(var u=b.stack.split(`
`),p=o.stack.split(`
`),y=u.length-1,l=p.length-1;1<=y&&0<=l&&u[y]!==p[l];)l--;for(;1<=y&&0<=l;y--,l--)if(u[y]!==p[l]){if(y!==1||l!==1)do if(y--,l--,0>l||u[y]!==p[l]){var S=`
`+u[y].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=y&&0<=l);break}}}finally{dv=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?vd(e):""}function ZD(e){switch(e.tag){case 5:return vd(e.type);case 16:return vd("Lazy");case 13:return vd("Suspense");case 19:return vd("SuspenseList");case 0:case 2:case 15:return e=pv(e.type,!1),e;case 11:return e=pv(e.type.render,!1),e;case 1:return e=pv(e.type,!0),e;default:return""}}function d0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tu:return"Fragment";case eu:return"Portal";case c0:return"Profiler";case j_:return"StrictMode";case u0:return"Suspense";case h0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case GT:return(e.displayName||"Context")+".Consumer";case $T:return(e._context.displayName||"Context")+".Provider";case U_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $_:return t=e.displayName||null,t!==null?t:d0(e.type)||"Memo";case Aa:t=e._payload,e=e._init;try{return d0(e(t))}catch{}}return null}function WD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d0(t);case 8:return t===j_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ja(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ZT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HD(e){var t=ZT(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(y){o=""+y,p.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(y){o=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ff(e){e._valueTracker||(e._valueTracker=HD(e))}function WT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=ZT(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Im(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function p0(e,t){var i=t.checked;return jn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function hb(e,t){var i=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;i=Ja(t.value!=null?t.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function HT(e,t){t=t.checked,t!=null&&V_(e,"checked",t,!1)}function f0(e,t){HT(e,t);var i=Ja(t.value),o=t.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?m0(e,t.type,i):t.hasOwnProperty("defaultValue")&&m0(e,t.type,Ja(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function db(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function m0(e,t,i){(t!=="number"||Im(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var _d=Array.isArray;function gu(e,t,i,o){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Ja(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function g0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return jn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ge(92));if(_d(i)){if(1<i.length)throw Error(Ge(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ja(i)}}function KT(e,t){var i=Ja(t.value),o=Ja(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function fb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function XT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?XT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Of,YT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,o,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,o,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Of=Of||document.createElement("div"),Of.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Of.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KD=["Webkit","ms","Moz","O"];Object.keys(Td).forEach(function(e){KD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Td[t]=Td[e]})});function QT(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Td.hasOwnProperty(e)&&Td[e]?(""+t).trim():t+"px"}function JT(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=i.indexOf("--")===0,u=QT(i,t[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,u):e[i]=u}}var XD=jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v0(e,t){if(t){if(XD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function _0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x0=null;function G_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var w0=null,yu=null,vu=null;function mb(e){if(e=fp(e)){if(typeof w0!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=bg(t),w0(e.stateNode,e.type,t))}}function eC(e){yu?vu?vu.push(e):vu=[e]:yu=e}function tC(){if(yu){var e=yu,t=vu;if(vu=yu=null,mb(e),t)for(e=0;e<t.length;e++)mb(t[e])}}function nC(e,t){return e(t)}function rC(){}var fv=!1;function iC(e,t,i){if(fv)return e(t,i);fv=!0;try{return nC(e,t,i)}finally{fv=!1,(yu!==null||vu!==null)&&(rC(),tC())}}function Vd(e,t){var i=e.stateNode;if(i===null)return null;var o=bg(i);if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ge(231,t,typeof i));return i}var b0=!1;if(Ko)try{var ld={};Object.defineProperty(ld,"passive",{get:function(){b0=!0}}),window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch{b0=!1}function YD(e,t,i,o,u,p,y,l,S){var b=Array.prototype.slice.call(arguments,3);try{t.apply(i,b)}catch(I){this.onError(I)}}var Cd=!1,Dm=null,Lm=!1,S0=null,QD={onError:function(e){Cd=!0,Dm=e}};function JD(e,t,i,o,u,p,y,l,S){Cd=!1,Dm=null,YD.apply(QD,arguments)}function e5(e,t,i,o,u,p,y,l,S){if(JD.apply(this,arguments),Cd){if(Cd){var b=Dm;Cd=!1,Dm=null}else throw Error(Ge(198));Lm||(Lm=!0,S0=b)}}function lc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function sC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gb(e){if(lc(e)!==e)throw Error(Ge(188))}function t5(e){var t=e.alternate;if(!t){if(t=lc(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var i=e,o=t;;){var u=i.return;if(u===null)break;var p=u.alternate;if(p===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===i)return gb(u),e;if(p===o)return gb(u),t;p=p.sibling}throw Error(Ge(188))}if(i.return!==o.return)i=u,o=p;else{for(var y=!1,l=u.child;l;){if(l===i){y=!0,i=u,o=p;break}if(l===o){y=!0,o=u,i=p;break}l=l.sibling}if(!y){for(l=p.child;l;){if(l===i){y=!0,i=p,o=u;break}if(l===o){y=!0,o=p,i=u;break}l=l.sibling}if(!y)throw Error(Ge(189))}}if(i.alternate!==o)throw Error(Ge(190))}if(i.tag!==3)throw Error(Ge(188));return i.stateNode.current===i?e:t}function oC(e){return e=t5(e),e!==null?aC(e):null}function aC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aC(e);if(t!==null)return t;e=e.sibling}return null}var lC=is.unstable_scheduleCallback,yb=is.unstable_cancelCallback,n5=is.unstable_shouldYield,r5=is.unstable_requestPaint,rr=is.unstable_now,i5=is.unstable_getCurrentPriorityLevel,q_=is.unstable_ImmediatePriority,cC=is.unstable_UserBlockingPriority,zm=is.unstable_NormalPriority,s5=is.unstable_LowPriority,uC=is.unstable_IdlePriority,vg=null,mo=null;function o5(e){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(vg,e,void 0,(e.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:c5,a5=Math.log,l5=Math.LN2;function c5(e){return e>>>=0,e===0?32:31-(a5(e)/l5|0)|0}var Bf=64,Nf=4194304;function xd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rm(e,t){var i=e.pendingLanes;if(i===0)return 0;var o=0,u=e.suspendedLanes,p=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~u;l!==0?o=xd(l):(p&=y,p!==0&&(o=xd(p)))}else y=i&~u,y!==0?o=xd(y):p!==0&&(o=xd(p));if(o===0)return 0;if(t!==0&&t!==o&&!(t&u)&&(u=o&-o,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if(o&4&&(o|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)i=31-qs(t),u=1<<i,o|=e[i],t&=~u;return o}function u5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h5(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var y=31-qs(p),l=1<<y,S=u[y];S===-1?(!(l&i)||l&o)&&(u[y]=u5(l,t)):S<=t&&(e.expiredLanes|=l),p&=~l}}function T0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hC(){var e=Bf;return Bf<<=1,!(Bf&4194240)&&(Bf=64),e}function mv(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function dp(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qs(t),e[t]=i}function d5(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-qs(i),p=1<<u;t[u]=0,o[u]=-1,e[u]=-1,i&=~p}}function Z_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-qs(i),u=1<<o;u&t|e[o]&t&&(e[o]|=t),i&=~u}}var ln=0;function dC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pC,W_,fC,mC,gC,C0=!1,Vf=[],$a=null,Ga=null,qa=null,jd=new Map,Ud=new Map,Da=[],p5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vb(e,t){switch(e){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":jd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(t.pointerId)}}function cd(e,t,i,o,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:p,targetContainers:[u]},t!==null&&(t=fp(t),t!==null&&W_(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function f5(e,t,i,o,u){switch(t){case"focusin":return $a=cd($a,e,t,i,o,u),!0;case"dragenter":return Ga=cd(Ga,e,t,i,o,u),!0;case"mouseover":return qa=cd(qa,e,t,i,o,u),!0;case"pointerover":var p=u.pointerId;return jd.set(p,cd(jd.get(p)||null,e,t,i,o,u)),!0;case"gotpointercapture":return p=u.pointerId,Ud.set(p,cd(Ud.get(p)||null,e,t,i,o,u)),!0}return!1}function yC(e){var t=Ul(e.target);if(t!==null){var i=lc(t);if(i!==null){if(t=i.tag,t===13){if(t=sC(i),t!==null){e.blockedOn=t,gC(e.priority,function(){fC(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=E0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);x0=o,i.target.dispatchEvent(o),x0=null}else return t=fp(i),t!==null&&W_(t),e.blockedOn=i,!1;t.shift()}return!0}function _b(e,t,i){pm(e)&&i.delete(t)}function m5(){C0=!1,$a!==null&&pm($a)&&($a=null),Ga!==null&&pm(Ga)&&(Ga=null),qa!==null&&pm(qa)&&(qa=null),jd.forEach(_b),Ud.forEach(_b)}function ud(e,t){e.blockedOn===t&&(e.blockedOn=null,C0||(C0=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,m5)))}function $d(e){function t(u){return ud(u,e)}if(0<Vf.length){ud(Vf[0],e);for(var i=1;i<Vf.length;i++){var o=Vf[i];o.blockedOn===e&&(o.blockedOn=null)}}for($a!==null&&ud($a,e),Ga!==null&&ud(Ga,e),qa!==null&&ud(qa,e),jd.forEach(t),Ud.forEach(t),i=0;i<Da.length;i++)o=Da[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Da.length&&(i=Da[0],i.blockedOn===null);)yC(i),i.blockedOn===null&&Da.shift()}var _u=na.ReactCurrentBatchConfig,Fm=!0;function g5(e,t,i,o){var u=ln,p=_u.transition;_u.transition=null;try{ln=1,H_(e,t,i,o)}finally{ln=u,_u.transition=p}}function y5(e,t,i,o){var u=ln,p=_u.transition;_u.transition=null;try{ln=4,H_(e,t,i,o)}finally{ln=u,_u.transition=p}}function H_(e,t,i,o){if(Fm){var u=E0(e,t,i,o);if(u===null)Cv(e,t,o,Om,i),vb(e,o);else if(f5(u,e,t,i,o))o.stopPropagation();else if(vb(e,o),t&4&&-1<p5.indexOf(e)){for(;u!==null;){var p=fp(u);if(p!==null&&pC(p),p=E0(e,t,i,o),p===null&&Cv(e,t,o,Om,i),p===u)break;u=p}u!==null&&o.stopPropagation()}else Cv(e,t,o,null,i)}}var Om=null;function E0(e,t,i,o){if(Om=null,e=G_(o),e=Ul(e),e!==null)if(t=lc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=sC(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Om=e,null}function vC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i5()){case q_:return 1;case cC:return 4;case zm:case s5:return 16;case uC:return 536870912;default:return 16}default:return 16}}var Na=null,K_=null,fm=null;function _C(){if(fm)return fm;var e,t=K_,i=t.length,o,u="value"in Na?Na.value:Na.textContent,p=u.length;for(e=0;e<i&&t[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&t[i-o]===u[p-o];o++);return fm=u.slice(e,1<o?1-o:void 0)}function mm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jf(){return!0}function xb(){return!1}function as(e){function t(i,o,u,p,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(p):p[l]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jf:xb,this.isPropagationStopped=xb,this}return jn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=jf)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=jf)},persist:function(){},isPersistent:jf}),t}var Wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X_=as(Wu),pp=jn({},Wu,{view:0,detail:0}),v5=as(pp),gv,yv,hd,_g=jn({},pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hd&&(hd&&e.type==="mousemove"?(gv=e.screenX-hd.screenX,yv=e.screenY-hd.screenY):yv=gv=0,hd=e),gv)},movementY:function(e){return"movementY"in e?e.movementY:yv}}),wb=as(_g),_5=jn({},_g,{dataTransfer:0}),x5=as(_5),w5=jn({},pp,{relatedTarget:0}),vv=as(w5),b5=jn({},Wu,{animationName:0,elapsedTime:0,pseudoElement:0}),S5=as(b5),T5=jn({},Wu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C5=as(T5),E5=jn({},Wu,{data:0}),bb=as(E5),P5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A5[e])?!!t[e]:!1}function Y_(){return M5}var I5=jn({},pp,{key:function(e){if(e.key){var t=P5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?k5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y_,charCode:function(e){return e.type==="keypress"?mm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D5=as(I5),L5=jn({},_g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sb=as(L5),z5=jn({},pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y_}),R5=as(z5),F5=jn({},Wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),O5=as(F5),B5=jn({},_g,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N5=as(B5),V5=[9,13,27,32],Q_=Ko&&"CompositionEvent"in window,Ed=null;Ko&&"documentMode"in document&&(Ed=document.documentMode);var j5=Ko&&"TextEvent"in window&&!Ed,xC=Ko&&(!Q_||Ed&&8<Ed&&11>=Ed),Tb=" ",Cb=!1;function wC(e,t){switch(e){case"keyup":return V5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nu=!1;function U5(e,t){switch(e){case"compositionend":return bC(t);case"keypress":return t.which!==32?null:(Cb=!0,Tb);case"textInput":return e=t.data,e===Tb&&Cb?null:e;default:return null}}function $5(e,t){if(nu)return e==="compositionend"||!Q_&&wC(e,t)?(e=_C(),fm=K_=Na=null,nu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xC&&t.locale!=="ko"?null:t.data;default:return null}}var G5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G5[e.type]:t==="textarea"}function SC(e,t,i,o){eC(o),t=Bm(t,"onChange"),0<t.length&&(i=new X_("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var Pd=null,Gd=null;function q5(e){zC(e,0)}function xg(e){var t=su(e);if(WT(t))return e}function Z5(e,t){if(e==="change")return t}var TC=!1;if(Ko){var _v;if(Ko){var xv="oninput"in document;if(!xv){var Pb=document.createElement("div");Pb.setAttribute("oninput","return;"),xv=typeof Pb.oninput=="function"}_v=xv}else _v=!1;TC=_v&&(!document.documentMode||9<document.documentMode)}function kb(){Pd&&(Pd.detachEvent("onpropertychange",CC),Gd=Pd=null)}function CC(e){if(e.propertyName==="value"&&xg(Gd)){var t=[];SC(t,Gd,e,G_(e)),iC(q5,t)}}function W5(e,t,i){e==="focusin"?(kb(),Pd=t,Gd=i,Pd.attachEvent("onpropertychange",CC)):e==="focusout"&&kb()}function H5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xg(Gd)}function K5(e,t){if(e==="click")return xg(t)}function X5(e,t){if(e==="input"||e==="change")return xg(t)}function Y5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ws=typeof Object.is=="function"?Object.is:Y5;function qd(e,t){if(Ws(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!l0.call(t,u)||!Ws(e[u],t[u]))return!1}return!0}function Ab(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mb(e,t){var i=Ab(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ab(i)}}function EC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PC(){for(var e=window,t=Im();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Im(e.document)}return t}function J_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Q5(e){var t=PC(),i=e.focusedElem,o=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&EC(i.ownerDocument.documentElement,i)){if(o!==null&&J_(i)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,p=Math.min(o.start,u);o=o.end===void 0?p:Math.min(o.end,u),!e.extend&&p>o&&(u=o,o=p,p=u),u=Mb(i,p);var y=Mb(i,o);u&&y&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>o?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var J5=Ko&&"documentMode"in document&&11>=document.documentMode,ru=null,P0=null,kd=null,k0=!1;function Ib(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;k0||ru==null||ru!==Im(o)||(o=ru,"selectionStart"in o&&J_(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),kd&&qd(kd,o)||(kd=o,o=Bm(P0,"onSelect"),0<o.length&&(t=new X_("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=ru)))}function Uf(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var iu={animationend:Uf("Animation","AnimationEnd"),animationiteration:Uf("Animation","AnimationIteration"),animationstart:Uf("Animation","AnimationStart"),transitionend:Uf("Transition","TransitionEnd")},wv={},kC={};Ko&&(kC=document.createElement("div").style,"AnimationEvent"in window||(delete iu.animationend.animation,delete iu.animationiteration.animation,delete iu.animationstart.animation),"TransitionEvent"in window||delete iu.transitionend.transition);function wg(e){if(wv[e])return wv[e];if(!iu[e])return e;var t=iu[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in kC)return wv[e]=t[i];return e}var AC=wg("animationend"),MC=wg("animationiteration"),IC=wg("animationstart"),DC=wg("transitionend"),LC=new Map,Db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cl(e,t){LC.set(e,t),ac(t,[e])}for(var bv=0;bv<Db.length;bv++){var Sv=Db[bv],eL=Sv.toLowerCase(),tL=Sv[0].toUpperCase()+Sv.slice(1);cl(eL,"on"+tL)}cl(AC,"onAnimationEnd");cl(MC,"onAnimationIteration");cl(IC,"onAnimationStart");cl("dblclick","onDoubleClick");cl("focusin","onFocus");cl("focusout","onBlur");cl(DC,"onTransitionEnd");Ru("onMouseEnter",["mouseout","mouseover"]);Ru("onMouseLeave",["mouseout","mouseover"]);Ru("onPointerEnter",["pointerout","pointerover"]);Ru("onPointerLeave",["pointerout","pointerover"]);ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nL=new Set("cancel close invalid load scroll toggle".split(" ").concat(wd));function Lb(e,t,i){var o=e.type||"unknown-event";e.currentTarget=i,e5(o,t,void 0,e),e.currentTarget=null}function zC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var p=void 0;if(t)for(var y=o.length-1;0<=y;y--){var l=o[y],S=l.instance,b=l.currentTarget;if(l=l.listener,S!==p&&u.isPropagationStopped())break e;Lb(u,l,b),p=S}else for(y=0;y<o.length;y++){if(l=o[y],S=l.instance,b=l.currentTarget,l=l.listener,S!==p&&u.isPropagationStopped())break e;Lb(u,l,b),p=S}}}if(Lm)throw e=S0,Lm=!1,S0=null,e}function Cn(e,t){var i=t[L0];i===void 0&&(i=t[L0]=new Set);var o=e+"__bubble";i.has(o)||(RC(t,e,2,!1),i.add(o))}function Tv(e,t,i){var o=0;t&&(o|=4),RC(i,e,o,t)}var $f="_reactListening"+Math.random().toString(36).slice(2);function Zd(e){if(!e[$f]){e[$f]=!0,UT.forEach(function(i){i!=="selectionchange"&&(nL.has(i)||Tv(i,!1,e),Tv(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$f]||(t[$f]=!0,Tv("selectionchange",!1,t))}}function RC(e,t,i,o){switch(vC(t)){case 1:var u=g5;break;case 4:u=y5;break;default:u=H_}i=u.bind(null,t,i,e),u=void 0,!b0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Cv(e,t,i,o,u){var p=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var l=o.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(y===4)for(y=o.return;y!==null;){var S=y.tag;if((S===3||S===4)&&(S=y.stateNode.containerInfo,S===u||S.nodeType===8&&S.parentNode===u))return;y=y.return}for(;l!==null;){if(y=Ul(l),y===null)return;if(S=y.tag,S===5||S===6){o=p=y;continue e}l=l.parentNode}}o=o.return}iC(function(){var b=p,I=G_(i),M=[];e:{var k=LC.get(e);if(k!==void 0){var j=X_,K=e;switch(e){case"keypress":if(mm(i)===0)break e;case"keydown":case"keyup":j=D5;break;case"focusin":K="focus",j=vv;break;case"focusout":K="blur",j=vv;break;case"beforeblur":case"afterblur":j=vv;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=x5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=R5;break;case AC:case MC:case IC:j=S5;break;case DC:j=O5;break;case"scroll":j=v5;break;case"wheel":j=N5;break;case"copy":case"cut":case"paste":j=C5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Sb}var O=(t&4)!==0,X=!O&&e==="scroll",B=O?k!==null?k+"Capture":null:k;O=[];for(var V=b,q;V!==null;){q=V;var ne=q.stateNode;if(q.tag===5&&ne!==null&&(q=ne,B!==null&&(ne=Vd(V,B),ne!=null&&O.push(Wd(V,ne,q)))),X)break;V=V.return}0<O.length&&(k=new j(k,K,null,i,I),M.push({event:k,listeners:O}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",k&&i!==x0&&(K=i.relatedTarget||i.fromElement)&&(Ul(K)||K[Xo]))break e;if((j||k)&&(k=I.window===I?I:(k=I.ownerDocument)?k.defaultView||k.parentWindow:window,j?(K=i.relatedTarget||i.toElement,j=b,K=K?Ul(K):null,K!==null&&(X=lc(K),K!==X||K.tag!==5&&K.tag!==6)&&(K=null)):(j=null,K=b),j!==K)){if(O=wb,ne="onMouseLeave",B="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(O=Sb,ne="onPointerLeave",B="onPointerEnter",V="pointer"),X=j==null?k:su(j),q=K==null?k:su(K),k=new O(ne,V+"leave",j,i,I),k.target=X,k.relatedTarget=q,ne=null,Ul(I)===b&&(O=new O(B,V+"enter",K,i,I),O.target=q,O.relatedTarget=X,ne=O),X=ne,j&&K)t:{for(O=j,B=K,V=0,q=O;q;q=Kc(q))V++;for(q=0,ne=B;ne;ne=Kc(ne))q++;for(;0<V-q;)O=Kc(O),V--;for(;0<q-V;)B=Kc(B),q--;for(;V--;){if(O===B||B!==null&&O===B.alternate)break t;O=Kc(O),B=Kc(B)}O=null}else O=null;j!==null&&zb(M,k,j,O,!1),K!==null&&X!==null&&zb(M,X,K,O,!0)}}e:{if(k=b?su(b):window,j=k.nodeName&&k.nodeName.toLowerCase(),j==="select"||j==="input"&&k.type==="file")var he=Z5;else if(Eb(k))if(TC)he=X5;else{he=H5;var Se=W5}else(j=k.nodeName)&&j.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(he=K5);if(he&&(he=he(e,b))){SC(M,he,i,I);break e}Se&&Se(e,k,b),e==="focusout"&&(Se=k._wrapperState)&&Se.controlled&&k.type==="number"&&m0(k,"number",k.value)}switch(Se=b?su(b):window,e){case"focusin":(Eb(Se)||Se.contentEditable==="true")&&(ru=Se,P0=b,kd=null);break;case"focusout":kd=P0=ru=null;break;case"mousedown":k0=!0;break;case"contextmenu":case"mouseup":case"dragend":k0=!1,Ib(M,i,I);break;case"selectionchange":if(J5)break;case"keydown":case"keyup":Ib(M,i,I)}var ke;if(Q_)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else nu?wC(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(xC&&i.locale!=="ko"&&(nu||we!=="onCompositionStart"?we==="onCompositionEnd"&&nu&&(ke=_C()):(Na=I,K_="value"in Na?Na.value:Na.textContent,nu=!0)),Se=Bm(b,we),0<Se.length&&(we=new bb(we,e,null,i,I),M.push({event:we,listeners:Se}),ke?we.data=ke:(ke=bC(i),ke!==null&&(we.data=ke)))),(ke=j5?U5(e,i):$5(e,i))&&(b=Bm(b,"onBeforeInput"),0<b.length&&(I=new bb("onBeforeInput","beforeinput",null,i,I),M.push({event:I,listeners:b}),I.data=ke))}zC(M,t)})}function Wd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Bm(e,t){for(var i=t+"Capture",o=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=Vd(e,i),p!=null&&o.unshift(Wd(e,p,u)),p=Vd(e,t),p!=null&&o.push(Wd(e,p,u))),e=e.return}return o}function Kc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zb(e,t,i,o,u){for(var p=t._reactName,y=[];i!==null&&i!==o;){var l=i,S=l.alternate,b=l.stateNode;if(S!==null&&S===o)break;l.tag===5&&b!==null&&(l=b,u?(S=Vd(i,p),S!=null&&y.unshift(Wd(i,S,l))):u||(S=Vd(i,p),S!=null&&y.push(Wd(i,S,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var rL=/\r\n?/g,iL=/\u0000|\uFFFD/g;function Rb(e){return(typeof e=="string"?e:""+e).replace(rL,`
`).replace(iL,"")}function Gf(e,t,i){if(t=Rb(t),Rb(e)!==t&&i)throw Error(Ge(425))}function Nm(){}var A0=null,M0=null;function I0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D0=typeof setTimeout=="function"?setTimeout:void 0,sL=typeof clearTimeout=="function"?clearTimeout:void 0,Fb=typeof Promise=="function"?Promise:void 0,oL=typeof queueMicrotask=="function"?queueMicrotask:typeof Fb<"u"?function(e){return Fb.resolve(null).then(e).catch(aL)}:D0;function aL(e){setTimeout(function(){throw e})}function Ev(e,t){var i=t,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(o===0){e.removeChild(u),$d(t);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=u}while(i);$d(t)}function Za(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ob(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Hu=Math.random().toString(36).slice(2),ho="__reactFiber$"+Hu,Hd="__reactProps$"+Hu,Xo="__reactContainer$"+Hu,L0="__reactEvents$"+Hu,lL="__reactListeners$"+Hu,cL="__reactHandles$"+Hu;function Ul(e){var t=e[ho];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xo]||i[ho]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Ob(e);e!==null;){if(i=e[ho])return i;e=Ob(e)}return t}e=i,i=e.parentNode}return null}function fp(e){return e=e[ho]||e[Xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function su(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function bg(e){return e[Hd]||null}var z0=[],ou=-1;function ul(e){return{current:e}}function En(e){0>ou||(e.current=z0[ou],z0[ou]=null,ou--)}function xn(e,t){ou++,z0[ou]=e.current,e.current=t}var el={},ii=ul(el),Vi=ul(!1),ec=el;function Fu(e,t){var i=e.type.contextTypes;if(!i)return el;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in i)u[p]=t[p];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function ji(e){return e=e.childContextTypes,e!=null}function Vm(){En(Vi),En(ii)}function Bb(e,t,i){if(ii.current!==el)throw Error(Ge(168));xn(ii,t),xn(Vi,i)}function FC(e,t,i){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var u in o)if(!(u in t))throw Error(Ge(108,WD(e)||"Unknown",u));return jn({},i,o)}function jm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||el,ec=ii.current,xn(ii,e),xn(Vi,Vi.current),!0}function Nb(e,t,i){var o=e.stateNode;if(!o)throw Error(Ge(169));i?(e=FC(e,t,ec),o.__reactInternalMemoizedMergedChildContext=e,En(Vi),En(ii),xn(ii,e)):En(Vi),xn(Vi,i)}var jo=null,Sg=!1,Pv=!1;function OC(e){jo===null?jo=[e]:jo.push(e)}function uL(e){Sg=!0,OC(e)}function hl(){if(!Pv&&jo!==null){Pv=!0;var e=0,t=ln;try{var i=jo;for(ln=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}jo=null,Sg=!1}catch(u){throw jo!==null&&(jo=jo.slice(e+1)),lC(q_,hl),u}finally{ln=t,Pv=!1}}return null}var au=[],lu=0,Um=null,$m=0,ws=[],bs=0,tc=null,Uo=1,$o="";function Bl(e,t){au[lu++]=$m,au[lu++]=Um,Um=e,$m=t}function BC(e,t,i){ws[bs++]=Uo,ws[bs++]=$o,ws[bs++]=tc,tc=e;var o=Uo;e=$o;var u=32-qs(o)-1;o&=~(1<<u),i+=1;var p=32-qs(t)+u;if(30<p){var y=u-u%5;p=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Uo=1<<32-qs(t)+u|i<<u|o,$o=p+e}else Uo=1<<p|i<<u|o,$o=e}function ex(e){e.return!==null&&(Bl(e,1),BC(e,1,0))}function tx(e){for(;e===Um;)Um=au[--lu],au[lu]=null,$m=au[--lu],au[lu]=null;for(;e===tc;)tc=ws[--bs],ws[bs]=null,$o=ws[--bs],ws[bs]=null,Uo=ws[--bs],ws[bs]=null}var ns=null,ts=null,Mn=!1,Gs=null;function NC(e,t){var i=Ss(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Vb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,ts=Za(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=tc!==null?{id:Uo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ss(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,ns=e,ts=null,!0):!1;default:return!1}}function R0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function F0(e){if(Mn){var t=ts;if(t){var i=t;if(!Vb(e,t)){if(R0(e))throw Error(Ge(418));t=Za(i.nextSibling);var o=ns;t&&Vb(e,t)?NC(o,i):(e.flags=e.flags&-4097|2,Mn=!1,ns=e)}}else{if(R0(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Mn=!1,ns=e}}}function jb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function qf(e){if(e!==ns)return!1;if(!Mn)return jb(e),Mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!I0(e.type,e.memoizedProps)),t&&(t=ts)){if(R0(e))throw VC(),Error(Ge(418));for(;t;)NC(e,t),t=Za(t.nextSibling)}if(jb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ts=Za(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ts=null}}else ts=ns?Za(e.stateNode.nextSibling):null;return!0}function VC(){for(var e=ts;e;)e=Za(e.nextSibling)}function Ou(){ts=ns=null,Mn=!1}function nx(e){Gs===null?Gs=[e]:Gs.push(e)}var hL=na.ReactCurrentBatchConfig;function dd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ge(309));var o=i.stateNode}if(!o)throw Error(Ge(147,e));var u=o,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(y){var l=u.refs;y===null?delete l[p]:l[p]=y},t._stringRef=p,t)}if(typeof e!="string")throw Error(Ge(284));if(!i._owner)throw Error(Ge(290,e))}return e}function Zf(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ub(e){var t=e._init;return t(e._payload)}function jC(e){function t(B,V){if(e){var q=B.deletions;q===null?(B.deletions=[V],B.flags|=16):q.push(V)}}function i(B,V){if(!e)return null;for(;V!==null;)t(B,V),V=V.sibling;return null}function o(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function u(B,V){return B=Xa(B,V),B.index=0,B.sibling=null,B}function p(B,V,q){return B.index=q,e?(q=B.alternate,q!==null?(q=q.index,q<V?(B.flags|=2,V):q):(B.flags|=2,V)):(B.flags|=1048576,V)}function y(B){return e&&B.alternate===null&&(B.flags|=2),B}function l(B,V,q,ne){return V===null||V.tag!==6?(V=zv(q,B.mode,ne),V.return=B,V):(V=u(V,q),V.return=B,V)}function S(B,V,q,ne){var he=q.type;return he===tu?I(B,V,q.props.children,ne,q.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Aa&&Ub(he)===V.type)?(ne=u(V,q.props),ne.ref=dd(B,V,q),ne.return=B,ne):(ne=bm(q.type,q.key,q.props,null,B.mode,ne),ne.ref=dd(B,V,q),ne.return=B,ne)}function b(B,V,q,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Rv(q,B.mode,ne),V.return=B,V):(V=u(V,q.children||[]),V.return=B,V)}function I(B,V,q,ne,he){return V===null||V.tag!==7?(V=Yl(q,B.mode,ne,he),V.return=B,V):(V=u(V,q),V.return=B,V)}function M(B,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=zv(""+V,B.mode,q),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Rf:return q=bm(V.type,V.key,V.props,null,B.mode,q),q.ref=dd(B,null,V),q.return=B,q;case eu:return V=Rv(V,B.mode,q),V.return=B,V;case Aa:var ne=V._init;return M(B,ne(V._payload),q)}if(_d(V)||ad(V))return V=Yl(V,B.mode,q,null),V.return=B,V;Zf(B,V)}return null}function k(B,V,q,ne){var he=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return he!==null?null:l(B,V,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Rf:return q.key===he?S(B,V,q,ne):null;case eu:return q.key===he?b(B,V,q,ne):null;case Aa:return he=q._init,k(B,V,he(q._payload),ne)}if(_d(q)||ad(q))return he!==null?null:I(B,V,q,ne,null);Zf(B,q)}return null}function j(B,V,q,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return B=B.get(q)||null,l(V,B,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Rf:return B=B.get(ne.key===null?q:ne.key)||null,S(V,B,ne,he);case eu:return B=B.get(ne.key===null?q:ne.key)||null,b(V,B,ne,he);case Aa:var Se=ne._init;return j(B,V,q,Se(ne._payload),he)}if(_d(ne)||ad(ne))return B=B.get(q)||null,I(V,B,ne,he,null);Zf(V,ne)}return null}function K(B,V,q,ne){for(var he=null,Se=null,ke=V,we=V=0,We=null;ke!==null&&we<q.length;we++){ke.index>we?(We=ke,ke=null):We=ke.sibling;var Fe=k(B,ke,q[we],ne);if(Fe===null){ke===null&&(ke=We);break}e&&ke&&Fe.alternate===null&&t(B,ke),V=p(Fe,V,we),Se===null?he=Fe:Se.sibling=Fe,Se=Fe,ke=We}if(we===q.length)return i(B,ke),Mn&&Bl(B,we),he;if(ke===null){for(;we<q.length;we++)ke=M(B,q[we],ne),ke!==null&&(V=p(ke,V,we),Se===null?he=ke:Se.sibling=ke,Se=ke);return Mn&&Bl(B,we),he}for(ke=o(B,ke);we<q.length;we++)We=j(ke,B,we,q[we],ne),We!==null&&(e&&We.alternate!==null&&ke.delete(We.key===null?we:We.key),V=p(We,V,we),Se===null?he=We:Se.sibling=We,Se=We);return e&&ke.forEach(function(pt){return t(B,pt)}),Mn&&Bl(B,we),he}function O(B,V,q,ne){var he=ad(q);if(typeof he!="function")throw Error(Ge(150));if(q=he.call(q),q==null)throw Error(Ge(151));for(var Se=he=null,ke=V,we=V=0,We=null,Fe=q.next();ke!==null&&!Fe.done;we++,Fe=q.next()){ke.index>we?(We=ke,ke=null):We=ke.sibling;var pt=k(B,ke,Fe.value,ne);if(pt===null){ke===null&&(ke=We);break}e&&ke&&pt.alternate===null&&t(B,ke),V=p(pt,V,we),Se===null?he=pt:Se.sibling=pt,Se=pt,ke=We}if(Fe.done)return i(B,ke),Mn&&Bl(B,we),he;if(ke===null){for(;!Fe.done;we++,Fe=q.next())Fe=M(B,Fe.value,ne),Fe!==null&&(V=p(Fe,V,we),Se===null?he=Fe:Se.sibling=Fe,Se=Fe);return Mn&&Bl(B,we),he}for(ke=o(B,ke);!Fe.done;we++,Fe=q.next())Fe=j(ke,B,we,Fe.value,ne),Fe!==null&&(e&&Fe.alternate!==null&&ke.delete(Fe.key===null?we:Fe.key),V=p(Fe,V,we),Se===null?he=Fe:Se.sibling=Fe,Se=Fe);return e&&ke.forEach(function(it){return t(B,it)}),Mn&&Bl(B,we),he}function X(B,V,q,ne){if(typeof q=="object"&&q!==null&&q.type===tu&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Rf:e:{for(var he=q.key,Se=V;Se!==null;){if(Se.key===he){if(he=q.type,he===tu){if(Se.tag===7){i(B,Se.sibling),V=u(Se,q.props.children),V.return=B,B=V;break e}}else if(Se.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Aa&&Ub(he)===Se.type){i(B,Se.sibling),V=u(Se,q.props),V.ref=dd(B,Se,q),V.return=B,B=V;break e}i(B,Se);break}else t(B,Se);Se=Se.sibling}q.type===tu?(V=Yl(q.props.children,B.mode,ne,q.key),V.return=B,B=V):(ne=bm(q.type,q.key,q.props,null,B.mode,ne),ne.ref=dd(B,V,q),ne.return=B,B=ne)}return y(B);case eu:e:{for(Se=q.key;V!==null;){if(V.key===Se)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){i(B,V.sibling),V=u(V,q.children||[]),V.return=B,B=V;break e}else{i(B,V);break}else t(B,V);V=V.sibling}V=Rv(q,B.mode,ne),V.return=B,B=V}return y(B);case Aa:return Se=q._init,X(B,V,Se(q._payload),ne)}if(_d(q))return K(B,V,q,ne);if(ad(q))return O(B,V,q,ne);Zf(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(i(B,V.sibling),V=u(V,q),V.return=B,B=V):(i(B,V),V=zv(q,B.mode,ne),V.return=B,B=V),y(B)):i(B,V)}return X}var Bu=jC(!0),UC=jC(!1),Gm=ul(null),qm=null,cu=null,rx=null;function ix(){rx=cu=qm=null}function sx(e){var t=Gm.current;En(Gm),e._currentValue=t}function O0(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function xu(e,t){qm=e,rx=cu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ni=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(rx!==e)if(e={context:e,memoizedValue:t,next:null},cu===null){if(qm===null)throw Error(Ge(308));cu=e,qm.dependencies={lanes:0,firstContext:e}}else cu=cu.next=e;return t}var $l=null;function ox(e){$l===null?$l=[e]:$l.push(e)}function $C(e,t,i,o){var u=t.interleaved;return u===null?(i.next=i,ox(t)):(i.next=u.next,u.next=i),t.interleaved=i,Yo(e,o)}function Yo(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ma=!1;function ax(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Jt&2){var u=o.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),o.pending=t,Yo(e,i)}return u=o.interleaved,u===null?(t.next=t,ox(o)):(t.next=u.next,u.next=t),o.interleaved=t,Yo(e,i)}function gm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Z_(e,i)}}function $b(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?u=p=y:p=p.next=y,i=i.next}while(i!==null);p===null?u=p=t:p=p.next=t}else u=p=t;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Zm(e,t,i,o){var u=e.updateQueue;Ma=!1;var p=u.firstBaseUpdate,y=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var S=l,b=S.next;S.next=null,y===null?p=b:y.next=b,y=S;var I=e.alternate;I!==null&&(I=I.updateQueue,l=I.lastBaseUpdate,l!==y&&(l===null?I.firstBaseUpdate=b:l.next=b,I.lastBaseUpdate=S))}if(p!==null){var M=u.baseState;y=0,I=b=S=null,l=p;do{var k=l.lane,j=l.eventTime;if((o&k)===k){I!==null&&(I=I.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var K=e,O=l;switch(k=t,j=i,O.tag){case 1:if(K=O.payload,typeof K=="function"){M=K.call(j,M,k);break e}M=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=O.payload,k=typeof K=="function"?K.call(j,M,k):K,k==null)break e;M=jn({},M,k);break e;case 2:Ma=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,k=u.effects,k===null?u.effects=[l]:k.push(l))}else j={eventTime:j,lane:k,tag:l.tag,payload:l.payload,callback:l.callback,next:null},I===null?(b=I=j,S=M):I=I.next=j,y|=k;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;k=l,l=k.next,k.next=null,u.lastBaseUpdate=k,u.shared.pending=null}}while(!0);if(I===null&&(S=M),u.baseState=S,u.firstBaseUpdate=b,u.lastBaseUpdate=I,t=u.shared.interleaved,t!==null){u=t;do y|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);rc|=y,e.lanes=y,e.memoizedState=M}}function Gb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],u=o.callback;if(u!==null){if(o.callback=null,o=i,typeof u!="function")throw Error(Ge(191,u));u.call(o)}}}var mp={},go=ul(mp),Kd=ul(mp),Xd=ul(mp);function Gl(e){if(e===mp)throw Error(Ge(174));return e}function lx(e,t){switch(xn(Xd,t),xn(Kd,e),xn(go,mp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:y0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=y0(t,e)}En(go),xn(go,t)}function Nu(){En(go),En(Kd),En(Xd)}function qC(e){Gl(Xd.current);var t=Gl(go.current),i=y0(t,e.type);t!==i&&(xn(Kd,e),xn(go,i))}function cx(e){Kd.current===e&&(En(go),En(Kd))}var Bn=ul(0);function Wm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kv=[];function ux(){for(var e=0;e<kv.length;e++)kv[e]._workInProgressVersionPrimary=null;kv.length=0}var ym=na.ReactCurrentDispatcher,Av=na.ReactCurrentBatchConfig,nc=0,Vn=null,fr=null,Cr=null,Hm=!1,Ad=!1,Yd=0,dL=0;function Yr(){throw Error(Ge(321))}function hx(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ws(e[i],t[i]))return!1;return!0}function dx(e,t,i,o,u,p){if(nc=p,Vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ym.current=e===null||e.memoizedState===null?gL:yL,e=i(o,u),Ad){p=0;do{if(Ad=!1,Yd=0,25<=p)throw Error(Ge(301));p+=1,Cr=fr=null,t.updateQueue=null,ym.current=vL,e=i(o,u)}while(Ad)}if(ym.current=Km,t=fr!==null&&fr.next!==null,nc=0,Cr=fr=Vn=null,Hm=!1,t)throw Error(Ge(300));return e}function px(){var e=Yd!==0;return Yd=0,e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?Vn.memoizedState=Cr=e:Cr=Cr.next=e,Cr}function Es(){if(fr===null){var e=Vn.alternate;e=e!==null?e.memoizedState:null}else e=fr.next;var t=Cr===null?Vn.memoizedState:Cr.next;if(t!==null)Cr=t,fr=e;else{if(e===null)throw Error(Ge(310));fr=e,e={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},Cr===null?Vn.memoizedState=Cr=e:Cr=Cr.next=e}return Cr}function Qd(e,t){return typeof t=="function"?t(e):t}function Mv(e){var t=Es(),i=t.queue;if(i===null)throw Error(Ge(311));i.lastRenderedReducer=e;var o=fr,u=o.baseQueue,p=i.pending;if(p!==null){if(u!==null){var y=u.next;u.next=p.next,p.next=y}o.baseQueue=u=p,i.pending=null}if(u!==null){p=u.next,o=o.baseState;var l=y=null,S=null,b=p;do{var I=b.lane;if((nc&I)===I)S!==null&&(S=S.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),o=b.hasEagerState?b.eagerState:e(o,b.action);else{var M={lane:I,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};S===null?(l=S=M,y=o):S=S.next=M,Vn.lanes|=I,rc|=I}b=b.next}while(b!==null&&b!==p);S===null?y=o:S.next=l,Ws(o,t.memoizedState)||(Ni=!0),t.memoizedState=o,t.baseState=y,t.baseQueue=S,i.lastRenderedState=o}if(e=i.interleaved,e!==null){u=e;do p=u.lane,Vn.lanes|=p,rc|=p,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Iv(e){var t=Es(),i=t.queue;if(i===null)throw Error(Ge(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,p=t.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do p=e(p,y.action),y=y.next;while(y!==u);Ws(p,t.memoizedState)||(Ni=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,o]}function ZC(){}function WC(e,t){var i=Vn,o=Es(),u=t(),p=!Ws(o.memoizedState,u);if(p&&(o.memoizedState=u,Ni=!0),o=o.queue,fx(XC.bind(null,i,o,e),[e]),o.getSnapshot!==t||p||Cr!==null&&Cr.memoizedState.tag&1){if(i.flags|=2048,Jd(9,KC.bind(null,i,o,u,t),void 0,null),Er===null)throw Error(Ge(349));nc&30||HC(i,t,u)}return u}function HC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function KC(e,t,i,o){t.value=i,t.getSnapshot=o,YC(t)&&QC(e)}function XC(e,t,i){return i(function(){YC(t)&&QC(e)})}function YC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ws(e,i)}catch{return!0}}function QC(e){var t=Yo(e,1);t!==null&&Zs(t,e,1,-1)}function qb(e){var t=ao();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:e},t.queue=e,e=e.dispatch=mL.bind(null,Vn,e),[t.memoizedState,e]}function Jd(e,t,i,o){return e={tag:e,create:t,destroy:i,deps:o,next:null},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e)),e}function JC(){return Es().memoizedState}function vm(e,t,i,o){var u=ao();Vn.flags|=e,u.memoizedState=Jd(1|t,i,void 0,o===void 0?null:o)}function Tg(e,t,i,o){var u=Es();o=o===void 0?null:o;var p=void 0;if(fr!==null){var y=fr.memoizedState;if(p=y.destroy,o!==null&&hx(o,y.deps)){u.memoizedState=Jd(t,i,p,o);return}}Vn.flags|=e,u.memoizedState=Jd(1|t,i,p,o)}function Zb(e,t){return vm(8390656,8,e,t)}function fx(e,t){return Tg(2048,8,e,t)}function eE(e,t){return Tg(4,2,e,t)}function tE(e,t){return Tg(4,4,e,t)}function nE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rE(e,t,i){return i=i!=null?i.concat([e]):null,Tg(4,4,nE.bind(null,t,e),i)}function mx(){}function iE(e,t){var i=Es();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&hx(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function sE(e,t){var i=Es();t=t===void 0?null:t;var o=i.memoizedState;return o!==null&&t!==null&&hx(t,o[1])?o[0]:(e=e(),i.memoizedState=[e,t],e)}function oE(e,t,i){return nc&21?(Ws(i,t)||(i=hC(),Vn.lanes|=i,rc|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ni=!0),e.memoizedState=i)}function pL(e,t){var i=ln;ln=i!==0&&4>i?i:4,e(!0);var o=Av.transition;Av.transition={};try{e(!1),t()}finally{ln=i,Av.transition=o}}function aE(){return Es().memoizedState}function fL(e,t,i){var o=Ka(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},lE(e))cE(t,i);else if(i=$C(e,t,i,o),i!==null){var u=bi();Zs(i,e,o,u),uE(i,t,o)}}function mL(e,t,i){var o=Ka(e),u={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(lE(e))cE(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var y=t.lastRenderedState,l=p(y,i);if(u.hasEagerState=!0,u.eagerState=l,Ws(l,y)){var S=t.interleaved;S===null?(u.next=u,ox(t)):(u.next=S.next,S.next=u),t.interleaved=u;return}}catch{}finally{}i=$C(e,t,u,o),i!==null&&(u=bi(),Zs(i,e,o,u),uE(i,t,o))}}function lE(e){var t=e.alternate;return e===Vn||t!==null&&t===Vn}function cE(e,t){Ad=Hm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function uE(e,t,i){if(i&4194240){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,Z_(e,i)}}var Km={readContext:Cs,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},gL={readContext:Cs,useCallback:function(e,t){return ao().memoizedState=[e,t===void 0?null:t],e},useContext:Cs,useEffect:Zb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,vm(4194308,4,nE.bind(null,t,e),i)},useLayoutEffect:function(e,t){return vm(4194308,4,e,t)},useInsertionEffect:function(e,t){return vm(4,2,e,t)},useMemo:function(e,t){var i=ao();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var o=ao();return t=i!==void 0?i(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=fL.bind(null,Vn,e),[o.memoizedState,e]},useRef:function(e){var t=ao();return e={current:e},t.memoizedState=e},useState:qb,useDebugValue:mx,useDeferredValue:function(e){return ao().memoizedState=e},useTransition:function(){var e=qb(!1),t=e[0];return e=pL.bind(null,e[1]),ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var o=Vn,u=ao();if(Mn){if(i===void 0)throw Error(Ge(407));i=i()}else{if(i=t(),Er===null)throw Error(Ge(349));nc&30||HC(o,t,i)}u.memoizedState=i;var p={value:i,getSnapshot:t};return u.queue=p,Zb(XC.bind(null,o,p,e),[e]),o.flags|=2048,Jd(9,KC.bind(null,o,p,i,t),void 0,null),i},useId:function(){var e=ao(),t=Er.identifierPrefix;if(Mn){var i=$o,o=Uo;i=(o&~(1<<32-qs(o)-1)).toString(32)+i,t=":"+t+"R"+i,i=Yd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=dL++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yL={readContext:Cs,useCallback:iE,useContext:Cs,useEffect:fx,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Mv,useRef:JC,useState:function(){return Mv(Qd)},useDebugValue:mx,useDeferredValue:function(e){var t=Es();return oE(t,fr.memoizedState,e)},useTransition:function(){var e=Mv(Qd)[0],t=Es().memoizedState;return[e,t]},useMutableSource:ZC,useSyncExternalStore:WC,useId:aE,unstable_isNewReconciler:!1},vL={readContext:Cs,useCallback:iE,useContext:Cs,useEffect:fx,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:Iv,useRef:JC,useState:function(){return Iv(Qd)},useDebugValue:mx,useDeferredValue:function(e){var t=Es();return fr===null?t.memoizedState=e:oE(t,fr.memoizedState,e)},useTransition:function(){var e=Iv(Qd)[0],t=Es().memoizedState;return[e,t]},useMutableSource:ZC,useSyncExternalStore:WC,useId:aE,unstable_isNewReconciler:!1};function Vs(e,t){if(e&&e.defaultProps){t=jn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function B0(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:jn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Cg={isMounted:function(e){return(e=e._reactInternals)?lc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var o=bi(),u=Ka(e),p=qo(o,u);p.payload=t,i!=null&&(p.callback=i),t=Wa(e,p,u),t!==null&&(Zs(t,e,u,o),gm(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=bi(),u=Ka(e),p=qo(o,u);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=Wa(e,p,u),t!==null&&(Zs(t,e,u,o),gm(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=bi(),o=Ka(e),u=qo(i,o);u.tag=2,t!=null&&(u.callback=t),t=Wa(e,u,o),t!==null&&(Zs(t,e,o,i),gm(t,e,o))}};function Wb(e,t,i,o,u,p,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,y):t.prototype&&t.prototype.isPureReactComponent?!qd(i,o)||!qd(u,p):!0}function hE(e,t,i){var o=!1,u=el,p=t.contextType;return typeof p=="object"&&p!==null?p=Cs(p):(u=ji(t)?ec:ii.current,o=t.contextTypes,p=(o=o!=null)?Fu(e,u):el),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cg,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function Hb(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&Cg.enqueueReplaceState(t,t.state,null)}function N0(e,t,i,o){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs={},ax(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=Cs(p):(p=ji(t)?ec:ii.current,u.context=Fu(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(B0(e,t,p,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Cg.enqueueReplaceState(u,u.state,null),Zm(e,i,u,o),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Vu(e,t){try{var i="",o=t;do i+=ZD(o),o=o.return;while(o);var u=i}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function Dv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function V0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var _L=typeof WeakMap=="function"?WeakMap:Map;function dE(e,t,i){i=qo(-1,i),i.tag=3,i.payload={element:null};var o=t.value;return i.callback=function(){Ym||(Ym=!0,X0=o),V0(e,t)},i}function pE(e,t,i){i=qo(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var u=t.value;i.payload=function(){return o(u)},i.callback=function(){V0(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){V0(e,t),typeof o!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Kb(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new _L;var u=new Set;o.set(t,u)}else u=o.get(t),u===void 0&&(u=new Set,o.set(t,u));u.has(i)||(u.add(i),e=LL.bind(null,e,t,i),t.then(e,e))}function Xb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yb(e,t,i,o,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=qo(-1,1),t.tag=2,Wa(i,t,1))),i.lanes|=1),e)}var xL=na.ReactCurrentOwner,Ni=!1;function xi(e,t,i,o){t.child=e===null?UC(t,null,i,o):Bu(t,e.child,i,o)}function Qb(e,t,i,o,u){i=i.render;var p=t.ref;return xu(t,u),o=dx(e,t,i,o,p,u),i=px(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qo(e,t,u)):(Mn&&i&&ex(t),t.flags|=1,xi(e,t,o,u),t.child)}function Jb(e,t,i,o,u){if(e===null){var p=i.type;return typeof p=="function"&&!Sx(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,fE(e,t,p,o,u)):(e=bm(i.type,null,o,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&u)){var y=p.memoizedProps;if(i=i.compare,i=i!==null?i:qd,i(y,o)&&e.ref===t.ref)return Qo(e,t,u)}return t.flags|=1,e=Xa(p,o),e.ref=t.ref,e.return=t,t.child=e}function fE(e,t,i,o,u){if(e!==null){var p=e.memoizedProps;if(qd(p,o)&&e.ref===t.ref)if(Ni=!1,t.pendingProps=o=p,(e.lanes&u)!==0)e.flags&131072&&(Ni=!0);else return t.lanes=e.lanes,Qo(e,t,u)}return j0(e,t,i,o,u)}function mE(e,t,i){var o=t.pendingProps,u=o.children,p=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(hu,Ji),Ji|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn(hu,Ji),Ji|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=p!==null?p.baseLanes:i,xn(hu,Ji),Ji|=o}else p!==null?(o=p.baseLanes|i,t.memoizedState=null):o=i,xn(hu,Ji),Ji|=o;return xi(e,t,u,i),t.child}function gE(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function j0(e,t,i,o,u){var p=ji(i)?ec:ii.current;return p=Fu(t,p),xu(t,u),i=dx(e,t,i,o,p,u),o=px(),e!==null&&!Ni?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qo(e,t,u)):(Mn&&o&&ex(t),t.flags|=1,xi(e,t,i,u),t.child)}function e2(e,t,i,o,u){if(ji(i)){var p=!0;jm(t)}else p=!1;if(xu(t,u),t.stateNode===null)_m(e,t),hE(t,i,o),N0(t,i,o,u),o=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var S=y.context,b=i.contextType;typeof b=="object"&&b!==null?b=Cs(b):(b=ji(i)?ec:ii.current,b=Fu(t,b));var I=i.getDerivedStateFromProps,M=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function";M||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==o||S!==b)&&Hb(t,y,o,b),Ma=!1;var k=t.memoizedState;y.state=k,Zm(t,o,y,u),S=t.memoizedState,l!==o||k!==S||Vi.current||Ma?(typeof I=="function"&&(B0(t,i,I,o),S=t.memoizedState),(l=Ma||Wb(t,i,l,o,k,S,b))?(M||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=S),y.props=o,y.state=S,y.context=b,o=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{y=t.stateNode,GC(e,t),l=t.memoizedProps,b=t.type===t.elementType?l:Vs(t.type,l),y.props=b,M=t.pendingProps,k=y.context,S=i.contextType,typeof S=="object"&&S!==null?S=Cs(S):(S=ji(i)?ec:ii.current,S=Fu(t,S));var j=i.getDerivedStateFromProps;(I=typeof j=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==M||k!==S)&&Hb(t,y,o,S),Ma=!1,k=t.memoizedState,y.state=k,Zm(t,o,y,u);var K=t.memoizedState;l!==M||k!==K||Vi.current||Ma?(typeof j=="function"&&(B0(t,i,j,o),K=t.memoizedState),(b=Ma||Wb(t,i,b,o,k,K,S)||!1)?(I||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,K,S),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,K,S)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=K),y.props=o,y.state=K,y.context=S,o=b):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),o=!1)}return U0(e,t,i,o,p,u)}function U0(e,t,i,o,u,p){gE(e,t);var y=(t.flags&128)!==0;if(!o&&!y)return u&&Nb(t,i,!1),Qo(e,t,p);o=t.stateNode,xL.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&y?(t.child=Bu(t,e.child,null,p),t.child=Bu(t,null,l,p)):xi(e,t,l,p),t.memoizedState=o.state,u&&Nb(t,i,!0),t.child}function yE(e){var t=e.stateNode;t.pendingContext?Bb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bb(e,t.context,!1),lx(e,t.containerInfo)}function t2(e,t,i,o,u){return Ou(),nx(u),t.flags|=256,xi(e,t,i,o),t.child}var $0={dehydrated:null,treeContext:null,retryLane:0};function G0(e){return{baseLanes:e,cachePool:null,transitions:null}}function vE(e,t,i){var o=t.pendingProps,u=Bn.current,p=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),xn(Bn,u&1),e===null)return F0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=o.children,e=o.fallback,p?(o=t.mode,p=t.child,y={mode:"hidden",children:y},!(o&1)&&p!==null?(p.childLanes=0,p.pendingProps=y):p=kg(y,o,0,null),e=Yl(e,o,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=G0(i),t.memoizedState=$0,e):gx(t,y));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return wL(e,t,y,o,l,u,i);if(p){p=o.fallback,y=t.mode,u=e.child,l=u.sibling;var S={mode:"hidden",children:o.children};return!(y&1)&&t.child!==u?(o=t.child,o.childLanes=0,o.pendingProps=S,t.deletions=null):(o=Xa(u,S),o.subtreeFlags=u.subtreeFlags&14680064),l!==null?p=Xa(l,p):(p=Yl(p,y,i,null),p.flags|=2),p.return=t,o.return=t,o.sibling=p,t.child=o,o=p,p=t.child,y=e.child.memoizedState,y=y===null?G0(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=e.childLanes&~i,t.memoizedState=$0,o}return p=e.child,e=p.sibling,o=Xa(p,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=i),o.return=t,o.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=o,t.memoizedState=null,o}function gx(e,t){return t=kg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wf(e,t,i,o){return o!==null&&nx(o),Bu(t,e.child,null,i),e=gx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wL(e,t,i,o,u,p,y){if(i)return t.flags&256?(t.flags&=-257,o=Dv(Error(Ge(422))),Wf(e,t,y,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=o.fallback,u=t.mode,o=kg({mode:"visible",children:o.children},u,0,null),p=Yl(p,u,y,null),p.flags|=2,o.return=t,p.return=t,o.sibling=p,t.child=o,t.mode&1&&Bu(t,e.child,null,y),t.child.memoizedState=G0(y),t.memoizedState=$0,p);if(!(t.mode&1))return Wf(e,t,y,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var l=o.dgst;return o=l,p=Error(Ge(419)),o=Dv(p,o,void 0),Wf(e,t,y,o)}if(l=(y&e.childLanes)!==0,Ni||l){if(o=Er,o!==null){switch(y&-y){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|y)?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,Yo(e,u),Zs(o,e,u,-1))}return bx(),o=Dv(Error(Ge(421))),Wf(e,t,y,o)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=zL.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,ts=Za(u.nextSibling),ns=t,Mn=!0,Gs=null,e!==null&&(ws[bs++]=Uo,ws[bs++]=$o,ws[bs++]=tc,Uo=e.id,$o=e.overflow,tc=t),t=gx(t,o.children),t.flags|=4096,t)}function n2(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),O0(e.return,t,i)}function Lv(e,t,i,o,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=i,p.tailMode=u)}function _E(e,t,i){var o=t.pendingProps,u=o.revealOrder,p=o.tail;if(xi(e,t,o.children,i),o=Bn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&n2(e,i,t);else if(e.tag===19)n2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(xn(Bn,o),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&Wm(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),Lv(t,!1,u,i,p);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Wm(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Lv(t,!0,i,null,p);break;case"together":Lv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _m(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),rc|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,i=Xa(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Xa(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function bL(e,t,i){switch(t.tag){case 3:yE(t),Ou();break;case 5:qC(t);break;case 1:ji(t.type)&&jm(t);break;case 4:lx(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,u=t.memoizedProps.value;xn(Gm,o._currentValue),o._currentValue=u;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(xn(Bn,Bn.current&1),t.flags|=128,null):i&t.child.childLanes?vE(e,t,i):(xn(Bn,Bn.current&1),e=Qo(e,t,i),e!==null?e.sibling:null);xn(Bn,Bn.current&1);break;case 19:if(o=(i&t.childLanes)!==0,e.flags&128){if(o)return _E(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),xn(Bn,Bn.current),o)break;return null;case 22:case 23:return t.lanes=0,mE(e,t,i)}return Qo(e,t,i)}var xE,q0,wE,bE;xE=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};q0=function(){};wE=function(e,t,i,o){var u=e.memoizedProps;if(u!==o){e=t.stateNode,Gl(go.current);var p=null;switch(i){case"input":u=p0(e,u),o=p0(e,o),p=[];break;case"select":u=jn({},u,{value:void 0}),o=jn({},o,{value:void 0}),p=[];break;case"textarea":u=g0(e,u),o=g0(e,o),p=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Nm)}v0(i,o);var y;i=null;for(b in u)if(!o.hasOwnProperty(b)&&u.hasOwnProperty(b)&&u[b]!=null)if(b==="style"){var l=u[b];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(Bd.hasOwnProperty(b)?p||(p=[]):(p=p||[]).push(b,null));for(b in o){var S=o[b];if(l=u!=null?u[b]:void 0,o.hasOwnProperty(b)&&S!==l&&(S!=null||l!=null))if(b==="style")if(l){for(y in l)!l.hasOwnProperty(y)||S&&S.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in S)S.hasOwnProperty(y)&&l[y]!==S[y]&&(i||(i={}),i[y]=S[y])}else i||(p||(p=[]),p.push(b,i)),i=S;else b==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,l=l?l.__html:void 0,S!=null&&l!==S&&(p=p||[]).push(b,S)):b==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(b,""+S):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(b)?(S!=null&&b==="onScroll"&&Cn("scroll",e),p||l===S||(p=[])):(p=p||[]).push(b,S))}i&&(p=p||[]).push("style",i);var b=p;(t.updateQueue=b)&&(t.flags|=4)}};bE=function(e,t,i,o){i!==o&&(t.flags|=4)};function pd(e,t){if(!Mn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Qr(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function SL(e,t,i){var o=t.pendingProps;switch(tx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(t),null;case 1:return ji(t.type)&&Vm(),Qr(t),null;case 3:return o=t.stateNode,Nu(),En(Vi),En(ii),ux(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(qf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gs!==null&&(J0(Gs),Gs=null))),q0(e,t),Qr(t),null;case 5:cx(t);var u=Gl(Xd.current);if(i=t.type,e!==null&&t.stateNode!=null)wE(e,t,i,o,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ge(166));return Qr(t),null}if(e=Gl(go.current),qf(t)){o=t.stateNode,i=t.type;var p=t.memoizedProps;switch(o[ho]=t,o[Hd]=p,e=(t.mode&1)!==0,i){case"dialog":Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":case"embed":Cn("load",o);break;case"video":case"audio":for(u=0;u<wd.length;u++)Cn(wd[u],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"input":hb(o,p),Cn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Cn("invalid",o);break;case"textarea":pb(o,p),Cn("invalid",o)}v0(i,p),u=null;for(var y in p)if(p.hasOwnProperty(y)){var l=p[y];y==="children"?typeof l=="string"?o.textContent!==l&&(p.suppressHydrationWarning!==!0&&Gf(o.textContent,l,e),u=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(p.suppressHydrationWarning!==!0&&Gf(o.textContent,l,e),u=["children",""+l]):Bd.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&Cn("scroll",o)}switch(i){case"input":Ff(o),db(o,p,!0);break;case"textarea":Ff(o),fb(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(o.onclick=Nm)}o=u,t.updateQueue=o,o!==null&&(t.flags|=4)}else{y=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=XT(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=y.createElement(i,{is:o.is}):(e=y.createElement(i),i==="select"&&(y=e,o.multiple?y.multiple=!0:o.size&&(y.size=o.size))):e=y.createElementNS(e,i),e[ho]=t,e[Hd]=o,xE(e,t,!1,!1),t.stateNode=e;e:{switch(y=_0(i,o),i){case"dialog":Cn("cancel",e),Cn("close",e),u=o;break;case"iframe":case"object":case"embed":Cn("load",e),u=o;break;case"video":case"audio":for(u=0;u<wd.length;u++)Cn(wd[u],e);u=o;break;case"source":Cn("error",e),u=o;break;case"img":case"image":case"link":Cn("error",e),Cn("load",e),u=o;break;case"details":Cn("toggle",e),u=o;break;case"input":hb(e,o),u=p0(e,o),Cn("invalid",e);break;case"option":u=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},u=jn({},o,{value:void 0}),Cn("invalid",e);break;case"textarea":pb(e,o),u=g0(e,o),Cn("invalid",e);break;default:u=o}v0(i,u),l=u;for(p in l)if(l.hasOwnProperty(p)){var S=l[p];p==="style"?JT(e,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&YT(e,S)):p==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&Nd(e,S):typeof S=="number"&&Nd(e,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Bd.hasOwnProperty(p)?S!=null&&p==="onScroll"&&Cn("scroll",e):S!=null&&V_(e,p,S,y))}switch(i){case"input":Ff(e),db(e,o,!1);break;case"textarea":Ff(e),fb(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Ja(o.value));break;case"select":e.multiple=!!o.multiple,p=o.value,p!=null?gu(e,!!o.multiple,p,!1):o.defaultValue!=null&&gu(e,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Nm)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qr(t),null;case 6:if(e&&t.stateNode!=null)bE(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ge(166));if(i=Gl(Xd.current),Gl(go.current),qf(t)){if(o=t.stateNode,i=t.memoizedProps,o[ho]=t,(p=o.nodeValue!==i)&&(e=ns,e!==null))switch(e.tag){case 3:Gf(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gf(o.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[ho]=t,t.stateNode=o}return Qr(t),null;case 13:if(En(Bn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mn&&ts!==null&&t.mode&1&&!(t.flags&128))VC(),Ou(),t.flags|=98560,p=!1;else if(p=qf(t),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(Ge(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Ge(317));p[ho]=t}else Ou(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qr(t),p=!1}else Gs!==null&&(J0(Gs),Gs=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Bn.current&1?mr===0&&(mr=3):bx())),t.updateQueue!==null&&(t.flags|=4),Qr(t),null);case 4:return Nu(),q0(e,t),e===null&&Zd(t.stateNode.containerInfo),Qr(t),null;case 10:return sx(t.type._context),Qr(t),null;case 17:return ji(t.type)&&Vm(),Qr(t),null;case 19:if(En(Bn),p=t.memoizedState,p===null)return Qr(t),null;if(o=(t.flags&128)!==0,y=p.rendering,y===null)if(o)pd(p,!1);else{if(mr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Wm(e),y!==null){for(t.flags|=128,pd(p,!1),o=y.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=i,i=t.child;i!==null;)p=i,e=o,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,e=y.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return xn(Bn,Bn.current&1|2),t.child}e=e.sibling}p.tail!==null&&rr()>ju&&(t.flags|=128,o=!0,pd(p,!1),t.lanes=4194304)}else{if(!o)if(e=Wm(y),e!==null){if(t.flags|=128,o=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),pd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!Mn)return Qr(t),null}else 2*rr()-p.renderingStartTime>ju&&i!==1073741824&&(t.flags|=128,o=!0,pd(p,!1),t.lanes=4194304);p.isBackwards?(y.sibling=t.child,t.child=y):(i=p.last,i!==null?i.sibling=y:t.child=y,p.last=y)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=rr(),t.sibling=null,i=Bn.current,xn(Bn,o?i&1|2:i&1),t):(Qr(t),null);case 22:case 23:return wx(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Ji&1073741824&&(Qr(t),t.subtreeFlags&6&&(t.flags|=8192)):Qr(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function TL(e,t){switch(tx(t),t.tag){case 1:return ji(t.type)&&Vm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nu(),En(Vi),En(ii),ux(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cx(t),null;case 13:if(En(Bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Ou()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return En(Bn),null;case 4:return Nu(),null;case 10:return sx(t.type._context),null;case 22:case 23:return wx(),null;case 24:return null;default:return null}}var Hf=!1,ti=!1,CL=typeof WeakSet=="function"?WeakSet:Set,gt=null;function uu(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){Wn(e,t,o)}else i.current=null}function Z0(e,t,i){try{i()}catch(o){Wn(e,t,o)}}var r2=!1;function EL(e,t){if(A0=Fm,e=PC(),J_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var y=0,l=-1,S=-1,b=0,I=0,M=e,k=null;t:for(;;){for(var j;M!==i||u!==0&&M.nodeType!==3||(l=y+u),M!==p||o!==0&&M.nodeType!==3||(S=y+o),M.nodeType===3&&(y+=M.nodeValue.length),(j=M.firstChild)!==null;)k=M,M=j;for(;;){if(M===e)break t;if(k===i&&++b===u&&(l=y),k===p&&++I===o&&(S=y),(j=M.nextSibling)!==null)break;M=k,k=M.parentNode}M=j}i=l===-1||S===-1?null:{start:l,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(M0={focusedElem:e,selectionRange:i},Fm=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var K=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var O=K.memoizedProps,X=K.memoizedState,B=t.stateNode,V=B.getSnapshotBeforeUpdate(t.elementType===t.type?O:Vs(t.type,O),X);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=t.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(ne){Wn(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return K=r2,r2=!1,K}function Md(e,t,i){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&Z0(t,i,p)}u=u.next}while(u!==o)}}function Eg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==t)}}function W0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function SE(e){var t=e.alternate;t!==null&&(e.alternate=null,SE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ho],delete t[Hd],delete t[L0],delete t[lL],delete t[cL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TE(e){return e.tag===5||e.tag===3||e.tag===4}function i2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function H0(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Nm));else if(o!==4&&(e=e.child,e!==null))for(H0(e,t,i),e=e.sibling;e!==null;)H0(e,t,i),e=e.sibling}function K0(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(K0(e,t,i),e=e.sibling;e!==null;)K0(e,t,i),e=e.sibling}var Rr=null,$s=!1;function Sa(e,t,i){for(i=i.child;i!==null;)CE(e,t,i),i=i.sibling}function CE(e,t,i){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(vg,i)}catch{}switch(i.tag){case 5:ti||uu(i,t);case 6:var o=Rr,u=$s;Rr=null,Sa(e,t,i),Rr=o,$s=u,Rr!==null&&($s?(e=Rr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Rr.removeChild(i.stateNode));break;case 18:Rr!==null&&($s?(e=Rr,i=i.stateNode,e.nodeType===8?Ev(e.parentNode,i):e.nodeType===1&&Ev(e,i),$d(e)):Ev(Rr,i.stateNode));break;case 4:o=Rr,u=$s,Rr=i.stateNode.containerInfo,$s=!0,Sa(e,t,i),Rr=o,$s=u;break;case 0:case 11:case 14:case 15:if(!ti&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var p=u,y=p.destroy;p=p.tag,y!==void 0&&(p&2||p&4)&&Z0(i,t,y),u=u.next}while(u!==o)}Sa(e,t,i);break;case 1:if(!ti&&(uu(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(l){Wn(i,t,l)}Sa(e,t,i);break;case 21:Sa(e,t,i);break;case 22:i.mode&1?(ti=(o=ti)||i.memoizedState!==null,Sa(e,t,i),ti=o):Sa(e,t,i);break;default:Sa(e,t,i)}}function s2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new CL),t.forEach(function(o){var u=RL.bind(null,e,o);i.has(o)||(i.add(o),o.then(u,u))})}}function Ns(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];try{var p=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:Rr=l.stateNode,$s=!1;break e;case 3:Rr=l.stateNode.containerInfo,$s=!0;break e;case 4:Rr=l.stateNode.containerInfo,$s=!0;break e}l=l.return}if(Rr===null)throw Error(Ge(160));CE(p,y,u),Rr=null,$s=!1;var S=u.alternate;S!==null&&(S.return=null),u.return=null}catch(b){Wn(u,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)EE(t,e),t=t.sibling}function EE(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ns(t,e),oo(e),o&4){try{Md(3,e,e.return),Eg(3,e)}catch(O){Wn(e,e.return,O)}try{Md(5,e,e.return)}catch(O){Wn(e,e.return,O)}}break;case 1:Ns(t,e),oo(e),o&512&&i!==null&&uu(i,i.return);break;case 5:if(Ns(t,e),oo(e),o&512&&i!==null&&uu(i,i.return),e.flags&32){var u=e.stateNode;try{Nd(u,"")}catch(O){Wn(e,e.return,O)}}if(o&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,y=i!==null?i.memoizedProps:p,l=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{l==="input"&&p.type==="radio"&&p.name!=null&&HT(u,p),_0(l,y);var b=_0(l,p);for(y=0;y<S.length;y+=2){var I=S[y],M=S[y+1];I==="style"?JT(u,M):I==="dangerouslySetInnerHTML"?YT(u,M):I==="children"?Nd(u,M):V_(u,I,M,b)}switch(l){case"input":f0(u,p);break;case"textarea":KT(u,p);break;case"select":var k=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var j=p.value;j!=null?gu(u,!!p.multiple,j,!1):k!==!!p.multiple&&(p.defaultValue!=null?gu(u,!!p.multiple,p.defaultValue,!0):gu(u,!!p.multiple,p.multiple?[]:"",!1))}u[Hd]=p}catch(O){Wn(e,e.return,O)}}break;case 6:if(Ns(t,e),oo(e),o&4){if(e.stateNode===null)throw Error(Ge(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(O){Wn(e,e.return,O)}}break;case 3:if(Ns(t,e),oo(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{$d(t.containerInfo)}catch(O){Wn(e,e.return,O)}break;case 4:Ns(t,e),oo(e);break;case 13:Ns(t,e),oo(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||(_x=rr())),o&4&&s2(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(ti=(b=ti)||I,Ns(t,e),ti=b):Ns(t,e),oo(e),o&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!I&&e.mode&1)for(gt=e,I=e.child;I!==null;){for(M=gt=I;gt!==null;){switch(k=gt,j=k.child,k.tag){case 0:case 11:case 14:case 15:Md(4,k,k.return);break;case 1:uu(k,k.return);var K=k.stateNode;if(typeof K.componentWillUnmount=="function"){o=k,i=k.return;try{t=o,K.props=t.memoizedProps,K.state=t.memoizedState,K.componentWillUnmount()}catch(O){Wn(o,i,O)}}break;case 5:uu(k,k.return);break;case 22:if(k.memoizedState!==null){a2(M);continue}}j!==null?(j.return=k,gt=j):a2(M)}I=I.sibling}e:for(I=null,M=e;;){if(M.tag===5){if(I===null){I=M;try{u=M.stateNode,b?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(l=M.stateNode,S=M.memoizedProps.style,y=S!=null&&S.hasOwnProperty("display")?S.display:null,l.style.display=QT("display",y))}catch(O){Wn(e,e.return,O)}}}else if(M.tag===6){if(I===null)try{M.stateNode.nodeValue=b?"":M.memoizedProps}catch(O){Wn(e,e.return,O)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;I===M&&(I=null),M=M.return}I===M&&(I=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:Ns(t,e),oo(e),o&4&&s2(e);break;case 21:break;default:Ns(t,e),oo(e)}}function oo(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(TE(i)){var o=i;break e}i=i.return}throw Error(Ge(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(Nd(u,""),o.flags&=-33);var p=i2(e);K0(e,p,u);break;case 3:case 4:var y=o.stateNode.containerInfo,l=i2(e);H0(e,l,y);break;default:throw Error(Ge(161))}}catch(S){Wn(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function PL(e,t,i){gt=e,PE(e)}function PE(e,t,i){for(var o=(e.mode&1)!==0;gt!==null;){var u=gt,p=u.child;if(u.tag===22&&o){var y=u.memoizedState!==null||Hf;if(!y){var l=u.alternate,S=l!==null&&l.memoizedState!==null||ti;l=Hf;var b=ti;if(Hf=y,(ti=S)&&!b)for(gt=u;gt!==null;)y=gt,S=y.child,y.tag===22&&y.memoizedState!==null?l2(u):S!==null?(S.return=y,gt=S):l2(u);for(;p!==null;)gt=p,PE(p),p=p.sibling;gt=u,Hf=l,ti=b}o2(e)}else u.subtreeFlags&8772&&p!==null?(p.return=u,gt=p):o2(e)}}function o2(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ti||Eg(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!ti)if(i===null)o.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:Vs(t.type,i.memoizedProps);o.componentDidUpdate(u,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Gb(t,p,o);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Gb(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var I=b.memoizedState;if(I!==null){var M=I.dehydrated;M!==null&&$d(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}ti||t.flags&512&&W0(t)}catch(k){Wn(t,t.return,k)}}if(t===e){gt=null;break}if(i=t.sibling,i!==null){i.return=t.return,gt=i;break}gt=t.return}}function a2(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,gt=i;break}gt=t.return}}function l2(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Eg(4,t)}catch(S){Wn(t,i,S)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var u=t.return;try{o.componentDidMount()}catch(S){Wn(t,u,S)}}var p=t.return;try{W0(t)}catch(S){Wn(t,p,S)}break;case 5:var y=t.return;try{W0(t)}catch(S){Wn(t,y,S)}}}catch(S){Wn(t,t.return,S)}if(t===e){gt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,gt=l;break}gt=t.return}}var kL=Math.ceil,Xm=na.ReactCurrentDispatcher,yx=na.ReactCurrentOwner,Ts=na.ReactCurrentBatchConfig,Jt=0,Er=null,or=null,Or=0,Ji=0,hu=ul(0),mr=0,ep=null,rc=0,Pg=0,vx=0,Id=null,Bi=null,_x=0,ju=1/0,Vo=null,Ym=!1,X0=null,Ha=null,Kf=!1,Va=null,Qm=0,Dd=0,Y0=null,xm=-1,wm=0;function bi(){return Jt&6?rr():xm!==-1?xm:xm=rr()}function Ka(e){return e.mode&1?Jt&2&&Or!==0?Or&-Or:hL.transition!==null?(wm===0&&(wm=hC()),wm):(e=ln,e!==0||(e=window.event,e=e===void 0?16:vC(e.type)),e):1}function Zs(e,t,i,o){if(50<Dd)throw Dd=0,Y0=null,Error(Ge(185));dp(e,i,o),(!(Jt&2)||e!==Er)&&(e===Er&&(!(Jt&2)&&(Pg|=i),mr===4&&La(e,Or)),Ui(e,o),i===1&&Jt===0&&!(t.mode&1)&&(ju=rr()+500,Sg&&hl()))}function Ui(e,t){var i=e.callbackNode;h5(e,t);var o=Rm(e,e===Er?Or:0);if(o===0)i!==null&&yb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(i!=null&&yb(i),t===1)e.tag===0?uL(c2.bind(null,e)):OC(c2.bind(null,e)),oL(function(){!(Jt&6)&&hl()}),i=null;else{switch(dC(o)){case 1:i=q_;break;case 4:i=cC;break;case 16:i=zm;break;case 536870912:i=uC;break;default:i=zm}i=RE(i,kE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function kE(e,t){if(xm=-1,wm=0,Jt&6)throw Error(Ge(327));var i=e.callbackNode;if(wu()&&e.callbackNode!==i)return null;var o=Rm(e,e===Er?Or:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Jm(e,o);else{t=o;var u=Jt;Jt|=2;var p=ME();(Er!==e||Or!==t)&&(Vo=null,ju=rr()+500,Xl(e,t));do try{IL();break}catch(l){AE(e,l)}while(!0);ix(),Xm.current=p,Jt=u,or!==null?t=0:(Er=null,Or=0,t=mr)}if(t!==0){if(t===2&&(u=T0(e),u!==0&&(o=u,t=Q0(e,u))),t===1)throw i=ep,Xl(e,0),La(e,o),Ui(e,rr()),i;if(t===6)La(e,o);else{if(u=e.current.alternate,!(o&30)&&!AL(u)&&(t=Jm(e,o),t===2&&(p=T0(e),p!==0&&(o=p,t=Q0(e,p))),t===1))throw i=ep,Xl(e,0),La(e,o),Ui(e,rr()),i;switch(e.finishedWork=u,e.finishedLanes=o,t){case 0:case 1:throw Error(Ge(345));case 2:Nl(e,Bi,Vo);break;case 3:if(La(e,o),(o&130023424)===o&&(t=_x+500-rr(),10<t)){if(Rm(e,0)!==0)break;if(u=e.suspendedLanes,(u&o)!==o){bi(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=D0(Nl.bind(null,e,Bi,Vo),t);break}Nl(e,Bi,Vo);break;case 4:if(La(e,o),(o&4194240)===o)break;for(t=e.eventTimes,u=-1;0<o;){var y=31-qs(o);p=1<<y,y=t[y],y>u&&(u=y),o&=~p}if(o=u,o=rr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*kL(o/1960))-o,10<o){e.timeoutHandle=D0(Nl.bind(null,e,Bi,Vo),o);break}Nl(e,Bi,Vo);break;case 5:Nl(e,Bi,Vo);break;default:throw Error(Ge(329))}}}return Ui(e,rr()),e.callbackNode===i?kE.bind(null,e):null}function Q0(e,t){var i=Id;return e.current.memoizedState.isDehydrated&&(Xl(e,t).flags|=256),e=Jm(e,t),e!==2&&(t=Bi,Bi=i,t!==null&&J0(t)),e}function J0(e){Bi===null?Bi=e:Bi.push.apply(Bi,e)}function AL(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var u=i[o],p=u.getSnapshot;u=u.value;try{if(!Ws(p(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~vx,t&=~Pg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-qs(t),o=1<<i;e[i]=-1,t&=~o}}function c2(e){if(Jt&6)throw Error(Ge(327));wu();var t=Rm(e,0);if(!(t&1))return Ui(e,rr()),null;var i=Jm(e,t);if(e.tag!==0&&i===2){var o=T0(e);o!==0&&(t=o,i=Q0(e,o))}if(i===1)throw i=ep,Xl(e,0),La(e,t),Ui(e,rr()),i;if(i===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e,Bi,Vo),Ui(e,rr()),null}function xx(e,t){var i=Jt;Jt|=1;try{return e(t)}finally{Jt=i,Jt===0&&(ju=rr()+500,Sg&&hl())}}function ic(e){Va!==null&&Va.tag===0&&!(Jt&6)&&wu();var t=Jt;Jt|=1;var i=Ts.transition,o=ln;try{if(Ts.transition=null,ln=1,e)return e()}finally{ln=o,Ts.transition=i,Jt=t,!(Jt&6)&&hl()}}function wx(){Ji=hu.current,En(hu)}function Xl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,sL(i)),or!==null)for(i=or.return;i!==null;){var o=i;switch(tx(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Vm();break;case 3:Nu(),En(Vi),En(ii),ux();break;case 5:cx(o);break;case 4:Nu();break;case 13:En(Bn);break;case 19:En(Bn);break;case 10:sx(o.type._context);break;case 22:case 23:wx()}i=i.return}if(Er=e,or=e=Xa(e.current,null),Or=Ji=t,mr=0,ep=null,vx=Pg=rc=0,Bi=Id=null,$l!==null){for(t=0;t<$l.length;t++)if(i=$l[t],o=i.interleaved,o!==null){i.interleaved=null;var u=o.next,p=i.pending;if(p!==null){var y=p.next;p.next=u,o.next=y}i.pending=o}$l=null}return e}function AE(e,t){do{var i=or;try{if(ix(),ym.current=Km,Hm){for(var o=Vn.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Hm=!1}if(nc=0,Cr=fr=Vn=null,Ad=!1,Yd=0,yx.current=null,i===null||i.return===null){mr=1,ep=t,or=null;break}e:{var p=e,y=i.return,l=i,S=t;if(t=Or,l.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var b=S,I=l,M=I.tag;if(!(I.mode&1)&&(M===0||M===11||M===15)){var k=I.alternate;k?(I.updateQueue=k.updateQueue,I.memoizedState=k.memoizedState,I.lanes=k.lanes):(I.updateQueue=null,I.memoizedState=null)}var j=Xb(y);if(j!==null){j.flags&=-257,Yb(j,y,l,p,t),j.mode&1&&Kb(p,b,t),t=j,S=b;var K=t.updateQueue;if(K===null){var O=new Set;O.add(S),t.updateQueue=O}else K.add(S);break e}else{if(!(t&1)){Kb(p,b,t),bx();break e}S=Error(Ge(426))}}else if(Mn&&l.mode&1){var X=Xb(y);if(X!==null){!(X.flags&65536)&&(X.flags|=256),Yb(X,y,l,p,t),nx(Vu(S,l));break e}}p=S=Vu(S,l),mr!==4&&(mr=2),Id===null?Id=[p]:Id.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var B=dE(p,S,t);$b(p,B);break e;case 1:l=S;var V=p.type,q=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ha===null||!Ha.has(q)))){p.flags|=65536,t&=-t,p.lanes|=t;var ne=pE(p,l,t);$b(p,ne);break e}}p=p.return}while(p!==null)}DE(i)}catch(he){t=he,or===i&&i!==null&&(or=i=i.return);continue}break}while(!0)}function ME(){var e=Xm.current;return Xm.current=Km,e===null?Km:e}function bx(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(rc&268435455)&&!(Pg&268435455)||La(Er,Or)}function Jm(e,t){var i=Jt;Jt|=2;var o=ME();(Er!==e||Or!==t)&&(Vo=null,Xl(e,t));do try{ML();break}catch(u){AE(e,u)}while(!0);if(ix(),Jt=i,Xm.current=o,or!==null)throw Error(Ge(261));return Er=null,Or=0,mr}function ML(){for(;or!==null;)IE(or)}function IL(){for(;or!==null&&!n5();)IE(or)}function IE(e){var t=zE(e.alternate,e,Ji);e.memoizedProps=e.pendingProps,t===null?DE(e):or=t,yx.current=null}function DE(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=TL(i,t),i!==null){i.flags&=32767,or=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mr=6,or=null;return}}else if(i=SL(i,t,Ji),i!==null){or=i;return}if(t=t.sibling,t!==null){or=t;return}or=t=e}while(t!==null);mr===0&&(mr=5)}function Nl(e,t,i){var o=ln,u=Ts.transition;try{Ts.transition=null,ln=1,DL(e,t,i,o)}finally{Ts.transition=u,ln=o}return null}function DL(e,t,i,o){do wu();while(Va!==null);if(Jt&6)throw Error(Ge(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(d5(e,p),e===Er&&(or=Er=null,Or=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Kf||(Kf=!0,RE(zm,function(){return wu(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=Ts.transition,Ts.transition=null;var y=ln;ln=1;var l=Jt;Jt|=4,yx.current=null,EL(e,i),EE(i,e),Q5(M0),Fm=!!A0,M0=A0=null,e.current=i,PL(i),r5(),Jt=l,ln=y,Ts.transition=p}else e.current=i;if(Kf&&(Kf=!1,Va=e,Qm=u),p=e.pendingLanes,p===0&&(Ha=null),o5(i.stateNode),Ui(e,rr()),t!==null)for(o=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],o(u.value,{componentStack:u.stack,digest:u.digest});if(Ym)throw Ym=!1,e=X0,X0=null,e;return Qm&1&&e.tag!==0&&wu(),p=e.pendingLanes,p&1?e===Y0?Dd++:(Dd=0,Y0=e):Dd=0,hl(),null}function wu(){if(Va!==null){var e=dC(Qm),t=Ts.transition,i=ln;try{if(Ts.transition=null,ln=16>e?16:e,Va===null)var o=!1;else{if(e=Va,Va=null,Qm=0,Jt&6)throw Error(Ge(331));var u=Jt;for(Jt|=4,gt=e.current;gt!==null;){var p=gt,y=p.child;if(gt.flags&16){var l=p.deletions;if(l!==null){for(var S=0;S<l.length;S++){var b=l[S];for(gt=b;gt!==null;){var I=gt;switch(I.tag){case 0:case 11:case 15:Md(8,I,p)}var M=I.child;if(M!==null)M.return=I,gt=M;else for(;gt!==null;){I=gt;var k=I.sibling,j=I.return;if(SE(I),I===b){gt=null;break}if(k!==null){k.return=j,gt=k;break}gt=j}}}var K=p.alternate;if(K!==null){var O=K.child;if(O!==null){K.child=null;do{var X=O.sibling;O.sibling=null,O=X}while(O!==null)}}gt=p}}if(p.subtreeFlags&2064&&y!==null)y.return=p,gt=y;else e:for(;gt!==null;){if(p=gt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Md(9,p,p.return)}var B=p.sibling;if(B!==null){B.return=p.return,gt=B;break e}gt=p.return}}var V=e.current;for(gt=V;gt!==null;){y=gt;var q=y.child;if(y.subtreeFlags&2064&&q!==null)q.return=y,gt=q;else e:for(y=V;gt!==null;){if(l=gt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eg(9,l)}}catch(he){Wn(l,l.return,he)}if(l===y){gt=null;break e}var ne=l.sibling;if(ne!==null){ne.return=l.return,gt=ne;break e}gt=l.return}}if(Jt=u,hl(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(vg,e)}catch{}o=!0}return o}finally{ln=i,Ts.transition=t}}return!1}function u2(e,t,i){t=Vu(i,t),t=dE(e,t,1),e=Wa(e,t,1),t=bi(),e!==null&&(dp(e,1,t),Ui(e,t))}function Wn(e,t,i){if(e.tag===3)u2(e,e,i);else for(;t!==null;){if(t.tag===3){u2(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ha===null||!Ha.has(o))){e=Vu(i,e),e=pE(t,e,1),t=Wa(t,e,1),e=bi(),t!==null&&(dp(t,1,e),Ui(t,e));break}}t=t.return}}function LL(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),t=bi(),e.pingedLanes|=e.suspendedLanes&i,Er===e&&(Or&i)===i&&(mr===4||mr===3&&(Or&130023424)===Or&&500>rr()-_x?Xl(e,0):vx|=i),Ui(e,t)}function LE(e,t){t===0&&(e.mode&1?(t=Nf,Nf<<=1,!(Nf&130023424)&&(Nf=4194304)):t=1);var i=bi();e=Yo(e,t),e!==null&&(dp(e,t,i),Ui(e,i))}function zL(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),LE(e,i)}function RL(e,t){var i=0;switch(e.tag){case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ge(314))}o!==null&&o.delete(t),LE(e,i)}var zE;zE=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vi.current)Ni=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ni=!1,bL(e,t,i);Ni=!!(e.flags&131072)}else Ni=!1,Mn&&t.flags&1048576&&BC(t,$m,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;_m(e,t),e=t.pendingProps;var u=Fu(t,ii.current);xu(t,i),u=dx(null,t,o,e,u,i);var p=px();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(o)?(p=!0,jm(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ax(t),u.updater=Cg,t.stateNode=u,u._reactInternals=t,N0(t,o,e,i),t=U0(null,t,o,!0,p,i)):(t.tag=0,Mn&&p&&ex(t),xi(null,t,u,i),t=t.child),t;case 16:o=t.elementType;e:{switch(_m(e,t),e=t.pendingProps,u=o._init,o=u(o._payload),t.type=o,u=t.tag=OL(o),e=Vs(o,e),u){case 0:t=j0(null,t,o,e,i);break e;case 1:t=e2(null,t,o,e,i);break e;case 11:t=Qb(null,t,o,e,i);break e;case 14:t=Jb(null,t,o,Vs(o.type,e),i);break e}throw Error(Ge(306,o,""))}return t;case 0:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Vs(o,u),j0(e,t,o,u,i);case 1:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Vs(o,u),e2(e,t,o,u,i);case 3:e:{if(yE(t),e===null)throw Error(Ge(387));o=t.pendingProps,p=t.memoizedState,u=p.element,GC(e,t),Zm(t,o,null,i);var y=t.memoizedState;if(o=y.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=Vu(Error(Ge(423)),t),t=t2(e,t,o,i,u);break e}else if(o!==u){u=Vu(Error(Ge(424)),t),t=t2(e,t,o,i,u);break e}else for(ts=Za(t.stateNode.containerInfo.firstChild),ns=t,Mn=!0,Gs=null,i=UC(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ou(),o===u){t=Qo(e,t,i);break e}xi(e,t,o,i)}t=t.child}return t;case 5:return qC(t),e===null&&F0(t),o=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,y=u.children,I0(o,u)?y=null:p!==null&&I0(o,p)&&(t.flags|=32),gE(e,t),xi(e,t,y,i),t.child;case 6:return e===null&&F0(t),null;case 13:return vE(e,t,i);case 4:return lx(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Bu(t,null,o,i):xi(e,t,o,i),t.child;case 11:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Vs(o,u),Qb(e,t,o,u,i);case 7:return xi(e,t,t.pendingProps,i),t.child;case 8:return xi(e,t,t.pendingProps.children,i),t.child;case 12:return xi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(o=t.type._context,u=t.pendingProps,p=t.memoizedProps,y=u.value,xn(Gm,o._currentValue),o._currentValue=y,p!==null)if(Ws(p.value,y)){if(p.children===u.children&&!Vi.current){t=Qo(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var l=p.dependencies;if(l!==null){y=p.child;for(var S=l.firstContext;S!==null;){if(S.context===o){if(p.tag===1){S=qo(-1,i&-i),S.tag=2;var b=p.updateQueue;if(b!==null){b=b.shared;var I=b.pending;I===null?S.next=S:(S.next=I.next,I.next=S),b.pending=S}}p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),O0(p.return,i,t),l.lanes|=i;break}S=S.next}}else if(p.tag===10)y=p.type===t.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(Ge(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),O0(y,i,t),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===t){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}xi(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,o=t.pendingProps.children,xu(t,i),u=Cs(u),o=o(u),t.flags|=1,xi(e,t,o,i),t.child;case 14:return o=t.type,u=Vs(o,t.pendingProps),u=Vs(o.type,u),Jb(e,t,o,u,i);case 15:return fE(e,t,t.type,t.pendingProps,i);case 17:return o=t.type,u=t.pendingProps,u=t.elementType===o?u:Vs(o,u),_m(e,t),t.tag=1,ji(o)?(e=!0,jm(t)):e=!1,xu(t,i),hE(t,o,u),N0(t,o,u,i),U0(null,t,o,!0,e,i);case 19:return _E(e,t,i);case 22:return mE(e,t,i)}throw Error(Ge(156,t.tag))};function RE(e,t){return lC(e,t)}function FL(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(e,t,i,o){return new FL(e,t,i,o)}function Sx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function OL(e){if(typeof e=="function")return Sx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U_)return 11;if(e===$_)return 14}return 2}function Xa(e,t){var i=e.alternate;return i===null?(i=Ss(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function bm(e,t,i,o,u,p){var y=2;if(o=e,typeof e=="function")Sx(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case tu:return Yl(i.children,u,p,t);case j_:y=8,u|=8;break;case c0:return e=Ss(12,i,t,u|2),e.elementType=c0,e.lanes=p,e;case u0:return e=Ss(13,i,t,u),e.elementType=u0,e.lanes=p,e;case h0:return e=Ss(19,i,t,u),e.elementType=h0,e.lanes=p,e;case qT:return kg(i,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $T:y=10;break e;case GT:y=9;break e;case U_:y=11;break e;case $_:y=14;break e;case Aa:y=16,o=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=Ss(y,i,t,u),t.elementType=e,t.type=o,t.lanes=p,t}function Yl(e,t,i,o){return e=Ss(7,e,o,t),e.lanes=i,e}function kg(e,t,i,o){return e=Ss(22,e,o,t),e.elementType=qT,e.lanes=i,e.stateNode={isHidden:!1},e}function zv(e,t,i){return e=Ss(6,e,null,t),e.lanes=i,e}function Rv(e,t,i){return t=Ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BL(e,t,i,o,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mv(0),this.expirationTimes=mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Tx(e,t,i,o,u,p,y,l,S){return e=new BL(e,t,i,l,S),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Ss(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ax(p),e}function NL(e,t,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:i}}function FE(e){if(!e)return el;e=e._reactInternals;e:{if(lc(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var i=e.type;if(ji(i))return FC(e,i,t)}return t}function OE(e,t,i,o,u,p,y,l,S){return e=Tx(i,o,!0,e,u,p,y,l,S),e.context=FE(null),i=e.current,o=bi(),u=Ka(i),p=qo(o,u),p.callback=t??null,Wa(i,p,u),e.current.lanes=u,dp(e,u,o),Ui(e,o),e}function Ag(e,t,i,o){var u=t.current,p=bi(),y=Ka(u);return i=FE(i),t.context===null?t.context=i:t.pendingContext=i,t=qo(p,y),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Wa(u,t,y),e!==null&&(Zs(e,u,y,p),gm(e,u,y)),y}function eg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function h2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Cx(e,t){h2(e,t),(e=e.alternate)&&h2(e,t)}function VL(){return null}var BE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ex(e){this._internalRoot=e}Mg.prototype.render=Ex.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Ag(e,t,null,null)};Mg.prototype.unmount=Ex.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ic(function(){Ag(null,e,null,null)}),t[Xo]=null}};function Mg(e){this._internalRoot=e}Mg.prototype.unstable_scheduleHydration=function(e){if(e){var t=mC();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Da.length&&t!==0&&t<Da[i].priority;i++);Da.splice(i,0,e),i===0&&yC(e)}};function Px(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function d2(){}function jL(e,t,i,o,u){if(u){if(typeof o=="function"){var p=o;o=function(){var b=eg(y);p.call(b)}}var y=OE(t,o,e,0,null,!1,!1,"",d2);return e._reactRootContainer=y,e[Xo]=y.current,Zd(e.nodeType===8?e.parentNode:e),ic(),y}for(;u=e.lastChild;)e.removeChild(u);if(typeof o=="function"){var l=o;o=function(){var b=eg(S);l.call(b)}}var S=Tx(e,0,!1,null,null,!1,!1,"",d2);return e._reactRootContainer=S,e[Xo]=S.current,Zd(e.nodeType===8?e.parentNode:e),ic(function(){Ag(t,S,i,o)}),S}function Dg(e,t,i,o,u){var p=i._reactRootContainer;if(p){var y=p;if(typeof u=="function"){var l=u;u=function(){var S=eg(y);l.call(S)}}Ag(t,y,e,u)}else y=jL(i,t,e,u,o);return eg(y)}pC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=xd(t.pendingLanes);i!==0&&(Z_(t,i|1),Ui(t,rr()),!(Jt&6)&&(ju=rr()+500,hl()))}break;case 13:ic(function(){var o=Yo(e,1);if(o!==null){var u=bi();Zs(o,e,1,u)}}),Cx(e,1)}};W_=function(e){if(e.tag===13){var t=Yo(e,134217728);if(t!==null){var i=bi();Zs(t,e,134217728,i)}Cx(e,134217728)}};fC=function(e){if(e.tag===13){var t=Ka(e),i=Yo(e,t);if(i!==null){var o=bi();Zs(i,e,t,o)}Cx(e,t)}};mC=function(){return ln};gC=function(e,t){var i=ln;try{return ln=e,t()}finally{ln=i}};w0=function(e,t,i){switch(t){case"input":if(f0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var u=bg(o);if(!u)throw Error(Ge(90));WT(o),f0(o,u)}}}break;case"textarea":KT(e,i);break;case"select":t=i.value,t!=null&&gu(e,!!i.multiple,t,!1)}};nC=xx;rC=ic;var UL={usingClientEntryPoint:!1,Events:[fp,su,bg,eC,tC,xx]},fd={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$L={bundleType:fd.bundleType,version:fd.version,rendererPackageName:fd.rendererPackageName,rendererConfig:fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oC(e),e===null?null:e.stateNode},findFiberByHostInstance:fd.findFiberByHostInstance||VL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{vg=Xf.inject($L),mo=Xf}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UL;os.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Px(t))throw Error(Ge(200));return NL(e,t,null,i)};os.createRoot=function(e,t){if(!Px(e))throw Error(Ge(299));var i=!1,o="",u=BE;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Tx(e,1,!1,null,null,i,!1,o,u),e[Xo]=t.current,Zd(e.nodeType===8?e.parentNode:e),new Ex(t)};os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=oC(t),e=e===null?null:e.stateNode,e};os.flushSync=function(e){return ic(e)};os.hydrate=function(e,t,i){if(!Ig(t))throw Error(Ge(200));return Dg(null,e,t,!0,i)};os.hydrateRoot=function(e,t,i){if(!Px(e))throw Error(Ge(405));var o=i!=null&&i.hydratedSources||null,u=!1,p="",y=BE;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=OE(t,null,e,1,i??null,u,!1,p,y),e[Xo]=t.current,Zd(e),o)for(e=0;e<o.length;e++)i=o[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new Mg(t)};os.render=function(e,t,i){if(!Ig(t))throw Error(Ge(200));return Dg(null,e,t,!1,i)};os.unmountComponentAtNode=function(e){if(!Ig(e))throw Error(Ge(40));return e._reactRootContainer?(ic(function(){Dg(null,null,e,!1,function(){e._reactRootContainer=null,e[Xo]=null})}),!0):!1};os.unstable_batchedUpdates=xx;os.unstable_renderSubtreeIntoContainer=function(e,t,i,o){if(!Ig(i))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return Dg(e,t,i,!1,o)};os.version="18.3.1-next-f1338f8080-20240426";function NE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NE)}catch(e){console.error(e)}}NE(),NT.exports=os;var gp=NT.exports;const VE=L_(gp);var jE,p2=gp;jE=p2.createRoot,p2.hydrateRoot;const GL=1,qL=1e6;let Fv=0;function ZL(){return Fv=(Fv+1)%Number.MAX_SAFE_INTEGER,Fv.toString()}const Ov=new Map,f2=e=>{if(Ov.has(e))return;const t=setTimeout(()=>{Ov.delete(e),Ld({type:"REMOVE_TOAST",toastId:e})},qL);Ov.set(e,t)},WL=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,GL)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=t;return i?f2(i):e.toasts.forEach(o=>{f2(o.id)}),{...e,toasts:e.toasts.map(o=>o.id===i||i===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)}}},Sm=[];let Tm={toasts:[]};function Ld(e){Tm=WL(Tm,e),Sm.forEach(t=>{t(Tm)})}function HL({...e}){const t=ZL(),i=u=>Ld({type:"UPDATE_TOAST",toast:{...u,id:t}}),o=()=>Ld({type:"DISMISS_TOAST",toastId:t});return Ld({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:u=>{u||o()}}}),{id:t,dismiss:o,update:i}}function KL(){const[e,t]=Z.useState(Tm);return Z.useEffect(()=>(Sm.push(t),()=>{const i=Sm.indexOf(t);i>-1&&Sm.splice(i,1)}),[e]),{...e,toast:HL,dismiss:i=>Ld({type:"DISMISS_TOAST",toastId:i})}}function In(e,t,{checkForDefaultPrevented:i=!0}={}){return function(u){if(e==null||e(u),i===!1||!u.defaultPrevented)return t==null?void 0:t(u)}}function XL(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function UE(...e){return t=>e.forEach(i=>XL(i,t))}function Si(...e){return Z.useCallback(UE(...e),e)}function YL(e,t=[]){let i=[];function o(p,y){const l=Z.createContext(y),S=i.length;i=[...i,y];function b(M){const{scope:k,children:j,...K}=M,O=(k==null?void 0:k[e][S])||l,X=Z.useMemo(()=>K,Object.values(K));return de.jsx(O.Provider,{value:X,children:j})}function I(M,k){const j=(k==null?void 0:k[e][S])||l,K=Z.useContext(j);if(K)return K;if(y!==void 0)return y;throw new Error(`\`${M}\` must be used within \`${p}\``)}return b.displayName=p+"Provider",[b,I]}const u=()=>{const p=i.map(y=>Z.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return Z.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,QL(u,...t)]}function QL(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:b})=>{const M=S(p)[`__scope${b}`];return{...l,...M}},{});return Z.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}var Uu=Z.forwardRef((e,t)=>{const{children:i,...o}=e,u=Z.Children.toArray(i),p=u.find(JL);if(p){const y=p.props.children,l=u.map(S=>S===p?Z.Children.count(y)>1?Z.Children.only(null):Z.isValidElement(y)?y.props.children:null:S);return de.jsx(e_,{...o,ref:t,children:Z.isValidElement(y)?Z.cloneElement(y,void 0,l):null})}return de.jsx(e_,{...o,ref:t,children:i})});Uu.displayName="Slot";var e_=Z.forwardRef((e,t)=>{const{children:i,...o}=e;if(Z.isValidElement(i)){const u=t4(i);return Z.cloneElement(i,{...e4(o,i.props),ref:t?UE(t,u):u})}return Z.Children.count(i)>1?Z.Children.only(null):null});e_.displayName="SlotClone";var $E=({children:e})=>de.jsx(de.Fragment,{children:e});function JL(e){return Z.isValidElement(e)&&e.type===$E}function e4(e,t){const i={...t};for(const o in t){const u=e[o],p=t[o];/^on[A-Z]/.test(o)?u&&p?i[o]=(...l)=>{p(...l),u(...l)}:u&&(i[o]=u):o==="style"?i[o]={...u,...p}:o==="className"&&(i[o]=[u,p].filter(Boolean).join(" "))}return{...e,...i}}function t4(e){var o,u;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function n4(e){const t=e+"CollectionProvider",[i,o]=YL(t),[u,p]=i(t,{collectionRef:{current:null},itemMap:new Map}),y=j=>{const{scope:K,children:O}=j,X=tt.useRef(null),B=tt.useRef(new Map).current;return de.jsx(u,{scope:K,itemMap:B,collectionRef:X,children:O})};y.displayName=t;const l=e+"CollectionSlot",S=tt.forwardRef((j,K)=>{const{scope:O,children:X}=j,B=p(l,O),V=Si(K,B.collectionRef);return de.jsx(Uu,{ref:V,children:X})});S.displayName=l;const b=e+"CollectionItemSlot",I="data-radix-collection-item",M=tt.forwardRef((j,K)=>{const{scope:O,children:X,...B}=j,V=tt.useRef(null),q=Si(K,V),ne=p(b,O);return tt.useEffect(()=>(ne.itemMap.set(V,{ref:V,...B}),()=>void ne.itemMap.delete(V))),de.jsx(Uu,{[I]:"",ref:q,children:X})});M.displayName=b;function k(j){const K=p(e+"CollectionConsumer",j);return tt.useCallback(()=>{const X=K.collectionRef.current;if(!X)return[];const B=Array.from(X.querySelectorAll(`[${I}]`));return Array.from(K.itemMap.values()).sort((ne,he)=>B.indexOf(ne.ref.current)-B.indexOf(he.ref.current))},[K.collectionRef,K.itemMap])}return[{Provider:y,Slot:S,ItemSlot:M},k,o]}function r4(e,t){const i=Z.createContext(t),o=p=>{const{children:y,...l}=p,S=Z.useMemo(()=>l,Object.values(l));return de.jsx(i.Provider,{value:S,children:y})};o.displayName=e+"Provider";function u(p){const y=Z.useContext(i);if(y)return y;if(t!==void 0)return t;throw new Error(`\`${p}\` must be used within \`${e}\``)}return[o,u]}function kx(e,t=[]){let i=[];function o(p,y){const l=Z.createContext(y),S=i.length;i=[...i,y];const b=M=>{var B;const{scope:k,children:j,...K}=M,O=((B=k==null?void 0:k[e])==null?void 0:B[S])||l,X=Z.useMemo(()=>K,Object.values(K));return de.jsx(O.Provider,{value:X,children:j})};b.displayName=p+"Provider";function I(M,k){var O;const j=((O=k==null?void 0:k[e])==null?void 0:O[S])||l,K=Z.useContext(j);if(K)return K;if(y!==void 0)return y;throw new Error(`\`${M}\` must be used within \`${p}\``)}return[b,I]}const u=()=>{const p=i.map(y=>Z.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return Z.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,i4(u,...t)]}function i4(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:b})=>{const M=S(p)[`__scope${b}`];return{...l,...M}},{});return Z.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}var s4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ar=s4.reduce((e,t)=>{const i=Z.forwardRef((o,u)=>{const{asChild:p,...y}=o,l=p?Uu:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),de.jsx(l,{...y,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function GE(e,t){e&&gp.flushSync(()=>e.dispatchEvent(t))}function Ps(e){const t=Z.useRef(e);return Z.useEffect(()=>{t.current=e}),Z.useMemo(()=>(...i)=>{var o;return(o=t.current)==null?void 0:o.call(t,...i)},[])}function o4(e,t=globalThis==null?void 0:globalThis.document){const i=Ps(e);Z.useEffect(()=>{const o=u=>{u.key==="Escape"&&i(u)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[i,t])}var a4="DismissableLayer",t_="dismissableLayer.update",l4="dismissableLayer.pointerDownOutside",c4="dismissableLayer.focusOutside",m2,qE=Z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lg=Z.forwardRef((e,t)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:y,onDismiss:l,...S}=e,b=Z.useContext(qE),[I,M]=Z.useState(null),k=(I==null?void 0:I.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=Z.useState({}),K=Si(t,ke=>M(ke)),O=Array.from(b.layers),[X]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),B=O.indexOf(X),V=I?O.indexOf(I):-1,q=b.layersWithOutsidePointerEventsDisabled.size>0,ne=V>=B,he=h4(ke=>{const we=ke.target,We=[...b.branches].some(Fe=>Fe.contains(we));!ne||We||(u==null||u(ke),y==null||y(ke),ke.defaultPrevented||l==null||l())},k),Se=d4(ke=>{const we=ke.target;[...b.branches].some(Fe=>Fe.contains(we))||(p==null||p(ke),y==null||y(ke),ke.defaultPrevented||l==null||l())},k);return o4(ke=>{V===b.layers.size-1&&(o==null||o(ke),!ke.defaultPrevented&&l&&(ke.preventDefault(),l()))},k),Z.useEffect(()=>{if(I)return i&&(b.layersWithOutsidePointerEventsDisabled.size===0&&(m2=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(I)),b.layers.add(I),g2(),()=>{i&&b.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=m2)}},[I,k,i,b]),Z.useEffect(()=>()=>{I&&(b.layers.delete(I),b.layersWithOutsidePointerEventsDisabled.delete(I),g2())},[I,b]),Z.useEffect(()=>{const ke=()=>j({});return document.addEventListener(t_,ke),()=>document.removeEventListener(t_,ke)},[]),de.jsx(ar.div,{...S,ref:K,style:{pointerEvents:q?ne?"auto":"none":void 0,...e.style},onFocusCapture:In(e.onFocusCapture,Se.onFocusCapture),onBlurCapture:In(e.onBlurCapture,Se.onBlurCapture),onPointerDownCapture:In(e.onPointerDownCapture,he.onPointerDownCapture)})});Lg.displayName=a4;var u4="DismissableLayerBranch",ZE=Z.forwardRef((e,t)=>{const i=Z.useContext(qE),o=Z.useRef(null),u=Si(t,o);return Z.useEffect(()=>{const p=o.current;if(p)return i.branches.add(p),()=>{i.branches.delete(p)}},[i.branches]),de.jsx(ar.div,{...e,ref:u})});ZE.displayName=u4;function h4(e,t=globalThis==null?void 0:globalThis.document){const i=Ps(e),o=Z.useRef(!1),u=Z.useRef(()=>{});return Z.useEffect(()=>{const p=l=>{if(l.target&&!o.current){let S=function(){WE(l4,i,b,{discrete:!0})};const b={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",u.current),u.current=S,t.addEventListener("click",u.current,{once:!0})):S()}else t.removeEventListener("click",u.current);o.current=!1},y=window.setTimeout(()=>{t.addEventListener("pointerdown",p)},0);return()=>{window.clearTimeout(y),t.removeEventListener("pointerdown",p),t.removeEventListener("click",u.current)}},[t,i]),{onPointerDownCapture:()=>o.current=!0}}function d4(e,t=globalThis==null?void 0:globalThis.document){const i=Ps(e),o=Z.useRef(!1);return Z.useEffect(()=>{const u=p=>{p.target&&!o.current&&WE(c4,i,{originalEvent:p},{discrete:!1})};return t.addEventListener("focusin",u),()=>t.removeEventListener("focusin",u)},[t,i]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function g2(){const e=new CustomEvent(t_);document.dispatchEvent(e)}function WE(e,t,i,{discrete:o}){const u=i.originalEvent.target,p=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});t&&u.addEventListener(e,t,{once:!0}),o?GE(u,p):u.dispatchEvent(p)}var p4=Lg,f4=ZE,tl=globalThis!=null&&globalThis.document?Z.useLayoutEffect:()=>{},m4="Portal",Ax=Z.forwardRef((e,t)=>{var l;const{container:i,...o}=e,[u,p]=Z.useState(!1);tl(()=>p(!0),[]);const y=i||u&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return y?VE.createPortal(de.jsx(ar.div,{...o,ref:t}),y):null});Ax.displayName=m4;function g4(e,t){return Z.useReducer((i,o)=>t[i][o]??i,e)}var Ku=e=>{const{present:t,children:i}=e,o=y4(t),u=typeof i=="function"?i({present:o.isPresent}):Z.Children.only(i),p=Si(o.ref,v4(u));return typeof i=="function"||o.isPresent?Z.cloneElement(u,{ref:p}):null};Ku.displayName="Presence";function y4(e){const[t,i]=Z.useState(),o=Z.useRef({}),u=Z.useRef(e),p=Z.useRef("none"),y=e?"mounted":"unmounted",[l,S]=g4(y,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Z.useEffect(()=>{const b=Yf(o.current);p.current=l==="mounted"?b:"none"},[l]),tl(()=>{const b=o.current,I=u.current;if(I!==e){const k=p.current,j=Yf(b);e?S("MOUNT"):j==="none"||(b==null?void 0:b.display)==="none"?S("UNMOUNT"):S(I&&k!==j?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,S]),tl(()=>{if(t){let b;const I=t.ownerDocument.defaultView??window,M=j=>{const O=Yf(o.current).includes(j.animationName);if(j.target===t&&O&&(S("ANIMATION_END"),!u.current)){const X=t.style.animationFillMode;t.style.animationFillMode="forwards",b=I.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=X)})}},k=j=>{j.target===t&&(p.current=Yf(o.current))};return t.addEventListener("animationstart",k),t.addEventListener("animationcancel",M),t.addEventListener("animationend",M),()=>{I.clearTimeout(b),t.removeEventListener("animationstart",k),t.removeEventListener("animationcancel",M),t.removeEventListener("animationend",M)}}else S("ANIMATION_END")},[t,S]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:Z.useCallback(b=>{b&&(o.current=getComputedStyle(b)),i(b)},[])}}function Yf(e){return(e==null?void 0:e.animationName)||"none"}function v4(e){var o,u;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,i=t&&"isReactWarning"in t&&t.isReactWarning;return i?e.ref:(t=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,i=t&&"isReactWarning"in t&&t.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function HE({prop:e,defaultProp:t,onChange:i=()=>{}}){const[o,u]=_4({defaultProp:t,onChange:i}),p=e!==void 0,y=p?e:o,l=Ps(i),S=Z.useCallback(b=>{if(p){const M=typeof b=="function"?b(e):b;M!==e&&l(M)}else u(b)},[p,e,u,l]);return[y,S]}function _4({defaultProp:e,onChange:t}){const i=Z.useState(e),[o]=i,u=Z.useRef(o),p=Ps(t);return Z.useEffect(()=>{u.current!==o&&(p(o),u.current=o)},[o,u,p]),i}var x4="VisuallyHidden",zg=Z.forwardRef((e,t)=>de.jsx(ar.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));zg.displayName=x4;var w4=zg,Mx="ToastProvider",[Ix,b4,S4]=n4("Toast"),[KE,qN]=kx("Toast",[S4]),[T4,Rg]=KE(Mx),XE=e=>{const{__scopeToast:t,label:i="Notification",duration:o=5e3,swipeDirection:u="right",swipeThreshold:p=50,children:y}=e,[l,S]=Z.useState(null),[b,I]=Z.useState(0),M=Z.useRef(!1),k=Z.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mx}\`. Expected non-empty \`string\`.`),de.jsx(Ix.Provider,{scope:t,children:de.jsx(T4,{scope:t,label:i,duration:o,swipeDirection:u,swipeThreshold:p,toastCount:b,viewport:l,onViewportChange:S,onToastAdd:Z.useCallback(()=>I(j=>j+1),[]),onToastRemove:Z.useCallback(()=>I(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:M,isClosePausedRef:k,children:y})})};XE.displayName=Mx;var YE="ToastViewport",C4=["F8"],n_="toast.viewportPause",r_="toast.viewportResume",QE=Z.forwardRef((e,t)=>{const{__scopeToast:i,hotkey:o=C4,label:u="Notifications ({hotkey})",...p}=e,y=Rg(YE,i),l=b4(i),S=Z.useRef(null),b=Z.useRef(null),I=Z.useRef(null),M=Z.useRef(null),k=Si(t,M,y.onViewportChange),j=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=y.toastCount>0;Z.useEffect(()=>{const X=B=>{var q;o.length!==0&&o.every(ne=>B[ne]||B.code===ne)&&((q=M.current)==null||q.focus())};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[o]),Z.useEffect(()=>{const X=S.current,B=M.current;if(K&&X&&B){const V=()=>{if(!y.isClosePausedRef.current){const Se=new CustomEvent(n_);B.dispatchEvent(Se),y.isClosePausedRef.current=!0}},q=()=>{if(y.isClosePausedRef.current){const Se=new CustomEvent(r_);B.dispatchEvent(Se),y.isClosePausedRef.current=!1}},ne=Se=>{!X.contains(Se.relatedTarget)&&q()},he=()=>{X.contains(document.activeElement)||q()};return X.addEventListener("focusin",V),X.addEventListener("focusout",ne),X.addEventListener("pointermove",V),X.addEventListener("pointerleave",he),window.addEventListener("blur",V),window.addEventListener("focus",q),()=>{X.removeEventListener("focusin",V),X.removeEventListener("focusout",ne),X.removeEventListener("pointermove",V),X.removeEventListener("pointerleave",he),window.removeEventListener("blur",V),window.removeEventListener("focus",q)}}},[K,y.isClosePausedRef]);const O=Z.useCallback(({tabbingDirection:X})=>{const V=l().map(q=>{const ne=q.ref.current,he=[ne,...B4(ne)];return X==="forwards"?he:he.reverse()});return(X==="forwards"?V.reverse():V).flat()},[l]);return Z.useEffect(()=>{const X=M.current;if(X){const B=V=>{var he,Se,ke;const q=V.altKey||V.ctrlKey||V.metaKey;if(V.key==="Tab"&&!q){const we=document.activeElement,We=V.shiftKey;if(V.target===X&&We){(he=b.current)==null||he.focus();return}const it=O({tabbingDirection:We?"backwards":"forwards"}),kt=it.findIndex(Ze=>Ze===we);Bv(it.slice(kt+1))?V.preventDefault():We?(Se=b.current)==null||Se.focus():(ke=I.current)==null||ke.focus()}};return X.addEventListener("keydown",B),()=>X.removeEventListener("keydown",B)}},[l,O]),de.jsxs(f4,{ref:S,role:"region","aria-label":u.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:K?void 0:"none"},children:[K&&de.jsx(i_,{ref:b,onFocusFromOutsideViewport:()=>{const X=O({tabbingDirection:"forwards"});Bv(X)}}),de.jsx(Ix.Slot,{scope:i,children:de.jsx(ar.ol,{tabIndex:-1,...p,ref:k})}),K&&de.jsx(i_,{ref:I,onFocusFromOutsideViewport:()=>{const X=O({tabbingDirection:"backwards"});Bv(X)}})]})});QE.displayName=YE;var JE="ToastFocusProxy",i_=Z.forwardRef((e,t)=>{const{__scopeToast:i,onFocusFromOutsideViewport:o,...u}=e,p=Rg(JE,i);return de.jsx(zg,{"aria-hidden":!0,tabIndex:0,...u,ref:t,style:{position:"fixed"},onFocus:y=>{var b;const l=y.relatedTarget;!((b=p.viewport)!=null&&b.contains(l))&&o()}})});i_.displayName=JE;var Fg="Toast",E4="toast.swipeStart",P4="toast.swipeMove",k4="toast.swipeCancel",A4="toast.swipeEnd",eP=Z.forwardRef((e,t)=>{const{forceMount:i,open:o,defaultOpen:u,onOpenChange:p,...y}=e,[l=!0,S]=HE({prop:o,defaultProp:u,onChange:p});return de.jsx(Ku,{present:i||l,children:de.jsx(D4,{open:l,...y,ref:t,onClose:()=>S(!1),onPause:Ps(e.onPause),onResume:Ps(e.onResume),onSwipeStart:In(e.onSwipeStart,b=>{b.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:In(e.onSwipeMove,b=>{const{x:I,y:M}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","move"),b.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${I}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${M}px`)}),onSwipeCancel:In(e.onSwipeCancel,b=>{b.currentTarget.setAttribute("data-swipe","cancel"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:In(e.onSwipeEnd,b=>{const{x:I,y:M}=b.detail.delta;b.currentTarget.setAttribute("data-swipe","end"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),b.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),b.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${I}px`),b.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${M}px`),S(!1)})})})});eP.displayName=Fg;var[M4,I4]=KE(Fg,{onClose(){}}),D4=Z.forwardRef((e,t)=>{const{__scopeToast:i,type:o="foreground",duration:u,open:p,onClose:y,onEscapeKeyDown:l,onPause:S,onResume:b,onSwipeStart:I,onSwipeMove:M,onSwipeCancel:k,onSwipeEnd:j,...K}=e,O=Rg(Fg,i),[X,B]=Z.useState(null),V=Si(t,Ze=>B(Ze)),q=Z.useRef(null),ne=Z.useRef(null),he=u||O.duration,Se=Z.useRef(0),ke=Z.useRef(he),we=Z.useRef(0),{onToastAdd:We,onToastRemove:Fe}=O,pt=Ps(()=>{var dt;(X==null?void 0:X.contains(document.activeElement))&&((dt=O.viewport)==null||dt.focus()),y()}),it=Z.useCallback(Ze=>{!Ze||Ze===1/0||(window.clearTimeout(we.current),Se.current=new Date().getTime(),we.current=window.setTimeout(pt,Ze))},[pt]);Z.useEffect(()=>{const Ze=O.viewport;if(Ze){const dt=()=>{it(ke.current),b==null||b()},mt=()=>{const Et=new Date().getTime()-Se.current;ke.current=ke.current-Et,window.clearTimeout(we.current),S==null||S()};return Ze.addEventListener(n_,mt),Ze.addEventListener(r_,dt),()=>{Ze.removeEventListener(n_,mt),Ze.removeEventListener(r_,dt)}}},[O.viewport,he,S,b,it]),Z.useEffect(()=>{p&&!O.isClosePausedRef.current&&it(he)},[p,he,O.isClosePausedRef,it]),Z.useEffect(()=>(We(),()=>Fe()),[We,Fe]);const kt=Z.useMemo(()=>X?aP(X):null,[X]);return O.viewport?de.jsxs(de.Fragment,{children:[kt&&de.jsx(L4,{__scopeToast:i,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:kt}),de.jsx(M4,{scope:i,onClose:pt,children:gp.createPortal(de.jsx(Ix.ItemSlot,{scope:i,children:de.jsx(p4,{asChild:!0,onEscapeKeyDown:In(l,()=>{O.isFocusedToastEscapeKeyDownRef.current||pt(),O.isFocusedToastEscapeKeyDownRef.current=!1}),children:de.jsx(ar.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":p?"open":"closed","data-swipe-direction":O.swipeDirection,...K,ref:V,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:In(e.onKeyDown,Ze=>{Ze.key==="Escape"&&(l==null||l(Ze.nativeEvent),Ze.nativeEvent.defaultPrevented||(O.isFocusedToastEscapeKeyDownRef.current=!0,pt()))}),onPointerDown:In(e.onPointerDown,Ze=>{Ze.button===0&&(q.current={x:Ze.clientX,y:Ze.clientY})}),onPointerMove:In(e.onPointerMove,Ze=>{if(!q.current)return;const dt=Ze.clientX-q.current.x,mt=Ze.clientY-q.current.y,Et=!!ne.current,Pe=["left","right"].includes(O.swipeDirection),He=["left","up"].includes(O.swipeDirection)?Math.min:Math.max,yt=Pe?He(0,dt):0,ot=Pe?0:He(0,mt),_t=Ze.pointerType==="touch"?10:2,vt={x:yt,y:ot},Nt={originalEvent:Ze,delta:vt};Et?(ne.current=vt,Qf(P4,M,Nt,{discrete:!1})):y2(vt,O.swipeDirection,_t)?(ne.current=vt,Qf(E4,I,Nt,{discrete:!1}),Ze.target.setPointerCapture(Ze.pointerId)):(Math.abs(dt)>_t||Math.abs(mt)>_t)&&(q.current=null)}),onPointerUp:In(e.onPointerUp,Ze=>{const dt=ne.current,mt=Ze.target;if(mt.hasPointerCapture(Ze.pointerId)&&mt.releasePointerCapture(Ze.pointerId),ne.current=null,q.current=null,dt){const Et=Ze.currentTarget,Pe={originalEvent:Ze,delta:dt};y2(dt,O.swipeDirection,O.swipeThreshold)?Qf(A4,j,Pe,{discrete:!0}):Qf(k4,k,Pe,{discrete:!0}),Et.addEventListener("click",He=>He.preventDefault(),{once:!0})}})})})}),O.viewport)})]}):null}),L4=e=>{const{__scopeToast:t,children:i,...o}=e,u=Rg(Fg,t),[p,y]=Z.useState(!1),[l,S]=Z.useState(!1);return F4(()=>y(!0)),Z.useEffect(()=>{const b=window.setTimeout(()=>S(!0),1e3);return()=>window.clearTimeout(b)},[]),l?null:de.jsx(Ax,{asChild:!0,children:de.jsx(zg,{...o,children:p&&de.jsxs(de.Fragment,{children:[u.label," ",i]})})})},z4="ToastTitle",tP=Z.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e;return de.jsx(ar.div,{...o,ref:t})});tP.displayName=z4;var R4="ToastDescription",nP=Z.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e;return de.jsx(ar.div,{...o,ref:t})});nP.displayName=R4;var rP="ToastAction",iP=Z.forwardRef((e,t)=>{const{altText:i,...o}=e;return i.trim()?de.jsx(oP,{altText:i,asChild:!0,children:de.jsx(Dx,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${rP}\`. Expected non-empty \`string\`.`),null)});iP.displayName=rP;var sP="ToastClose",Dx=Z.forwardRef((e,t)=>{const{__scopeToast:i,...o}=e,u=I4(sP,i);return de.jsx(oP,{asChild:!0,children:de.jsx(ar.button,{type:"button",...o,ref:t,onClick:In(e.onClick,u.onClose)})})});Dx.displayName=sP;var oP=Z.forwardRef((e,t)=>{const{__scopeToast:i,altText:o,...u}=e;return de.jsx(ar.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...u,ref:t})});function aP(e){const t=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),O4(o)){const u=o.ariaHidden||o.hidden||o.style.display==="none",p=o.dataset.radixToastAnnounceExclude==="";if(!u)if(p){const y=o.dataset.radixToastAnnounceAlt;y&&t.push(y)}else t.push(...aP(o))}}),t}function Qf(e,t,i,{discrete:o}){const u=i.originalEvent.currentTarget,p=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});t&&u.addEventListener(e,t,{once:!0}),o?GE(u,p):u.dispatchEvent(p)}var y2=(e,t,i=0)=>{const o=Math.abs(e.x),u=Math.abs(e.y),p=o>u;return t==="left"||t==="right"?p&&o>i:!p&&u>i};function F4(e=()=>{}){const t=Ps(e);tl(()=>{let i=0,o=0;return i=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(o)}},[t])}function O4(e){return e.nodeType===e.ELEMENT_NODE}function B4(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const u=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||u?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function Bv(e){const t=document.activeElement;return e.some(i=>i===t?!0:(i.focus(),document.activeElement!==t))}var N4=XE,lP=QE,cP=eP,uP=tP,hP=nP,dP=iP,pP=Dx;function fP(e){var t,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(i=fP(e[t]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function mP(){for(var e,t,i=0,o="",u=arguments.length;i<u;i++)(e=arguments[i])&&(t=fP(e))&&(o&&(o+=" "),o+=t);return o}const v2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,_2=mP,gP=(e,t)=>i=>{var o;if((t==null?void 0:t.variants)==null)return _2(e,i==null?void 0:i.class,i==null?void 0:i.className);const{variants:u,defaultVariants:p}=t,y=Object.keys(u).map(b=>{const I=i==null?void 0:i[b],M=p==null?void 0:p[b];if(I===null)return null;const k=v2(I)||v2(M);return u[b][k]}),l=i&&Object.entries(i).reduce((b,I)=>{let[M,k]=I;return k===void 0||(b[M]=k),b},{}),S=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((b,I)=>{let{class:M,className:k,...j}=I;return Object.entries(j).every(K=>{let[O,X]=K;return Array.isArray(X)?X.includes({...p,...l}[O]):{...p,...l}[O]===X})?[...b,M,k]:b},[]);return _2(e,y,S,i==null?void 0:i.class,i==null?void 0:i.className)};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xu=(e,t)=>{const i=Z.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:p=2,absoluteStrokeWidth:y,className:l="",children:S,...b},I)=>Z.createElement("svg",{ref:I,...V4,width:u,height:u,stroke:o,strokeWidth:y?Number(p)*24/Number(u):p,className:["lucide",`lucide-${j4(e)}`,l].join(" "),...b},[...t.map(([M,k])=>Z.createElement(M,k)),...Array.isArray(S)?S:[S]]));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Xu("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=Xu("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=Xu("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=Xu("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Xu("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Xu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lx="-",W4=e=>{const t=K4(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:y=>{const l=y.split(Lx);return l[0]===""&&l.length!==1&&l.shift(),vP(l,t)||H4(y)},getConflictingClassGroupIds:(y,l)=>{const S=i[y]||[];return l&&o[y]?[...S,...o[y]]:S}}},vP=(e,t)=>{var y;if(e.length===0)return t.classGroupId;const i=e[0],o=t.nextPart.get(i),u=o?vP(e.slice(1),o):void 0;if(u)return u;if(t.validators.length===0)return;const p=e.join(Lx);return(y=t.validators.find(({validator:l})=>l(p)))==null?void 0:y.classGroupId},x2=/^\[(.+)\]$/,H4=e=>{if(x2.test(e)){const t=x2.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},K4=e=>{const{theme:t,prefix:i}=e,o={nextPart:new Map,validators:[]};return Y4(Object.entries(e.classGroups),i).forEach(([p,y])=>{s_(y,o,p,t)}),o},s_=(e,t,i,o)=>{e.forEach(u=>{if(typeof u=="string"){const p=u===""?t:w2(t,u);p.classGroupId=i;return}if(typeof u=="function"){if(X4(u)){s_(u(o),t,i,o);return}t.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(([p,y])=>{s_(y,w2(t,p),i,o)})})},w2=(e,t)=>{let i=e;return t.split(Lx).forEach(o=>{i.nextPart.has(o)||i.nextPart.set(o,{nextPart:new Map,validators:[]}),i=i.nextPart.get(o)}),i},X4=e=>e.isThemeGetter,Y4=(e,t)=>t?e.map(([i,o])=>{const u=o.map(p=>typeof p=="string"?t+p:typeof p=="object"?Object.fromEntries(Object.entries(p).map(([y,l])=>[t+y,l])):p);return[i,u]}):e,Q4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,o=new Map;const u=(p,y)=>{i.set(p,y),t++,t>e&&(t=0,o=i,i=new Map)};return{get(p){let y=i.get(p);if(y!==void 0)return y;if((y=o.get(p))!==void 0)return u(p,y),y},set(p,y){i.has(p)?i.set(p,y):u(p,y)}}},_P="!",J4=e=>{const{separator:t,experimentalParseClassName:i}=e,o=t.length===1,u=t[0],p=t.length,y=l=>{const S=[];let b=0,I=0,M;for(let X=0;X<l.length;X++){let B=l[X];if(b===0){if(B===u&&(o||l.slice(X,X+p)===t)){S.push(l.slice(I,X)),I=X+p;continue}if(B==="/"){M=X;continue}}B==="["?b++:B==="]"&&b--}const k=S.length===0?l:l.substring(I),j=k.startsWith(_P),K=j?k.substring(1):k,O=M&&M>I?M-I:void 0;return{modifiers:S,hasImportantModifier:j,baseClassName:K,maybePostfixModifierPosition:O}};return i?l=>i({className:l,parseClassName:y}):y},ez=e=>{if(e.length<=1)return e;const t=[];let i=[];return e.forEach(o=>{o[0]==="["?(t.push(...i.sort(),o),i=[]):i.push(o)}),t.push(...i.sort()),t},tz=e=>({cache:Q4(e.cacheSize),parseClassName:J4(e),...W4(e)}),nz=/\s+/,rz=(e,t)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:u}=t,p=[],y=e.trim().split(nz);let l="";for(let S=y.length-1;S>=0;S-=1){const b=y[S],{modifiers:I,hasImportantModifier:M,baseClassName:k,maybePostfixModifierPosition:j}=i(b);let K=!!j,O=o(K?k.substring(0,j):k);if(!O){if(!K){l=b+(l.length>0?" "+l:l);continue}if(O=o(k),!O){l=b+(l.length>0?" "+l:l);continue}K=!1}const X=ez(I).join(":"),B=M?X+_P:X,V=B+O;if(p.includes(V))continue;p.push(V);const q=u(O,K);for(let ne=0;ne<q.length;++ne){const he=q[ne];p.push(B+he)}l=b+(l.length>0?" "+l:l)}return l};function iz(){let e=0,t,i,o="";for(;e<arguments.length;)(t=arguments[e++])&&(i=xP(t))&&(o&&(o+=" "),o+=i);return o}const xP=e=>{if(typeof e=="string")return e;let t,i="";for(let o=0;o<e.length;o++)e[o]&&(t=xP(e[o]))&&(i&&(i+=" "),i+=t);return i};function sz(e,...t){let i,o,u,p=y;function y(S){const b=t.reduce((I,M)=>M(I),e());return i=tz(b),o=i.cache.get,u=i.cache.set,p=l,l(S)}function l(S){const b=o(S);if(b)return b;const I=rz(S,i);return u(S,I),I}return function(){return p(iz.apply(null,arguments))}}const Tn=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},wP=/^\[(?:([a-z-]+):)?(.+)\]$/i,oz=/^\d+\/\d+$/,az=new Set(["px","full","screen"]),lz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bo=e=>bu(e)||az.has(e)||oz.test(e),Ta=e=>Yu(e,"length",xz),bu=e=>!!e&&!Number.isNaN(Number(e)),Nv=e=>Yu(e,"number",bu),md=e=>!!e&&Number.isInteger(Number(e)),pz=e=>e.endsWith("%")&&bu(e.slice(0,-1)),Bt=e=>wP.test(e),Ca=e=>lz.test(e),fz=new Set(["length","size","percentage"]),mz=e=>Yu(e,fz,bP),gz=e=>Yu(e,"position",bP),yz=new Set(["image","url"]),vz=e=>Yu(e,yz,bz),_z=e=>Yu(e,"",wz),gd=()=>!0,Yu=(e,t,i)=>{const o=wP.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):i(o[2]):!1},xz=e=>cz.test(e)&&!uz.test(e),bP=()=>!1,wz=e=>hz.test(e),bz=e=>dz.test(e),Sz=()=>{const e=Tn("colors"),t=Tn("spacing"),i=Tn("blur"),o=Tn("brightness"),u=Tn("borderColor"),p=Tn("borderRadius"),y=Tn("borderSpacing"),l=Tn("borderWidth"),S=Tn("contrast"),b=Tn("grayscale"),I=Tn("hueRotate"),M=Tn("invert"),k=Tn("gap"),j=Tn("gradientColorStops"),K=Tn("gradientColorStopPositions"),O=Tn("inset"),X=Tn("margin"),B=Tn("opacity"),V=Tn("padding"),q=Tn("saturate"),ne=Tn("scale"),he=Tn("sepia"),Se=Tn("skew"),ke=Tn("space"),we=Tn("translate"),We=()=>["auto","contain","none"],Fe=()=>["auto","hidden","clip","visible","scroll"],pt=()=>["auto",Bt,t],it=()=>[Bt,t],kt=()=>["",Bo,Ta],Ze=()=>["auto",bu,Bt],dt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],mt=()=>["solid","dashed","dotted","double","none"],Et=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>["start","end","center","between","around","evenly","stretch"],He=()=>["","0",Bt],yt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ot=()=>[bu,Bt];return{cacheSize:500,separator:":",theme:{colors:[gd],spacing:[Bo,Ta],blur:["none","",Ca,Bt],brightness:ot(),borderColor:[e],borderRadius:["none","","full",Ca,Bt],borderSpacing:it(),borderWidth:kt(),contrast:ot(),grayscale:He(),hueRotate:ot(),invert:He(),gap:it(),gradientColorStops:[e],gradientColorStopPositions:[pz,Ta],inset:pt(),margin:pt(),opacity:ot(),padding:it(),saturate:ot(),scale:ot(),sepia:He(),skew:ot(),space:it(),translate:it()},classGroups:{aspect:[{aspect:["auto","square","video",Bt]}],container:["container"],columns:[{columns:[Ca]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...dt(),Bt]}],overflow:[{overflow:Fe()}],"overflow-x":[{"overflow-x":Fe()}],"overflow-y":[{"overflow-y":Fe()}],overscroll:[{overscroll:We()}],"overscroll-x":[{"overscroll-x":We()}],"overscroll-y":[{"overscroll-y":We()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",md,Bt]}],basis:[{basis:pt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Bt]}],grow:[{grow:He()}],shrink:[{shrink:He()}],order:[{order:["first","last","none",md,Bt]}],"grid-cols":[{"grid-cols":[gd]}],"col-start-end":[{col:["auto",{span:["full",md,Bt]},Bt]}],"col-start":[{"col-start":Ze()}],"col-end":[{"col-end":Ze()}],"grid-rows":[{"grid-rows":[gd]}],"row-start-end":[{row:["auto",{span:[md,Bt]},Bt]}],"row-start":[{"row-start":Ze()}],"row-end":[{"row-end":Ze()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Bt]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...Pe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Pe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Pe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[V]}],px:[{px:[V]}],py:[{py:[V]}],ps:[{ps:[V]}],pe:[{pe:[V]}],pt:[{pt:[V]}],pr:[{pr:[V]}],pb:[{pb:[V]}],pl:[{pl:[V]}],m:[{m:[X]}],mx:[{mx:[X]}],my:[{my:[X]}],ms:[{ms:[X]}],me:[{me:[X]}],mt:[{mt:[X]}],mr:[{mr:[X]}],mb:[{mb:[X]}],ml:[{ml:[X]}],"space-x":[{"space-x":[ke]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ke]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Bt,t]}],"min-w":[{"min-w":[Bt,t,"min","max","fit"]}],"max-w":[{"max-w":[Bt,t,"none","full","min","max","fit","prose",{screen:[Ca]},Ca]}],h:[{h:[Bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ca,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nv]}],"font-family":[{font:[gd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Bt]}],"line-clamp":[{"line-clamp":["none",bu,Nv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bo,Bt]}],"list-image":[{"list-image":["none",Bt]}],"list-style-type":[{list:["none","disc","decimal",Bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...mt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bo,Ta]}],"underline-offset":[{"underline-offset":["auto",Bo,Bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:it()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...dt(),gz]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vz]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[K]}],"gradient-via-pos":[{via:[K]}],"gradient-to-pos":[{to:[K]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[p]}],"rounded-s":[{"rounded-s":[p]}],"rounded-e":[{"rounded-e":[p]}],"rounded-t":[{"rounded-t":[p]}],"rounded-r":[{"rounded-r":[p]}],"rounded-b":[{"rounded-b":[p]}],"rounded-l":[{"rounded-l":[p]}],"rounded-ss":[{"rounded-ss":[p]}],"rounded-se":[{"rounded-se":[p]}],"rounded-ee":[{"rounded-ee":[p]}],"rounded-es":[{"rounded-es":[p]}],"rounded-tl":[{"rounded-tl":[p]}],"rounded-tr":[{"rounded-tr":[p]}],"rounded-br":[{"rounded-br":[p]}],"rounded-bl":[{"rounded-bl":[p]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...mt(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:mt()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...mt()]}],"outline-offset":[{"outline-offset":[Bo,Bt]}],"outline-w":[{outline:[Bo,Ta]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:kt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[Bo,Ta]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ca,_z]}],"shadow-color":[{shadow:[gd]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...Et(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Et()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[o]}],contrast:[{contrast:[S]}],"drop-shadow":[{"drop-shadow":["","none",Ca,Bt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[I]}],invert:[{invert:[M]}],saturate:[{saturate:[q]}],sepia:[{sepia:[he]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[S]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[I]}],"backdrop-invert":[{"backdrop-invert":[M]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[q]}],"backdrop-sepia":[{"backdrop-sepia":[he]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[y]}],"border-spacing-x":[{"border-spacing-x":[y]}],"border-spacing-y":[{"border-spacing-y":[y]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Bt]}],duration:[{duration:ot()}],ease:[{ease:["linear","in","out","in-out",Bt]}],delay:[{delay:ot()}],animate:[{animate:["none","spin","ping","pulse","bounce",Bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ne]}],"scale-x":[{"scale-x":[ne]}],"scale-y":[{"scale-y":[ne]}],rotate:[{rotate:[md,Bt]}],"translate-x":[{"translate-x":[we]}],"translate-y":[{"translate-y":[we]}],"skew-x":[{"skew-x":[Se]}],"skew-y":[{"skew-y":[Se]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":it()}],"scroll-mx":[{"scroll-mx":it()}],"scroll-my":[{"scroll-my":it()}],"scroll-ms":[{"scroll-ms":it()}],"scroll-me":[{"scroll-me":it()}],"scroll-mt":[{"scroll-mt":it()}],"scroll-mr":[{"scroll-mr":it()}],"scroll-mb":[{"scroll-mb":it()}],"scroll-ml":[{"scroll-ml":it()}],"scroll-p":[{"scroll-p":it()}],"scroll-px":[{"scroll-px":it()}],"scroll-py":[{"scroll-py":it()}],"scroll-ps":[{"scroll-ps":it()}],"scroll-pe":[{"scroll-pe":it()}],"scroll-pt":[{"scroll-pt":it()}],"scroll-pr":[{"scroll-pr":it()}],"scroll-pb":[{"scroll-pb":it()}],"scroll-pl":[{"scroll-pl":it()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Bo,Ta,Nv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Tz=sz(Sz);function Ei(...e){return Tz(mP(e))}const Cz=N4,SP=Z.forwardRef(({className:e,...t},i)=>de.jsx(lP,{ref:i,className:Ei("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));SP.displayName=lP.displayName;const Ez=gP("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),TP=Z.forwardRef(({className:e,variant:t,...i},o)=>de.jsx(cP,{ref:o,className:Ei(Ez({variant:t}),e),...i}));TP.displayName=cP.displayName;const Pz=Z.forwardRef(({className:e,...t},i)=>de.jsx(dP,{ref:i,className:Ei("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Pz.displayName=dP.displayName;const CP=Z.forwardRef(({className:e,...t},i)=>de.jsx(pP,{ref:i,className:Ei("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:de.jsx(Z4,{className:"h-4 w-4"})}));CP.displayName=pP.displayName;const EP=Z.forwardRef(({className:e,...t},i)=>de.jsx(uP,{ref:i,className:Ei("text-sm font-semibold",e),...t}));EP.displayName=uP.displayName;const PP=Z.forwardRef(({className:e,...t},i)=>de.jsx(hP,{ref:i,className:Ei("text-sm opacity-90",e),...t}));PP.displayName=hP.displayName;function kz(){const{toasts:e}=KL();return de.jsxs(Cz,{children:[e.map(function({id:t,title:i,description:o,action:u,...p}){return de.jsxs(TP,{...p,children:[de.jsxs("div",{className:"grid gap-1",children:[i&&de.jsx(EP,{children:i}),o&&de.jsx(PP,{children:o})]}),u,de.jsx(CP,{})]},t)}),de.jsx(SP,{})]})}var Az=e=>{switch(e){case"success":return Dz;case"info":return zz;case"warning":return Lz;case"error":return Rz;default:return null}},Mz=Array(12).fill(0),Iz=({visible:e})=>tt.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},tt.createElement("div",{className:"sonner-spinner"},Mz.map((t,i)=>tt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),Dz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Lz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),zz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Rz=tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},tt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Fz=()=>{let[e,t]=tt.useState(document.hidden);return tt.useEffect(()=>{let i=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},o_=1,Oz=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:i,...o}=e,u=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:o_++,p=this.toasts.find(l=>l.id===u),y=e.dismissible===void 0?!0:e.dismissible;return p?this.toasts=this.toasts.map(l=>l.id===u?(this.publish({...l,...e,id:u,title:i}),{...l,...e,id:u,dismissible:y,title:i}):l):this.addToast({title:i,...o,dismissible:y,id:u}),u},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let o=e instanceof Promise?e:e(),u=i!==void 0;return o.then(async p=>{if(Nz(p)&&!p.ok){u=!1;let y=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description;this.create({id:i,type:"error",message:y,description:l})}else if(t.success!==void 0){u=!1;let y=typeof t.success=="function"?await t.success(p):t.success,l=typeof t.description=="function"?await t.description(p):t.description;this.create({id:i,type:"success",message:y,description:l})}}).catch(async p=>{if(t.error!==void 0){u=!1;let y=typeof t.error=="function"?await t.error(p):t.error,l=typeof t.description=="function"?await t.description(p):t.description;this.create({id:i,type:"error",message:y,description:l})}}).finally(()=>{var p;u&&(this.dismiss(i),i=void 0),(p=t.finally)==null||p.call(t)}),i},this.custom=(e,t)=>{let i=(t==null?void 0:t.id)||o_++;return this.create({jsx:e(i),id:i,...t}),i},this.subscribers=[],this.toasts=[]}},Qi=new Oz,Bz=(e,t)=>{let i=(t==null?void 0:t.id)||o_++;return Qi.addToast({title:e,...t,id:i}),i},Nz=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Vz=Bz,jz=()=>Qi.toasts,ja=Object.assign(Vz,{success:Qi.success,info:Qi.info,warning:Qi.warning,error:Qi.error,custom:Qi.custom,message:Qi.message,promise:Qi.promise,dismiss:Qi.dismiss,loading:Qi.loading},{getHistory:jz});function Uz(e,{insertAt:t}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}Uz(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jf(e){return e.label!==void 0}var $z=3,Gz="32px",qz=4e3,Zz=356,Wz=14,Hz=20,Kz=200;function Xz(...e){return e.filter(Boolean).join(" ")}var Yz=e=>{var t,i,o,u,p,y,l,S,b,I;let{invert:M,toast:k,unstyled:j,interacting:K,setHeights:O,visibleToasts:X,heights:B,index:V,toasts:q,expanded:ne,removeToast:he,defaultRichColors:Se,closeButton:ke,style:we,cancelButtonStyle:We,actionButtonStyle:Fe,className:pt="",descriptionClassName:it="",duration:kt,position:Ze,gap:dt,loadingIcon:mt,expandByDefault:Et,classNames:Pe,icons:He,closeButtonAriaLabel:yt="Close toast",pauseWhenPageIsHidden:ot,cn:_t}=e,[vt,Nt]=tt.useState(!1),[Dn,Gt]=tt.useState(!1),[ir,lr]=tt.useState(!1),[Un,Ln]=tt.useState(!1),[ls,Pr]=tt.useState(0),[si,kr]=tt.useState(0),Gi=tt.useRef(null),gr=tt.useRef(null),Pi=V===0,ki=V+1<=X,dn=k.type,Ae=k.dismissible!==!1,yr=k.className||"",Vr=k.descriptionClassName||"",Ht=tt.useMemo(()=>B.findIndex(Ye=>Ye.toastId===k.id)||0,[B,k.id]),qt=tt.useMemo(()=>{var Ye;return(Ye=k.closeButton)!=null?Ye:ke},[k.closeButton,ke]),oi=tt.useMemo(()=>k.duration||kt||qz,[k.duration,kt]),cs=tt.useRef(0),vr=tt.useRef(0),wo=tt.useRef(0),ai=tt.useRef(null),[qi,ks]=Ze.split("-"),je=tt.useMemo(()=>B.reduce((Ye,nt,Dt)=>Dt>=Ht?Ye:Ye+nt.height,0),[B,Ht]),li=Fz(),pn=k.invert||M,Zi=dn==="loading";vr.current=tt.useMemo(()=>Ht*dt+je,[Ht,je]),tt.useEffect(()=>{Nt(!0)},[]),tt.useLayoutEffect(()=>{if(!vt)return;let Ye=gr.current,nt=Ye.style.height;Ye.style.height="auto";let Dt=Ye.getBoundingClientRect().height;Ye.style.height=nt,kr(Dt),O(zn=>zn.find(St=>St.toastId===k.id)?zn.map(St=>St.toastId===k.id?{...St,height:Dt}:St):[{toastId:k.id,height:Dt,position:k.position},...zn])},[vt,k.title,k.description,O,k.id]);let sr=tt.useCallback(()=>{Gt(!0),Pr(vr.current),O(Ye=>Ye.filter(nt=>nt.toastId!==k.id)),setTimeout(()=>{he(k)},Kz)},[k,he,O,vr]);tt.useEffect(()=>{if(k.promise&&dn==="loading"||k.duration===1/0||k.type==="loading")return;let Ye,nt=oi;return ne||K||ot&&li?(()=>{if(wo.current<cs.current){let Dt=new Date().getTime()-cs.current;nt=nt-Dt}wo.current=new Date().getTime()})():nt!==1/0&&(cs.current=new Date().getTime(),Ye=setTimeout(()=>{var Dt;(Dt=k.onAutoClose)==null||Dt.call(k,k),sr()},nt)),()=>clearTimeout(Ye)},[ne,K,Et,k,oi,sr,k.promise,dn,ot,li]),tt.useEffect(()=>{let Ye=gr.current;if(Ye){let nt=Ye.getBoundingClientRect().height;return kr(nt),O(Dt=>[{toastId:k.id,height:nt,position:k.position},...Dt]),()=>O(Dt=>Dt.filter(zn=>zn.toastId!==k.id))}},[O,k.id]),tt.useEffect(()=>{k.delete&&sr()},[sr,k.delete]);function $e(){return He!=null&&He.loading?tt.createElement("div",{className:"sonner-loader","data-visible":dn==="loading"},He.loading):mt?tt.createElement("div",{className:"sonner-loader","data-visible":dn==="loading"},mt):tt.createElement(Iz,{visible:dn==="loading"})}return tt.createElement("li",{"aria-live":k.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:gr,className:_t(pt,yr,Pe==null?void 0:Pe.toast,(t=k==null?void 0:k.classNames)==null?void 0:t.toast,Pe==null?void 0:Pe.default,Pe==null?void 0:Pe[dn],(i=k==null?void 0:k.classNames)==null?void 0:i[dn]),"data-sonner-toast":"","data-rich-colors":(o=k.richColors)!=null?o:Se,"data-styled":!(k.jsx||k.unstyled||j),"data-mounted":vt,"data-promise":!!k.promise,"data-removed":Dn,"data-visible":ki,"data-y-position":qi,"data-x-position":ks,"data-index":V,"data-front":Pi,"data-swiping":ir,"data-dismissible":Ae,"data-type":dn,"data-invert":pn,"data-swipe-out":Un,"data-expanded":!!(ne||Et&&vt),style:{"--index":V,"--toasts-before":V,"--z-index":q.length-V,"--offset":`${Dn?ls:vr.current}px`,"--initial-height":Et?"auto":`${si}px`,...we,...k.style},onPointerDown:Ye=>{Zi||!Ae||(Gi.current=new Date,Pr(vr.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(lr(!0),ai.current={x:Ye.clientX,y:Ye.clientY}))},onPointerUp:()=>{var Ye,nt,Dt,zn;if(Un||!Ae)return;ai.current=null;let St=Number(((Ye=gr.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount").replace("px",""))||0),jr=new Date().getTime()-((nt=Gi.current)==null?void 0:nt.getTime()),re=Math.abs(St)/jr;if(Math.abs(St)>=Hz||re>.11){Pr(vr.current),(Dt=k.onDismiss)==null||Dt.call(k,k),sr(),Ln(!0);return}(zn=gr.current)==null||zn.style.setProperty("--swipe-amount","0px"),lr(!1)},onPointerMove:Ye=>{var nt;if(!ai.current||!Ae)return;let Dt=Ye.clientY-ai.current.y,zn=Ye.clientX-ai.current.x,St=(qi==="top"?Math.min:Math.max)(0,Dt),jr=Ye.pointerType==="touch"?10:2;Math.abs(St)>jr?(nt=gr.current)==null||nt.style.setProperty("--swipe-amount",`${Dt}px`):Math.abs(zn)>jr&&(ai.current=null)}},qt&&!k.jsx?tt.createElement("button",{"aria-label":yt,"data-disabled":Zi,"data-close-button":!0,onClick:Zi||!Ae?()=>{}:()=>{var Ye;sr(),(Ye=k.onDismiss)==null||Ye.call(k,k)},className:_t(Pe==null?void 0:Pe.closeButton,(u=k==null?void 0:k.classNames)==null?void 0:u.closeButton)},tt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},tt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),tt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,k.jsx||tt.isValidElement(k.title)?k.jsx||k.title:tt.createElement(tt.Fragment,null,dn||k.icon||k.promise?tt.createElement("div",{"data-icon":"",className:_t(Pe==null?void 0:Pe.icon,(p=k==null?void 0:k.classNames)==null?void 0:p.icon)},k.promise||k.type==="loading"&&!k.icon?k.icon||$e():null,k.type!=="loading"?k.icon||(He==null?void 0:He[dn])||Az(dn):null):null,tt.createElement("div",{"data-content":"",className:_t(Pe==null?void 0:Pe.content,(y=k==null?void 0:k.classNames)==null?void 0:y.content)},tt.createElement("div",{"data-title":"",className:_t(Pe==null?void 0:Pe.title,(l=k==null?void 0:k.classNames)==null?void 0:l.title)},k.title),k.description?tt.createElement("div",{"data-description":"",className:_t(it,Vr,Pe==null?void 0:Pe.description,(S=k==null?void 0:k.classNames)==null?void 0:S.description)},k.description):null),tt.isValidElement(k.cancel)?k.cancel:k.cancel&&Jf(k.cancel)?tt.createElement("button",{"data-button":!0,"data-cancel":!0,style:k.cancelButtonStyle||We,onClick:Ye=>{var nt,Dt;Jf(k.cancel)&&Ae&&((Dt=(nt=k.cancel).onClick)==null||Dt.call(nt,Ye),sr())},className:_t(Pe==null?void 0:Pe.cancelButton,(b=k==null?void 0:k.classNames)==null?void 0:b.cancelButton)},k.cancel.label):null,tt.isValidElement(k.action)?k.action:k.action&&Jf(k.action)?tt.createElement("button",{"data-button":!0,"data-action":!0,style:k.actionButtonStyle||Fe,onClick:Ye=>{var nt,Dt;Jf(k.action)&&(Ye.defaultPrevented||((Dt=(nt=k.action).onClick)==null||Dt.call(nt,Ye),sr()))},className:_t(Pe==null?void 0:Pe.actionButton,(I=k==null?void 0:k.classNames)==null?void 0:I.actionButton)},k.action.label):null))};function b2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var Qz=e=>{let{invert:t,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:p,className:y,offset:l,theme:S="light",richColors:b,duration:I,style:M,visibleToasts:k=$z,toastOptions:j,dir:K=b2(),gap:O=Wz,loadingIcon:X,icons:B,containerAriaLabel:V="Notifications",pauseWhenPageIsHidden:q,cn:ne=Xz}=e,[he,Se]=tt.useState([]),ke=tt.useMemo(()=>Array.from(new Set([i].concat(he.filter(ot=>ot.position).map(ot=>ot.position)))),[he,i]),[we,We]=tt.useState([]),[Fe,pt]=tt.useState(!1),[it,kt]=tt.useState(!1),[Ze,dt]=tt.useState(S!=="system"?S:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),mt=tt.useRef(null),Et=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Pe=tt.useRef(null),He=tt.useRef(!1),yt=tt.useCallback(ot=>{var _t;(_t=he.find(vt=>vt.id===ot.id))!=null&&_t.delete||Qi.dismiss(ot.id),Se(vt=>vt.filter(({id:Nt})=>Nt!==ot.id))},[he]);return tt.useEffect(()=>Qi.subscribe(ot=>{if(ot.dismiss){Se(_t=>_t.map(vt=>vt.id===ot.id?{...vt,delete:!0}:vt));return}setTimeout(()=>{VE.flushSync(()=>{Se(_t=>{let vt=_t.findIndex(Nt=>Nt.id===ot.id);return vt!==-1?[..._t.slice(0,vt),{..._t[vt],...ot},..._t.slice(vt+1)]:[ot,..._t]})})})}),[]),tt.useEffect(()=>{if(S!=="system"){dt(S);return}S==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?dt("dark"):dt("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:ot})=>{dt(ot?"dark":"light")})},[S]),tt.useEffect(()=>{he.length<=1&&pt(!1)},[he]),tt.useEffect(()=>{let ot=_t=>{var vt,Nt;o.every(Dn=>_t[Dn]||_t.code===Dn)&&(pt(!0),(vt=mt.current)==null||vt.focus()),_t.code==="Escape"&&(document.activeElement===mt.current||(Nt=mt.current)!=null&&Nt.contains(document.activeElement))&&pt(!1)};return document.addEventListener("keydown",ot),()=>document.removeEventListener("keydown",ot)},[o]),tt.useEffect(()=>{if(mt.current)return()=>{Pe.current&&(Pe.current.focus({preventScroll:!0}),Pe.current=null,He.current=!1)}},[mt.current]),he.length?tt.createElement("section",{"aria-label":`${V} ${Et}`,tabIndex:-1},ke.map((ot,_t)=>{var vt;let[Nt,Dn]=ot.split("-");return tt.createElement("ol",{key:ot,dir:K==="auto"?b2():K,tabIndex:-1,ref:mt,className:y,"data-sonner-toaster":!0,"data-theme":Ze,"data-y-position":Nt,"data-x-position":Dn,style:{"--front-toast-height":`${((vt=we[0])==null?void 0:vt.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||Gz,"--width":`${Zz}px`,"--gap":`${O}px`,...M},onBlur:Gt=>{He.current&&!Gt.currentTarget.contains(Gt.relatedTarget)&&(He.current=!1,Pe.current&&(Pe.current.focus({preventScroll:!0}),Pe.current=null))},onFocus:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||He.current||(He.current=!0,Pe.current=Gt.relatedTarget)},onMouseEnter:()=>pt(!0),onMouseMove:()=>pt(!0),onMouseLeave:()=>{it||pt(!1)},onPointerDown:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||kt(!0)},onPointerUp:()=>kt(!1)},he.filter(Gt=>!Gt.position&&_t===0||Gt.position===ot).map((Gt,ir)=>{var lr,Un;return tt.createElement(Yz,{key:Gt.id,icons:B,index:ir,toast:Gt,defaultRichColors:b,duration:(lr=j==null?void 0:j.duration)!=null?lr:I,className:j==null?void 0:j.className,descriptionClassName:j==null?void 0:j.descriptionClassName,invert:t,visibleToasts:k,closeButton:(Un=j==null?void 0:j.closeButton)!=null?Un:p,interacting:it,position:ot,style:j==null?void 0:j.style,unstyled:j==null?void 0:j.unstyled,classNames:j==null?void 0:j.classNames,cancelButtonStyle:j==null?void 0:j.cancelButtonStyle,actionButtonStyle:j==null?void 0:j.actionButtonStyle,removeToast:yt,toasts:he.filter(Ln=>Ln.position==Gt.position),heights:we.filter(Ln=>Ln.position==Gt.position),setHeights:We,expandByDefault:u,gap:O,loadingIcon:X,expanded:Fe,pauseWhenPageIsHidden:q,cn:ne})}))})):null};const Jz=({...e})=>de.jsx(Qz,{className:"toaster group",position:"bottom-center",offset:140,gap:8,style:{width:"auto",minWidth:"300px",maxWidth:"90vw",position:"fixed",left:"50%",transform:"translateX(-50%)"},toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e});var eR=OT.useId||(()=>{}),tR=0;function Vv(e){const[t,i]=Z.useState(eR());return tl(()=>{e||i(o=>o??String(tR++))},[e]),e||(t?`radix-${t}`:"")}const nR=["top","right","bottom","left"],nl=Math.min,es=Math.max,tg=Math.round,em=Math.floor,rl=e=>({x:e,y:e}),rR={left:"right",right:"left",bottom:"top",top:"bottom"},iR={start:"end",end:"start"};function a_(e,t,i){return es(e,nl(t,i))}function Jo(e,t){return typeof e=="function"?e(t):e}function ea(e){return e.split("-")[0]}function Qu(e){return e.split("-")[1]}function zx(e){return e==="x"?"y":"x"}function Rx(e){return e==="y"?"height":"width"}function il(e){return["top","bottom"].includes(ea(e))?"y":"x"}function Fx(e){return zx(il(e))}function sR(e,t,i){i===void 0&&(i=!1);const o=Qu(e),u=Fx(e),p=Rx(u);let y=u==="x"?o===(i?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[p]>t.floating[p]&&(y=ng(y)),[y,ng(y)]}function oR(e){const t=ng(e);return[l_(e),t,l_(t)]}function l_(e){return e.replace(/start|end/g,t=>iR[t])}function aR(e,t,i){const o=["left","right"],u=["right","left"],p=["top","bottom"],y=["bottom","top"];switch(e){case"top":case"bottom":return i?t?u:o:t?o:u;case"left":case"right":return t?p:y;default:return[]}}function lR(e,t,i,o){const u=Qu(e);let p=aR(ea(e),i==="start",o);return u&&(p=p.map(y=>y+"-"+u),t&&(p=p.concat(p.map(l_)))),p}function ng(e){return e.replace(/left|right|bottom|top/g,t=>rR[t])}function cR(e){return{top:0,right:0,bottom:0,left:0,...e}}function kP(e){return typeof e!="number"?cR(e):{top:e,right:e,bottom:e,left:e}}function rg(e){const{x:t,y:i,width:o,height:u}=e;return{width:o,height:u,top:i,left:t,right:t+o,bottom:i+u,x:t,y:i}}function S2(e,t,i){let{reference:o,floating:u}=e;const p=il(t),y=Fx(t),l=Rx(y),S=ea(t),b=p==="y",I=o.x+o.width/2-u.width/2,M=o.y+o.height/2-u.height/2,k=o[l]/2-u[l]/2;let j;switch(S){case"top":j={x:I,y:o.y-u.height};break;case"bottom":j={x:I,y:o.y+o.height};break;case"right":j={x:o.x+o.width,y:M};break;case"left":j={x:o.x-u.width,y:M};break;default:j={x:o.x,y:o.y}}switch(Qu(t)){case"start":j[y]-=k*(i&&b?-1:1);break;case"end":j[y]+=k*(i&&b?-1:1);break}return j}const uR=async(e,t,i)=>{const{placement:o="bottom",strategy:u="absolute",middleware:p=[],platform:y}=i,l=p.filter(Boolean),S=await(y.isRTL==null?void 0:y.isRTL(t));let b=await y.getElementRects({reference:e,floating:t,strategy:u}),{x:I,y:M}=S2(b,o,S),k=o,j={},K=0;for(let O=0;O<l.length;O++){const{name:X,fn:B}=l[O],{x:V,y:q,data:ne,reset:he}=await B({x:I,y:M,initialPlacement:o,placement:k,strategy:u,middlewareData:j,rects:b,platform:y,elements:{reference:e,floating:t}});I=V??I,M=q??M,j={...j,[X]:{...j[X],...ne}},he&&K<=50&&(K++,typeof he=="object"&&(he.placement&&(k=he.placement),he.rects&&(b=he.rects===!0?await y.getElementRects({reference:e,floating:t,strategy:u}):he.rects),{x:I,y:M}=S2(b,k,S)),O=-1)}return{x:I,y:M,placement:k,strategy:u,middlewareData:j}};async function tp(e,t){var i;t===void 0&&(t={});const{x:o,y:u,platform:p,rects:y,elements:l,strategy:S}=e,{boundary:b="clippingAncestors",rootBoundary:I="viewport",elementContext:M="floating",altBoundary:k=!1,padding:j=0}=Jo(t,e),K=kP(j),X=l[k?M==="floating"?"reference":"floating":M],B=rg(await p.getClippingRect({element:(i=await(p.isElement==null?void 0:p.isElement(X)))==null||i?X:X.contextElement||await(p.getDocumentElement==null?void 0:p.getDocumentElement(l.floating)),boundary:b,rootBoundary:I,strategy:S})),V=M==="floating"?{x:o,y:u,width:y.floating.width,height:y.floating.height}:y.reference,q=await(p.getOffsetParent==null?void 0:p.getOffsetParent(l.floating)),ne=await(p.isElement==null?void 0:p.isElement(q))?await(p.getScale==null?void 0:p.getScale(q))||{x:1,y:1}:{x:1,y:1},he=rg(p.convertOffsetParentRelativeRectToViewportRelativeRect?await p.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:V,offsetParent:q,strategy:S}):V);return{top:(B.top-he.top+K.top)/ne.y,bottom:(he.bottom-B.bottom+K.bottom)/ne.y,left:(B.left-he.left+K.left)/ne.x,right:(he.right-B.right+K.right)/ne.x}}const hR=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:o,placement:u,rects:p,platform:y,elements:l,middlewareData:S}=t,{element:b,padding:I=0}=Jo(e,t)||{};if(b==null)return{};const M=kP(I),k={x:i,y:o},j=Fx(u),K=Rx(j),O=await y.getDimensions(b),X=j==="y",B=X?"top":"left",V=X?"bottom":"right",q=X?"clientHeight":"clientWidth",ne=p.reference[K]+p.reference[j]-k[j]-p.floating[K],he=k[j]-p.reference[j],Se=await(y.getOffsetParent==null?void 0:y.getOffsetParent(b));let ke=Se?Se[q]:0;(!ke||!await(y.isElement==null?void 0:y.isElement(Se)))&&(ke=l.floating[q]||p.floating[K]);const we=ne/2-he/2,We=ke/2-O[K]/2-1,Fe=nl(M[B],We),pt=nl(M[V],We),it=Fe,kt=ke-O[K]-pt,Ze=ke/2-O[K]/2+we,dt=a_(it,Ze,kt),mt=!S.arrow&&Qu(u)!=null&&Ze!==dt&&p.reference[K]/2-(Ze<it?Fe:pt)-O[K]/2<0,Et=mt?Ze<it?Ze-it:Ze-kt:0;return{[j]:k[j]+Et,data:{[j]:dt,centerOffset:Ze-dt-Et,...mt&&{alignmentOffset:Et}},reset:mt}}}),dR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,o;const{placement:u,middlewareData:p,rects:y,initialPlacement:l,platform:S,elements:b}=t,{mainAxis:I=!0,crossAxis:M=!0,fallbackPlacements:k,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:K="none",flipAlignment:O=!0,...X}=Jo(e,t);if((i=p.arrow)!=null&&i.alignmentOffset)return{};const B=ea(u),V=il(l),q=ea(l)===l,ne=await(S.isRTL==null?void 0:S.isRTL(b.floating)),he=k||(q||!O?[ng(l)]:oR(l)),Se=K!=="none";!k&&Se&&he.push(...lR(l,O,K,ne));const ke=[l,...he],we=await tp(t,X),We=[];let Fe=((o=p.flip)==null?void 0:o.overflows)||[];if(I&&We.push(we[B]),M){const Ze=sR(u,y,ne);We.push(we[Ze[0]],we[Ze[1]])}if(Fe=[...Fe,{placement:u,overflows:We}],!We.every(Ze=>Ze<=0)){var pt,it;const Ze=(((pt=p.flip)==null?void 0:pt.index)||0)+1,dt=ke[Ze];if(dt)return{data:{index:Ze,overflows:Fe},reset:{placement:dt}};let mt=(it=Fe.filter(Et=>Et.overflows[0]<=0).sort((Et,Pe)=>Et.overflows[1]-Pe.overflows[1])[0])==null?void 0:it.placement;if(!mt)switch(j){case"bestFit":{var kt;const Et=(kt=Fe.filter(Pe=>{if(Se){const He=il(Pe.placement);return He===V||He==="y"}return!0}).map(Pe=>[Pe.placement,Pe.overflows.filter(He=>He>0).reduce((He,yt)=>He+yt,0)]).sort((Pe,He)=>Pe[1]-He[1])[0])==null?void 0:kt[0];Et&&(mt=Et);break}case"initialPlacement":mt=l;break}if(u!==mt)return{reset:{placement:mt}}}return{}}}};function T2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function C2(e){return nR.some(t=>e[t]>=0)}const pR=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:o="referenceHidden",...u}=Jo(e,t);switch(o){case"referenceHidden":{const p=await tp(t,{...u,elementContext:"reference"}),y=T2(p,i.reference);return{data:{referenceHiddenOffsets:y,referenceHidden:C2(y)}}}case"escaped":{const p=await tp(t,{...u,altBoundary:!0}),y=T2(p,i.floating);return{data:{escapedOffsets:y,escaped:C2(y)}}}default:return{}}}}};async function fR(e,t){const{placement:i,platform:o,elements:u}=e,p=await(o.isRTL==null?void 0:o.isRTL(u.floating)),y=ea(i),l=Qu(i),S=il(i)==="y",b=["left","top"].includes(y)?-1:1,I=p&&S?-1:1,M=Jo(t,e);let{mainAxis:k,crossAxis:j,alignmentAxis:K}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:M.mainAxis||0,crossAxis:M.crossAxis||0,alignmentAxis:M.alignmentAxis};return l&&typeof K=="number"&&(j=l==="end"?K*-1:K),S?{x:j*I,y:k*b}:{x:k*b,y:j*I}}const mR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,o;const{x:u,y:p,placement:y,middlewareData:l}=t,S=await fR(t,e);return y===((i=l.offset)==null?void 0:i.placement)&&(o=l.arrow)!=null&&o.alignmentOffset?{}:{x:u+S.x,y:p+S.y,data:{...S,placement:y}}}}},gR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:o,placement:u}=t,{mainAxis:p=!0,crossAxis:y=!1,limiter:l={fn:X=>{let{x:B,y:V}=X;return{x:B,y:V}}},...S}=Jo(e,t),b={x:i,y:o},I=await tp(t,S),M=il(ea(u)),k=zx(M);let j=b[k],K=b[M];if(p){const X=k==="y"?"top":"left",B=k==="y"?"bottom":"right",V=j+I[X],q=j-I[B];j=a_(V,j,q)}if(y){const X=M==="y"?"top":"left",B=M==="y"?"bottom":"right",V=K+I[X],q=K-I[B];K=a_(V,K,q)}const O=l.fn({...t,[k]:j,[M]:K});return{...O,data:{x:O.x-i,y:O.y-o,enabled:{[k]:p,[M]:y}}}}}},yR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:o,placement:u,rects:p,middlewareData:y}=t,{offset:l=0,mainAxis:S=!0,crossAxis:b=!0}=Jo(e,t),I={x:i,y:o},M=il(u),k=zx(M);let j=I[k],K=I[M];const O=Jo(l,t),X=typeof O=="number"?{mainAxis:O,crossAxis:0}:{mainAxis:0,crossAxis:0,...O};if(S){const q=k==="y"?"height":"width",ne=p.reference[k]-p.floating[q]+X.mainAxis,he=p.reference[k]+p.reference[q]-X.mainAxis;j<ne?j=ne:j>he&&(j=he)}if(b){var B,V;const q=k==="y"?"width":"height",ne=["top","left"].includes(ea(u)),he=p.reference[M]-p.floating[q]+(ne&&((B=y.offset)==null?void 0:B[M])||0)+(ne?0:X.crossAxis),Se=p.reference[M]+p.reference[q]+(ne?0:((V=y.offset)==null?void 0:V[M])||0)-(ne?X.crossAxis:0);K<he?K=he:K>Se&&(K=Se)}return{[k]:j,[M]:K}}}},vR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var i,o;const{placement:u,rects:p,platform:y,elements:l}=t,{apply:S=()=>{},...b}=Jo(e,t),I=await tp(t,b),M=ea(u),k=Qu(u),j=il(u)==="y",{width:K,height:O}=p.floating;let X,B;M==="top"||M==="bottom"?(X=M,B=k===(await(y.isRTL==null?void 0:y.isRTL(l.floating))?"start":"end")?"left":"right"):(B=M,X=k==="end"?"top":"bottom");const V=O-I.top-I.bottom,q=K-I.left-I.right,ne=nl(O-I[X],V),he=nl(K-I[B],q),Se=!t.middlewareData.shift;let ke=ne,we=he;if((i=t.middlewareData.shift)!=null&&i.enabled.x&&(we=q),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(ke=V),Se&&!k){const Fe=es(I.left,0),pt=es(I.right,0),it=es(I.top,0),kt=es(I.bottom,0);j?we=K-2*(Fe!==0||pt!==0?Fe+pt:es(I.left,I.right)):ke=O-2*(it!==0||kt!==0?it+kt:es(I.top,I.bottom))}await S({...t,availableWidth:we,availableHeight:ke});const We=await y.getDimensions(l.floating);return K!==We.width||O!==We.height?{reset:{rects:!0}}:{}}}};function Og(){return typeof window<"u"}function Ju(e){return AP(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xo(e){var t;return(t=(AP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function AP(e){return Og()?e instanceof Node||e instanceof rs(e).Node:!1}function Hs(e){return Og()?e instanceof Element||e instanceof rs(e).Element:!1}function vo(e){return Og()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function E2(e){return!Og()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}function yp(e){const{overflow:t,overflowX:i,overflowY:o,display:u}=Ks(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+i)&&!["inline","contents"].includes(u)}function _R(e){return["table","td","th"].includes(Ju(e))}function Bg(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ox(e){const t=Bx(),i=Hs(e)?Ks(e):e;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(i.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(i.contain||"").includes(o))}function xR(e){let t=sl(e);for(;vo(t)&&!$u(t);){if(Ox(t))return t;if(Bg(t))return null;t=sl(t)}return null}function Bx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $u(e){return["html","body","#document"].includes(Ju(e))}function Ks(e){return rs(e).getComputedStyle(e)}function Ng(e){return Hs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sl(e){if(Ju(e)==="html")return e;const t=e.assignedSlot||e.parentNode||E2(e)&&e.host||xo(e);return E2(t)?t.host:t}function MP(e){const t=sl(e);return $u(t)?e.ownerDocument?e.ownerDocument.body:e.body:vo(t)&&yp(t)?t:MP(t)}function np(e,t,i){var o;t===void 0&&(t=[]),i===void 0&&(i=!0);const u=MP(e),p=u===((o=e.ownerDocument)==null?void 0:o.body),y=rs(u);if(p){const l=c_(y);return t.concat(y,y.visualViewport||[],yp(u)?u:[],l&&i?np(l):[])}return t.concat(u,np(u,[],i))}function c_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function IP(e){const t=Ks(e);let i=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const u=vo(e),p=u?e.offsetWidth:i,y=u?e.offsetHeight:o,l=tg(i)!==p||tg(o)!==y;return l&&(i=p,o=y),{width:i,height:o,$:l}}function Nx(e){return Hs(e)?e:e.contextElement}function Su(e){const t=Nx(e);if(!vo(t))return rl(1);const i=t.getBoundingClientRect(),{width:o,height:u,$:p}=IP(t);let y=(p?tg(i.width):i.width)/o,l=(p?tg(i.height):i.height)/u;return(!y||!Number.isFinite(y))&&(y=1),(!l||!Number.isFinite(l))&&(l=1),{x:y,y:l}}const wR=rl(0);function DP(e){const t=rs(e);return!Bx()||!t.visualViewport?wR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bR(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==rs(e)?!1:t}function sc(e,t,i,o){t===void 0&&(t=!1),i===void 0&&(i=!1);const u=e.getBoundingClientRect(),p=Nx(e);let y=rl(1);t&&(o?Hs(o)&&(y=Su(o)):y=Su(e));const l=bR(p,i,o)?DP(p):rl(0);let S=(u.left+l.x)/y.x,b=(u.top+l.y)/y.y,I=u.width/y.x,M=u.height/y.y;if(p){const k=rs(p),j=o&&Hs(o)?rs(o):o;let K=k,O=c_(K);for(;O&&o&&j!==K;){const X=Su(O),B=O.getBoundingClientRect(),V=Ks(O),q=B.left+(O.clientLeft+parseFloat(V.paddingLeft))*X.x,ne=B.top+(O.clientTop+parseFloat(V.paddingTop))*X.y;S*=X.x,b*=X.y,I*=X.x,M*=X.y,S+=q,b+=ne,K=rs(O),O=c_(K)}}return rg({width:I,height:M,x:S,y:b})}function SR(e){let{elements:t,rect:i,offsetParent:o,strategy:u}=e;const p=u==="fixed",y=xo(o),l=t?Bg(t.floating):!1;if(o===y||l&&p)return i;let S={scrollLeft:0,scrollTop:0},b=rl(1);const I=rl(0),M=vo(o);if((M||!M&&!p)&&((Ju(o)!=="body"||yp(y))&&(S=Ng(o)),vo(o))){const k=sc(o);b=Su(o),I.x=k.x+o.clientLeft,I.y=k.y+o.clientTop}return{width:i.width*b.x,height:i.height*b.y,x:i.x*b.x-S.scrollLeft*b.x+I.x,y:i.y*b.y-S.scrollTop*b.y+I.y}}function TR(e){return Array.from(e.getClientRects())}function u_(e,t){const i=Ng(e).scrollLeft;return t?t.left+i:sc(xo(e)).left+i}function CR(e){const t=xo(e),i=Ng(e),o=e.ownerDocument.body,u=es(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),p=es(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let y=-i.scrollLeft+u_(e);const l=-i.scrollTop;return Ks(o).direction==="rtl"&&(y+=es(t.clientWidth,o.clientWidth)-u),{width:u,height:p,x:y,y:l}}function ER(e,t){const i=rs(e),o=xo(e),u=i.visualViewport;let p=o.clientWidth,y=o.clientHeight,l=0,S=0;if(u){p=u.width,y=u.height;const b=Bx();(!b||b&&t==="fixed")&&(l=u.offsetLeft,S=u.offsetTop)}return{width:p,height:y,x:l,y:S}}function PR(e,t){const i=sc(e,!0,t==="fixed"),o=i.top+e.clientTop,u=i.left+e.clientLeft,p=vo(e)?Su(e):rl(1),y=e.clientWidth*p.x,l=e.clientHeight*p.y,S=u*p.x,b=o*p.y;return{width:y,height:l,x:S,y:b}}function P2(e,t,i){let o;if(t==="viewport")o=ER(e,i);else if(t==="document")o=CR(xo(e));else if(Hs(t))o=PR(t,i);else{const u=DP(e);o={...t,x:t.x-u.x,y:t.y-u.y}}return rg(o)}function LP(e,t){const i=sl(e);return i===t||!Hs(i)||$u(i)?!1:Ks(i).position==="fixed"||LP(i,t)}function kR(e,t){const i=t.get(e);if(i)return i;let o=np(e,[],!1).filter(l=>Hs(l)&&Ju(l)!=="body"),u=null;const p=Ks(e).position==="fixed";let y=p?sl(e):e;for(;Hs(y)&&!$u(y);){const l=Ks(y),S=Ox(y);!S&&l.position==="fixed"&&(u=null),(p?!S&&!u:!S&&l.position==="static"&&!!u&&["absolute","fixed"].includes(u.position)||yp(y)&&!S&&LP(e,y))?o=o.filter(I=>I!==y):u=l,y=sl(y)}return t.set(e,o),o}function AR(e){let{element:t,boundary:i,rootBoundary:o,strategy:u}=e;const y=[...i==="clippingAncestors"?Bg(t)?[]:kR(t,this._c):[].concat(i),o],l=y[0],S=y.reduce((b,I)=>{const M=P2(t,I,u);return b.top=es(M.top,b.top),b.right=nl(M.right,b.right),b.bottom=nl(M.bottom,b.bottom),b.left=es(M.left,b.left),b},P2(t,l,u));return{width:S.right-S.left,height:S.bottom-S.top,x:S.left,y:S.top}}function MR(e){const{width:t,height:i}=IP(e);return{width:t,height:i}}function IR(e,t,i){const o=vo(t),u=xo(t),p=i==="fixed",y=sc(e,!0,p,t);let l={scrollLeft:0,scrollTop:0};const S=rl(0);if(o||!o&&!p)if((Ju(t)!=="body"||yp(u))&&(l=Ng(t)),o){const j=sc(t,!0,p,t);S.x=j.x+t.clientLeft,S.y=j.y+t.clientTop}else u&&(S.x=u_(u));let b=0,I=0;if(u&&!o&&!p){const j=u.getBoundingClientRect();I=j.top+l.scrollTop,b=j.left+l.scrollLeft-u_(u,j)}const M=y.left+l.scrollLeft-S.x-b,k=y.top+l.scrollTop-S.y-I;return{x:M,y:k,width:y.width,height:y.height}}function jv(e){return Ks(e).position==="static"}function k2(e,t){if(!vo(e)||Ks(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return xo(e)===i&&(i=i.ownerDocument.body),i}function zP(e,t){const i=rs(e);if(Bg(e))return i;if(!vo(e)){let u=sl(e);for(;u&&!$u(u);){if(Hs(u)&&!jv(u))return u;u=sl(u)}return i}let o=k2(e,t);for(;o&&_R(o)&&jv(o);)o=k2(o,t);return o&&$u(o)&&jv(o)&&!Ox(o)?i:o||xR(e)||i}const DR=async function(e){const t=this.getOffsetParent||zP,i=this.getDimensions,o=await i(e.floating);return{reference:IR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function LR(e){return Ks(e).direction==="rtl"}const zR={convertOffsetParentRelativeRectToViewportRelativeRect:SR,getDocumentElement:xo,getClippingRect:AR,getOffsetParent:zP,getElementRects:DR,getClientRects:TR,getDimensions:MR,getScale:Su,isElement:Hs,isRTL:LR};function RR(e,t){let i=null,o;const u=xo(e);function p(){var l;clearTimeout(o),(l=i)==null||l.disconnect(),i=null}function y(l,S){l===void 0&&(l=!1),S===void 0&&(S=1),p();const{left:b,top:I,width:M,height:k}=e.getBoundingClientRect();if(l||t(),!M||!k)return;const j=em(I),K=em(u.clientWidth-(b+M)),O=em(u.clientHeight-(I+k)),X=em(b),V={rootMargin:-j+"px "+-K+"px "+-O+"px "+-X+"px",threshold:es(0,nl(1,S))||1};let q=!0;function ne(he){const Se=he[0].intersectionRatio;if(Se!==S){if(!q)return y();Se?y(!1,Se):o=setTimeout(()=>{y(!1,1e-7)},1e3)}q=!1}try{i=new IntersectionObserver(ne,{...V,root:u.ownerDocument})}catch{i=new IntersectionObserver(ne,V)}i.observe(e)}return y(!0),p}function FR(e,t,i,o){o===void 0&&(o={});const{ancestorScroll:u=!0,ancestorResize:p=!0,elementResize:y=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:S=!1}=o,b=Nx(e),I=u||p?[...b?np(b):[],...np(t)]:[];I.forEach(B=>{u&&B.addEventListener("scroll",i,{passive:!0}),p&&B.addEventListener("resize",i)});const M=b&&l?RR(b,i):null;let k=-1,j=null;y&&(j=new ResizeObserver(B=>{let[V]=B;V&&V.target===b&&j&&(j.unobserve(t),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var q;(q=j)==null||q.observe(t)})),i()}),b&&!S&&j.observe(b),j.observe(t));let K,O=S?sc(e):null;S&&X();function X(){const B=sc(e);O&&(B.x!==O.x||B.y!==O.y||B.width!==O.width||B.height!==O.height)&&i(),O=B,K=requestAnimationFrame(X)}return i(),()=>{var B;I.forEach(V=>{u&&V.removeEventListener("scroll",i),p&&V.removeEventListener("resize",i)}),M==null||M(),(B=j)==null||B.disconnect(),j=null,S&&cancelAnimationFrame(K)}}const OR=mR,BR=gR,NR=dR,VR=vR,jR=pR,A2=hR,UR=yR,$R=(e,t,i)=>{const o=new Map,u={platform:zR,...i},p={...u.platform,_c:o};return uR(e,t,{...u,platform:p})};var Cm=typeof document<"u"?Z.useLayoutEffect:Z.useEffect;function ig(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,o,u;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(o=i;o--!==0;)if(!ig(e[o],t[o]))return!1;return!0}if(u=Object.keys(e),i=u.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!{}.hasOwnProperty.call(t,u[o]))return!1;for(o=i;o--!==0;){const p=u[o];if(!(p==="_owner"&&e.$$typeof)&&!ig(e[p],t[p]))return!1}return!0}return e!==e&&t!==t}function RP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function M2(e,t){const i=RP(e);return Math.round(t*i)/i}function Uv(e){const t=Z.useRef(e);return Cm(()=>{t.current=e}),t}function GR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:o=[],platform:u,elements:{reference:p,floating:y}={},transform:l=!0,whileElementsMounted:S,open:b}=e,[I,M]=Z.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[k,j]=Z.useState(o);ig(k,o)||j(o);const[K,O]=Z.useState(null),[X,B]=Z.useState(null),V=Z.useCallback(Pe=>{Pe!==Se.current&&(Se.current=Pe,O(Pe))},[]),q=Z.useCallback(Pe=>{Pe!==ke.current&&(ke.current=Pe,B(Pe))},[]),ne=p||K,he=y||X,Se=Z.useRef(null),ke=Z.useRef(null),we=Z.useRef(I),We=S!=null,Fe=Uv(S),pt=Uv(u),it=Uv(b),kt=Z.useCallback(()=>{if(!Se.current||!ke.current)return;const Pe={placement:t,strategy:i,middleware:k};pt.current&&(Pe.platform=pt.current),$R(Se.current,ke.current,Pe).then(He=>{const yt={...He,isPositioned:it.current!==!1};Ze.current&&!ig(we.current,yt)&&(we.current=yt,gp.flushSync(()=>{M(yt)}))})},[k,t,i,pt,it]);Cm(()=>{b===!1&&we.current.isPositioned&&(we.current.isPositioned=!1,M(Pe=>({...Pe,isPositioned:!1})))},[b]);const Ze=Z.useRef(!1);Cm(()=>(Ze.current=!0,()=>{Ze.current=!1}),[]),Cm(()=>{if(ne&&(Se.current=ne),he&&(ke.current=he),ne&&he){if(Fe.current)return Fe.current(ne,he,kt);kt()}},[ne,he,kt,Fe,We]);const dt=Z.useMemo(()=>({reference:Se,floating:ke,setReference:V,setFloating:q}),[V,q]),mt=Z.useMemo(()=>({reference:ne,floating:he}),[ne,he]),Et=Z.useMemo(()=>{const Pe={position:i,left:0,top:0};if(!mt.floating)return Pe;const He=M2(mt.floating,I.x),yt=M2(mt.floating,I.y);return l?{...Pe,transform:"translate("+He+"px, "+yt+"px)",...RP(mt.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:He,top:yt}},[i,l,mt.floating,I.x,I.y]);return Z.useMemo(()=>({...I,update:kt,refs:dt,elements:mt,floatingStyles:Et}),[I,kt,dt,mt,Et])}const qR=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:o,padding:u}=typeof e=="function"?e(i):e;return o&&t(o)?o.current!=null?A2({element:o.current,padding:u}).fn(i):{}:o?A2({element:o,padding:u}).fn(i):{}}}},ZR=(e,t)=>({...OR(e),options:[e,t]}),WR=(e,t)=>({...BR(e),options:[e,t]}),HR=(e,t)=>({...UR(e),options:[e,t]}),KR=(e,t)=>({...NR(e),options:[e,t]}),XR=(e,t)=>({...VR(e),options:[e,t]}),YR=(e,t)=>({...jR(e),options:[e,t]}),QR=(e,t)=>({...qR(e),options:[e,t]});var JR="Arrow",FP=Z.forwardRef((e,t)=>{const{children:i,width:o=10,height:u=5,...p}=e;return de.jsx(ar.svg,{...p,ref:t,width:o,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:de.jsx("polygon",{points:"0,0 30,0 15,10"})})});FP.displayName=JR;var e3=FP;function t3(e,t=[]){let i=[];function o(p,y){const l=Z.createContext(y),S=i.length;i=[...i,y];function b(M){const{scope:k,children:j,...K}=M,O=(k==null?void 0:k[e][S])||l,X=Z.useMemo(()=>K,Object.values(K));return de.jsx(O.Provider,{value:X,children:j})}function I(M,k){const j=(k==null?void 0:k[e][S])||l,K=Z.useContext(j);if(K)return K;if(y!==void 0)return y;throw new Error(`\`${M}\` must be used within \`${p}\``)}return b.displayName=p+"Provider",[b,I]}const u=()=>{const p=i.map(y=>Z.createContext(y));return function(l){const S=(l==null?void 0:l[e])||p;return Z.useMemo(()=>({[`__scope${e}`]:{...l,[e]:S}}),[l,S])}};return u.scopeName=e,[o,n3(u,...t)]}function n3(...e){const t=e[0];if(e.length===1)return t;const i=()=>{const o=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(p){const y=o.reduce((l,{useScope:S,scopeName:b})=>{const M=S(p)[`__scope${b}`];return{...l,...M}},{});return Z.useMemo(()=>({[`__scope${t.scopeName}`]:y}),[y])}};return i.scopeName=t.scopeName,i}function r3(e){const[t,i]=Z.useState(void 0);return tl(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const p=u[0];let y,l;if("borderBoxSize"in p){const S=p.borderBoxSize,b=Array.isArray(S)?S[0]:S;y=b.inlineSize,l=b.blockSize}else y=e.offsetWidth,l=e.offsetHeight;i({width:y,height:l})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else i(void 0)},[e]),t}var OP="Popper",[BP,NP]=t3(OP),[ZN,VP]=BP(OP),jP="PopperAnchor",UP=Z.forwardRef((e,t)=>{const{__scopePopper:i,virtualRef:o,...u}=e,p=VP(jP,i),y=Z.useRef(null),l=Si(t,y);return Z.useEffect(()=>{p.onAnchorChange((o==null?void 0:o.current)||y.current)}),o?null:de.jsx(ar.div,{...u,ref:l})});UP.displayName=jP;var Vx="PopperContent",[i3,s3]=BP(Vx),$P=Z.forwardRef((e,t)=>{var ir,lr,Un,Ln,ls,Pr;const{__scopePopper:i,side:o="bottom",sideOffset:u=0,align:p="center",alignOffset:y=0,arrowPadding:l=0,avoidCollisions:S=!0,collisionBoundary:b=[],collisionPadding:I=0,sticky:M="partial",hideWhenDetached:k=!1,updatePositionStrategy:j="optimized",onPlaced:K,...O}=e,X=VP(Vx,i),[B,V]=Z.useState(null),q=Si(t,si=>V(si)),[ne,he]=Z.useState(null),Se=r3(ne),ke=(Se==null?void 0:Se.width)??0,we=(Se==null?void 0:Se.height)??0,We=o+(p!=="center"?"-"+p:""),Fe=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},pt=Array.isArray(b)?b:[b],it=pt.length>0,kt={padding:Fe,boundary:pt.filter(a3),altBoundary:it},{refs:Ze,floatingStyles:dt,placement:mt,isPositioned:Et,middlewareData:Pe}=GR({strategy:"fixed",placement:We,whileElementsMounted:(...si)=>FR(...si,{animationFrame:j==="always"}),elements:{reference:X.anchor},middleware:[ZR({mainAxis:u+we,alignmentAxis:y}),S&&WR({mainAxis:!0,crossAxis:!1,limiter:M==="partial"?HR():void 0,...kt}),S&&KR({...kt}),XR({...kt,apply:({elements:si,rects:kr,availableWidth:Gi,availableHeight:gr})=>{const{width:Pi,height:ki}=kr.reference,dn=si.floating.style;dn.setProperty("--radix-popper-available-width",`${Gi}px`),dn.setProperty("--radix-popper-available-height",`${gr}px`),dn.setProperty("--radix-popper-anchor-width",`${Pi}px`),dn.setProperty("--radix-popper-anchor-height",`${ki}px`)}}),ne&&QR({element:ne,padding:l}),l3({arrowWidth:ke,arrowHeight:we}),k&&YR({strategy:"referenceHidden",...kt})]}),[He,yt]=ZP(mt),ot=Ps(K);tl(()=>{Et&&(ot==null||ot())},[Et,ot]);const _t=(ir=Pe.arrow)==null?void 0:ir.x,vt=(lr=Pe.arrow)==null?void 0:lr.y,Nt=((Un=Pe.arrow)==null?void 0:Un.centerOffset)!==0,[Dn,Gt]=Z.useState();return tl(()=>{B&&Gt(window.getComputedStyle(B).zIndex)},[B]),de.jsx("div",{ref:Ze.setFloating,"data-radix-popper-content-wrapper":"",style:{...dt,transform:Et?dt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Dn,"--radix-popper-transform-origin":[(Ln=Pe.transformOrigin)==null?void 0:Ln.x,(ls=Pe.transformOrigin)==null?void 0:ls.y].join(" "),...((Pr=Pe.hide)==null?void 0:Pr.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:de.jsx(i3,{scope:i,placedSide:He,onArrowChange:he,arrowX:_t,arrowY:vt,shouldHideArrow:Nt,children:de.jsx(ar.div,{"data-side":He,"data-align":yt,...O,ref:q,style:{...O.style,animation:Et?void 0:"none"}})})})});$P.displayName=Vx;var GP="PopperArrow",o3={top:"bottom",right:"left",bottom:"top",left:"right"},qP=Z.forwardRef(function(t,i){const{__scopePopper:o,...u}=t,p=s3(GP,o),y=o3[p.placedSide];return de.jsx("span",{ref:p.onArrowChange,style:{position:"absolute",left:p.arrowX,top:p.arrowY,[y]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0},children:de.jsx(e3,{...u,ref:i,style:{...u.style,display:"block"}})})});qP.displayName=GP;function a3(e){return e!==null}var l3=e=>({name:"transformOrigin",options:e,fn(t){var X,B,V;const{placement:i,rects:o,middlewareData:u}=t,y=((X=u.arrow)==null?void 0:X.centerOffset)!==0,l=y?0:e.arrowWidth,S=y?0:e.arrowHeight,[b,I]=ZP(i),M={start:"0%",center:"50%",end:"100%"}[I],k=(((B=u.arrow)==null?void 0:B.x)??0)+l/2,j=(((V=u.arrow)==null?void 0:V.y)??0)+S/2;let K="",O="";return b==="bottom"?(K=y?M:`${k}px`,O=`${-S}px`):b==="top"?(K=y?M:`${k}px`,O=`${o.floating.height+S}px`):b==="right"?(K=`${-S}px`,O=y?M:`${j}px`):b==="left"&&(K=`${o.floating.width+S}px`,O=y?M:`${j}px`),{data:{x:K,y:O}}}});function ZP(e){const[t,i="center"]=e.split("-");return[t,i]}var c3=UP,u3=$P,h3=qP,[Vg,WN]=kx("Tooltip",[NP]),jx=NP(),WP="TooltipProvider",d3=700,I2="tooltip.open",[p3,HP]=Vg(WP),KP=e=>{const{__scopeTooltip:t,delayDuration:i=d3,skipDelayDuration:o=300,disableHoverableContent:u=!1,children:p}=e,[y,l]=Z.useState(!0),S=Z.useRef(!1),b=Z.useRef(0);return Z.useEffect(()=>{const I=b.current;return()=>window.clearTimeout(I)},[]),de.jsx(p3,{scope:t,isOpenDelayed:y,delayDuration:i,onOpen:Z.useCallback(()=>{window.clearTimeout(b.current),l(!1)},[]),onClose:Z.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>l(!0),o)},[o]),isPointerInTransitRef:S,onPointerInTransitChange:Z.useCallback(I=>{S.current=I},[]),disableHoverableContent:u,children:p})};KP.displayName=WP;var XP="Tooltip",[HN,jg]=Vg(XP),h_="TooltipTrigger",f3=Z.forwardRef((e,t)=>{const{__scopeTooltip:i,...o}=e,u=jg(h_,i),p=HP(h_,i),y=jx(i),l=Z.useRef(null),S=Si(t,l,u.onTriggerChange),b=Z.useRef(!1),I=Z.useRef(!1),M=Z.useCallback(()=>b.current=!1,[]);return Z.useEffect(()=>()=>document.removeEventListener("pointerup",M),[M]),de.jsx(c3,{asChild:!0,...y,children:de.jsx(ar.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...o,ref:S,onPointerMove:In(e.onPointerMove,k=>{k.pointerType!=="touch"&&!I.current&&!p.isPointerInTransitRef.current&&(u.onTriggerEnter(),I.current=!0)}),onPointerLeave:In(e.onPointerLeave,()=>{u.onTriggerLeave(),I.current=!1}),onPointerDown:In(e.onPointerDown,()=>{b.current=!0,document.addEventListener("pointerup",M,{once:!0})}),onFocus:In(e.onFocus,()=>{b.current||u.onOpen()}),onBlur:In(e.onBlur,u.onClose),onClick:In(e.onClick,u.onClose)})})});f3.displayName=h_;var m3="TooltipPortal",[KN,g3]=Vg(m3,{forceMount:void 0}),Gu="TooltipContent",YP=Z.forwardRef((e,t)=>{const i=g3(Gu,e.__scopeTooltip),{forceMount:o=i.forceMount,side:u="top",...p}=e,y=jg(Gu,e.__scopeTooltip);return de.jsx(Ku,{present:o||y.open,children:y.disableHoverableContent?de.jsx(QP,{side:u,...p,ref:t}):de.jsx(y3,{side:u,...p,ref:t})})}),y3=Z.forwardRef((e,t)=>{const i=jg(Gu,e.__scopeTooltip),o=HP(Gu,e.__scopeTooltip),u=Z.useRef(null),p=Si(t,u),[y,l]=Z.useState(null),{trigger:S,onClose:b}=i,I=u.current,{onPointerInTransitChange:M}=o,k=Z.useCallback(()=>{l(null),M(!1)},[M]),j=Z.useCallback((K,O)=>{const X=K.currentTarget,B={x:K.clientX,y:K.clientY},V=w3(B,X.getBoundingClientRect()),q=b3(B,V),ne=S3(O.getBoundingClientRect()),he=C3([...q,...ne]);l(he),M(!0)},[M]);return Z.useEffect(()=>()=>k(),[k]),Z.useEffect(()=>{if(S&&I){const K=X=>j(X,I),O=X=>j(X,S);return S.addEventListener("pointerleave",K),I.addEventListener("pointerleave",O),()=>{S.removeEventListener("pointerleave",K),I.removeEventListener("pointerleave",O)}}},[S,I,j,k]),Z.useEffect(()=>{if(y){const K=O=>{const X=O.target,B={x:O.clientX,y:O.clientY},V=(S==null?void 0:S.contains(X))||(I==null?void 0:I.contains(X)),q=!T3(B,y);V?k():q&&(k(),b())};return document.addEventListener("pointermove",K),()=>document.removeEventListener("pointermove",K)}},[S,I,y,b,k]),de.jsx(QP,{...e,ref:p})}),[v3,_3]=Vg(XP,{isInside:!1}),QP=Z.forwardRef((e,t)=>{const{__scopeTooltip:i,children:o,"aria-label":u,onEscapeKeyDown:p,onPointerDownOutside:y,...l}=e,S=jg(Gu,i),b=jx(i),{onClose:I}=S;return Z.useEffect(()=>(document.addEventListener(I2,I),()=>document.removeEventListener(I2,I)),[I]),Z.useEffect(()=>{if(S.trigger){const M=k=>{const j=k.target;j!=null&&j.contains(S.trigger)&&I()};return window.addEventListener("scroll",M,{capture:!0}),()=>window.removeEventListener("scroll",M,{capture:!0})}},[S.trigger,I]),de.jsx(Lg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:p,onPointerDownOutside:y,onFocusOutside:M=>M.preventDefault(),onDismiss:I,children:de.jsxs(u3,{"data-state":S.stateAttribute,...b,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[de.jsx($E,{children:o}),de.jsx(v3,{scope:i,isInside:!0,children:de.jsx(w4,{id:S.contentId,role:"tooltip",children:u||o})})]})})});YP.displayName=Gu;var JP="TooltipArrow",x3=Z.forwardRef((e,t)=>{const{__scopeTooltip:i,...o}=e,u=jx(i);return _3(JP,i).isInside?null:de.jsx(h3,{...u,...o,ref:t})});x3.displayName=JP;function w3(e,t){const i=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),u=Math.abs(t.right-e.x),p=Math.abs(t.left-e.x);switch(Math.min(i,o,u,p)){case p:return"left";case u:return"right";case i:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function b3(e,t,i=5){const o=[];switch(t){case"top":o.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":o.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":o.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":o.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return o}function S3(e){const{top:t,right:i,bottom:o,left:u}=e;return[{x:u,y:t},{x:i,y:t},{x:i,y:o},{x:u,y:o}]}function T3(e,t){const{x:i,y:o}=e;let u=!1;for(let p=0,y=t.length-1;p<t.length;y=p++){const l=t[p].x,S=t[p].y,b=t[y].x,I=t[y].y;S>o!=I>o&&i<(b-l)*(o-S)/(I-S)+l&&(u=!u)}return u}function C3(e){const t=e.slice();return t.sort((i,o)=>i.x<o.x?-1:i.x>o.x?1:i.y<o.y?-1:i.y>o.y?1:0),E3(t)}function E3(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const u=e[o];for(;t.length>=2;){const p=t[t.length-1],y=t[t.length-2];if((p.x-y.x)*(u.y-y.y)>=(p.y-y.y)*(u.x-y.x))t.pop();else break}t.push(u)}t.pop();const i=[];for(let o=e.length-1;o>=0;o--){const u=e[o];for(;i.length>=2;){const p=i[i.length-1],y=i[i.length-2];if((p.x-y.x)*(u.y-y.y)>=(p.y-y.y)*(u.x-y.x))i.pop();else break}i.push(u)}return i.pop(),t.length===1&&i.length===1&&t[0].x===i[0].x&&t[0].y===i[0].y?t:t.concat(i)}var P3=KP,ek=YP;const k3=P3,A3=Z.forwardRef(({className:e,sideOffset:t=4,...i},o)=>de.jsx(ek,{ref:o,sideOffset:t,className:Ei("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));A3.displayName=ek.displayName;var Ug=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$g=typeof window>"u"||"Deno"in globalThis;function js(){}function M3(e,t){return typeof e=="function"?e(t):e}function I3(e){return typeof e=="number"&&e>=0&&e!==1/0}function D3(e,t){return Math.max(e+(t||0)-Date.now(),0)}function D2(e,t){return typeof e=="function"?e(t):e}function L3(e,t){return typeof e=="function"?e(t):e}function L2(e,t){const{type:i="all",exact:o,fetchStatus:u,predicate:p,queryKey:y,stale:l}=e;if(y){if(o){if(t.queryHash!==Ux(y,t.options))return!1}else if(!ip(t.queryKey,y))return!1}if(i!=="all"){const S=t.isActive();if(i==="active"&&!S||i==="inactive"&&S)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||u&&u!==t.state.fetchStatus||p&&!p(t))}function z2(e,t){const{exact:i,status:o,predicate:u,mutationKey:p}=e;if(p){if(!t.options.mutationKey)return!1;if(i){if(rp(t.options.mutationKey)!==rp(p))return!1}else if(!ip(t.options.mutationKey,p))return!1}return!(o&&t.state.status!==o||u&&!u(t))}function Ux(e,t){return((t==null?void 0:t.queryKeyHashFn)||rp)(e)}function rp(e){return JSON.stringify(e,(t,i)=>d_(i)?Object.keys(i).sort().reduce((o,u)=>(o[u]=i[u],o),{}):i)}function ip(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(i=>!ip(e[i],t[i])):!1}function tk(e,t){if(e===t)return e;const i=R2(e)&&R2(t);if(i||d_(e)&&d_(t)){const o=i?e:Object.keys(e),u=o.length,p=i?t:Object.keys(t),y=p.length,l=i?[]:{};let S=0;for(let b=0;b<y;b++){const I=i?b:p[b];(!i&&o.includes(I)||i)&&e[I]===void 0&&t[I]===void 0?(l[I]=void 0,S++):(l[I]=tk(e[I],t[I]),l[I]===e[I]&&e[I]!==void 0&&S++)}return u===y&&S===u?e:l}return t}function R2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function d_(e){if(!F2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const i=t.prototype;return!(!F2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function F2(e){return Object.prototype.toString.call(e)==="[object Object]"}function z3(e){return new Promise(t=>{setTimeout(t,e)})}function R3(e,t,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,t):i.structuralSharing!==!1?tk(e,t):t}function F3(e,t,i=0){const o=[...e,t];return i&&o.length>i?o.slice(1):o}function O3(e,t,i=0){const o=[t,...e];return i&&o.length>i?o.slice(0,-1):o}var $x=Symbol();function nk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$x?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Zl,za,Eu,_T,B3=(_T=class extends Ug{constructor(){super();sn(this,Zl);sn(this,za);sn(this,Eu);Ut(this,Eu,t=>{if(!$g&&window.addEventListener){const i=()=>t();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}})}onSubscribe(){Oe(this,za)||this.setEventListener(Oe(this,Eu))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,za))==null||t.call(this),Ut(this,za,void 0))}setEventListener(t){var i;Ut(this,Eu,t),(i=Oe(this,za))==null||i.call(this),Ut(this,za,t(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(t){Oe(this,Zl)!==t&&(Ut(this,Zl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(i=>{i(t)})}isFocused(){var t;return typeof Oe(this,Zl)=="boolean"?Oe(this,Zl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Zl=new WeakMap,za=new WeakMap,Eu=new WeakMap,_T),rk=new B3,Pu,Ra,ku,xT,N3=(xT=class extends Ug{constructor(){super();sn(this,Pu,!0);sn(this,Ra);sn(this,ku);Ut(this,ku,t=>{if(!$g&&window.addEventListener){const i=()=>t(!0),o=()=>t(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",o)}}})}onSubscribe(){Oe(this,Ra)||this.setEventListener(Oe(this,ku))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,Ra))==null||t.call(this),Ut(this,Ra,void 0))}setEventListener(t){var i;Ut(this,ku,t),(i=Oe(this,Ra))==null||i.call(this),Ut(this,Ra,t(this.setOnline.bind(this)))}setOnline(t){Oe(this,Pu)!==t&&(Ut(this,Pu,t),this.listeners.forEach(o=>{o(t)}))}isOnline(){return Oe(this,Pu)}},Pu=new WeakMap,Ra=new WeakMap,ku=new WeakMap,xT),sg=new N3;function V3(){let e,t;const i=new Promise((u,p)=>{e=u,t=p});i.status="pending",i.catch(()=>{});function o(u){Object.assign(i,u),delete i.resolve,delete i.reject}return i.resolve=u=>{o({status:"fulfilled",value:u}),e(u)},i.reject=u=>{o({status:"rejected",reason:u}),t(u)},i}function j3(e){return Math.min(1e3*2**e,3e4)}function ik(e){return(e??"online")==="online"?sg.isOnline():!0}var sk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function $v(e){return e instanceof sk}function ok(e){let t=!1,i=0,o=!1,u;const p=V3(),y=O=>{var X;o||(k(new sk(O)),(X=e.abort)==null||X.call(e))},l=()=>{t=!0},S=()=>{t=!1},b=()=>rk.isFocused()&&(e.networkMode==="always"||sg.isOnline())&&e.canRun(),I=()=>ik(e.networkMode)&&e.canRun(),M=O=>{var X;o||(o=!0,(X=e.onSuccess)==null||X.call(e,O),u==null||u(),p.resolve(O))},k=O=>{var X;o||(o=!0,(X=e.onError)==null||X.call(e,O),u==null||u(),p.reject(O))},j=()=>new Promise(O=>{var X;u=B=>{(o||b())&&O(B)},(X=e.onPause)==null||X.call(e)}).then(()=>{var O;u=void 0,o||(O=e.onContinue)==null||O.call(e)}),K=()=>{if(o)return;let O;const X=i===0?e.initialPromise:void 0;try{O=X??e.fn()}catch(B){O=Promise.reject(B)}Promise.resolve(O).then(M).catch(B=>{var Se;if(o)return;const V=e.retry??($g?0:3),q=e.retryDelay??j3,ne=typeof q=="function"?q(i,B):q,he=V===!0||typeof V=="number"&&i<V||typeof V=="function"&&V(i,B);if(t||!he){k(B);return}i++,(Se=e.onFail)==null||Se.call(e,i,B),z3(ne).then(()=>b()?void 0:j()).then(()=>{t?k(B):K()})})};return{promise:p,cancel:y,continue:()=>(u==null||u(),p),cancelRetry:l,continueRetry:S,canStart:I,start:()=>(I()?K():j().then(K),p)}}function U3(){let e=[],t=0,i=l=>{l()},o=l=>{l()},u=l=>setTimeout(l,0);const p=l=>{t?e.push(l):u(()=>{i(l)})},y=()=>{const l=e;e=[],l.length&&u(()=>{o(()=>{l.forEach(S=>{i(S)})})})};return{batch:l=>{let S;t++;try{S=l()}finally{t--,t||y()}return S},batchCalls:l=>(...S)=>{p(()=>{l(...S)})},schedule:p,setNotifyFunction:l=>{i=l},setBatchNotifyFunction:l=>{o=l},setScheduler:l=>{u=l}}}var wi=U3(),Wl,wT,ak=(wT=class{constructor(){sn(this,Wl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),I3(this.gcTime)&&Ut(this,Wl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($g?1/0:5*60*1e3))}clearGcTimeout(){Oe(this,Wl)&&(clearTimeout(Oe(this,Wl)),Ut(this,Wl,void 0))}},Wl=new WeakMap,wT),Au,Mu,xs,Jr,cp,Hl,Us,No,bT,$3=(bT=class extends ak{constructor(t){super();sn(this,Us);sn(this,Au);sn(this,Mu);sn(this,xs);sn(this,Jr);sn(this,cp);sn(this,Hl);Ut(this,Hl,!1),Ut(this,cp,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ut(this,xs,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ut(this,Au,q3(this.options)),this.state=t.state??Oe(this,Au),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Oe(this,Jr))==null?void 0:t.promise}setOptions(t){this.options={...Oe(this,cp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Oe(this,xs).remove(this)}setData(t,i){const o=R3(this.state.data,t,this.options);return Xr(this,Us,No).call(this,{data:o,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt,manual:i==null?void 0:i.manual}),o}setState(t,i){Xr(this,Us,No).call(this,{type:"setState",state:t,setStateOptions:i})}cancel(t){var o,u;const i=(o=Oe(this,Jr))==null?void 0:o.promise;return(u=Oe(this,Jr))==null||u.cancel(t),i?i.then(js).catch(js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Oe(this,Au))}isActive(){return this.observers.some(t=>L3(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$x||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!D3(this.state.dataUpdatedAt,t)}onFocus(){var i;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(i=Oe(this,Jr))==null||i.continue()}onOnline(){var i;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(i=Oe(this,Jr))==null||i.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Oe(this,xs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(i=>i!==t),this.observers.length||(Oe(this,Jr)&&(Oe(this,Hl)?Oe(this,Jr).cancel({revert:!0}):Oe(this,Jr).cancelRetry()),this.scheduleGc()),Oe(this,xs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xr(this,Us,No).call(this,{type:"invalidate"})}fetch(t,i){var S,b,I;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(Oe(this,Jr))return Oe(this,Jr).continueRetry(),Oe(this,Jr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const M=this.observers.find(k=>k.options.queryFn);M&&this.setOptions(M.options)}const o=new AbortController,u=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(Ut(this,Hl,!0),o.signal)})},p=()=>{const M=nk(this.options,i),k={queryKey:this.queryKey,meta:this.meta};return u(k),Ut(this,Hl,!1),this.options.persister?this.options.persister(M,k,this):M(k)},y={fetchOptions:i,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:p};u(y),(S=this.options.behavior)==null||S.onFetch(y,this),Ut(this,Mu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((b=y.fetchOptions)==null?void 0:b.meta))&&Xr(this,Us,No).call(this,{type:"fetch",meta:(I=y.fetchOptions)==null?void 0:I.meta});const l=M=>{var k,j,K,O;$v(M)&&M.silent||Xr(this,Us,No).call(this,{type:"error",error:M}),$v(M)||((j=(k=Oe(this,xs).config).onError)==null||j.call(k,M,this),(O=(K=Oe(this,xs).config).onSettled)==null||O.call(K,this.state.data,M,this)),this.scheduleGc()};return Ut(this,Jr,ok({initialPromise:i==null?void 0:i.initialPromise,fn:y.fetchFn,abort:o.abort.bind(o),onSuccess:M=>{var k,j,K,O;if(M===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(M)}catch(X){l(X);return}(j=(k=Oe(this,xs).config).onSuccess)==null||j.call(k,M,this),(O=(K=Oe(this,xs).config).onSettled)==null||O.call(K,M,this.state.error,this),this.scheduleGc()},onError:l,onFail:(M,k)=>{Xr(this,Us,No).call(this,{type:"failed",failureCount:M,error:k})},onPause:()=>{Xr(this,Us,No).call(this,{type:"pause"})},onContinue:()=>{Xr(this,Us,No).call(this,{type:"continue"})},retry:y.options.retry,retryDelay:y.options.retryDelay,networkMode:y.options.networkMode,canRun:()=>!0})),Oe(this,Jr).start()}},Au=new WeakMap,Mu=new WeakMap,xs=new WeakMap,Jr=new WeakMap,cp=new WeakMap,Hl=new WeakMap,Us=new WeakSet,No=function(t){const i=o=>{switch(t.type){case"failed":return{...o,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...G3(o.data,this.options),fetchMeta:t.meta??null};case"success":return{...o,data:t.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const u=t.error;return $v(u)&&u.revert&&Oe(this,Mu)?{...Oe(this,Mu),fetchStatus:"idle"}:{...o,error:u,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...t.state}}};this.state=i(this.state),wi.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),Oe(this,xs).notify({query:this,type:"updated",action:t})})},bT);function G3(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ik(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function q3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,i=t!==void 0,o=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:i?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var lo,ST,Z3=(ST=class extends Ug{constructor(t={}){super();sn(this,lo);this.config=t,Ut(this,lo,new Map)}build(t,i,o){const u=i.queryKey,p=i.queryHash??Ux(u,i);let y=this.get(p);return y||(y=new $3({cache:this,queryKey:u,queryHash:p,options:t.defaultQueryOptions(i),state:o,defaultOptions:t.getQueryDefaults(u)}),this.add(y)),y}add(t){Oe(this,lo).has(t.queryHash)||(Oe(this,lo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const i=Oe(this,lo).get(t.queryHash);i&&(t.destroy(),i===t&&Oe(this,lo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Oe(this,lo).get(t)}getAll(){return[...Oe(this,lo).values()]}find(t){const i={exact:!0,...t};return this.getAll().find(o=>L2(i,o))}findAll(t={}){const i=this.getAll();return Object.keys(t).length>0?i.filter(o=>L2(t,o)):i}notify(t){wi.batch(()=>{this.listeners.forEach(i=>{i(t)})})}onFocus(){wi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},lo=new WeakMap,ST),co,_i,Kl,uo,Ea,TT,W3=(TT=class extends ak{constructor(t){super();sn(this,uo);sn(this,co);sn(this,_i);sn(this,Kl);this.mutationId=t.mutationId,Ut(this,_i,t.mutationCache),Ut(this,co,[]),this.state=t.state||H3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Oe(this,co).includes(t)||(Oe(this,co).push(t),this.clearGcTimeout(),Oe(this,_i).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ut(this,co,Oe(this,co).filter(i=>i!==t)),this.scheduleGc(),Oe(this,_i).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Oe(this,co).length||(this.state.status==="pending"?this.scheduleGc():Oe(this,_i).remove(this))}continue(){var t;return((t=Oe(this,Kl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,p,y,l,S,b,I,M,k,j,K,O,X,B,V,q,ne,he,Se,ke;Ut(this,Kl,ok({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(we,We)=>{Xr(this,uo,Ea).call(this,{type:"failed",failureCount:we,error:We})},onPause:()=>{Xr(this,uo,Ea).call(this,{type:"pause"})},onContinue:()=>{Xr(this,uo,Ea).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Oe(this,_i).canRun(this)}));const i=this.state.status==="pending",o=!Oe(this,Kl).canStart();try{if(!i){Xr(this,uo,Ea).call(this,{type:"pending",variables:t,isPaused:o}),await((p=(u=Oe(this,_i).config).onMutate)==null?void 0:p.call(u,t,this));const We=await((l=(y=this.options).onMutate)==null?void 0:l.call(y,t));We!==this.state.context&&Xr(this,uo,Ea).call(this,{type:"pending",context:We,variables:t,isPaused:o})}const we=await Oe(this,Kl).start();return await((b=(S=Oe(this,_i).config).onSuccess)==null?void 0:b.call(S,we,t,this.state.context,this)),await((M=(I=this.options).onSuccess)==null?void 0:M.call(I,we,t,this.state.context)),await((j=(k=Oe(this,_i).config).onSettled)==null?void 0:j.call(k,we,null,this.state.variables,this.state.context,this)),await((O=(K=this.options).onSettled)==null?void 0:O.call(K,we,null,t,this.state.context)),Xr(this,uo,Ea).call(this,{type:"success",data:we}),we}catch(we){try{throw await((B=(X=Oe(this,_i).config).onError)==null?void 0:B.call(X,we,t,this.state.context,this)),await((q=(V=this.options).onError)==null?void 0:q.call(V,we,t,this.state.context)),await((he=(ne=Oe(this,_i).config).onSettled)==null?void 0:he.call(ne,void 0,we,this.state.variables,this.state.context,this)),await((ke=(Se=this.options).onSettled)==null?void 0:ke.call(Se,void 0,we,t,this.state.context)),we}finally{Xr(this,uo,Ea).call(this,{type:"error",error:we})}}finally{Oe(this,_i).runNext(this)}}},co=new WeakMap,_i=new WeakMap,Kl=new WeakMap,uo=new WeakSet,Ea=function(t){const i=o=>{switch(t.type){case"failed":return{...o,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...o,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:t.error,failureCount:o.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=i(this.state),wi.batch(()=>{Oe(this,co).forEach(o=>{o.onMutationUpdate(t)}),Oe(this,_i).notify({mutation:this,type:"updated",action:t})})},TT);function H3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yi,up,CT,K3=(CT=class extends Ug{constructor(t={}){super();sn(this,Yi);sn(this,up);this.config=t,Ut(this,Yi,new Map),Ut(this,up,Date.now())}build(t,i,o){const u=new W3({mutationCache:this,mutationId:++Lf(this,up)._,options:t.defaultMutationOptions(i),state:o});return this.add(u),u}add(t){const i=tm(t),o=Oe(this,Yi).get(i)??[];o.push(t),Oe(this,Yi).set(i,o),this.notify({type:"added",mutation:t})}remove(t){var o;const i=tm(t);if(Oe(this,Yi).has(i)){const u=(o=Oe(this,Yi).get(i))==null?void 0:o.filter(p=>p!==t);u&&(u.length===0?Oe(this,Yi).delete(i):Oe(this,Yi).set(i,u))}this.notify({type:"removed",mutation:t})}canRun(t){var o;const i=(o=Oe(this,Yi).get(tm(t)))==null?void 0:o.find(u=>u.state.status==="pending");return!i||i===t}runNext(t){var o;const i=(o=Oe(this,Yi).get(tm(t)))==null?void 0:o.find(u=>u!==t&&u.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}clear(){wi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Oe(this,Yi).values()].flat()}find(t){const i={exact:!0,...t};return this.getAll().find(o=>z2(i,o))}findAll(t={}){return this.getAll().filter(i=>z2(t,i))}notify(t){wi.batch(()=>{this.listeners.forEach(i=>{i(t)})})}resumePausedMutations(){const t=this.getAll().filter(i=>i.state.isPaused);return wi.batch(()=>Promise.all(t.map(i=>i.continue().catch(js))))}},Yi=new WeakMap,up=new WeakMap,CT);function tm(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function O2(e){return{onFetch:(t,i)=>{var I,M,k,j,K;const o=t.options,u=(k=(M=(I=t.fetchOptions)==null?void 0:I.meta)==null?void 0:M.fetchMore)==null?void 0:k.direction,p=((j=t.state.data)==null?void 0:j.pages)||[],y=((K=t.state.data)==null?void 0:K.pageParams)||[];let l={pages:[],pageParams:[]},S=0;const b=async()=>{let O=!1;const X=q=>{Object.defineProperty(q,"signal",{enumerable:!0,get:()=>(t.signal.aborted?O=!0:t.signal.addEventListener("abort",()=>{O=!0}),t.signal)})},B=nk(t.options,t.fetchOptions),V=async(q,ne,he)=>{if(O)return Promise.reject();if(ne==null&&q.pages.length)return Promise.resolve(q);const Se={queryKey:t.queryKey,pageParam:ne,direction:he?"backward":"forward",meta:t.options.meta};X(Se);const ke=await B(Se),{maxPages:we}=t.options,We=he?O3:F3;return{pages:We(q.pages,ke,we),pageParams:We(q.pageParams,ne,we)}};if(u&&p.length){const q=u==="backward",ne=q?X3:B2,he={pages:p,pageParams:y},Se=ne(o,he);l=await V(he,Se,q)}else{const q=e??p.length;do{const ne=S===0?y[0]??o.initialPageParam:B2(o,l);if(S>0&&ne==null)break;l=await V(l,ne),S++}while(S<q)}return l};t.options.persister?t.fetchFn=()=>{var O,X;return(X=(O=t.options).persister)==null?void 0:X.call(O,b,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},i)}:t.fetchFn=b}}}function B2(e,{pages:t,pageParams:i}){const o=t.length-1;return t.length>0?e.getNextPageParam(t[o],t,i[o],i):void 0}function X3(e,{pages:t,pageParams:i}){var o;return t.length>0?(o=e.getPreviousPageParam)==null?void 0:o.call(e,t[0],t,i[0],i):void 0}var Zn,Fa,Oa,Iu,Du,Ba,Lu,zu,ET,Y3=(ET=class{constructor(e={}){sn(this,Zn);sn(this,Fa);sn(this,Oa);sn(this,Iu);sn(this,Du);sn(this,Ba);sn(this,Lu);sn(this,zu);Ut(this,Zn,e.queryCache||new Z3),Ut(this,Fa,e.mutationCache||new K3),Ut(this,Oa,e.defaultOptions||{}),Ut(this,Iu,new Map),Ut(this,Du,new Map),Ut(this,Ba,0)}mount(){Lf(this,Ba)._++,Oe(this,Ba)===1&&(Ut(this,Lu,rk.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Zn).onFocus())})),Ut(this,zu,sg.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Zn).onOnline())})))}unmount(){var e,t;Lf(this,Ba)._--,Oe(this,Ba)===0&&((e=Oe(this,Lu))==null||e.call(this),Ut(this,Lu,void 0),(t=Oe(this,zu))==null||t.call(this),Ut(this,zu,void 0))}isFetching(e){return Oe(this,Zn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Oe(this,Fa).findAll({...e,status:"pending"}).length}getQueryData(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Oe(this,Zn).get(t.queryHash))==null?void 0:i.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const i=this.defaultQueryOptions(e),o=Oe(this,Zn).build(this,i);return e.revalidateIfStale&&o.isStaleByTime(D2(i.staleTime,o))&&this.prefetchQuery(i),Promise.resolve(t)}}getQueriesData(e){return Oe(this,Zn).findAll(e).map(({queryKey:t,state:i})=>{const o=i.data;return[t,o]})}setQueryData(e,t,i){const o=this.defaultQueryOptions({queryKey:e}),u=Oe(this,Zn).get(o.queryHash),p=u==null?void 0:u.state.data,y=M3(t,p);if(y!==void 0)return Oe(this,Zn).build(this,o).setData(y,{...i,manual:!0})}setQueriesData(e,t,i){return wi.batch(()=>Oe(this,Zn).findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,t,i)]))}getQueryState(e){var i;const t=this.defaultQueryOptions({queryKey:e});return(i=Oe(this,Zn).get(t.queryHash))==null?void 0:i.state}removeQueries(e){const t=Oe(this,Zn);wi.batch(()=>{t.findAll(e).forEach(i=>{t.remove(i)})})}resetQueries(e,t){const i=Oe(this,Zn),o={type:"active",...e};return wi.batch(()=>(i.findAll(e).forEach(u=>{u.reset()}),this.refetchQueries(o,t)))}cancelQueries(e={},t={}){const i={revert:!0,...t},o=wi.batch(()=>Oe(this,Zn).findAll(e).map(u=>u.cancel(i)));return Promise.all(o).then(js).catch(js)}invalidateQueries(e={},t={}){return wi.batch(()=>{if(Oe(this,Zn).findAll(e).forEach(o=>{o.invalidate()}),e.refetchType==="none")return Promise.resolve();const i={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(i,t)})}refetchQueries(e={},t){const i={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},o=wi.batch(()=>Oe(this,Zn).findAll(e).filter(u=>!u.isDisabled()).map(u=>{let p=u.fetch(void 0,i);return i.throwOnError||(p=p.catch(js)),u.state.fetchStatus==="paused"?Promise.resolve():p}));return Promise.all(o).then(js)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const i=Oe(this,Zn).build(this,t);return i.isStaleByTime(D2(t.staleTime,i))?i.fetch(t):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(js).catch(js)}fetchInfiniteQuery(e){return e.behavior=O2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(js).catch(js)}ensureInfiniteQueryData(e){return e.behavior=O2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sg.isOnline()?Oe(this,Fa).resumePausedMutations():Promise.resolve()}getQueryCache(){return Oe(this,Zn)}getMutationCache(){return Oe(this,Fa)}getDefaultOptions(){return Oe(this,Oa)}setDefaultOptions(e){Ut(this,Oa,e)}setQueryDefaults(e,t){Oe(this,Iu).set(rp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Oe(this,Iu).values()];let i={};return t.forEach(o=>{ip(e,o.queryKey)&&(i={...i,...o.defaultOptions})}),i}setMutationDefaults(e,t){Oe(this,Du).set(rp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Oe(this,Du).values()];let i={};return t.forEach(o=>{ip(e,o.mutationKey)&&(i={...i,...o.defaultOptions})}),i}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Oe(this,Oa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ux(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===$x&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Oe(this,Oa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Oe(this,Zn).clear(),Oe(this,Fa).clear()}},Zn=new WeakMap,Fa=new WeakMap,Oa=new WeakMap,Iu=new WeakMap,Du=new WeakMap,Ba=new WeakMap,Lu=new WeakMap,zu=new WeakMap,ET),Q3=Z.createContext(void 0),J3=({client:e,children:t})=>(Z.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),de.jsx(Q3.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},og.apply(this,arguments)}var Ua;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ua||(Ua={}));const N2="popstate";function e7(e){e===void 0&&(e={});function t(o,u){let{pathname:p,search:y,hash:l}=o.location;return p_("",{pathname:p,search:y,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(o,u){return typeof u=="string"?u:ck(u)}return n7(t,i,null,e)}function $i(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t7(){return Math.random().toString(36).substr(2,8)}function V2(e,t){return{usr:e.state,key:e.key,idx:t}}function p_(e,t,i,o){return i===void 0&&(i=null),og({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Gg(t):t,{state:i,key:t&&t.key||o||t7()})}function ck(e){let{pathname:t="/",search:i="",hash:o=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Gg(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function n7(e,t,i,o){o===void 0&&(o={});let{window:u=document.defaultView,v5Compat:p=!1}=o,y=u.history,l=Ua.Pop,S=null,b=I();b==null&&(b=0,y.replaceState(og({},y.state,{idx:b}),""));function I(){return(y.state||{idx:null}).idx}function M(){l=Ua.Pop;let X=I(),B=X==null?null:X-b;b=X,S&&S({action:l,location:O.location,delta:B})}function k(X,B){l=Ua.Push;let V=p_(O.location,X,B);b=I()+1;let q=V2(V,b),ne=O.createHref(V);try{y.pushState(q,"",ne)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;u.location.assign(ne)}p&&S&&S({action:l,location:O.location,delta:1})}function j(X,B){l=Ua.Replace;let V=p_(O.location,X,B);b=I();let q=V2(V,b),ne=O.createHref(V);y.replaceState(q,"",ne),p&&S&&S({action:l,location:O.location,delta:0})}function K(X){let B=u.location.origin!=="null"?u.location.origin:u.location.href,V=typeof X=="string"?X:ck(X);return V=V.replace(/ $/,"%20"),$i(B,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,B)}let O={get action(){return l},get location(){return e(u,y)},listen(X){if(S)throw new Error("A history only accepts one active listener");return u.addEventListener(N2,M),S=X,()=>{u.removeEventListener(N2,M),S=null}},createHref(X){return t(u,X)},createURL:K,encodeLocation(X){let B=K(X);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:k,replace:j,go(X){return y.go(X)}};return O}var j2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(j2||(j2={}));function r7(e,t,i){return i===void 0&&(i="/"),i7(e,t,i,!1)}function i7(e,t,i,o){let u=typeof t=="string"?Gg(t):t,p=dk(u.pathname||"/",i);if(p==null)return null;let y=uk(e);s7(y);let l=null;for(let S=0;l==null&&S<y.length;++S){let b=g7(p);l=f7(y[S],b,o)}return l}function uk(e,t,i,o){t===void 0&&(t=[]),i===void 0&&(i=[]),o===void 0&&(o="");let u=(p,y,l)=>{let S={relativePath:l===void 0?p.path||"":l,caseSensitive:p.caseSensitive===!0,childrenIndex:y,route:p};S.relativePath.startsWith("/")&&($i(S.relativePath.startsWith(o),'Absolute route path "'+S.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),S.relativePath=S.relativePath.slice(o.length));let b=Tu([o,S.relativePath]),I=i.concat(S);p.children&&p.children.length>0&&($i(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+b+'".')),uk(p.children,t,I,b)),!(p.path==null&&!p.index)&&t.push({path:b,score:d7(b,p.index),routesMeta:I})};return e.forEach((p,y)=>{var l;if(p.path===""||!((l=p.path)!=null&&l.includes("?")))u(p,y);else for(let S of hk(p.path))u(p,y,S)}),t}function hk(e){let t=e.split("/");if(t.length===0)return[];let[i,...o]=t,u=i.endsWith("?"),p=i.replace(/\?$/,"");if(o.length===0)return u?[p,""]:[p];let y=hk(o.join("/")),l=[];return l.push(...y.map(S=>S===""?p:[p,S].join("/"))),u&&l.push(...y),l.map(S=>e.startsWith("/")&&S===""?"/":S)}function s7(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:p7(t.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}const o7=/^:[\w-]+$/,a7=3,l7=2,c7=1,u7=10,h7=-2,U2=e=>e==="*";function d7(e,t){let i=e.split("/"),o=i.length;return i.some(U2)&&(o+=h7),t&&(o+=l7),i.filter(u=>!U2(u)).reduce((u,p)=>u+(o7.test(p)?a7:p===""?c7:u7),o)}function p7(e,t){return e.length===t.length&&e.slice(0,-1).every((o,u)=>o===t[u])?e[e.length-1]-t[t.length-1]:0}function f7(e,t,i){let{routesMeta:o}=e,u={},p="/",y=[];for(let l=0;l<o.length;++l){let S=o[l],b=l===o.length-1,I=p==="/"?t:t.slice(p.length)||"/",M=$2({path:S.relativePath,caseSensitive:S.caseSensitive,end:b},I),k=S.route;if(!M&&b&&i&&!o[o.length-1].route.index&&(M=$2({path:S.relativePath,caseSensitive:S.caseSensitive,end:!1},I)),!M)return null;Object.assign(u,M.params),y.push({params:u,pathname:Tu([p,M.pathname]),pathnameBase:y7(Tu([p,M.pathnameBase])),route:k}),M.pathnameBase!=="/"&&(p=Tu([p,M.pathnameBase]))}return y}function $2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=m7(e.path,e.caseSensitive,e.end),u=t.match(i);if(!u)return null;let p=u[0],y=p.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((b,I,M)=>{let{paramName:k,isOptional:j}=I;if(k==="*"){let O=l[M]||"";y=p.slice(0,p.length-O.length).replace(/(.)\/+$/,"$1")}const K=l[M];return j&&!K?b[k]=void 0:b[k]=(K||"").replace(/%2F/g,"/"),b},{}),pathname:p,pathnameBase:y,pattern:e}}function m7(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),lk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,l,S)=>(o.push({paramName:l,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function g7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function dk(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}const Tu=e=>e.join("/").replace(/\/\/+/g,"/"),y7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function v7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pk=["post","put","patch","delete"];new Set(pk);const _7=["get",...pk];new Set(_7);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ag.apply(this,arguments)}const x7=Z.createContext(null),w7=Z.createContext(null),fk=Z.createContext(null),qg=Z.createContext(null),Zg=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),mk=Z.createContext(null);function Gx(){return Z.useContext(qg)!=null}function gk(){return Gx()||$i(!1),Z.useContext(qg).location}function b7(e,t){return S7(e,t)}function S7(e,t,i,o){Gx()||$i(!1);let{navigator:u}=Z.useContext(fk),{matches:p}=Z.useContext(Zg),y=p[p.length-1],l=y?y.params:{};y&&y.pathname;let S=y?y.pathnameBase:"/";y&&y.route;let b=gk(),I;if(t){var M;let X=typeof t=="string"?Gg(t):t;S==="/"||(M=X.pathname)!=null&&M.startsWith(S)||$i(!1),I=X}else I=b;let k=I.pathname||"/",j=k;if(S!=="/"){let X=S.replace(/^\//,"").split("/");j="/"+k.replace(/^\//,"").split("/").slice(X.length).join("/")}let K=r7(e,{pathname:j}),O=k7(K&&K.map(X=>Object.assign({},X,{params:Object.assign({},l,X.params),pathname:Tu([S,u.encodeLocation?u.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?S:Tu([S,u.encodeLocation?u.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),p,i,o);return t&&O?Z.createElement(qg.Provider,{value:{location:ag({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Ua.Pop}},O):O}function T7(){let e=D7(),t=v7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),i?Z.createElement("pre",{style:u},i):null,null)}const C7=Z.createElement(T7,null);class E7 extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?Z.createElement(Zg.Provider,{value:this.props.routeContext},Z.createElement(mk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P7(e){let{routeContext:t,match:i,children:o}=e,u=Z.useContext(x7);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),Z.createElement(Zg.Provider,{value:t},o)}function k7(e,t,i,o){var u;if(t===void 0&&(t=[]),i===void 0&&(i=null),o===void 0&&(o=null),e==null){var p;if(!i)return null;if(i.errors)e=i.matches;else if((p=o)!=null&&p.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let y=e,l=(u=i)==null?void 0:u.errors;if(l!=null){let I=y.findIndex(M=>M.route.id&&(l==null?void 0:l[M.route.id])!==void 0);I>=0||$i(!1),y=y.slice(0,Math.min(y.length,I+1))}let S=!1,b=-1;if(i&&o&&o.v7_partialHydration)for(let I=0;I<y.length;I++){let M=y[I];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(b=I),M.route.id){let{loaderData:k,errors:j}=i,K=M.route.loader&&k[M.route.id]===void 0&&(!j||j[M.route.id]===void 0);if(M.route.lazy||K){S=!0,b>=0?y=y.slice(0,b+1):y=[y[0]];break}}}return y.reduceRight((I,M,k)=>{let j,K=!1,O=null,X=null;i&&(j=l&&M.route.id?l[M.route.id]:void 0,O=M.route.errorElement||C7,S&&(b<0&&k===0?(K=!0,X=null):b===k&&(K=!0,X=M.route.hydrateFallbackElement||null)));let B=t.concat(y.slice(0,k+1)),V=()=>{let q;return j?q=O:K?q=X:M.route.Component?q=Z.createElement(M.route.Component,null):M.route.element?q=M.route.element:q=I,Z.createElement(P7,{match:M,routeContext:{outlet:I,matches:B,isDataRoute:i!=null},children:q})};return i&&(M.route.ErrorBoundary||M.route.errorElement||k===0)?Z.createElement(E7,{location:i.location,revalidation:i.revalidation,component:O,error:j,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):V()},null)}var f_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(f_||{});function A7(e){let t=Z.useContext(w7);return t||$i(!1),t}function M7(e){let t=Z.useContext(Zg);return t||$i(!1),t}function I7(e){let t=M7(),i=t.matches[t.matches.length-1];return i.route.id||$i(!1),i.route.id}function D7(){var e;let t=Z.useContext(mk),i=A7(f_.UseRouteError),o=I7(f_.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[o]}function m_(e){$i(!1)}function L7(e){let{basename:t="/",children:i=null,location:o,navigationType:u=Ua.Pop,navigator:p,static:y=!1,future:l}=e;Gx()&&$i(!1);let S=t.replace(/^\/*/,"/"),b=Z.useMemo(()=>({basename:S,navigator:p,static:y,future:ag({v7_relativeSplatPath:!1},l)}),[S,l,p,y]);typeof o=="string"&&(o=Gg(o));let{pathname:I="/",search:M="",hash:k="",state:j=null,key:K="default"}=o,O=Z.useMemo(()=>{let X=dk(I,S);return X==null?null:{location:{pathname:X,search:M,hash:k,state:j,key:K},navigationType:u}},[S,I,M,k,j,K,u]);return O==null?null:Z.createElement(fk.Provider,{value:b},Z.createElement(qg.Provider,{children:i,value:O}))}function z7(e){let{children:t,location:i}=e;return b7(g_(t),i)}new Promise(()=>{});function g_(e,t){t===void 0&&(t=[]);let i=[];return Z.Children.forEach(e,(o,u)=>{if(!Z.isValidElement(o))return;let p=[...t,u];if(o.type===Z.Fragment){i.push.apply(i,g_(o.props.children,p));return}o.type!==m_&&$i(!1),!o.props.index||!o.props.children||$i(!1);let y={id:o.props.id||p.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=g_(o.props.children,p)),i.push(y)}),i}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const R7="6";try{window.__reactRouterVersion=R7}catch{}const F7="startTransition",G2=OT[F7];function O7(e){let{basename:t,children:i,future:o,window:u}=e,p=Z.useRef();p.current==null&&(p.current=e7({window:u,v5Compat:!0}));let y=p.current,[l,S]=Z.useState({action:y.action,location:y.location}),{v7_startTransition:b}=o||{},I=Z.useCallback(M=>{b&&G2?G2(()=>S(M)):S(M)},[S,b]);return Z.useLayoutEffect(()=>y.listen(I),[y,I]),Z.createElement(L7,{basename:t,children:i,location:l.location,navigationType:l.action,navigator:y,future:o})}var q2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(q2||(q2={}));var Z2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Z2||(Z2={}));const ta=e=>!e||typeof e=="object"&&Object.keys(e).length===0||e instanceof Error&&!e.message&&!e.stack,yk=e=>{if(ta(e))return!1;if(e instanceof Error)return!0;if(typeof e=="object"){const t=e;return typeof t.message=="string"&&typeof t.name=="string"}return!1},B7=e=>yk(e)?e.message||"Une erreur inattendue est survenue":typeof e=="string"?e:"Une erreur inattendue est survenue",Wg=(e,t,i)=>{if(ta(t))return;const o={context:e,error:yk(t)?{name:t.name,message:t.message,stack:t.stack}:t,...i,timestamp:new Date().toISOString()};(o.error||i)&&console.error(`Error in ${e}:`,o)};class N7 extends Z.Component{constructor(){super(...arguments);ib(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(i){return ta(i)?{hasError:!1,error:null}:{hasError:!0,error:i}}componentDidCatch(i,o){if(ta(i))return;Wg("ErrorBoundary",i,{componentStack:o.componentStack});const u=B7(i);ja.error(u,{className:"bg-background/95 border-border/50 text-foreground",duration:5e3})}render(){var i;return this.state.hasError?de.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:de.jsxs("div",{className:"text-center p-8 max-w-md",children:[de.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Oops! Quelque chose s'est mal pass"}),de.jsx("p",{className:"text-foreground/70 mb-6",children:((i=this.state.error)==null?void 0:i.message)||"Une erreur inattendue est survenue"}),de.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-primary text-primary-foreground rounded-full hover:bg-primary/90 transition-colors",children:"Recharger l'application"})]})}):this.props.children}}var vk={exports:{}};(function(e,t){(function(i,o){e.exports=o()})(vD,function(){var i,o,u;function p(l,S){if(!i)i=S;else if(!o)o=S;else{var b="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",I={};i(I),u=S(I),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}p(["exports"],function(l){function S(s,n,a,h){return new(a||(a=Promise))(function(f,v){function x(A){try{E(h.next(A))}catch(L){v(L)}}function w(A){try{E(h.throw(A))}catch(L){v(L)}}function E(A){var L;A.done?f(A.value):(L=A.value,L instanceof a?L:new a(function(F){F(L)})).then(x,w)}E((h=h.apply(s,n||[])).next())})}function b(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var I=M;function M(s,n){this.x=s,this.y=n}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,a=s.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),a=Math.sin(s),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(s,n){var a=Math.cos(s),h=Math.sin(s),f=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(s){return s instanceof M?s:Array.isArray(s)?new M(s[0],s[1]):s};var k=b(I),j=K;function K(s,n,a,h){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=a,this.p2y=h}K.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,h=0;h<8;h++){var f=this.sampleCurveX(a)-s;if(Math.abs(f)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var x=0,w=1;for(a=s,h=0;h<20&&(f=this.sampleCurveX(a),!(Math.abs(f-s)<n));h++)s>f?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var O=b(j);let X,B;function V(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function q(){if(B==null&&(B=!1,V())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&a[h]!==h){B=!0;break}}}return B||!1}function ne(s,n,a,h){const f=new O(s,n,a,h);return function(v){return f.solve(v)}}const he=ne(.25,.1,.25,1);function Se(s,n,a){return Math.min(a,Math.max(n,s))}function ke(s,n,a){const h=a-n,f=((s-n)%h+h)%h+n;return f===n?a:f}function we(s,...n){for(const a of n)for(const h in a)s[h]=a[h];return s}let We=1;function Fe(s,n,a){const h={};for(const f in s)h[f]=n.call(a||this,s[f],f,s);return h}function pt(s,n,a){const h={};for(const f in s)n.call(a||this,s[f],f,s)&&(h[f]=s[f]);return h}function it(s){return Array.isArray(s)?s.map(it):typeof s=="object"&&s?Fe(s,it):s}const kt={};function Ze(s){kt[s]||(typeof console<"u"&&console.warn(s),kt[s]=!0)}function dt(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function mt(s){let n=0;for(let a,h,f=0,v=s.length,x=v-1;f<v;x=f++)a=s[f],h=s[x],n+=(h.x-a.x)*(a.y+h.y);return n}function Et(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Pe=null;function He(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ot(s,n,a,h,f){return S(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),E=new Uint8ClampedArray(h*f*4);if(yield v.copyTo(E,function(A,L,F,U,W){const H=4*Math.max(-L,0),J=(Math.max(0,F)-F)*U*4+H,oe=4*U,ce=Math.max(0,L),ve=Math.max(0,F);return{rect:{x:ce,y:ve,width:Math.min(A.width,L+U)-ce,height:Math.min(A.height,F+W)-ve},layout:[{offset:J,stride:oe}]}}(s,n,a,h,f)),w)for(let A=0;A<E.length;A+=4){const L=E[A];E[A]=E[A+2],E[A+2]=L}return E}finally{v.close()}})}let _t,vt,Nt,Dn;const Gt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),a=n.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,a.drawImage(s,0,0,s.width,s.height),a},resolveURL:s=>(Nt||(Nt=document.createElement("a")),Nt.href=s,Nt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Dn==null&&(Dn=matchMedia("(prefers-reduced-motion: reduce)")),Dn.matches)}},ir={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class lr extends Error{constructor(n,a,h,f){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=f}}const Un=Et()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ln=s=>ir.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function ls(s,n){const a=new AbortController,h=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:Un(),signal:a.signal});let f=!1,v=!1;return s.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(w=>{(s.type==="arrayBuffer"||s.type==="image"?w.arrayBuffer():s.type==="json"?w.json():w.text()).then(E=>{v||(f=!0,n(null,E,w.headers.get("Cache-Control"),w.headers.get("Expires")))}).catch(E=>{v||n(new Error(E.message))})})(x):x.blob().then(w=>n(new lr(x.status,x.statusText,s.url,w)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,f||a.abort()}}}const Pr=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(Et()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!Et())return(Ln(s.url)||ls)(s,n)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Un())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ls(s,n);if(Et()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var a;return function(h,f){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(w){return f(w)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new lr(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(s,n)},si=function(s,n){return Pr(we(s,{type:"arrayBuffer"}),n)};function kr(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function Gi(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function gr(s,n,a){if(a&&a[s]){const h=a[s].indexOf(n);h!==-1&&a[s].splice(h,1)}}class Pi{constructor(n,a={}){we(this,a),this.type=n}}class ki extends Pi{constructor(n,a={}){super("error",we({error:n},a))}}class dn{on(n,a){return this._listeners=this._listeners||{},Gi(n,a,this._listeners),this}off(n,a){return gr(n,a,this._listeners),gr(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Gi(n,a,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,a){typeof n=="string"&&(n=new Pi(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of f)w.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of v)gr(h,w,this._oneTimeListeners),w.call(this,n);const x=this._eventedParent;x&&(we(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ki&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const yr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Vr(s,n){const a={};for(const h in s)h!=="ref"&&(a[h]=s[h]);return yr.forEach(h=>{h in n&&(a[h]=n[h])}),a}function Ht(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Ht(s[a],n[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const a in s)if(!Ht(s[a],n[a]))return!1;return!0}return s===n}const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function oi(s,n,a){a.push({command:qt.addSource,args:[s,n[s]]})}function cs(s,n,a){n.push({command:qt.removeSource,args:[s]}),a[s]=!0}function vr(s,n,a,h){cs(s,a,h),oi(s,n,a)}function wo(s,n,a){let h;for(h in s[a])if(Object.prototype.hasOwnProperty.call(s[a],h)&&h!=="data"&&!Ht(s[a][h],n[a][h]))return!1;for(h in n[a])if(Object.prototype.hasOwnProperty.call(n[a],h)&&h!=="data"&&!Ht(s[a][h],n[a][h]))return!1;return!0}function ai(s,n,a,h,f,v){let x;for(x in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,x)&&(Ht(s[x],n[x])||a.push({command:v,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Ht(s[x],n[x])||a.push({command:v,args:[h,x,n[x],f]}))}function qi(s){return s.id}function ks(s,n){return s[n.id]=n,s}class je{constructor(n,a,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function li(s,...n){for(const a of n)for(const h in a)s[h]=a[h];return s}class pn extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Zi{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,f]of a)this.bindings[h]=f}concat(n){return new Zi(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const sr={kind:"null"},$e={kind:"number"},Ye={kind:"string"},nt={kind:"boolean"},Dt={kind:"color"},zn={kind:"object"},St={kind:"value"},jr={kind:"collator"},re={kind:"formatted"},N={kind:"padding"},$={kind:"resolvedImage"},Y={kind:"variableAnchorOffsetCollection"};function se(s,n){return{kind:"array",itemType:s,N:n}}function ae(s){if(s.kind==="array"){const n=ae(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const _e=[sr,$e,Ye,nt,Dt,re,zn,se(St),N,$,Y];function fe(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!fe(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of _e)if(!fe(a,n))return null}}return`Expected ${ae(s)} but found ${ae(n)} instead.`}function ue(s,n){return n.some(a=>a.kind===s.kind)}function ye(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function Me(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const Ie=.96422,ze=.82521,xt=4/29,Pt=6/29,at=3*Pt*Pt,bt=Pt*Pt*Pt,At=Math.PI/180,Qt=180/Math.PI;function nn(s){return(s%=360)<0&&(s+=360),s}function Zt([s,n,a,h]){let f,v;const x=_r((.2225045*(s=$t(s))+.7168786*(n=$t(n))+.0606169*(a=$t(a)))/1);s===n&&n===a?f=v=x:(f=_r((.4360747*s+.3850649*n+.1430804*a)/Ie),v=_r((.0139322*s+.0971045*n+.7141733*a)/ze));const w=116*x-16;return[w<0?0:w,500*(f-x),200*(x-v),h]}function $t(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function _r(s){return s>bt?Math.pow(s,1/3):s/at+xt}function on([s,n,a,h]){let f=(s+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(a)?f:f-a/200;return f=1*cr(f),v=Ie*cr(v),x=ze*cr(x),[$n(3.1338561*v-1.6168667*f-.4906146*x),$n(-.9787684*v+1.9161415*f+.033454*x),$n(.0719453*v-.2289914*f+1.4052427*x),h]}function $n(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function cr(s){return s>Pt?s*s*s:at*(s-xt)}function Ai(s){return parseInt(s.padEnd(2,s),16)/255}function Cp(s,n){return ra(n?s/100:s,0,1)}function ra(s,n,a){return Math.min(Math.max(n,s),a)}function ia(s){return!s.some(Number.isNaN)}const ny={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class en{constructor(n,a,h,f=1,v=!0){this.r=n,this.g=a,this.b=h,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,a,h,f]))}static parse(n){if(n instanceof en)return n;if(typeof n!="string")return;const a=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=ny[h];if(f){const[x,w,E]=f;return[x/255,w/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[Ai(h.slice(w,w+=x)),Ai(h.slice(w,w+=x)),Ai(h.slice(w,w+=x)),Ai(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,E,A,L,F,U,W,H,J,oe,ce,ve]=x,pe=[L||" ",W||" ",oe].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const xe=[A,U,J].join(""),Te=xe==="%%%"?100:xe===""?255:0;if(Te){const Le=[ra(+E/Te,0,1),ra(+F/Te,0,1),ra(+H/Te,0,1),ce?Cp(+ce,ve):1];if(ia(Le))return Le}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,E,A,L,F,U,W,H]=v,J=[E||" ",L||" ",U].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const oe=[+w,ra(+A,0,100),ra(+F,0,100),W?Cp(+W,H):1];if(ia(oe))return function([ce,ve,pe,xe]){function Te(Le){const et=(Le+ce/30)%12,ct=ve*Math.min(pe,1-pe);return pe-ct*Math.max(-1,Math.min(et-3,9-et,1))}return ce=nn(ce),ve/=100,pe/=100,[Te(0),Te(8),Te(4),xe]}(oe)}}}(n);return a?new en(...a,!1):void 0}get rgb(){const{r:n,g:a,b:h,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,a/v,h/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,h,f,v]=Zt(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?nn(Math.atan2(f,h)*Qt):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Zt(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,h,f]=this.rgb;return`rgba(${[n,a,h].map(v=>Math.round(255*v)).join(",")},${f})`}}en.black=new en(0,0,0,1),en.white=new en(1,1,1,1),en.transparent=new en(0,0,0,0),en.red=new en(1,0,0,1);class th{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class uc{constructor(n,a,h,f,v){this.text=n,this.image=a,this.scale=h,this.fontStack=f,this.textColor=v}}class xr{constructor(n){this.sections=n}static fromString(n){return new xr([new uc(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof xr?n:xr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ci{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ci)return n;if(typeof n=="number")return new ci([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ci(n)}}toString(){return JSON.stringify(this.values)}}const ry=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Mi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const h=n[a],f=n[a+1];if(typeof h!="string"||!ry.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Mi(n)}}toString(){return JSON.stringify(this.values)}}class ur{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ur({name:n,available:!1}):null}}function hc(s,n,a,h){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,n,a,h]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function sa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof en||s instanceof th||s instanceof xr||s instanceof ci||s instanceof Mi||s instanceof ur)return!0;if(Array.isArray(s)){for(const n of s)if(!sa(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!sa(s[n]))return!1;return!0}return!1}function gn(s){if(s===null)return sr;if(typeof s=="string")return Ye;if(typeof s=="boolean")return nt;if(typeof s=="number")return $e;if(s instanceof en)return Dt;if(s instanceof th)return jr;if(s instanceof xr)return re;if(s instanceof ci)return N;if(s instanceof Mi)return Y;if(s instanceof ur)return $;if(Array.isArray(s)){const n=s.length;let a;for(const h of s){const f=gn(h);if(a){if(a===f)continue;a=St;break}a=f}return se(a||St,n)}return zn}function Kt(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof en||s instanceof xr||s instanceof ci||s instanceof Mi||s instanceof ur?s.toString():JSON.stringify(s)}class bo{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!sa(n[1]))return a.error("invalid value");const h=n[1];let f=gn(h);const v=a.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new bo(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const dc={string:Ye,number:$e,boolean:nt,object:zn};class Ii{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,f=1;const v=n[0];if(v==="array"){let w,E;if(n.length>2){const A=n[1];if(typeof A!="string"||!(A in dc)||A==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=dc[A],f++}else w=St;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=n[2],f++}h=se(w,E)}else{if(!dc[v])throw new Error(`Types doesn't contain name = ${v}`);h=dc[v]}const x=[];for(;f<n.length;f++){const w=a.parse(n[f],f,St);if(!w)return null;x.push(w)}return new Ii(h,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!fe(this.type,gn(h)))return h;if(a===this.args.length-1)throw new wn(`Expected value to be of type ${ae(this.type)}, but found ${ae(gn(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const nh={"to-boolean":nt,"to-color":Dt,"to-number":$e,"to-string":Ye};class Ys{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if(!nh[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const f=nh[h],v=[];for(let x=1;x<n.length;x++){const w=a.parse(n[x],x,St);if(!w)return null;v.push(w)}return new Ys(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,h;for(const f of this.args){if(a=f.evaluate(n),h=null,a instanceof en)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:hc(a[0],a[1],a[2],a[3]),!h))return new en(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new wn(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const h of this.args){a=h.evaluate(n);const f=ci.parse(a);if(f)return f}throw new wn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const h of this.args){a=h.evaluate(n);const f=Mi.parse(a);if(f)return f}throw new wn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new wn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return xr.fromString(Kt(this.args[0].evaluate(n)));case"resolvedImage":return ur.fromString(Kt(this.args[0].evaluate(n)));default:return Kt(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Ep=["Unknown","Point","LineString","Polygon"];class rh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ep[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=en.parse(n)),a}}class pc{constructor(n,a,h=[],f,v=new Zi,x=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=a}parse(n,a,h,f,v={}){return a?this.concat(a,h,f)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(f,v,x){return x==="assert"?new Ii(v,[f]):x==="coerce"?new Ys(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,E=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||E.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(w.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(w,E))return null}else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"coerce");else x=h(x,w,a.typeAnnotation||"assert")}if(!(x instanceof bo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new rh;try{x=new bo(x.type,x.evaluate(w))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const f=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new pc(this.registry,this._isConstant,f,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new pn(h,n))}checkSubtype(n,a){const h=fe(n,a);return h&&this.error(h),h}}class fc{constructor(n,a,h){this.type=jr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const f=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,nt);if(!f)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,nt);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Ye),!x)?null:new fc(f,v,x)}evaluate(n){return new th(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Qs=8192;function ih(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function fl(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function Pp(s,n){const a=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(a*f*Qs),Math.round(h*f*Qs)]}function iy(s,n,a){const h=s[0]-n[0],f=s[1]-n[1],v=s[0]-a[0],x=s[1]-a[1];return h*x-v*f==0&&h*v<=0&&f*x<=0}function sh(s,n){let a=!1;for(let x=0,w=n.length;x<w;x++){const E=n[x];for(let A=0,L=E.length;A<L-1;A++){if(iy(s,E[A],E[A+1]))return!1;(f=E[A])[1]>(h=s)[1]!=(v=E[A+1])[1]>h[1]&&h[0]<(v[0]-f[0])*(h[1]-f[1])/(v[1]-f[1])+f[0]&&(a=!a)}}var h,f,v;return a}function oh(s,n){for(let a=0;a<n.length;a++)if(sh(s,n[a]))return!0;return!1}function kp(s,n,a,h){const f=h[0]-a[0],v=h[1]-a[1],x=(s[0]-a[0])*v-f*(s[1]-a[1]),w=(n[0]-a[0])*v-f*(n[1]-a[1]);return x>0&&w<0||x<0&&w>0}function sy(s,n,a){for(const A of a)for(let L=0;L<A.length-1;++L)if((w=[(x=A[L+1])[0]-(v=A[L])[0],x[1]-v[1]])[0]*(E=[(f=n)[0]-(h=s)[0],f[1]-h[1]])[1]-w[1]*E[0]!=0&&kp(h,f,v,x)&&kp(v,x,h,f))return!0;var h,f,v,x,w,E;return!1}function Ap(s,n){for(let a=0;a<s.length;++a)if(!sh(s[a],n))return!1;for(let a=0;a<s.length-1;++a)if(sy(s[a],s[a+1],n))return!1;return!0}function Mp(s,n){for(let a=0;a<n.length;a++)if(Ap(s,n[a]))return!0;return!1}function mc(s,n,a){const h=[];for(let f=0;f<s.length;f++){const v=[];for(let x=0;x<s[f].length;x++){const w=Pp(s[f][x],a);ih(n,w),v.push(w)}h.push(v)}return h}function Ip(s,n,a){const h=[];for(let f=0;f<s.length;f++){const v=mc(s[f],n,a);h.push(v)}return h}function Dp(s,n,a,h){if(s[0]<a[0]||s[0]>a[2]){const f=.5*h;let v=s[0]-a[0]>f?-h:a[0]-s[0]>f?h:0;v===0&&(v=s[0]-a[2]>f?-h:a[2]-s[0]>f?h:0),s[0]+=v}ih(n,s)}function ah(s,n,a,h){const f=Math.pow(2,h.z)*Qs,v=[h.x*Qs,h.y*Qs],x=[];for(const w of s)for(const E of w){const A=[E.x+v[0],E.y+v[1]];Dp(A,n,a,f),x.push(A)}return x}function lh(s,n,a,h){const f=Math.pow(2,h.z)*Qs,v=[h.x*Qs,h.y*Qs],x=[];for(const E of s){const A=[];for(const L of E){const F=[L.x+v[0],L.y+v[1]];ih(n,F),A.push(F)}x.push(A)}if(n[2]-n[0]<=f/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const E of x)for(const A of E)Dp(A,n,a,f)}var w;return x}class So{constructor(n,a){this.type=nt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(sa(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const v=h.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new So(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new So(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new So(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const w=mc(h.coordinates,v,x),E=ah(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!sh(A,w))return!1}if(h.type==="MultiPolygon"){const w=Ip(h.coordinates,v,x),E=ah(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!oh(A,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const w=mc(h.coordinates,v,x),E=lh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!Ap(A,w))return!1}if(h.type==="MultiPolygon"){const w=Ip(h.coordinates,v,x),E=lh(a.geometry(),f,v,x);if(!fl(f,v))return!1;for(const A of E)if(!Mp(A,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class gc{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new gc(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Di{constructor(n,a,h,f){this.name=n,this.type=a,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const h=n[0],f=Di.definitions[h];if(!f)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=x.filter(([A])=>!Array.isArray(A)||A.length===n.length-1);let E=null;for(const[A,L]of w){E=new pc(a.registry,yc,a.path,null,a.scope);const F=[];let U=!1;for(let W=1;W<n.length;W++){const H=n[W],J=Array.isArray(A)?A[W-1]:A.type,oe=E.parse(H,1+F.length,J);if(!oe){U=!0;break}F.push(oe)}if(!U)if(Array.isArray(A)&&A.length!==F.length)E.error(`Expected ${A.length} arguments, but found ${F.length} instead.`);else{for(let W=0;W<F.length;W++){const H=Array.isArray(A)?A[W]:A.type,J=F[W];E.concat(W+1).checkSubtype(H,J.type)}if(E.errors.length===0)return new Di(h,v,L,F)}}if(w.length===1)a.errors.push(...E.errors);else{const A=(w.length?w:x).map(([F])=>{return U=F,Array.isArray(U)?`(${U.map(ae).join(", ")})`:`(${ae(U.type)}...)`;var U}).join(" | "),L=[];for(let F=1;F<n.length;F++){const U=a.parse(n[F],1+L.length);if(!U)return null;L.push(ae(U.type))}a.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(n,a){Di.definitions=a;for(const h in a)n[h]=Di}}function yc(s){if(s instanceof gc)return yc(s.boundExpression);if(s instanceof Di&&s.name==="error"||s instanceof fc||s instanceof So)return!1;const n=s instanceof Ys||s instanceof Ii;let a=!0;return s.eachChild(h=>{a=n?a&&yc(h):a&&h instanceof bo}),!!a&&vc(s)&&_c(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vc(s){if(s instanceof Di&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof So)return!1;let n=!0;return s.eachChild(a=>{n&&!vc(a)&&(n=!1)}),n}function ml(s){if(s instanceof Di&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!ml(a)&&(n=!1)}),n}function _c(s,n){if(s instanceof Di&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(h=>{a&&!_c(h,n)&&(a=!1)}),a}function oa(s,n){const a=s.length-1;let h,f,v=0,x=a,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),h=s[w],f=s[w+1],h<=n){if(w===a||n<f)return w;v=w+1}else{if(!(h>n))throw new wn("Input is not a number.");x=w-1}return 0}class Js{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[f,v]of h)this.labels.push(f),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,$e);if(!h)return null;const f=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const w=x===1?-1/0:n[x],E=n[x+1],A=x,L=x+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(f.length&&f[f.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const F=a.parse(E,L,v);if(!F)return null;v=v||F.type,f.push([w,F])}return new Js(v,h,f)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return h[0].evaluate(n);const v=a.length;return f>=a[v-1]?h[v-1].evaluate(n):h[oa(a,f)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Vt(s,n,a){return s+a*(n-s)}function xc(s,n,a){return s.map((h,f)=>Vt(h,n[f],a))}const ui={number:Vt,color:function(s,n,a,h="rgb"){switch(h){case"rgb":{const[f,v,x,w]=xc(s.rgb,n.rgb,a);return new en(f,v,x,w,!1)}case"hcl":{const[f,v,x,w]=s.hcl,[E,A,L,F]=n.hcl;let U,W;if(isNaN(f)||isNaN(E))isNaN(f)?isNaN(E)?U=NaN:(U=E,x!==1&&x!==0||(W=A)):(U=f,L!==1&&L!==0||(W=v));else{let ve=E-f;E>f&&ve>180?ve-=360:E<f&&f-E>180&&(ve+=360),U=f+a*ve}const[H,J,oe,ce]=function([ve,pe,xe,Te]){return ve=isNaN(ve)?0:ve*At,on([xe,Math.cos(ve)*pe,Math.sin(ve)*pe,Te])}([U,W??Vt(v,A,a),Vt(x,L,a),Vt(w,F,a)]);return new en(H,J,oe,ce,!1)}case"lab":{const[f,v,x,w]=on(xc(s.lab,n.lab,a));return new en(f,v,x,w,!1)}}},array:xc,padding:function(s,n,a){return new ci(xc(s.values,n.values,a))},variableAnchorOffsetCollection:function(s,n,a){const h=s.values,f=n.values;if(h.length!==f.length)throw new wn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new wn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);v.push(h[x]);const[w,E]=h[x+1],[A,L]=f[x+1];v.push([Vt(w,A,a),Vt(E,L,a)])}return new Mi(v)}};class hi{constructor(n,a,h,f,v){this.type=n,this.operator=a,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(n,a,h,f){let v=0;if(n.name==="exponential")v=ch(a,n.base,h,f);else if(n.name==="linear")v=ch(a,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new O(x[0],x[1],x[2],x[3]).solve(ch(a,1,h,f))}return v}static parse(n,a){let[h,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const A=f[1];if(typeof A!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:A}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const A=f.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:A}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,$e),!v)return null;const w=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=Dt:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],F=x[A+1],U=A+3,W=A+4;if(typeof L!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(w.length&&w[w.length-1][0]>=L)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const H=a.parse(F,W,E);if(!H)return null;E=E||H.type,w.push([L,H])}return Me(E,$e)||Me(E,Dt)||Me(E,N)||Me(E,Y)||Me(E,se($e))?new hi(E,h,f,v,w):a.error(`Type ${ae(E)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return h[0].evaluate(n);const v=a.length;if(f>=a[v-1])return h[v-1].evaluate(n);const x=oa(a,f),w=hi.interpolationFactor(this.interpolation,f,a[x],a[x+1]),E=h[x].evaluate(n),A=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return ui[this.type.kind](E,A,w);case"interpolate-hcl":return ui.color(E,A,w,"hcl");case"interpolate-lab":return ui.color(E,A,w,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ch(s,n,a,h){const f=h-a,v=s-a;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class wc{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const f=a.expectedType;f&&f.kind!=="value"&&(h=f);const v=[];for(const w of n.slice(1)){const E=a.parse(w,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,v.push(E)}if(!h)throw new Error("No output type");const x=f&&v.some(w=>fe(f,w.type));return new wc(x?St:h,v)}evaluate(n){let a,h=null,f=0;for(const v of this.args)if(f++,h=v.evaluate(n),h&&h instanceof ur&&!h.available&&(a||(a=h.name),h=null,f===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class bc{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=a.parse(n[v+1],v+1);if(!w)return null;h.push([x,w])}const f=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return f?new bc(h,f):null}outputDefined(){return this.result.outputDefined()}}class uh{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,$e),f=a.parse(n[2],2,se(a.expectedType||St));return h&&f?new uh(f.type.itemType,h,f):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new wn(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new wn(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new wn(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class hh{constructor(n,a){this.type=nt,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,St);return h&&f?ue(h.type,[nt,Ye,$e,sr,St])?new hh(h,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!ye(a,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${ae(gn(a))} instead.`);if(!ye(h,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${ae(gn(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Sc{constructor(n,a,h){this.type=$e,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,St);if(!h||!f)return null;if(!ue(h.type,[nt,Ye,$e,sr,St]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,$e);return v?new Sc(h,f,v):null}return new Sc(h,f)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!ye(a,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${ae(gn(a))} instead.`);if(!ye(h,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${ae(gn(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(a,f)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class dh{constructor(n,a,h,f,v,x){this.inputType=n,this.type=a,this.input=h,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const v={},x=[];for(let A=2;A<n.length-1;A+=2){let L=n[A];const F=n[A+1];Array.isArray(L)||(L=[L]);const U=a.concat(A);if(L.length===0)return U.error("Expected at least one branch label.");for(const H of L){if(typeof H!="number"&&typeof H!="string")return U.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return U.error("Numeric branch labels must be integer values.");if(h){if(U.checkSubtype(h,gn(H)))return null}else h=gn(H);if(v[String(H)]!==void 0)return U.error("Branch labels must be unique.");v[String(H)]=x.length}const W=a.parse(F,A,f);if(!W)return null;f=f||W.type,x.push(W)}const w=a.parse(n[1],1,St);if(!w)return null;const E=a.parse(n[n.length-1],n.length-1,f);return E?w.type.kind!=="value"&&a.concat(1).checkSubtype(h,w.type)?null:new dh(h,f,w,v,x,E):null}evaluate(n){const a=this.input.evaluate(n);return(gn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ph{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const w=a.parse(n[x],x,nt);if(!w)return null;const E=a.parse(n[x+1],x+1,h);if(!E)return null;f.push([w,E]),h=h||E.type}const v=a.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new ph(h,f,v)}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Tc{constructor(n,a,h,f){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=f}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,St),f=a.parse(n[2],2,$e);if(!h||!f)return null;if(!ue(h.type,[se(St),Ye,St]))return a.error(`Expected first argument to be of type array or string, but found ${ae(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,$e);return v?new Tc(h.type,h,f,v):null}return new Tc(h.type,h,f)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!ye(a,["string","array"]))throw new wn(`Expected first argument to be of type array or string, but found ${ae(gn(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return a.slice(h,f)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Lp(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function zp(s,n,a,h){return h.compare(n,a)===0}function aa(s,n,a){const h=s!=="=="&&s!=="!=";return class _k{constructor(v,x,w){this.type=nt,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let E=x.parse(v[1],1,St);if(!E)return null;if(!Lp(w,E.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${ae(E.type)}'.`);let A=x.parse(v[2],2,St);if(!A)return null;if(!Lp(w,A.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${ae(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${ae(E.type)}' and '${ae(A.type)}'.`);h&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new Ii(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new Ii(E.type,[A])));let L=null;if(v.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(v[3],3,jr),!L)return null}return new _k(E,A,L)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const E=gn(x),A=gn(w);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new wn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=gn(x),A=gn(w);if(E.kind!=="string"||A.kind!=="string")return n(v,x,w)}return this.collator?a(v,x,w,this.collator.evaluate(v)):n(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const oy=aa("==",function(s,n,a){return n===a},zp),ay=aa("!=",function(s,n,a){return n!==a},function(s,n,a,h){return!zp(0,n,a,h)}),ly=aa("<",function(s,n,a){return n<a},function(s,n,a,h){return h.compare(n,a)<0}),cy=aa(">",function(s,n,a){return n>a},function(s,n,a,h){return h.compare(n,a)>0}),uy=aa("<=",function(s,n,a){return n<=a},function(s,n,a,h){return h.compare(n,a)<=0}),hy=aa(">=",function(s,n,a){return n>=a},function(s,n,a,h){return h.compare(n,a)>=0});class fh{constructor(n,a,h,f,v){this.type=Ye,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,$e);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=a.parse(f.locale,1,Ye),!v))return null;let x=null;if(f.currency&&(x=a.parse(f.currency,1,Ye),!x))return null;let w=null;if(f["min-fraction-digits"]&&(w=a.parse(f["min-fraction-digits"],1,$e),!w))return null;let E=null;return f["max-fraction-digits"]&&(E=a.parse(f["max-fraction-digits"],1,$e),!E)?null:new fh(h,v,x,w,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Cc{constructor(n){this.type=re,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const w=n[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let E=null;if(w["font-scale"]&&(E=a.parse(w["font-scale"],1,$e),!E))return null;let A=null;if(w["text-font"]&&(A=a.parse(w["text-font"],1,se(Ye)),!A))return null;let L=null;if(w["text-color"]&&(L=a.parse(w["text-color"],1,Dt),!L))return null;const F=f[f.length-1];F.scale=E,F.font=A,F.textColor=L}else{const E=a.parse(n[x],1,St);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new Cc(f)}evaluate(n){return new xr(this.sections.map(a=>{const h=a.content.evaluate(n);return gn(h)===$?new uc("",h,null,null,null):new uc(Kt(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class mh{constructor(n){this.type=$,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Ye);return h?new mh(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=ur.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class gh{constructor(n){this.type=$e,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${ae(h.type)} instead.`):new gh(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new wn(`Expected value to be of type string or array, but found ${ae(gn(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const la={"==":oy,"!=":ay,">":cy,"<":ly,">=":hy,"<=":uy,array:Ii,at:uh,boolean:Ii,case:ph,coalesce:wc,collator:fc,format:Cc,image:mh,in:hh,"index-of":Sc,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:gh,let:bc,literal:bo,match:dh,number:Ii,"number-format":fh,object:Ii,slice:Tc,step:Js,string:Ii,"to-boolean":Ys,"to-color":Ys,"to-number":Ys,"to-string":Ys,var:gc,within:So};function Rp(s,[n,a,h,f]){n=n.evaluate(s),a=a.evaluate(s),h=h.evaluate(s);const v=f?f.evaluate(s):1,x=hc(n,a,h,v);if(x)throw new wn(x);return new en(n/255,a/255,h/255,v,!1)}function Fp(s,n){return s in n}function yh(s,n){const a=n[s];return a===void 0?null:a}function To(s){return{type:s}}function Op(s){return{result:"success",value:s}}function eo(s){return{result:"error",value:s}}function ca(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Bp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function vh(s){return!!s.expression&&s.expression.interpolated}function Xt(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function yn(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function dy(s){return s}function jt(s,n){const a=n.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",f=h||!(h||s.property!==void 0),v=s.type||(vh(n)?"exponential":"interval");if(a||n.type==="padding"){const L=a?en.parse:ci.parse;(s=li({},s)).stops&&(s.stops=s.stops.map(F=>[F[0],L(F[1])])),s.default=L(s.default?s.default:n.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let w,E,A;if(v==="exponential")w=gl;else if(v==="interval")w=fn;else if(v==="categorical"){w=vn,E=Object.create(null);for(const L of s.stops)E[L[0]]=L[1];A=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Np}if(h){const L={},F=[];for(let H=0;H<s.stops.length;H++){const J=s.stops[H],oe=J[0].zoom;L[oe]===void 0&&(L[oe]={zoom:oe,type:s.type,property:s.property,default:s.default,stops:[]},F.push(oe)),L[oe].stops.push([J[0].value,J[1]])}const U=[];for(const H of F)U.push([L[H].zoom,jt(L[H],n)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:hi.interpolationFactor.bind(void 0,W),zoomStops:U.map(H=>H[0]),evaluate:({zoom:H},J)=>gl({stops:U,base:s.base},n,H).evaluate(H,J)}}if(f){const L=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:hi.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map(F=>F[0]),evaluate:({zoom:F})=>w(s,n,F,E,A)}}return{kind:"source",evaluate(L,F){const U=F&&F.properties?F.properties[s.property]:void 0;return U===void 0?Co(s.default,n.default):w(s,n,U,E,A)}}}function Co(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function vn(s,n,a,h,f){return Co(typeof a===f?h[a]:void 0,s.default,n.default)}function fn(s,n,a){if(Xt(a)!=="number")return Co(s.default,n.default);const h=s.stops.length;if(h===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[h-1][0])return s.stops[h-1][1];const f=oa(s.stops.map(v=>v[0]),a);return s.stops[f][1]}function gl(s,n,a){const h=s.base!==void 0?s.base:1;if(Xt(a)!=="number")return Co(s.default,n.default);const f=s.stops.length;if(f===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[f-1][0])return s.stops[f-1][1];const v=oa(s.stops.map(L=>L[0]),a),x=function(L,F,U,W){const H=W-U,J=L-U;return H===0?0:F===1?J/H:(Math.pow(F,J)-1)/(Math.pow(F,H)-1)}(a,h,s.stops[v][0],s.stops[v+1][0]),w=s.stops[v][1],E=s.stops[v+1][1],A=ui[n.type]||dy;return typeof w.evaluate=="function"?{evaluate(...L){const F=w.evaluate.apply(void 0,L),U=E.evaluate.apply(void 0,L);if(F!==void 0&&U!==void 0)return A(F,U,x,s.colorSpace)}}:A(w,E,x,s.colorSpace)}function Np(s,n,a){switch(n.type){case"color":a=en.parse(a);break;case"formatted":a=xr.fromString(a.toString());break;case"resolvedImage":a=ur.fromString(a.toString());break;case"padding":a=ci.parse(a);break;default:Xt(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return Co(a,s.default,n.default)}Di.register(la,{error:[{kind:"error"},[Ye],(s,[n])=>{throw new wn(n.evaluate(s))}],typeof:[Ye,[St],(s,[n])=>ae(gn(n.evaluate(s)))],"to-rgba":[se($e,4),[Dt],(s,[n])=>{const[a,h,f,v]=n.evaluate(s).rgb;return[255*a,255*h,255*f,v]}],rgb:[Dt,[$e,$e,$e],Rp],rgba:[Dt,[$e,$e,$e,$e],Rp],has:{type:nt,overloads:[[[Ye],(s,[n])=>Fp(n.evaluate(s),s.properties())],[[Ye,zn],(s,[n,a])=>Fp(n.evaluate(s),a.evaluate(s))]]},get:{type:St,overloads:[[[Ye],(s,[n])=>yh(n.evaluate(s),s.properties())],[[Ye,zn],(s,[n,a])=>yh(n.evaluate(s),a.evaluate(s))]]},"feature-state":[St,[Ye],(s,[n])=>yh(n.evaluate(s),s.featureState||{})],properties:[zn,[],s=>s.properties()],"geometry-type":[Ye,[],s=>s.geometryType()],id:[St,[],s=>s.id()],zoom:[$e,[],s=>s.globals.zoom],"heatmap-density":[$e,[],s=>s.globals.heatmapDensity||0],"line-progress":[$e,[],s=>s.globals.lineProgress||0],accumulated:[St,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[$e,To($e),(s,n)=>{let a=0;for(const h of n)a+=h.evaluate(s);return a}],"*":[$e,To($e),(s,n)=>{let a=1;for(const h of n)a*=h.evaluate(s);return a}],"-":{type:$e,overloads:[[[$e,$e],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[$e],(s,[n])=>-n.evaluate(s)]]},"/":[$e,[$e,$e],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[$e,[$e,$e],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[$e,[],()=>Math.LN2],pi:[$e,[],()=>Math.PI],e:[$e,[],()=>Math.E],"^":[$e,[$e,$e],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[$e,[$e],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))],log2:[$e,[$e],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[$e,[$e],(s,[n])=>Math.sin(n.evaluate(s))],cos:[$e,[$e],(s,[n])=>Math.cos(n.evaluate(s))],tan:[$e,[$e],(s,[n])=>Math.tan(n.evaluate(s))],asin:[$e,[$e],(s,[n])=>Math.asin(n.evaluate(s))],acos:[$e,[$e],(s,[n])=>Math.acos(n.evaluate(s))],atan:[$e,[$e],(s,[n])=>Math.atan(n.evaluate(s))],min:[$e,To($e),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[$e,To($e),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[$e,[$e],(s,[n])=>Math.abs(n.evaluate(s))],round:[$e,[$e],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[$e,[$e],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[$e,[$e],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[nt,[Ye,St],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[nt,[St],(s,[n])=>s.id()===n.value],"filter-type-==":[nt,[Ye],(s,[n])=>s.geometryType()===n.value],"filter-<":[nt,[Ye,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h<f}],"filter-id-<":[nt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[nt,[Ye,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h>f}],"filter-id->":[nt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[nt,[Ye,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[nt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[nt,[Ye,St],(s,[n,a])=>{const h=s.properties()[n.value],f=a.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[nt,[St],(s,[n])=>{const a=s.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[nt,[St],(s,[n])=>n.value in s.properties()],"filter-has-id":[nt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[nt,[se(Ye)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[nt,[se(St)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[nt,[Ye,se(St)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[nt,[Ye,se(St)],(s,[n,a])=>function(h,f,v,x){for(;v<=x;){const w=v+x>>1;if(f[w]===h)return!0;f[w]>h?x=w-1:v=w+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:nt,overloads:[[[nt,nt],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[To(nt),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:nt,overloads:[[[nt,nt],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[To(nt),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[nt,[nt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[nt,[Ye],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Ye,[Ye],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Ye,[Ye],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Ye,To(St),(s,n)=>n.map(a=>Kt(a.evaluate(s))).join("")],"resolved-locale":[Ye,[jr],(s,[n])=>n.evaluate(s).resolvedLocale()]});class _h{constructor(n,a){var h;this.expression=n,this._warningHistory={},this._evaluator=new rh,this._defaultValue=a?(h=a).type==="color"&&yn(h.default)?new en(0,0,0,0):h.type==="color"?en.parse(h.default)||null:h.type==="padding"?ci.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Mi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,f,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new wn(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Ec(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in la}function Pc(s,n){const a=new pc(la,yc,[],n?function(f){const v={color:Dt,string:Ye,number:$e,enum:Ye,boolean:nt,formatted:re,padding:N,resolvedImage:$,variableAnchorOffsetCollection:Y};return f.type==="array"?se(v[f.value]||St,f.length):v[f.type]}(n):void 0),h=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Op(new _h(h,n)):eo(a.errors)}class xh{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!ml(a.expression)}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,f,v,x)}evaluate(n,a,h,f,v,x){return this._styleExpression.evaluate(n,a,h,f,v,x)}}class kc{constructor(n,a,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!ml(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,a,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,f,v,x)}evaluate(n,a,h,f,v,x){return this._styleExpression.evaluate(n,a,h,f,v,x)}interpolationFactor(n,a,h){return this.interpolationType?hi.interpolationFactor(this.interpolationType,n,a,h):0}}function wh(s,n){const a=Pc(s,n);if(a.result==="error")return a;const h=a.value.expression,f=vc(h);if(!f&&!ca(n))return eo([new pn("","data expressions not supported")]);const v=_c(h,["zoom"]);if(!v&&!Bp(n))return eo([new pn("","zoom expressions not supported")]);const x=vl(h);return x||v?x instanceof pn?eo([x]):x instanceof hi&&!vh(n)?eo([new pn("",'"interpolate" expressions cannot be used with this property')]):Op(x?new kc(f?"camera":"composite",a.value,x.labels,x instanceof hi?x.interpolation:void 0):new xh(f?"constant":"source",a.value)):eo([new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yl{constructor(n,a){this._parameters=n,this._specification=a,li(this,jt(this._parameters,this._specification))}static deserialize(n){return new yl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function vl(s){let n=null;if(s instanceof bc)n=vl(s.result);else if(s instanceof wc){for(const a of s.args)if(n=vl(a),n)break}else(s instanceof Js||s instanceof hi)&&s.input instanceof Di&&s.input.name==="zoom"&&(n=s);return n instanceof pn||s.eachChild(a=>{const h=vl(a);h instanceof pn?n=h:!n&&h?n=new pn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new pn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function _l(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!_l(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const py={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bh(s){if(s==null)return{filter:()=>!0,needGeometry:!1};_l(s)||(s=Ac(s));const n=Pc(s,py);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,f)=>n.value.evaluate(a,h,{},f),needGeometry:Vp(s)}}function fy(s,n){return s<n?-1:s>n?1:0}function Vp(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(Vp(s[n]))return!0;return!1}function Ac(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Sh(s[1],s[2],"=="):n==="!="?xl(Sh(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Sh(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(Ac))):n==="all"?["all"].concat(s.slice(1).map(Ac)):n==="none"?["all"].concat(s.slice(1).map(Ac).map(xl)):n==="in"?jp(s[1],s.slice(2)):n==="!in"?xl(jp(s[1],s.slice(2))):n==="has"?Up(s[1]):n==="!has"?xl(Up(s[1])):n!=="within"||s;var a}function Sh(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function jp(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(fy)]]:["filter-in-small",s,["literal",n]]}}function Up(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function xl(s){return["!",s]}function Mc(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let f="[";for(const v of s)f+=`${Mc(v)},`;return`${f}]`}const a=Object.keys(s).sort();let h="{";for(let f=0;f<a.length;f++)h+=`${JSON.stringify(a[f])}:${Mc(s[a[f]])},`;return`${h}}`}function Ic(s){let n="";for(const a of yr)n+=`/${Mc(s[a])}`;return n}function $p(s){const n=s.value;return n?[new je(s.key,n,"constants have been deprecated as of v8")]:[]}function bn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Eo(s){if(Array.isArray(s))return s.map(Eo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=Eo(s[a]);return n}return bn(s)}function Ur(s){const n=s.key,a=s.value,h=s.valueSpec||{},f=s.objectElementValidators||{},v=s.style,x=s.styleSpec,w=s.validateSpec;let E=[];const A=Xt(a);if(A!=="object")return[new je(n,a,`object expected, ${A} found`)];for(const L in a){const F=L.split(".")[0],U=h[F]||h["*"];let W;if(f[F])W=f[F];else if(h[F])W=w;else if(f["*"])W=f["*"];else{if(!h["*"]){E.push(new je(n,a[L],`unknown property "${L}"`));continue}W=w}E=E.concat(W({key:(n&&`${n}.`)+L,value:a[L],valueSpec:U,style:v,styleSpec:x,object:a,objectKey:L,validateSpec:w},a))}for(const L in h)f[L]||h[L].required&&h[L].default===void 0&&a[L]===void 0&&E.push(new je(n,a,`missing required property "${L}"`));return E}function ua(s){const n=s.value,a=s.valueSpec,h=s.style,f=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(Xt(n)!=="array")return[new je(v,n,`array expected, ${Xt(n)} found`)];if(a.length&&n.length!==a.length)return[new je(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new je(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let w={type:a.value,values:a.values};f.$version<7&&(w.function=a.function),Xt(a.value)==="object"&&(w=a.value);let E=[];for(let A=0;A<n.length;A++)E=E.concat(x({array:n,arrayIndex:A,value:n[A],valueSpec:w,validateSpec:s.validateSpec,style:h,styleSpec:f,key:`${v}[${A}]`}));return E}function wl(s){const n=s.key,a=s.value,h=s.valueSpec;let f=Xt(a);return f==="number"&&a!=a&&(f="NaN"),f!=="number"?[new je(n,a,`number expected, ${f} found`)]:"minimum"in h&&a<h.minimum?[new je(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new je(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function Dc(s){const n=s.valueSpec,a=bn(s.value.type);let h,f,v,x={};const w=a!=="categorical"&&s.value.property===void 0,E=!w,A=Xt(s.value.stops)==="array"&&Xt(s.value.stops[0])==="array"&&Xt(s.value.stops[0][0])==="object",L=Ur({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(W){if(a==="identity")return[new je(W.key,W.value,'identity function may not have a "stops" property')];let H=[];const J=W.value;return H=H.concat(ua({key:W.key,value:J,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:F})),Xt(J)==="array"&&J.length===0&&H.push(new je(W.key,J,"array must have at least one stop")),H},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return a==="identity"&&w&&L.push(new je(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||L.push(new je(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!vh(s.valueSpec)&&L.push(new je(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!ca(s.valueSpec)?L.push(new je(s.key,s.value,"property functions not supported")):w&&!Bp(s.valueSpec)&&L.push(new je(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!A||s.value.property!==void 0||L.push(new je(s.key,s.value,'"property" property is required')),L;function F(W){let H=[];const J=W.value,oe=W.key;if(Xt(J)!=="array")return[new je(oe,J,`array expected, ${Xt(J)} found`)];if(J.length!==2)return[new je(oe,J,`array length 2 expected, length ${J.length} found`)];if(A){if(Xt(J[0])!=="object")return[new je(oe,J,`object expected, ${Xt(J[0])} found`)];if(J[0].zoom===void 0)return[new je(oe,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new je(oe,J,"object stop key must have value")];if(v&&v>bn(J[0].zoom))return[new je(oe,J[0].zoom,"stop zoom values must appear in ascending order")];bn(J[0].zoom)!==v&&(v=bn(J[0].zoom),f=void 0,x={}),H=H.concat(Ur({key:`${oe}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:wl,value:U}}))}else H=H.concat(U({key:`${oe}[0]`,value:J[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},J));return Ec(Eo(J[1]))?H.concat([new je(`${oe}[1]`,J[1],"expressions are not allowed in function stops.")]):H.concat(W.validateSpec({key:`${oe}[1]`,value:J[1],valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function U(W,H){const J=Xt(W.value),oe=bn(W.value),ce=W.value!==null?W.value:H;if(h){if(J!==h)return[new je(W.key,ce,`${J} stop domain type must match previous stop domain type ${h}`)]}else h=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new je(W.key,ce,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&a!=="categorical"){let ve=`number expected, ${J} found`;return ca(n)&&a===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(W.key,ce,ve)]}return a!=="categorical"||J!=="number"||isFinite(oe)&&Math.floor(oe)===oe?a!=="categorical"&&J==="number"&&f!==void 0&&oe<f?[new je(W.key,ce,"stop domain values must appear in ascending order")]:(f=oe,a==="categorical"&&oe in x?[new je(W.key,ce,"stop domain values must be unique")]:(x[oe]=!0,[])):[new je(W.key,ce,`integer expected, found ${oe}`)]}}function Po(s){const n=(s.expressionContext==="property"?wh:Pc)(Eo(s.value),s.valueSpec);if(n.result==="error")return n.value.map(h=>new je(`${s.key}${h.key}`,s.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new je(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ml(a))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ml(a))return[new je(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!_c(a,["zoom","feature-state"]))return[new je(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!vc(a))return[new je(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bl(s){const n=s.key,a=s.value,h=s.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(bn(a))===-1&&f.push(new je(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(bn(a))===-1&&f.push(new je(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function ha(s){return _l(Eo(s.value))?Po(li({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gp(s)}function Gp(s){const n=s.value,a=s.key;if(Xt(n)!=="array")return[new je(a,n,`array expected, ${Xt(n)} found`)];const h=s.styleSpec;let f,v=[];if(n.length<1)return[new je(a,n,"filter array must have at least 1 element")];switch(v=v.concat(bl({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),bn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&bn(n[1])==="$type"&&v.push(new je(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new je(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Xt(n[1]),f!=="string"&&v.push(new je(`${a}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=Xt(n[x]),bn(n[1])==="$type"?v=v.concat(bl({key:`${a}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new je(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Gp({key:`${a}[${x}]`,value:n[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=Xt(n[1]),n.length!==2?v.push(new je(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new je(`${a}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=Xt(n[1]),n.length!==2?v.push(new je(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new je(`${a}[1]`,n[1],`object expected, ${f} found`))}return v}function qp(s,n){const a=s.key,h=s.validateSpec,f=s.style,v=s.styleSpec,x=s.value,w=s.objectKey,E=v[`${n}_${s.layerType}`];if(!E)return[];const A=w.match(/^(.*)-transition$/);if(n==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return h({key:a,value:x,valueSpec:v.transition,style:f,styleSpec:v});const L=s.valueSpec||E[w];if(!L)return[new je(a,x,`unknown property "${w}"`)];let F;if(Xt(x)==="string"&&ca(L)&&!L.tokens&&(F=/^{([^}]+)}$/.exec(x)))return[new je(a,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const U=[];return s.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&U.push(new je(a,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&yn(Eo(x))&&bn(x.type)==="identity"&&U.push(new je(a,x,'"text-font" does not support identity functions'))),U.concat(h({key:s.key,value:x,valueSpec:L,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:w}))}function Zp(s){return qp(s,"paint")}function Wp(s){return qp(s,"layout")}function Hp(s){let n=[];const a=s.value,h=s.key,f=s.style,v=s.styleSpec;a.type||a.ref||n.push(new je(h,a,'either "type" or "ref" is required'));let x=bn(a.type);const w=bn(a.ref);if(a.id){const E=bn(a.id);for(let A=0;A<s.arrayIndex;A++){const L=f.layers[A];bn(L.id)===E&&n.push(new je(h,a.id,`duplicate layer id "${a.id}", previously used at line ${L.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in a&&n.push(new je(h,a[A],`"${A}" is prohibited for ref layers`))}),f.layers.forEach(A=>{bn(A.id)===w&&(E=A)}),E?E.ref?n.push(new je(h,a.ref,"ref cannot reference another ref layer")):x=bn(E.type):n.push(new je(h,a.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(a.source){const E=f.sources&&f.sources[a.source],A=E&&bn(E.type);E?A==="vector"&&x==="raster"?n.push(new je(h,a.source,`layer "${a.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?n.push(new je(h,a.source,`layer "${a.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?n.push(new je(h,a.source,`layer "${a.id}" requires a vector source`)):A!=="vector"||a["source-layer"]?A==="raster-dem"&&x!=="hillshade"?n.push(new je(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||A==="geojson"&&E.lineMetrics||n.push(new je(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new je(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new je(h,a.source,`source "${a.source}" not found`))}else n.push(new je(h,a,'missing required property "source"'));return n=n.concat(Ur({key:h,value:a,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:ha,layout:E=>Ur({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Wp(li({layerType:x},A))}}),paint:E=>Ur({layer:a,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Zp(li({layerType:x},A))}})}})),n}function us(s){const n=s.value,a=s.key,h=Xt(n);return h!=="string"?[new je(a,n,`string expected, ${h} found`)]:[]}const Sl={promoteId:function({key:s,value:n}){if(Xt(n)==="string")return us({key:s,value:n});{const a=[];for(const h in n)a.push(...us({key:`${s}.${h}`,value:n[h]}));return a}}};function di(s){const n=s.value,a=s.key,h=s.styleSpec,f=s.style,v=s.validateSpec;if(!n.type)return[new je(a,n,'"type" is required')];const x=bn(n.type);let w;switch(x){case"vector":case"raster":return w=Ur({key:a,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:Sl,validateSpec:v}),w;case"raster-dem":return w=function(E){var A;const L=(A=E.sourceName)!==null&&A!==void 0?A:"",F=E.value,U=E.styleSpec,W=U.source_raster_dem,H=E.style;let J=[];const oe=Xt(F);if(F===void 0)return J;if(oe!=="object")return J.push(new je("source_raster_dem",F,`object expected, ${oe} found`)),J;const ce=bn(F.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const xe in F)!ce&&ve.includes(xe)?J.push(new je(xe,F[xe],`In "${L}": "${xe}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):W[xe]?J=J.concat(E.validateSpec({key:xe,value:F[xe],valueSpec:W[xe],validateSpec:E.validateSpec,style:H,styleSpec:U})):J.push(new je(xe,F[xe],`unknown property "${xe}"`));return J}({sourceName:a,value:n,style:s.style,styleSpec:h,validateSpec:v}),w;case"geojson":if(w=Ur({key:a,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:v,objectElementValidators:Sl}),n.cluster)for(const E in n.clusterProperties){const[A,L]=n.clusterProperties[E],F=typeof A=="string"?[A,["accumulated"],["get",E]]:A;w.push(...Po({key:`${a}.${E}.map`,value:L,validateSpec:v,expressionContext:"cluster-map"})),w.push(...Po({key:`${a}.${E}.reduce`,value:F,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return Ur({key:a,value:n,valueSpec:h.source_video,style:f,validateSpec:v,styleSpec:h});case"image":return Ur({key:a,value:n,valueSpec:h.source_image,style:f,validateSpec:v,styleSpec:h});case"canvas":return[new je(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bl({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:h})}}function Tl(s){const n=s.value,a=s.styleSpec,h=a.light,f=s.style;let v=[];const x=Xt(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("light",n,`object expected, ${x} found`)]),v;for(const w in n){const E=w.match(/^(.*)-transition$/);v=v.concat(E&&h[E[1]]&&h[E[1]].transition?s.validateSpec({key:w,value:n[w],valueSpec:a.transition,validateSpec:s.validateSpec,style:f,styleSpec:a}):h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new je(w,n[w],`unknown property "${w}"`)])}return v}function Kp(s){const n=s.value,a=s.styleSpec,h=a.terrain,f=s.style;let v=[];const x=Xt(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new je("terrain",n,`object expected, ${x} found`)]),v;for(const w in n)v=v.concat(h[w]?s.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new je(w,n[w],`unknown property "${w}"`)]);return v}function Xp(s){let n=[];const a=s.value,h=s.key;if(Array.isArray(a)){const f=[],v=[];for(const x in a)a[x].id&&f.includes(a[x].id)&&n.push(new je(h,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),f.push(a[x].id),a[x].url&&v.includes(a[x].url)&&n.push(new je(h,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),n=n.concat(Ur({key:`${h}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return us({key:h,value:a})}const Yp={"*":()=>[],array:ua,boolean:function(s){const n=s.value,a=s.key,h=Xt(n);return h!=="boolean"?[new je(a,n,`boolean expected, ${h} found`)]:[]},number:wl,color:function(s){const n=s.key,a=s.value,h=Xt(a);return h!=="string"?[new je(n,a,`color expected, ${h} found`)]:en.parse(String(a))?[]:[new je(n,a,`color expected, "${a}" found`)]},constants:$p,enum:bl,filter:ha,function:Dc,layer:Hp,object:Ur,source:di,light:Tl,terrain:Kp,string:us,formatted:function(s){return us(s).length===0?[]:Po(s)},resolvedImage:function(s){return us(s).length===0?[]:Po(s)},padding:function(s){const n=s.key,a=s.value;if(Xt(a)==="array"){if(a.length<1||a.length>4)return[new je(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let f=[];for(let v=0;v<a.length;v++)f=f.concat(s.validateSpec({key:`${n}[${v}]`,value:a[v],validateSpec:s.validateSpec,valueSpec:h}));return f}return wl({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,a=s.value,h=Xt(a),f=s.styleSpec;if(h!=="array"||a.length<1||a.length%2!=0)return[new je(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(bl({key:`${n}[${x}]`,value:a[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(ua({key:`${n}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:f}));return v},sprite:Xp};function As(s){const n=s.value,a=s.valueSpec,h=s.styleSpec;return s.validateSpec=As,a.expression&&yn(bn(n))?Dc(s):a.expression&&Ec(Eo(n))?Po(s):a.type&&Yp[a.type]?Yp[a.type](s):Ur(li({},s,{valueSpec:a.type?h[a.type]:a}))}function Qp(s){const n=s.value,a=s.key,h=us(s);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new je(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new je(a,n,'"glyphs" url must include a "{range}" token'))),h}function Li(s,n=Ae){let a=[];return a=a.concat(As({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:As,objectElementValidators:{glyphs:Qp,"*":()=>[]}})),s.constants&&(a=a.concat($p({key:"constants",value:s.constants,style:s,styleSpec:n,validateSpec:As}))),Lc(a)}function Ms(s){return function(n){return s({...n,validateSpec:As})}}function Lc(s){return[].concat(s).sort((n,a)=>n.line-a.line)}function Is(s){return function(...n){return Lc(s.apply(this,n))}}Li.source=Is(Ms(di)),Li.sprite=Is(Ms(Xp)),Li.glyphs=Is(Ms(Qp)),Li.light=Is(Ms(Tl)),Li.terrain=Is(Ms(Kp)),Li.layer=Is(Ms(Hp)),Li.filter=Is(Ms(ha)),Li.paintProperty=Is(Ms(Zp)),Li.layoutProperty=Is(Ms(Wp));const Ds=Li,my=Ds.light,Th=Ds.paintProperty,Jp=Ds.layoutProperty;function zc(s,n){let a=!1;if(n&&n.length)for(const h of n)s.fire(new ki(new Error(h.message))),a=!0;return a}class da{constructor(n,a,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let E=0;E<this.d*this.d;E++){const A=x[3+E],L=x[3+E+1];f.push(A===L?null:x.subarray(A,L))}const w=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,f,v){this._forEachCell(a,h,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,f,v,x){this.cells[v].push(x)}query(n,a,h,f,v){const x=this.min,w=this.max;if(n<=x&&a<=x&&w<=h&&w<=f&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(n,a,h,f,this._queryCell,E,{},v),E}}_queryCell(n,a,h,f,v,x,w,E){const A=this.cells[v];if(A!==null){const L=this.keys,F=this.bboxes;for(let U=0;U<A.length;U++){const W=A[U];if(w[W]===void 0){const H=4*W;(E?E(F[H+0],F[H+1],F[H+2],F[H+3]):n<=F[H+2]&&a<=F[H+3]&&h>=F[H+0]&&f>=F[H+1])?(w[W]=!0,x.push(L[W])):w[W]=!1}}}}_forEachCell(n,a,h,f,v,x,w,E){const A=this._convertToCellCoord(n),L=this._convertToCellCoord(a),F=this._convertToCellCoord(h),U=this._convertToCellCoord(f);for(let W=A;W<=F;W++)for(let H=L;H<=U;H++){const J=this.d*H+W;if((!E||E(this._convertFromCellCoord(W),this._convertFromCellCoord(H),this._convertFromCellCoord(W+1),this._convertFromCellCoord(H+1)))&&v.call(this,n,a,h,f,J,x,w,E))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(a+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const w=n[x];f[3+x]=v,f.set(w,v),v+=w.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new da(n.buffer)}}const Ls={};function rt(s,n,a={}){if(Ls[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),Ls[s]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}rt("Object",Object),rt("TransferableGridIndex",da),rt("Color",en),rt("Error",Error),rt("AJAXError",lr),rt("ResolvedImage",ur),rt("StylePropertyFunction",yl),rt("StyleExpression",_h,{omit:["_evaluator"]}),rt("ZoomDependentExpression",kc),rt("ZoomConstantExpression",xh),rt("CompoundExpression",Di,{omit:["_evaluate"]});for(const s in la)la[s]._classRegistryKey||rt(`Expression_${s}`,la[s]);function Rc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function to(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(Rc(s)||He(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return n&&n.push(a.buffer),a}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const h of s)a.push(to(h,n));return a}if(typeof s=="object"){const a=s.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ls[h])throw new Error(`${h} is not registered.`);const f=a.serialize?a.serialize(s,n):{};if(a.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||Ls[h].omit.indexOf(v)>=0)continue;const x=s[v];f[v]=Ls[h].shallow.indexOf(v)>=0?x:to(x,n)}s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof s)}function pa(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||Rc(s)||He(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(pa);if(typeof s=="object"){const n=s.$name||"Object";if(!Ls[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=Ls[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const h=Object.create(a.prototype);for(const f of Object.keys(s)){if(f==="$name")continue;const v=s[f];h[f]=Ls[n].shallow.indexOf(f)>=0?v:pa(v)}return h}throw new Error("can't deserialize object of type "+typeof s)}class ef{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Je={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Ch(s){for(const n of s)if(Ph(n.charCodeAt(0)))return!0;return!1}function Eh(s){for(const n of s)if(!gy(n.charCodeAt(0)))return!1;return!0}function gy(s){return!(Je.Arabic(s)||Je["Arabic Supplement"](s)||Je["Arabic Extended-A"](s)||Je["Arabic Presentation Forms-A"](s)||Je["Arabic Presentation Forms-B"](s))}function Ph(s){return!(s!==746&&s!==747&&(s<4352||!(Je["Bopomofo Extended"](s)||Je.Bopomofo(s)||Je["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Je["CJK Compatibility Ideographs"](s)||Je["CJK Compatibility"](s)||Je["CJK Radicals Supplement"](s)||Je["CJK Strokes"](s)||!(!Je["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Je["CJK Unified Ideographs Extension A"](s)||Je["CJK Unified Ideographs"](s)||Je["Enclosed CJK Letters and Months"](s)||Je["Hangul Compatibility Jamo"](s)||Je["Hangul Jamo Extended-A"](s)||Je["Hangul Jamo Extended-B"](s)||Je["Hangul Jamo"](s)||Je["Hangul Syllables"](s)||Je.Hiragana(s)||Je["Ideographic Description Characters"](s)||Je.Kanbun(s)||Je["Kangxi Radicals"](s)||Je["Katakana Phonetic Extensions"](s)||Je.Katakana(s)&&s!==12540||!(!Je["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Je["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Je["Unified Canadian Aboriginal Syllabics"](s)||Je["Unified Canadian Aboriginal Syllabics Extended"](s)||Je["Vertical Forms"](s)||Je["Yijing Hexagram Symbols"](s)||Je["Yi Syllables"](s)||Je["Yi Radicals"](s))))}function tf(s){return!(Ph(s)||function(n){return!!(Je["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Je["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Je["Letterlike Symbols"](n)||Je["Number Forms"](n)||Je["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Je["Control Pictures"](n)&&n!==9251||Je["Optical Character Recognition"](n)||Je["Enclosed Alphanumerics"](n)||Je["Geometric Shapes"](n)||Je["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Je["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Je["CJK Symbols and Punctuation"](n)||Je.Katakana(n)||Je["Private Use Area"](n)||Je["CJK Compatibility Forms"](n)||Je["Small Form Variants"](n)||Je["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function nf(s){return s>=1424&&s<=2303||Je["Arabic Presentation Forms-A"](s)||Je["Arabic Presentation Forms-B"](s)}function rf(s,n){return!(!n&&nf(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Je.Khmer(s))}function yy(s){for(const n of s)if(nf(n.charCodeAt(0)))return!0;return!1}const kh="deferred",Ah="loading",Mh="loaded";let Ih=null,$r="unavailable",no=null;const Cl=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&($r="error"),Ih&&Ih(s)};function Dh(){El.fire(new Pi("pluginStateChange",{pluginStatus:$r,pluginURL:no}))}const El=new dn,Lh=function(){return $r},sf=function(){if($r!==kh||!no)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$r=Ah,Dh(),no&&si({url:no},s=>{s?Cl(s):($r=Mh,Dh())})},pi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>$r===Mh||pi.applyArabicShaping!=null,isLoading:()=>$r===Ah,setState(s){if(!Et())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");$r=s.pluginStatus,no=s.pluginURL},isParsed(){if(!Et())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return pi.applyArabicShaping!=null&&pi.processBidirectionalText!=null&&pi.processStyledBidirectionalText!=null},getPluginURL(){if(!Et())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return no}};class cn{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ef,this.transition={})}isSupportedScript(n){return function(a,h){for(const f of a)if(!rf(f.charCodeAt(0),h))return!1;return!0}(n,pi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Fc{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,f){if(yn(h))return new yl(h,f);if(Ec(h)){const v=wh(h,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return f.type==="color"&&typeof h=="string"?v=en.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Mi.parse(h)):v=ci.parse(h),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class zh{constructor(n){this.property=n,this.value=new Fc(n,void 0)}transitioned(n,a){return new af(this.property,this.value,a,we({},n.transition,this.transition),n.now)}untransitioned(){return new af(this.property,this.value,null,{},0)}}class of{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return it(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new zh(this._values[n].property)),this._values[n].value=new Fc(this._values[n].property,a===null?void 0:it(a))}getTransition(n){return it(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new zh(this._values[n].property)),this._values[n].transition=it(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const f=this.getTransition(a);f!==void 0&&(n[`${a}-transition`]=f)}return n}transitioned(n,a){const h=new lf(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,a._values[f]);return h}untransitioned(){const n=new lf(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class af{constructor(n,a,h,f,v){this.property=n,this.value=a,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const f=n.now||0,v=this.value.possiblyEvaluate(n,a,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,a,h);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,h),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const A=E*E,L=A*E;return 4*(E<.5?L:3*(E-A)+L-.75)}(w))}}return v}}class lf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const f=new Oc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class vy{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return it(this._values[n].value)}setValue(n,a){this._values[n]=new Fc(this._values[n].property,a===null?void 0:it(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const f=new Oc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,h);return f}}class Ar{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,f){return this.property.evaluate(this.value,this.parameters,n,a,h,f)}}class Oc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class ft{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,h){const f=ui[this.specification.type];return f?f(n,a,h):n}}class Tt{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,f){return new Ar(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,f)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Ar(this,{kind:"constant",value:void 0},n.parameters);const f=ui[this.specification.type];if(f){const v=f(n.value.value,a.value.value,h);return new Ar(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,a,h,f,v,x){return n.kind==="constant"?n.value:n.evaluate(a,h,f,v,x)}}class Pl extends Tt{possiblyEvaluate(n,a,h,f){if(n.value===void 0)return new Ar(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,a);return new Ar(this,{kind:"constant",value:w},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Ar(this,{kind:"constant",value:v},a)}return new Ar(this,n.expression,a)}evaluate(n,a,h,f,v,x){if(n.kind==="source"){const w=n.evaluate(a,h,f,v,x);return this._calculate(w,w,w,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,f),n.evaluate({zoom:Math.floor(a.zoom)},h,f),n.evaluate({zoom:Math.floor(a.zoom)+1},h,f),a):n.value}_calculate(n,a,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Rh{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,f);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new cn(Math.floor(a.zoom-1),a)),n.expression.evaluate(new cn(Math.floor(a.zoom),a)),n.expression.evaluate(new cn(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Fh{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,f){return!!n.expression.evaluate(a,null,{},h,f)}interpolate(){return!1}}class Rn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const f=this.defaultPropertyValues[a]=new Fc(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new zh(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=f.possiblyEvaluate({})}}}rt("DataDrivenProperty",Tt),rt("DataConstantProperty",ft),rt("CrossFadedDataDrivenProperty",Pl),rt("CrossFadedProperty",Rh),rt("ColorRampProperty",Fh);const Oh="-transition";class zi extends dn{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new vy(a.layout)),a.paint)){this._transitionablePaint=new of(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oc(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(Jp,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(Oh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(Th,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(Oh))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const E=this._transitionablePaint._values[n].value;return E.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,w,E)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),pt(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,f,v={}){return(!v||v.validate!==!1)&&zc(this,n.call(Ds,{key:a,layerType:this.type,objectKey:h,value:f,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Ar&&ca(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const cf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ko{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _n(s,n=1){let a=0,h=0;return{members:s.map(f=>{const v=cf[f.type].BYTES_PER_ELEMENT,x=a=fa(a,Math.max(n,v)),w=f.components||1;return h=Math.max(h,v),a+=v*w,{name:f.name,type:f.type,components:w,offset:x}}),size:fa(a,Math.max(h,n)),alignment:n}}function fa(s,n){return Math.ceil(s/n)*n}class kl extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.int16[f+0]=a,this.int16[f+1]=h,n}}kl.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",kl);class Al extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=f,n}}Al.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",Al);class Ao extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=v,n}}Ao.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",Ao);class Bh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,w){const E=6*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,n}}Bh.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",Bh);class Nh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,w){const E=4*n,A=8*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.uint8[A+4]=f,this.uint8[A+5]=v,this.uint8[A+6]=x,this.uint8[A+7]=w,n}}Nh.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",Nh);class ma extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.float32[f+0]=a,this.float32[f+1]=h,n}}ma.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",ma);class Vh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,w,E,A,L){const F=this.length;return this.resize(F+1),this.emplace(F,n,a,h,f,v,x,w,E,A,L)}emplace(n,a,h,f,v,x,w,E,A,L,F){const U=10*n;return this.uint16[U+0]=a,this.uint16[U+1]=h,this.uint16[U+2]=f,this.uint16[U+3]=v,this.uint16[U+4]=x,this.uint16[U+5]=w,this.uint16[U+6]=E,this.uint16[U+7]=A,this.uint16[U+8]=L,this.uint16[U+9]=F,n}}Vh.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",Vh);class jh extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,w,E,A,L,F,U){const W=this.length;return this.resize(W+1),this.emplace(W,n,a,h,f,v,x,w,E,A,L,F,U)}emplace(n,a,h,f,v,x,w,E,A,L,F,U,W){const H=12*n;return this.int16[H+0]=a,this.int16[H+1]=h,this.int16[H+2]=f,this.int16[H+3]=v,this.uint16[H+4]=x,this.uint16[H+5]=w,this.uint16[H+6]=E,this.uint16[H+7]=A,this.int16[H+8]=L,this.int16[H+9]=F,this.int16[H+10]=U,this.int16[H+11]=W,n}}jh.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",jh);class Yt extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=f,n}}Yt.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",Yt);class g extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}g.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",g);class r extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,w,E,A){const L=this.length;return this.resize(L+1),this.emplace(L,n,a,h,f,v,x,w,E,A)}emplace(n,a,h,f,v,x,w,E,A,L){const F=10*n,U=5*n;return this.int16[F+0]=a,this.int16[F+1]=h,this.int16[F+2]=f,this.int16[F+3]=v,this.int16[F+4]=x,this.int16[F+5]=w,this.uint32[U+3]=E,this.uint16[F+8]=A,this.uint16[F+9]=L,n}}r.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",r);class c extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,h,f,v,x)}emplace(n,a,h,f,v,x,w){const E=6*n;return this.int16[E+0]=a,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=v,this.int16[E+4]=x,this.int16[E+5]=w,n}}c.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",c);class d extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,h,f,v)}emplace(n,a,h,f,v,x){const w=4*n,E=8*n;return this.float32[w+0]=a,this.float32[w+1]=h,this.float32[w+2]=f,this.int16[E+6]=v,this.int16[E+7]=x,n}}d.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",d);class m extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=12*n,w=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[w+1]=f,this.float32[w+2]=v,n}}m.prototype.bytesPerElement=12,rt("StructArrayLayout2ub2f12",m);class _ extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=f,n}}_.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",_);class T extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce){const ve=this.length;return this.resize(ve+1),this.emplace(ve,n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce)}emplace(n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce,ve){const pe=24*n,xe=12*n,Te=48*n;return this.int16[pe+0]=a,this.int16[pe+1]=h,this.uint16[pe+2]=f,this.uint16[pe+3]=v,this.uint32[xe+2]=x,this.uint32[xe+3]=w,this.uint32[xe+4]=E,this.uint16[pe+10]=A,this.uint16[pe+11]=L,this.uint16[pe+12]=F,this.float32[xe+7]=U,this.float32[xe+8]=W,this.uint8[Te+36]=H,this.uint8[Te+37]=J,this.uint8[Te+38]=oe,this.uint32[xe+10]=ce,this.int16[pe+22]=ve,n}}T.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",T);class C extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce,ve,pe,xe,Te,Le,et,ct,Qe,Xe,Ue,st){const qe=this.length;return this.resize(qe+1),this.emplace(qe,n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce,ve,pe,xe,Te,Le,et,ct,Qe,Xe,Ue,st)}emplace(n,a,h,f,v,x,w,E,A,L,F,U,W,H,J,oe,ce,ve,pe,xe,Te,Le,et,ct,Qe,Xe,Ue,st,qe){const Ne=32*n,wt=16*n;return this.int16[Ne+0]=a,this.int16[Ne+1]=h,this.int16[Ne+2]=f,this.int16[Ne+3]=v,this.int16[Ne+4]=x,this.int16[Ne+5]=w,this.int16[Ne+6]=E,this.int16[Ne+7]=A,this.uint16[Ne+8]=L,this.uint16[Ne+9]=F,this.uint16[Ne+10]=U,this.uint16[Ne+11]=W,this.uint16[Ne+12]=H,this.uint16[Ne+13]=J,this.uint16[Ne+14]=oe,this.uint16[Ne+15]=ce,this.uint16[Ne+16]=ve,this.uint16[Ne+17]=pe,this.uint16[Ne+18]=xe,this.uint16[Ne+19]=Te,this.uint16[Ne+20]=Le,this.uint16[Ne+21]=et,this.uint16[Ne+22]=ct,this.uint32[wt+12]=Qe,this.float32[wt+13]=Xe,this.float32[wt+14]=Ue,this.uint16[Ne+30]=st,this.uint16[Ne+31]=qe,n}}C.prototype.bytesPerElement=64,rt("StructArrayLayout8i15ui1ul2f2ui64",C);class P extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}P.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",P);class D extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=3*n;return this.uint16[6*n+0]=a,this.float32[v+1]=h,this.float32[v+2]=f,n}}D.prototype.bytesPerElement=12,rt("StructArrayLayout1ui2f12",D);class z extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,h)}emplace(n,a,h,f){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=f,n}}z.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",z);class R extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const f=2*n;return this.uint16[f+0]=a,this.uint16[f+1]=h,n}}R.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",R);class G extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}G.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",G);class te extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,f)}emplace(n,a,h,f,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=v,n}}te.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",te);class ee extends ko{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}ee.prototype.size=20;class ie extends r{get(n){return new ee(this,n)}}rt("CollisionBoxArray",ie);class Q extends ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Q.prototype.size=48;class me extends T{get(n){return new Q(this,n)}}rt("PlacedSymbolArray",me);class be extends ko{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}be.prototype.size=64;class le extends C{get(n){return new be(this,n)}}rt("SymbolInstanceArray",le);class ge extends P{getoffsetX(n){return this.float32[1*n+0]}}rt("GlyphOffsetArray",ge);class Ce extends Al{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}rt("SymbolLineVertexArray",Ce);class Ee extends ko{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ee.prototype.size=12;class De extends D{get(n){return new Ee(this,n)}}rt("TextAnchorOffsetArray",De);class Be extends ko{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Be.prototype.size=8;class Re extends z{get(n){return new Be(this,n)}}rt("FeatureIndexArray",Re);class Ve extends kl{}class lt extends kl{}class Rt extends kl{}class Ke extends Bh{}class Ct extends Nh{}class ut extends ma{}class tn extends Vh{}class zt extends jh{}class It extends Yt{}class Ft extends g{}class Pn extends c{}class an extends m{}class hr extends _{}class Hn extends R{}const Fn=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:fi}=Fn;class un{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,f){let v=this.segments[this.segments.length-1];return n>un.MAX_VERTEX_ARRAY_LENGTH&&Ze(`Max vertices per segment is ${un.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>un.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,f){return new un([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function hs(s,n){return 256*(s=Se(Math.floor(s),0,255))+Se(Math.floor(n),0,255)}un.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",un);const ds=_n([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ro={exports:{}},Mo={exports:{}};Mo.exports=function(s,n){var a,h,f,v,x,w,E,A;for(h=s.length-(a=3&s.length),f=n,x=3432918353,w=461845907,A=0;A<h;)E=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,f=27492+(65535&(v=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,a){case 3:E^=(255&s.charCodeAt(A+2))<<16;case 2:E^=(255&s.charCodeAt(A+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&s.charCodeAt(A)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*w+(((E>>>16)*w&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var ga=Mo.exports,wr={exports:{}};wr.exports=function(s,n){for(var a,h=s.length,f=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:f^=(255&s.charCodeAt(v+2))<<16;case 2:f^=(255&s.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var dr=ga,Mr=wr.exports;ro.exports=dr,ro.exports.murmur3=dr,ro.exports.murmur2=Mr;var Io=b(ro.exports);class kn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,f){this.ids.push(Kn(n)),this.positions.push(a,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Kn(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=a?f=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Gr(h,f,0,h.length-1),a&&a.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const a=new kn;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function Kn(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Io(String(s))}function Gr(s,n,a,h){for(;a<h;){const f=s[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(s[v]<f);do x--;while(s[x]>f);if(v>=x)break;An(s,v,x),An(n,3*v,3*x),An(n,3*v+1,3*x+1),An(n,3*v+2,3*x+2)}x-a<h-x?(Gr(s,n,a,x),a=x+1):(Gr(s,n,x+1,h),h=x)}}function An(s,n,a){const h=s[n];s[n]=s[a],s[a]=h}rt("FeaturePositionMap",kn);class Do{constructor(n,a){this.gl=n.gl,this.location=a}}class Bc extends Do{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class uf extends Do{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class hf extends Do{constructor(n,a){super(n,a),this.current=en.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const _y=new Float32Array(16);function Uh(s){return[hs(255*s.r,255*s.g),hs(255*s.b,255*s.a)]}class ps{constructor(n,a,h){this.value=n,this.uniformNames=a.map(f=>`u_${f}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new hf(n,a):new Bc(n,a)}}class Lo{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new uf(n,a):new Bc(n,a)}}class fs{constructor(n,a,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,a,h,f,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new cn(0),a,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,w)}updatePaintArray(n,a,h,f){const v=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const f=Uh(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<a;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ri{constructor(n,a,h,f,v,x){this.expression=n,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,h,f,v){const x=this.expression.evaluate(new cn(this.zoom),a,{},f,[],v),w=this.expression.evaluate(new cn(this.zoom+1),a,{},f,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,x,w)}updatePaintArray(n,a,h,f){const v=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,h,f){if(this.type==="color"){const v=Uh(h),x=Uh(f);for(let w=n;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,f=Se(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,a,h){return new Bc(n,a)}}class ms{constructor(n,a,h,f,v,x){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,f,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,f){if(!f||!h)return;const{min:v,mid:x,max:w}=h,E=f[v],A=f[x],L=f[w];if(E&&A&&L)for(let F=n;F<a;F++)this.zoomInPaintVertexArray.emplace(F,A.tl[0],A.tl[1],A.br[0],A.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],A.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(F,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ds.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ds.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $h{constructor(n,a,h){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Ar&&ca(x.property.specification)))continue;const w=wM(v,n.type),E=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,F=x.property.specification["property-type"],U=F==="cross-faded"||F==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=U?new Lo(E.value,w):new ps(E.value,w,A),f.push(`/u_${v}`);else if(E.kind==="source"||U){const W=S1(v,A,"source");this.binders[v]=U?new ms(E,A,L,a,W,n.id):new fs(E,w,A,W),f.push(`/a_${v}`)}else{const W=S1(v,A,"composite");this.binders[v]=new Ri(E,w,A,L,a,W),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof fs||a instanceof Ri?a.maxValue:0}populatePaintArrays(n,a,h,f,v){for(const x in this.binders){const w=this.binders[x];(w instanceof fs||w instanceof Ri||w instanceof ms)&&w.populatePaintArray(n,a,h,f,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const f=this.binders[h];f instanceof Lo&&f.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,f,v){let x=!1;for(const w in n){const E=a.getPositions(w);for(const A of E){const L=h.feature(A.index);for(const F in this.binders){const U=this.binders[F];if((U instanceof fs||U instanceof Ri||U instanceof ms)&&U.expression.isStateDependent===!0){const W=f.paint.get(F);U.expression=W.value,U.updatePaintArray(A.start,A.end,L,n[w],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof ps||h instanceof Lo)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof fs||h instanceof Ri)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof ms)for(let f=0;f<ds.members.length;f++)n.push(ds.members[f].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof ps||h instanceof Lo||h instanceof Ri)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof ps||v instanceof Lo||v instanceof Ri){for(const x of v.uniformNames)if(a[x]){const w=v.getBinding(n,a[x],x);h.push({name:x,property:f,binding:w})}}}return h}setUniforms(n,a,h,f){for(const{name:v,property:x,binding:w}of a)this.binders[x].setUniform(w,f,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof ms){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof fs||h instanceof Ri)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof fs||h instanceof Ri||h instanceof ms)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof fs||a instanceof Ri||a instanceof ms)&&a.destroy()}}}class zs{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new $h(f,a,h);this.needsUpload=!1,this._featureMap=new kn,this._bufferOffset=0}populatePaintArrays(n,a,h,f,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,a,f,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,f){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function wM(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function S1(s,n,a){const h={color:{source:ma,composite:te},number:{source:P,composite:ma}},f=function(v){return{"line-pattern":{source:tn,composite:tn},"fill-pattern":{source:tn,composite:tn},"fill-extrusion-pattern":{source:tn,composite:tn}}[v]}(s);return f&&f[a]||h[n][a]}rt("ConstantBinder",ps),rt("CrossFadedConstantBinder",Lo),rt("SourceExpressionBinder",fs),rt("CrossFadedCompositeBinder",ms),rt("CompositeExpressionBinder",Ri),rt("ProgramConfiguration",$h,{omit:["_buffers"]}),rt("ProgramConfigurationSet",zs);const Gn=8192,xy=Math.pow(2,14)-1,T1=-xy-1;function Ml(s){const n=Gn/s.extent,a=s.loadGeometry();for(let h=0;h<a.length;h++){const f=a[h];for(let v=0;v<f.length;v++){const x=f[v],w=Math.round(x.x*n),E=Math.round(x.y*n);x.x=Se(w,T1,xy),x.y=Se(E,T1,xy),(w<x.x||w>x.x+1||E<x.y||E>x.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Il(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Ml(s):[]}}function df(s,n,a,h,f){s.emplaceBack(2*n+(h+1)/2,2*a+(f+1)/2)}class wy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new lt,this.indexArray=new hr,this.segments=new un,this.programConfigurations=new zs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const f=this.layers[0],v=[];let x=null,w=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:E,id:A,index:L,sourceLayerIndex:F}of n){const U=this.layers[0]._featureFilter.needGeometry,W=Il(E,U);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),W,h))continue;const H=w?x.evaluate(W,{},h):void 0,J={id:A,properties:E.properties,type:E.type,sourceLayerIndex:F,index:L,geometry:U?W.geometry:Ml(E),patterns:{},sortKey:H};v.push(J)}w&&v.sort((E,A)=>E.sortKey-A.sortKey);for(const E of v){const{geometry:A,index:L,sourceLayerIndex:F}=E,U=n[L].feature;this.addFeature(E,A,L,h),a.featureIndex.insert(U,A,L,F,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,fi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,f){for(const v of a)for(const x of v){const w=x.x,E=x.y;if(w<0||w>=Gn||E<0||E>=Gn)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=A.vertexLength;df(this.layoutVertexArray,w,E,-1,-1),df(this.layoutVertexArray,w,E,1,-1),df(this.layoutVertexArray,w,E,1,1),df(this.layoutVertexArray,w,E,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function C1(s,n){for(let a=0;a<s.length;a++)if(Nc(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(Nc(s,n[a]))return!0;return!!by(s,n)}function bM(s,n,a){return!!Nc(s,n)||!!Sy(n,s,a)}function E1(s,n){if(s.length===1)return k1(n,s[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let f=0;f<h.length;f++)if(Nc(s,h[f]))return!0}for(let a=0;a<s.length;a++)if(k1(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(by(s,n[a]))return!0;return!1}function SM(s,n,a){if(s.length>1){if(by(s,n))return!0;for(let h=0;h<n.length;h++)if(Sy(n[h],s,a))return!0}for(let h=0;h<s.length;h++)if(Sy(s[h],n,a))return!0;return!1}function by(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const h=s[a],f=s[a+1];for(let v=0;v<n.length-1;v++)if(TM(h,f,n[v],n[v+1]))return!0}return!1}function TM(s,n,a,h){return dt(s,a,h)!==dt(n,a,h)&&dt(s,n,a)!==dt(s,n,h)}function Sy(s,n,a){const h=a*a;if(n.length===1)return s.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(P1(s,n[f-1],n[f])<h)return!0;return!1}function P1(s,n,a){const h=n.distSqr(a);if(h===0)return s.distSqr(n);const f=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/h;return s.distSqr(f<0?n:f>1?a:a.sub(n)._mult(f)._add(n))}function k1(s,n){let a,h,f,v=!1;for(let x=0;x<s.length;x++){a=s[x];for(let w=0,E=a.length-1;w<a.length;E=w++)h=a[w],f=a[E],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(v=!v)}return v}function Nc(s,n){let a=!1;for(let h=0,f=s.length-1;h<s.length;f=h++){const v=s[h],x=s[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function CM(s,n,a){const h=a[0],f=a[2];if(s.x<h.x&&n.x<h.x||s.x>f.x&&n.x>f.x||s.y<h.y&&n.y<h.y||s.y>f.y&&n.y>f.y)return!1;const v=dt(s,n,a[0]);return v!==dt(s,n,a[1])||v!==dt(s,n,a[2])||v!==dt(s,n,a[3])}function Gh(s,n,a){const h=n.paint.get(s).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(s)}function pf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function ff(s,n,a,h,f){if(!n[0]&&!n[1])return s;const v=k.convert(n)._mult(f);a==="viewport"&&v._rotate(-h);const x=[];for(let w=0;w<s.length;w++)x.push(s[w].sub(v));return x}let A1,M1;rt("CircleBucket",wy,{omit:["layers"]});var EM={get paint(){return M1=M1||new Rn({"circle-radius":new Tt(Ae.paint_circle["circle-radius"]),"circle-color":new Tt(Ae.paint_circle["circle-color"]),"circle-blur":new Tt(Ae.paint_circle["circle-blur"]),"circle-opacity":new Tt(Ae.paint_circle["circle-opacity"]),"circle-translate":new ft(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new ft(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ft(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ft(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tt(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tt(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tt(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return A1=A1||new Rn({"circle-sort-key":new Tt(Ae.layout_circle["circle-sort-key"])})}},qr=1e-6,Vc=typeof Float32Array<"u"?Float32Array:Array;function Ty(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function I1(s,n,a){var h=n[0],f=n[1],v=n[2],x=n[3],w=n[4],E=n[5],A=n[6],L=n[7],F=n[8],U=n[9],W=n[10],H=n[11],J=n[12],oe=n[13],ce=n[14],ve=n[15],pe=a[0],xe=a[1],Te=a[2],Le=a[3];return s[0]=pe*h+xe*w+Te*F+Le*J,s[1]=pe*f+xe*E+Te*U+Le*oe,s[2]=pe*v+xe*A+Te*W+Le*ce,s[3]=pe*x+xe*L+Te*H+Le*ve,s[4]=(pe=a[4])*h+(xe=a[5])*w+(Te=a[6])*F+(Le=a[7])*J,s[5]=pe*f+xe*E+Te*U+Le*oe,s[6]=pe*v+xe*A+Te*W+Le*ce,s[7]=pe*x+xe*L+Te*H+Le*ve,s[8]=(pe=a[8])*h+(xe=a[9])*w+(Te=a[10])*F+(Le=a[11])*J,s[9]=pe*f+xe*E+Te*U+Le*oe,s[10]=pe*v+xe*A+Te*W+Le*ce,s[11]=pe*x+xe*L+Te*H+Le*ve,s[12]=(pe=a[12])*h+(xe=a[13])*w+(Te=a[14])*F+(Le=a[15])*J,s[13]=pe*f+xe*E+Te*U+Le*oe,s[14]=pe*v+xe*A+Te*W+Le*ce,s[15]=pe*x+xe*L+Te*H+Le*ve,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var qh,PM=I1;function mf(s,n,a){var h=n[0],f=n[1],v=n[2],x=n[3];return s[0]=a[0]*h+a[4]*f+a[8]*v+a[12]*x,s[1]=a[1]*h+a[5]*f+a[9]*v+a[13]*x,s[2]=a[2]*h+a[6]*f+a[10]*v+a[14]*x,s[3]=a[3]*h+a[7]*f+a[11]*v+a[15]*x,s}qh=new Vc(4),Vc!=Float32Array&&(qh[0]=0,qh[1]=0,qh[2]=0,qh[3]=0);class kM extends zi{constructor(n){super(n,EM)}createBucket(n){return new wy(n)}queryRadius(n){const a=n;return Gh("circle-radius",this,a)+Gh("circle-stroke-width",this,a)+pf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,a,h,f,v,x,w,E){const A=ff(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),L=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h),F=this.paint.get("circle-pitch-alignment")==="map",U=F?A:function(H,J){return H.map(oe=>D1(oe,J))}(A,E),W=F?L*w:L;for(const H of f)for(const J of H){const oe=F?J:D1(J,E);let ce=W;const ve=mf([],[J.x,J.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=ve[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=x.cameraToCenterDistance/ve[3]),bM(U,oe,ce))return!0}return!1}}function D1(s,n){const a=mf([],[s.x,s.y,0,1],n);return new k(a[0]/a[3],a[1]/a[3])}class L1 extends wy{}let z1;rt("HeatmapBucket",L1,{omit:["layers"]});var AM={get paint(){return z1=z1||new Rn({"heatmap-radius":new Tt(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tt(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ft(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Fh(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ft(Ae.paint_heatmap["heatmap-opacity"])})}};function Cy(s,{width:n,height:a},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*a*h}`)}else f=new Uint8Array(n*a*h);return s.width=n,s.height=a,s.data=f,s}function R1(s,{width:n,height:a},h){if(n===s.width&&a===s.height)return;const f=Cy({},{width:n,height:a},h);Ey(s,f,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,a)},h),s.width=n,s.height=a,s.data=f.data}function Ey(s,n,a,h,f,v){if(f.width===0||f.height===0)return n;if(f.width>s.width||f.height>s.height||a.x>s.width-f.width||a.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,w=n.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<f.height;E++){const A=((a.y+E)*s.width+a.x)*v,L=((h.y+E)*n.width+h.x)*v;for(let F=0;F<f.width*v;F++)w[L+F]=x[A+F]}return n}class Zh{constructor(n,a){Cy(this,n,1,a)}resize(n){R1(this,n,1)}clone(){return new Zh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,f,v){Ey(n,a,h,f,v,1)}}class Wi{constructor(n,a){Cy(this,n,4,a)}resize(n){R1(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Wi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,f,v){Ey(n,a,h,f,v,4)}}function F1(s){const n={},a=s.resolution||256,h=s.clips?s.clips.length:1,f=s.image||new Wi({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,w,E)=>{n[s.evaluationKey]=E;const A=s.expression.evaluate(n);f.data[x+w+0]=Math.floor(255*A.r/A.a),f.data[x+w+1]=Math.floor(255*A.g/A.a),f.data[x+w+2]=Math.floor(255*A.b/A.a),f.data[x+w+3]=Math.floor(255*A.a)};if(s.clips)for(let x=0,w=0;x<h;++x,w+=4*a)for(let E=0,A=0;E<a;E++,A+=4){const L=E/(a-1),{start:F,end:U}=s.clips[x];v(w,A,F*(1-L)+U*L)}else for(let x=0,w=0;x<a;x++,w+=4)v(0,w,x/(a-1));return f}rt("AlphaImage",Zh),rt("RGBAImage",Wi);class MM extends zi{createBucket(n){return new L1(n)}constructor(n){super(n,AM),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=F1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let O1;var IM={get paint(){return O1=O1||new Rn({"hillshade-illumination-direction":new ft(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ft(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ft(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ft(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ft(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ft(Ae.paint_hillshade["hillshade-accent-color"])})}};class DM extends zi{constructor(n){super(n,IM)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const LM=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:zM}=LM;var Py={exports:{}};function gf(s,n,a){a=a||2;var h,f,v,x,w,E,A,L=n&&n.length,F=L?n[0]*a:s.length,U=B1(s,0,F,a,!0),W=[];if(!U||U.next===U.prev)return W;if(L&&(U=function(J,oe,ce,ve){var pe,xe,Te,Le=[];for(pe=0,xe=oe.length;pe<xe;pe++)(Te=B1(J,oe[pe]*ve,pe<xe-1?oe[pe+1]*ve:J.length,ve,!1))===Te.next&&(Te.steiner=!0),Le.push(UM(Te));for(Le.sort(NM),pe=0;pe<Le.length;pe++)ce=VM(Le[pe],ce);return ce}(s,n,U,a)),s.length>80*a){h=v=s[0],f=x=s[1];for(var H=a;H<F;H+=a)(w=s[H])<h&&(h=w),(E=s[H+1])<f&&(f=E),w>v&&(v=w),E>x&&(x=E);A=(A=Math.max(v-h,x-f))!==0?32767/A:0}return Wh(U,W,a,h,f,A,0),W}function B1(s,n,a,h,f){var v,x;if(f===My(s,n,a,h)>0)for(v=n;v<a;v+=h)x=j1(v,s[v],s[v+1],x);else for(v=a-h;v>=n;v-=h)x=j1(v,s[v],s[v+1],x);return x&&yf(x,x.next)&&(Kh(x),x=x.next),x}function Dl(s,n){if(!s)return s;n||(n=s);var a,h=s;do if(a=!1,h.steiner||!yf(h,h.next)&&On(h.prev,h,h.next)!==0)h=h.next;else{if(Kh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function Wh(s,n,a,h,f,v,x){if(s){!x&&v&&function(L,F,U,W){var H=L;do H.z===0&&(H.z=ky(H.x,H.y,F,U,W)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==L);H.prevZ.nextZ=null,H.prevZ=null,function(J){var oe,ce,ve,pe,xe,Te,Le,et,ct=1;do{for(ce=J,J=null,xe=null,Te=0;ce;){for(Te++,ve=ce,Le=0,oe=0;oe<ct&&(Le++,ve=ve.nextZ);oe++);for(et=ct;Le>0||et>0&&ve;)Le!==0&&(et===0||!ve||ce.z<=ve.z)?(pe=ce,ce=ce.nextZ,Le--):(pe=ve,ve=ve.nextZ,et--),xe?xe.nextZ=pe:J=pe,pe.prevZ=xe,xe=pe;ce=ve}xe.nextZ=null,ct*=2}while(Te>1)}(H)}(s,h,f,v);for(var w,E,A=s;s.prev!==s.next;)if(w=s.prev,E=s.next,v?FM(s,h,f,v):RM(s))n.push(w.i/a|0),n.push(s.i/a|0),n.push(E.i/a|0),Kh(s),s=E.next,A=E.next;else if((s=E)===A){x?x===1?Wh(s=OM(Dl(s),n,a),n,a,h,f,v,2):x===2&&BM(s,n,a,h,f,v):Wh(Dl(s),n,a,h,f,v,1);break}}}function RM(s){var n=s.prev,a=s,h=s.next;if(On(n,a,h)>=0)return!1;for(var f=n.x,v=a.x,x=h.x,w=n.y,E=a.y,A=h.y,L=f<v?f<x?f:x:v<x?v:x,F=w<E?w<A?w:A:E<A?E:A,U=f>v?f>x?f:x:v>x?v:x,W=w>E?w>A?w:A:E>A?E:A,H=h.next;H!==n;){if(H.x>=L&&H.x<=U&&H.y>=F&&H.y<=W&&jc(f,w,v,E,x,A,H.x,H.y)&&On(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function FM(s,n,a,h){var f=s.prev,v=s,x=s.next;if(On(f,v,x)>=0)return!1;for(var w=f.x,E=v.x,A=x.x,L=f.y,F=v.y,U=x.y,W=w<E?w<A?w:A:E<A?E:A,H=L<F?L<U?L:U:F<U?F:U,J=w>E?w>A?w:A:E>A?E:A,oe=L>F?L>U?L:U:F>U?F:U,ce=ky(W,H,n,a,h),ve=ky(J,oe,n,a,h),pe=s.prevZ,xe=s.nextZ;pe&&pe.z>=ce&&xe&&xe.z<=ve;){if(pe.x>=W&&pe.x<=J&&pe.y>=H&&pe.y<=oe&&pe!==f&&pe!==x&&jc(w,L,E,F,A,U,pe.x,pe.y)&&On(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,xe.x>=W&&xe.x<=J&&xe.y>=H&&xe.y<=oe&&xe!==f&&xe!==x&&jc(w,L,E,F,A,U,xe.x,xe.y)&&On(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;pe&&pe.z>=ce;){if(pe.x>=W&&pe.x<=J&&pe.y>=H&&pe.y<=oe&&pe!==f&&pe!==x&&jc(w,L,E,F,A,U,pe.x,pe.y)&&On(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;xe&&xe.z<=ve;){if(xe.x>=W&&xe.x<=J&&xe.y>=H&&xe.y<=oe&&xe!==f&&xe!==x&&jc(w,L,E,F,A,U,xe.x,xe.y)&&On(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function OM(s,n,a){var h=s;do{var f=h.prev,v=h.next.next;!yf(f,v)&&N1(f,h,h.next,v)&&Hh(f,v)&&Hh(v,f)&&(n.push(f.i/a|0),n.push(h.i/a|0),n.push(v.i/a|0),Kh(h),Kh(h.next),h=s=v),h=h.next}while(h!==s);return Dl(h)}function BM(s,n,a,h,f,v){var x=s;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&$M(x,w)){var E=V1(x,w);return x=Dl(x,x.next),E=Dl(E,E.next),Wh(x,n,a,h,f,v,0),void Wh(E,n,a,h,f,v,0)}w=w.next}x=x.next}while(x!==s)}function NM(s,n){return s.x-n.x}function VM(s,n){var a=function(f,v){var x,w=v,E=f.x,A=f.y,L=-1/0;do{if(A<=w.y&&A>=w.next.y&&w.next.y!==w.y){var F=w.x+(A-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(F<=E&&F>L&&(L=F,x=w.x<w.next.x?w:w.next,F===E))return x}w=w.next}while(w!==v);if(!x)return null;var U,W=x,H=x.x,J=x.y,oe=1/0;w=x;do E>=w.x&&w.x>=H&&E!==w.x&&jc(A<J?E:L,A,H,J,A<J?L:E,A,w.x,w.y)&&(U=Math.abs(A-w.y)/(E-w.x),Hh(w,f)&&(U<oe||U===oe&&(w.x>x.x||w.x===x.x&&jM(x,w)))&&(x=w,oe=U)),w=w.next;while(w!==W);return x}(s,n);if(!a)return n;var h=V1(a,s);return Dl(h,h.next),Dl(a,a.next)}function jM(s,n){return On(s.prev,s,n.prev)<0&&On(n.next,s,s.next)<0}function ky(s,n,a,h,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function UM(s){var n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function jc(s,n,a,h,f,v,x,w){return(f-x)*(n-w)>=(s-x)*(v-w)&&(s-x)*(h-w)>=(a-x)*(n-w)&&(a-x)*(v-w)>=(f-x)*(h-w)}function $M(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,h){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==h.i&&f.next.i!==h.i&&N1(f,f.next,a,h))return!0;f=f.next}while(f!==a);return!1}(s,n)&&(Hh(s,n)&&Hh(n,s)&&function(a,h){var f=a,v=!1,x=(a.x+h.x)/2,w=(a.y+h.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&x<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==a);return v}(s,n)&&(On(s.prev,s,n.prev)||On(s,n.prev,n))||yf(s,n)&&On(s.prev,s,s.next)>0&&On(n.prev,n,n.next)>0)}function On(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function yf(s,n){return s.x===n.x&&s.y===n.y}function N1(s,n,a,h){var f=_f(On(s,n,a)),v=_f(On(s,n,h)),x=_f(On(a,h,s)),w=_f(On(a,h,n));return f!==v&&x!==w||!(f!==0||!vf(s,a,n))||!(v!==0||!vf(s,h,n))||!(x!==0||!vf(a,s,h))||!(w!==0||!vf(a,n,h))}function vf(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function _f(s){return s>0?1:s<0?-1:0}function Hh(s,n){return On(s.prev,s,s.next)<0?On(s,n,s.next)>=0&&On(s,s.prev,n)>=0:On(s,n,s.prev)<0||On(s,s.next,n)<0}function V1(s,n){var a=new Ay(s.i,s.x,s.y),h=new Ay(n.i,n.x,n.y),f=s.next,v=n.prev;return s.next=n,n.prev=s,a.next=f,f.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function j1(s,n,a,h){var f=new Ay(s,n,a);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function Kh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ay(s,n,a){this.i=s,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function My(s,n,a,h){for(var f=0,v=n,x=a-h;v<a;v+=h)f+=(s[x]-s[v])*(s[v+1]+s[x+1]),x=v;return f}Py.exports=gf,Py.exports.default=gf,gf.deviation=function(s,n,a,h){var f=n&&n.length,v=Math.abs(My(s,0,f?n[0]*a:s.length,a));if(f)for(var x=0,w=n.length;x<w;x++)v-=Math.abs(My(s,n[x]*a,x<w-1?n[x+1]*a:s.length,a));var E=0;for(x=0;x<h.length;x+=3){var A=h[x]*a,L=h[x+1]*a,F=h[x+2]*a;E+=Math.abs((s[A]-s[F])*(s[L+1]-s[A+1])-(s[A]-s[L])*(s[F+1]-s[A+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},gf.flatten=function(s){for(var n=s[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,f=0;f<s.length;f++){for(var v=0;v<s[f].length;v++)for(var x=0;x<n;x++)a.vertices.push(s[f][v][x]);f>0&&a.holes.push(h+=s[f-1].length)}return a};var U1=b(Py.exports);function GM(s,n,a,h,f){$1(s,n,a,h||s.length-1,f||qM)}function $1(s,n,a,h,f){for(;h>a;){if(h-a>600){var v=h-a+1,x=n-a+1,w=Math.log(v),E=.5*Math.exp(2*w/3),A=.5*Math.sqrt(w*E*(v-E)/v)*(x-v/2<0?-1:1);$1(s,n,Math.max(a,Math.floor(n-x*E/v+A)),Math.min(h,Math.floor(n+(v-x)*E/v+A)),f)}var L=s[n],F=a,U=h;for(Xh(s,a,n),f(s[h],L)>0&&Xh(s,a,h);F<U;){for(Xh(s,F,U),F++,U--;f(s[F],L)<0;)F++;for(;f(s[U],L)>0;)U--}f(s[a],L)===0?Xh(s,a,U):Xh(s,++U,h),U<=n&&(a=U+1),n<=U&&(h=U-1)}}function Xh(s,n,a){var h=s[n];s[n]=s[a],s[a]=h}function qM(s,n){return s<n?-1:s>n?1:0}function Iy(s,n){const a=s.length;if(a<=1)return[s];const h=[];let f,v;for(let x=0;x<a;x++){const w=mt(s[x]);w!==0&&(s[x].area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(f&&h.push(f),f=[s[x]]):f.push(s[x]))}if(f&&h.push(f),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(GM(h[x],n,1,h[x].length-1,ZM),h[x]=h[x].slice(0,n));return h}function ZM(s,n){return n.area-s.area}function Dy(s,n,a){const h=a.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(f=!0);const w=x.constantOr(null);w&&(f=!0,h[w.to]=!0,h[w.from]=!0)}return f}function Ly(s,n,a,h,f){const v=f.patternDependencies;for(const x of n){const w=x.paint.get(`${s}-pattern`).value;if(w.kind!=="constant"){let E=w.evaluate({zoom:h-1},a,{},f.availableImages),A=w.evaluate({zoom:h},a,{},f.availableImages),L=w.evaluate({zoom:h+1},a,{},f.availableImages);E=E&&E.name?E.name:E,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,v[E]=!0,v[A]=!0,v[L]=!0,a.patterns[x.id]={min:E,mid:A,max:L}}}return a}class zy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rt,this.indexArray=new hr,this.indexArray2=new Hn,this.programConfigurations=new zs(n.layers,n.zoom),this.segments=new un,this.segments2=new un,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Dy("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:E,index:A,sourceLayerIndex:L}of n){const F=this.layers[0]._featureFilter.needGeometry,U=Il(w,F);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),U,h))continue;const W=v?f.evaluate(U,{},h,a.availableImages):void 0,H={id:E,properties:w.properties,type:w.type,sourceLayerIndex:L,index:A,geometry:F?U.geometry:Ml(w),patterns:{},sortKey:W};x.push(H)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:A,sourceLayerIndex:L}=w;if(this.hasPattern){const F=Ly("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(F)}else this.addFeature(w,E,A,h,{});a.featureIndex.insert(n[A].feature,E,A,L,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zM),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,f,v){for(const x of Iy(a,500)){let w=0;for(const W of x)w+=W.length;const E=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),A=E.vertexLength,L=[],F=[];for(const W of x){if(W.length===0)continue;W!==x[0]&&F.push(L.length/2);const H=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),J=H.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(J+W.length-1,J),L.push(W[0].x),L.push(W[0].y);for(let oe=1;oe<W.length;oe++)this.layoutVertexArray.emplaceBack(W[oe].x,W[oe].y),this.indexArray2.emplaceBack(J+oe-1,J+oe),L.push(W[oe].x),L.push(W[oe].y);H.vertexLength+=W.length,H.primitiveLength+=W.length}const U=U1(L,F);for(let W=0;W<U.length;W+=3)this.indexArray.emplaceBack(A+U[W],A+U[W+1],A+U[W+2]);E.vertexLength+=w,E.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}let G1,q1;rt("FillBucket",zy,{omit:["layers","patternFeatures"]});var WM={get paint(){return q1=q1||new Rn({"fill-antialias":new ft(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Tt(Ae.paint_fill["fill-opacity"]),"fill-color":new Tt(Ae.paint_fill["fill-color"]),"fill-outline-color":new Tt(Ae.paint_fill["fill-outline-color"]),"fill-translate":new ft(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new ft(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pl(Ae.paint_fill["fill-pattern"])})},get layout(){return G1=G1||new Rn({"fill-sort-key":new Tt(Ae.layout_fill["fill-sort-key"])})}};class HM extends zi{constructor(n){super(n,WM)}recalculate(n,a){super.recalculate(n,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new zy(n)}queryRadius(){return pf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,a,h,f,v,x,w){return E1(ff(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),f)}isTileClipped(){return!0}}const KM=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),XM=_n([{name:"a_centroid",components:2,type:"Int16"}],4),{members:YM}=KM;var ya={},QM=I,Z1=Uc;function Uc(s,n,a,h,f){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=f,s.readFields(JM,this,n)}function JM(s,n,a){s==1?n.id=a.readVarint():s==2?function(h,f){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=f._keys[h.readVarint()],w=f._values[h.readVarint()];f.properties[x]=w}}(a,n):s==3?n.type=a.readVarint():s==4&&(n._geometry=a.pos)}function eI(s){for(var n,a,h=0,f=0,v=s.length,x=v-1;f<v;x=f++)h+=((a=s[x]).x-(n=s[f]).x)*(n.y+a.y);return h}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,a=s.readVarint()+s.pos,h=1,f=0,v=0,x=0,w=[];s.pos<a;){if(f<=0){var E=s.readVarint();h=7&E,f=E>>3}if(f--,h===1||h===2)v+=s.readSVarint(),x+=s.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new QM(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Uc.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,a=1,h=0,f=0,v=0,x=1/0,w=-1/0,E=1/0,A=-1/0;s.pos<n;){if(h<=0){var L=s.readVarint();a=7&L,h=L>>3}if(h--,a===1||a===2)(f+=s.readSVarint())<x&&(x=f),f>w&&(w=f),(v+=s.readSVarint())<E&&(E=v),v>A&&(A=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,E,w,A]},Uc.prototype.toGeoJSON=function(s,n,a){var h,f,v=this.extent*Math.pow(2,a),x=this.extent*s,w=this.extent*n,E=this.loadGeometry(),A=Uc.types[this.type];function L(W){for(var H=0;H<W.length;H++){var J=W[H];W[H]=[360*(J.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var F=[];for(h=0;h<E.length;h++)F[h]=E[h][0];L(E=F);break;case 2:for(h=0;h<E.length;h++)L(E[h]);break;case 3:for(E=function(W){var H=W.length;if(H<=1)return[W];for(var J,oe,ce=[],ve=0;ve<H;ve++){var pe=eI(W[ve]);pe!==0&&(oe===void 0&&(oe=pe<0),oe===pe<0?(J&&ce.push(J),J=[W[ve]]):J.push(W[ve]))}return J&&ce.push(J),ce}(E),h=0;h<E.length;h++)for(f=0;f<E[h].length;f++)L(E[h][f])}E.length===1?E=E[0]:A="Multi"+A;var U={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(U.id=this.id),U};var tI=Z1,W1=H1;function H1(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(nI,this,n),this.length=this._features.length}function nI(s,n,a){s===15?n.version=a.readVarint():s===1?n.name=a.readString():s===5?n.extent=a.readVarint():s===2?n._features.push(a.pos):s===3?n._keys.push(a.readString()):s===4&&n._values.push(function(h){for(var f=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(a))}H1.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new tI(this._pbf,n,this.extent,this._keys,this._values)};var rI=W1;function iI(s,n,a){if(s===3){var h=new rI(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}ya.VectorTile=function(s,n){this.layers=s.readFields(iI,{},n)},ya.VectorTileFeature=Z1,ya.VectorTileLayer=W1;const sI=ya.VectorTileFeature.types,Ry=Math.pow(2,13);function Yh(s,n,a,h,f,v,x,w){s.emplaceBack(n,a,2*Math.floor(h*Ry)+x,f*Ry*2,v*Ry*2,Math.round(w))}class Fy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ke,this.centroidVertexArray=new Ve,this.indexArray=new hr,this.programConfigurations=new zs(n.layers,n.zoom),this.segments=new un,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=Dy("fill-extrusion",this.layers,a);for(const{feature:f,id:v,index:x,sourceLayerIndex:w}of n){const E=this.layers[0]._featureFilter.needGeometry,A=Il(f,E);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),A,h))continue;const L={id:v,sourceLayerIndex:w,index:x,geometry:E?A.geometry:Ml(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Ly("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,x,h,{}),a.featureIndex.insert(f,L.geometry,x,w,this.index,!0)}}addFeatures(n,a,h){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,YM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,XM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,h,f,v){const x={x:0,y:0,vertexCount:0};for(const w of Iy(a,500)){let E=0;for(const H of w)E+=H.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const H of w){if(H.length===0||aI(H))continue;let J=0;for(let oe=0;oe<H.length;oe++){const ce=H[oe];if(oe>=1){const ve=H[oe-1];if(!oI(ce,ve)){A.vertexLength+4>un.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=ce.sub(ve)._perp()._unit(),xe=ve.dist(ce);J+xe>32768&&(J=0),Yh(this.layoutVertexArray,ce.x,ce.y,pe.x,pe.y,0,0,J),Yh(this.layoutVertexArray,ce.x,ce.y,pe.x,pe.y,0,1,J),x.x+=2*ce.x,x.y+=2*ce.y,x.vertexCount+=2,J+=xe,Yh(this.layoutVertexArray,ve.x,ve.y,pe.x,pe.y,0,0,J),Yh(this.layoutVertexArray,ve.x,ve.y,pe.x,pe.y,0,1,J),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2;const Te=A.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+E>un.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),sI[n.type]!=="Polygon")continue;const L=[],F=[],U=A.vertexLength;for(const H of w)if(H.length!==0){H!==w[0]&&F.push(L.length/2);for(let J=0;J<H.length;J++){const oe=H[J];Yh(this.layoutVertexArray,oe.x,oe.y,0,0,1,1,0),x.x+=oe.x,x.y+=oe.y,x.vertexCount+=1,L.push(oe.x),L.push(oe.y)}}const W=U1(L,F);for(let H=0;H<W.length;H+=3)this.indexArray.emplaceBack(U+W[H],U+W[H+2],U+W[H+1]);A.primitiveLength+=W.length/3,A.vertexLength+=E}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}function oI(s,n){return s.x===n.x&&(s.x<0||s.x>Gn)||s.y===n.y&&(s.y<0||s.y>Gn)}function aI(s){return s.every(n=>n.x<0)||s.every(n=>n.x>Gn)||s.every(n=>n.y<0)||s.every(n=>n.y>Gn)}let K1;rt("FillExtrusionBucket",Fy,{omit:["layers","features"]});var lI={get paint(){return K1=K1||new Rn({"fill-extrusion-opacity":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pl(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tt(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ft(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class cI extends zi{constructor(n){super(n,lI)}createBucket(n){return new Fy(n)}queryRadius(){return pf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,a,h,f,v,x,w,E){const A=ff(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),L=this.paint.get("fill-extrusion-height").evaluate(a,h),F=this.paint.get("fill-extrusion-base").evaluate(a,h),U=function(H,J,oe,ce){const ve=[];for(const pe of H){const xe=[pe.x,pe.y,0,1];mf(xe,xe,J),ve.push(new k(xe[0]/xe[3],xe[1]/xe[3]))}return ve}(A,E),W=function(H,J,oe,ce){const ve=[],pe=[],xe=ce[8]*J,Te=ce[9]*J,Le=ce[10]*J,et=ce[11]*J,ct=ce[8]*oe,Qe=ce[9]*oe,Xe=ce[10]*oe,Ue=ce[11]*oe;for(const st of H){const qe=[],Ne=[];for(const wt of st){const ht=wt.x,Lt=wt.y,hn=ce[0]*ht+ce[4]*Lt+ce[12],mn=ce[1]*ht+ce[5]*Lt+ce[13],Yn=ce[2]*ht+ce[6]*Lt+ce[14],Fi=ce[3]*ht+ce[7]*Lt+ce[15],Zr=Yn+Le,qn=Fi+et,pr=hn+ct,Sr=mn+Qe,Wr=Yn+Xe,Hr=Fi+Ue,Qn=new k((hn+xe)/qn,(mn+Te)/qn);Qn.z=Zr/qn,qe.push(Qn);const Jn=new k(pr/Hr,Sr/Hr);Jn.z=Wr/Hr,Ne.push(Jn)}ve.push(qe),pe.push(Ne)}return[ve,pe]}(f,F,L,E);return function(H,J,oe){let ce=1/0;E1(oe,J)&&(ce=X1(oe,J[0]));for(let ve=0;ve<J.length;ve++){const pe=J[ve],xe=H[ve];for(let Te=0;Te<pe.length-1;Te++){const Le=pe[Te],et=[Le,pe[Te+1],xe[Te+1],xe[Te],Le];C1(oe,et)&&(ce=Math.min(ce,X1(oe,et)))}}return ce!==1/0&&ce}(W[0],W[1],U)}}function Qh(s,n){return s.x*n.x+s.y*n.y}function X1(s,n){if(s.length===1){let a=0;const h=n[a++];let f;for(;!f||h.equals(f);)if(f=n[a++],!f)return 1/0;for(;a<n.length;a++){const v=n[a],x=s[0],w=f.sub(h),E=v.sub(h),A=x.sub(h),L=Qh(w,w),F=Qh(w,E),U=Qh(E,E),W=Qh(A,w),H=Qh(A,E),J=L*U-F*F,oe=(U*W-F*H)/J,ce=(L*H-F*W)/J,ve=h.z*(1-oe-ce)+f.z*oe+v.z*ce;if(isFinite(ve))return ve}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const uI=_n([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hI}=uI,dI=_n([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:pI}=dI,fI=ya.VectorTileFeature.types,mI=Math.cos(Math.PI/180*37.5),Y1=Math.pow(2,14)/.5;class Oy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ct,this.layoutVertexArray2=new ut,this.indexArray=new hr,this.programConfigurations=new zs(n.layers,n.zoom),this.segments=new un,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Dy("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:E,index:A,sourceLayerIndex:L}of n){const F=this.layers[0]._featureFilter.needGeometry,U=Il(w,F);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),U,h))continue;const W=v?f.evaluate(U,{},h):void 0,H={id:E,properties:w.properties,type:w.type,sourceLayerIndex:L,index:A,geometry:F?U.geometry:Ml(w),patterns:{},sortKey:W};x.push(H)}v&&x.sort((w,E)=>w.sortKey-E.sortKey);for(const w of x){const{geometry:E,index:A,sourceLayerIndex:L}=w;if(this.hasPattern){const F=Ly("line",this.layers,w,this.zoom,a);this.patternFeatures.push(F)}else this.addFeature(w,E,A,h,{});a.featureIndex.insert(n[A].feature,E,A,L,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,pI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,hI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,f,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(n,{}),E=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const F of a)this.addLine(F,n,w,E,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}addLine(n,a,h,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<n.length-1;ce++)this.totalDistance+=n[ce].dist(n[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=fI[a.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let A=0;for(;A<E-1&&n[A].equals(n[A+1]);)A++;if(E<(w?3:2))return;h==="bevel"&&(v=1.05);const L=this.overscaling<=16?15*Gn/(512*this.overscaling):0,F=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let U,W,H,J,oe;this.e1=this.e2=-1,w&&(U=n[E-2],oe=n[A].sub(U)._unit()._perp());for(let ce=A;ce<E;ce++){if(H=ce===E-1?w?n[A+1]:void 0:n[ce+1],H&&n[ce].equals(H))continue;oe&&(J=oe),U&&(W=U),U=n[ce],oe=H?H.sub(U)._unit()._perp():J,J=J||oe;let ve=J.add(oe);ve.x===0&&ve.y===0||ve._unit();const pe=J.x*oe.x+J.y*oe.y,xe=ve.x*oe.x+ve.y*oe.y,Te=xe!==0?1/xe:1/0,Le=2*Math.sqrt(2-2*xe),et=xe<mI&&W&&H,ct=J.x*oe.y-J.y*oe.x>0;if(et&&ce>A){const Ue=U.dist(W);if(Ue>2*L){const st=U.sub(U.sub(W)._mult(L/Ue)._round());this.updateDistance(W,st),this.addCurrentVertex(st,J,0,0,F),W=st}}const Qe=W&&H;let Xe=Qe?h:w?"butt":f;if(Qe&&Xe==="round"&&(Te<x?Xe="miter":Te<=2&&(Xe="fakeround")),Xe==="miter"&&Te>v&&(Xe="bevel"),Xe==="bevel"&&(Te>2&&(Xe="flipbevel"),Te<v&&(Xe="miter")),W&&this.updateDistance(W,U),Xe==="miter")ve._mult(Te),this.addCurrentVertex(U,ve,0,0,F);else if(Xe==="flipbevel"){if(Te>100)ve=oe.mult(-1);else{const Ue=Te*J.add(oe).mag()/J.sub(oe).mag();ve._perp()._mult(Ue*(ct?-1:1))}this.addCurrentVertex(U,ve,0,0,F),this.addCurrentVertex(U,ve.mult(-1),0,0,F)}else if(Xe==="bevel"||Xe==="fakeround"){const Ue=-Math.sqrt(Te*Te-1),st=ct?Ue:0,qe=ct?0:Ue;if(W&&this.addCurrentVertex(U,J,st,qe,F),Xe==="fakeround"){const Ne=Math.round(180*Le/Math.PI/20);for(let wt=1;wt<Ne;wt++){let ht=wt/Ne;if(ht!==.5){const hn=ht-.5;ht+=ht*hn*(ht-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*hn*hn+(.848013+pe*(.215638*pe-1.06021)))}const Lt=oe.sub(J)._mult(ht)._add(J)._unit()._mult(ct?-1:1);this.addHalfVertex(U,Lt.x,Lt.y,!1,ct,0,F)}}H&&this.addCurrentVertex(U,oe,-st,-qe,F)}else if(Xe==="butt")this.addCurrentVertex(U,ve,0,0,F);else if(Xe==="square"){const Ue=W?1:-1;this.addCurrentVertex(U,ve,Ue,Ue,F)}else Xe==="round"&&(W&&(this.addCurrentVertex(U,J,0,0,F),this.addCurrentVertex(U,J,1,1,F,!0)),H&&(this.addCurrentVertex(U,oe,-1,-1,F,!0),this.addCurrentVertex(U,oe,0,0,F)));if(et&&ce<E-1){const Ue=U.dist(H);if(Ue>2*L){const st=U.add(H.sub(U)._mult(L/Ue)._round());this.updateDistance(U,st),this.addCurrentVertex(st,oe,0,0,F),U=st}}}}addCurrentVertex(n,a,h,f,v,x=!1){const w=a.y*f-a.x,E=-a.y-a.x*f;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(n,w,E,x,!0,-f,v),this.distance>Y1/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,h,f,v,x))}addHalfVertex({x:n,y:a},h,f,v,x,w,E){const A=.5*(this.lineClips?this.scaledDistance*(Y1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),E.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let Q1,J1;rt("LineBucket",Oy,{omit:["layers","patternFeatures"]});var ew={get paint(){return J1=J1||new Rn({"line-opacity":new Tt(Ae.paint_line["line-opacity"]),"line-color":new Tt(Ae.paint_line["line-color"]),"line-translate":new ft(Ae.paint_line["line-translate"]),"line-translate-anchor":new ft(Ae.paint_line["line-translate-anchor"]),"line-width":new Tt(Ae.paint_line["line-width"]),"line-gap-width":new Tt(Ae.paint_line["line-gap-width"]),"line-offset":new Tt(Ae.paint_line["line-offset"]),"line-blur":new Tt(Ae.paint_line["line-blur"]),"line-dasharray":new Rh(Ae.paint_line["line-dasharray"]),"line-pattern":new Pl(Ae.paint_line["line-pattern"]),"line-gradient":new Fh(Ae.paint_line["line-gradient"])})},get layout(){return Q1=Q1||new Rn({"line-cap":new ft(Ae.layout_line["line-cap"]),"line-join":new Tt(Ae.layout_line["line-join"]),"line-miter-limit":new ft(Ae.layout_line["line-miter-limit"]),"line-round-limit":new ft(Ae.layout_line["line-round-limit"]),"line-sort-key":new Tt(Ae.layout_line["line-sort-key"])})}};class gI extends Tt{possiblyEvaluate(n,a){return a=new cn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,h,f){return a=we({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,h,f)}}let xf;class yI extends zi{constructor(n){super(n,ew),this.gradientVersion=0,xf||(xf=new gI(ew.paint.properties["line-width"].specification),xf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Js,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=xf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Oy(n)}queryRadius(n){const a=n,h=tw(Gh("line-width",this,a),Gh("line-gap-width",this,a)),f=Gh("line-offset",this,a);return h/2+Math.abs(f)+pf(this.paint.get("line-translate"))}queryIntersectsFeature(n,a,h,f,v,x,w){const E=ff(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),A=w/2*tw(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),L=this.paint.get("line-offset").evaluate(a,h);return L&&(f=function(F,U){const W=[];for(let H=0;H<F.length;H++){const J=F[H],oe=[];for(let ce=0;ce<J.length;ce++){const ve=J[ce-1],pe=J[ce],xe=J[ce+1],Te=ce===0?new k(0,0):pe.sub(ve)._unit()._perp(),Le=ce===J.length-1?new k(0,0):xe.sub(pe)._unit()._perp(),et=Te._add(Le)._unit(),ct=et.x*Le.x+et.y*Le.y;ct!==0&&et._mult(1/ct),oe.push(et._mult(U)._add(pe))}W.push(oe)}return W}(f,L*w)),function(F,U,W){for(let H=0;H<U.length;H++){const J=U[H];if(F.length>=3){for(let oe=0;oe<J.length;oe++)if(Nc(F,J[oe]))return!0}if(SM(F,J,W))return!0}return!1}(E,f,A)}isTileClipped(){return!0}}function tw(s,n){return n>0?n+2*s:s}const vI=_n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_I=_n([{name:"a_projected_pos",components:3,type:"Float32"}],4);_n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xI=_n([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nw=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wI=_n([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bI(s,n,a){return s.sections.forEach(h=>{h.text=function(f,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),pi.applyArabicShaping&&(f=pi.applyArabicShaping(f)),f}(h.text,n,a)}),s}_n([{name:"triangle",components:3,type:"Uint16"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),_n([{type:"Float32",name:"offsetX"}]),_n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),_n([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Jh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Xn=24,rw=rn,iw=function(s,n,a,h,f){var v,x,w=8*f-h-1,E=(1<<w)-1,A=E>>1,L=-7,F=f-1,U=-1,W=s[n+F];for(F+=U,v=W&(1<<-L)-1,W>>=-L,L+=w;L>0;v=256*v+s[n+F],F+=U,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=h;L>0;x=256*x+s[n+F],F+=U,L-=8);if(v===0)v=1-A;else{if(v===E)return x?NaN:1/0*(W?-1:1);x+=Math.pow(2,h),v-=A}return(W?-1:1)*x*Math.pow(2,v-h)},sw=function(s,n,a,h,f,v){var x,w,E,A=8*v-f-1,L=(1<<A)-1,F=L>>1,U=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=0,H=1,J=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,x=L):(x=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-x))<1&&(x--,E*=2),(n+=x+F>=1?U/E:U*Math.pow(2,1-F))*E>=2&&(x++,E/=2),x+F>=L?(w=0,x=L):x+F>=1?(w=(n*E-1)*Math.pow(2,f),x+=F):(w=n*Math.pow(2,F-1)*Math.pow(2,f),x=0));f>=8;s[a+W]=255&w,W+=H,w/=256,f-=8);for(x=x<<f|w,A+=f;A>0;s[a+W]=255&x,W+=H,x/=256,A-=8);s[a+W-H]|=128*J};function rn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}rn.Varint=0,rn.Fixed64=1,rn.Bytes=2,rn.Fixed32=5;var By=4294967296,ow=1/By,aw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zo(s){return s.type===rn.Bytes?s.readVarint()+s.pos:s.pos+1}function $c(s,n,a){return a?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function lw(s,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var f=a.pos-1;f>=s;f--)a.buf[f+h]=a.buf[f]}function SI(s,n){for(var a=0;a<s.length;a++)n.writeVarint(s[a])}function TI(s,n){for(var a=0;a<s.length;a++)n.writeSVarint(s[a])}function CI(s,n){for(var a=0;a<s.length;a++)n.writeFloat(s[a])}function EI(s,n){for(var a=0;a<s.length;a++)n.writeDouble(s[a])}function PI(s,n){for(var a=0;a<s.length;a++)n.writeBoolean(s[a])}function kI(s,n){for(var a=0;a<s.length;a++)n.writeFixed32(s[a])}function AI(s,n){for(var a=0;a<s.length;a++)n.writeSFixed32(s[a])}function MI(s,n){for(var a=0;a<s.length;a++)n.writeFixed64(s[a])}function II(s,n){for(var a=0;a<s.length;a++)n.writeSFixed64(s[a])}function wf(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function Gc(s,n,a){s[a]=n,s[a+1]=n>>>8,s[a+2]=n>>>16,s[a+3]=n>>>24}function cw(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}rn.prototype={destroy:function(){this.buf=null},readFields:function(s,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),f=h>>3,v=this.pos;this.type=7&h,s(f,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=wf(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=cw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=wf(this.buf,this.pos)+wf(this.buf,this.pos+4)*By;return this.pos+=8,s},readSFixed64:function(){var s=wf(this.buf,this.pos)+cw(this.buf,this.pos+4)*By;return this.pos+=8,s},readFloat:function(){var s=iw(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=iw(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(f,v,x){var w,E,A=x.buf;if(w=(112&(E=A[x.pos++]))>>4,E<128||(w|=(127&(E=A[x.pos++]))<<3,E<128)||(w|=(127&(E=A[x.pos++]))<<10,E<128)||(w|=(127&(E=A[x.pos++]))<<17,E<128)||(w|=(127&(E=A[x.pos++]))<<24,E<128)||(w|=(1&(E=A[x.pos++]))<<31,E<128))return $c(f,w,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&aw?function(a,h,f){return aw.decode(a.subarray(h,f))}(this.buf,n,s):function(a,h,f){for(var v="",x=h;x<f;){var w,E,A,L=a[x],F=null,U=L>239?4:L>223?3:L>191?2:1;if(x+U>f)break;U===1?L<128&&(F=L):U===2?(192&(w=a[x+1]))==128&&(F=(31&L)<<6|63&w)<=127&&(F=null):U===3?(E=a[x+2],(192&(w=a[x+1]))==128&&(192&E)==128&&((F=(15&L)<<12|(63&w)<<6|63&E)<=2047||F>=55296&&F<=57343)&&(F=null)):U===4&&(E=a[x+2],A=a[x+3],(192&(w=a[x+1]))==128&&(192&E)==128&&(192&A)==128&&((F=(15&L)<<18|(63&w)<<12|(63&E)<<6|63&A)<=65535||F>=1114112)&&(F=null)),F===null?(F=65533,U=1):F>65535&&(F-=65536,v+=String.fromCharCode(F>>>10&1023|55296),F=56320|1023&F),v+=String.fromCharCode(F),x+=U}return v}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==rn.Bytes)return s.push(this.readVarint(n));var a=zo(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==rn.Bytes)return s.push(this.readSVarint());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==rn.Bytes)return s.push(this.readBoolean());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==rn.Bytes)return s.push(this.readFloat());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==rn.Bytes)return s.push(this.readDouble());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==rn.Bytes)return s.push(this.readFixed32());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==rn.Bytes)return s.push(this.readSFixed32());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==rn.Bytes)return s.push(this.readFixed64());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==rn.Bytes)return s.push(this.readSFixed64());var n=zo(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===rn.Varint)for(;this.buf[this.pos++]>127;);else if(n===rn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===rn.Fixed32)this.pos+=4;else{if(n!==rn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Gc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Gc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Gc(this.buf,-1&s,this.pos),Gc(this.buf,Math.floor(s*ow),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Gc(this.buf,-1&s,this.pos),Gc(this.buf,Math.floor(s*ow),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,a){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(h,f,v){for(var x,w,E=0;E<f.length;E++){if((x=f.charCodeAt(E))>55295&&x<57344){if(!w){x>56319||E+1===f.length?(h[v++]=239,h[v++]=191,h[v++]=189):w=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[v++]=239,h[v++]=191,h[v++]=189,w=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,s,this.pos);var a=this.pos-n;a>=128&&lw(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),sw(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),sw(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,n){this.pos++;var a=this.pos;s(n,this);var h=this.pos-a;h>=128&&lw(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,n,a){this.writeTag(s,rn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,SI,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,TI,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,PI,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,CI,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,EI,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,kI,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,AI,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,MI,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,II,n)},writeBytesField:function(s,n){this.writeTag(s,rn.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,rn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,rn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,rn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,rn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,rn.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,rn.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,rn.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,rn.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,rn.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var Ny=b(rw);const Vy=3;function DI(s,n,a){s===1&&a.readMessage(LI,n)}function LI(s,n,a){if(s===3){const{id:h,bitmap:f,width:v,height:x,left:w,top:E,advance:A}=a.readMessage(zI,{});n.push({id:h,bitmap:new Zh({width:v+2*Vy,height:x+2*Vy},f),metrics:{width:v,height:x,left:w,top:E,advance:A}})}}function zI(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}const uw=Vy;function hw(s){let n=0,a=0;for(const x of s)n+=x.w*x.h,a=Math.max(a,x.w);s.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let f=0,v=0;for(const x of s)for(let w=h.length-1;w>=0;w--){const E=h[w];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===E.w&&x.h===E.h){const A=h.pop();w<h.length&&(h[w]=A)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(h.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const mi=1;class jy{constructor(n,{pixelRatio:a,version:h,stretchX:f,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=f,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+mi,this.paddedRect.y+mi]}get br(){return[this.paddedRect.x+this.paddedRect.w-mi,this.paddedRect.y+this.paddedRect.h-mi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mi)/this.pixelRatio,(this.paddedRect.h-2*mi)/this.pixelRatio]}}class dw{constructor(n,a){const h={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,f,v);const{w:x,h:w}=hw(v),E=new Wi({width:x||1,height:w||1});for(const A in n){const L=n[A],F=h[A].paddedRect;Wi.copy(L.data,E,{x:0,y:0},{x:F.x+mi,y:F.y+mi},L.data)}for(const A in a){const L=a[A],F=f[A].paddedRect,U=F.x+mi,W=F.y+mi,H=L.data.width,J=L.data.height;Wi.copy(L.data,E,{x:0,y:0},{x:U,y:W},L.data),Wi.copy(L.data,E,{x:0,y:J-1},{x:U,y:W-1},{width:H,height:1}),Wi.copy(L.data,E,{x:0,y:0},{x:U,y:W+J},{width:H,height:1}),Wi.copy(L.data,E,{x:H-1,y:0},{x:U-1,y:W},{width:1,height:J}),Wi.copy(L.data,E,{x:0,y:0},{x:U+H,y:W},{width:1,height:J})}this.image=E,this.iconPositions=h,this.patternPositions=f}addImages(n,a,h){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*mi,h:v.data.height+2*mi};h.push(x),a[f]=new jy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[f,v]=n.tl;h.update(a.data,void 0,{x:f,y:v})}}var va;rt("ImagePosition",jy),rt("ImageAtlas",dw),l.ai=void 0,(va=l.ai||(l.ai={}))[va.none=0]="none",va[va.horizontal=1]="horizontal",va[va.vertical=2]="vertical",va[va.horizontalOnly=3]="horizontalOnly";const ed=-17;class td{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new td;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new td;return a.imageName=n,a}}class qc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new qc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=f&&tf(f)&&!Jh[n[h+1]]||v&&tf(v)&&!Jh[n[h-1]]||!Jh[n[h]]?n[h]:Jh[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Sf[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Sf[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new qc;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(td.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Ze("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(td.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bf(s,n,a,h,f,v,x,w,E,A,L,F,U,W,H,J){const oe=qc.fromFeature(s,f);let ce;F===l.ai.vertical&&oe.verticalizePunctuation();const{processBidirectionalText:ve,processStyledBidirectionalText:pe}=pi;if(ve&&oe.sections.length===1){ce=[];const Le=ve(oe.toString(),Uy(oe,A,v,n,h,W,H));for(const et of Le){const ct=new qc;ct.text=et,ct.sections=oe.sections;for(let Qe=0;Qe<et.length;Qe++)ct.sectionIndex.push(0);ce.push(ct)}}else if(pe){ce=[];const Le=pe(oe.text,oe.sectionIndex,Uy(oe,A,v,n,h,W,H));for(const et of Le){const ct=new qc;ct.text=et[0],ct.sectionIndex=et[1],ct.sections=oe.sections,ce.push(ct)}}else ce=function(Le,et){const ct=[],Qe=Le.text;let Xe=0;for(const Ue of et)ct.push(Le.substring(Xe,Ue)),Xe=Ue;return Xe<Qe.length&&ct.push(Le.substring(Xe,Qe.length)),ct}(oe,Uy(oe,A,v,n,h,W,H));const xe=[],Te={positionedLines:xe,text:oe.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:F,iconsInText:!1,verticalizable:!1};return function(Le,et,ct,Qe,Xe,Ue,st,qe,Ne,wt,ht,Lt){let hn=0,mn=ed,Yn=0,Fi=0;const Zr=qe==="right"?1:qe==="left"?0:.5;let qn=0;for(const Qn of Xe){Qn.trim();const Jn=Qn.getMaxScale(),Ir=(Jn-1)*Xn,Kr={positionedGlyphs:[],lineOffset:0};Le.positionedLines[qn]=Kr;const Dr=Kr.positionedGlyphs;let gi=0;if(!Qn.length()){mn+=Ue,++qn;continue}for(let er=0;er<Qn.length();er++){const Ot=Qn.getSection(er),Lr=Qn.getSectionIndex(er),Tr=Qn.getCharCode(er);let tr=0,gs=null,Rs=null,Fs=null,Ro=Xn;const ys=!(Ne===l.ai.horizontal||!ht&&!Ph(Tr)||ht&&(Sf[Tr]||(pr=Tr,Je.Arabic(pr)||Je["Arabic Supplement"](pr)||Je["Arabic Extended-A"](pr)||Je["Arabic Presentation Forms-A"](pr)||Je["Arabic Presentation Forms-B"](pr))));if(Ot.imageName){const Ki=Qe[Ot.imageName];if(!Ki)continue;Fs=Ot.imageName,Le.iconsInText=Le.iconsInText||!0,Rs=Ki.paddedRect;const vi=Ki.displaySize;Ot.scale=Ot.scale*Xn/Lt,gs={width:vi[0],height:vi[1],left:mi,top:-uw,advance:ys?vi[1]:vi[0]},tr=Ir+(Xn-vi[1]*Ot.scale),Ro=gs.advance;const Fo=ys?vi[0]*Ot.scale-Xn*Jn:vi[1]*Ot.scale-Xn*Jn;Fo>0&&Fo>gi&&(gi=Fo)}else{const Ki=ct[Ot.fontStack],vi=Ki&&Ki[Tr];if(vi&&vi.rect)Rs=vi.rect,gs=vi.metrics;else{const Fo=et[Ot.fontStack],od=Fo&&Fo[Tr];if(!od)continue;gs=od.metrics}tr=(Jn-Ot.scale)*Xn}ys?(Le.verticalizable=!0,Dr.push({glyph:Tr,imageName:Fs,x:hn,y:mn+tr,vertical:ys,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:Lr,metrics:gs,rect:Rs}),hn+=Ro*Ot.scale+wt):(Dr.push({glyph:Tr,imageName:Fs,x:hn,y:mn+tr,vertical:ys,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:Lr,metrics:gs,rect:Rs}),hn+=gs.advance*Ot.scale+wt)}Dr.length!==0&&(Yn=Math.max(hn-wt,Yn),OI(Dr,0,Dr.length-1,Zr,gi)),hn=0;const yi=Ue*Jn+gi;Kr.lineOffset=Math.max(gi,Ir),mn+=yi,Fi=Math.max(yi,Fi),++qn}var pr;const Sr=mn-ed,{horizontalAlign:Wr,verticalAlign:Hr}=$y(st);(function(Qn,Jn,Ir,Kr,Dr,gi,yi,er,Ot){const Lr=(Jn-Ir)*Dr;let Tr=0;Tr=gi!==yi?-er*Kr-ed:(-Kr*Ot+.5)*yi;for(const tr of Qn)for(const gs of tr.positionedGlyphs)gs.x+=Lr,gs.y+=Tr})(Le.positionedLines,Zr,Wr,Hr,Yn,Fi,Ue,Sr,Xe.length),Le.top+=-Hr*Sr,Le.bottom=Le.top+Sr,Le.left+=-Wr*Yn,Le.right=Le.left+Yn}(Te,n,a,h,ce,x,w,E,F,A,U,J),!function(Le){for(const et of Le)if(et.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Te}const Sf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},RI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(s,n,a,h,f,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Xn/v+f:0}{const x=a[n.fontStack],w=x&&x[s];return w?w.metrics.advance*n.scale+f:0}}function fw(s,n,a,h){const f=Math.pow(s-n,2);return h?s<n?f/2:2*f:f+Math.abs(a)*a}function FI(s,n,a){let h=0;return s===10&&(h-=1e4),a&&(h+=150),s!==40&&s!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function mw(s,n,a,h,f,v){let x=null,w=fw(n,a,f,v);for(const E of h){const A=fw(n-E.x,a,f,v)+E.badness;A<=w&&(x=E,w=A)}return{index:s,x:n,priorBreak:x,badness:w}}function gw(s){return s?gw(s.priorBreak).concat(s.index):[]}function Uy(s,n,a,h,f,v,x){if(v!=="point")return[];if(!s)return[];const w=[],E=function(U,W,H,J,oe,ce){let ve=0;for(let pe=0;pe<U.length();pe++){const xe=U.getSection(pe);ve+=pw(U.getCharCode(pe),xe,J,oe,W,ce)}return ve/Math.max(1,Math.ceil(ve/H))}(s,n,a,h,f,x),A=s.text.indexOf("")>=0;let L=0;for(let U=0;U<s.length();U++){const W=s.getSection(U),H=s.getCharCode(U);if(Sf[H]||(L+=pw(H,W,h,f,n,x)),U<s.length()-1){const J=!((F=H)<11904||!(Je["Bopomofo Extended"](F)||Je.Bopomofo(F)||Je["CJK Compatibility Forms"](F)||Je["CJK Compatibility Ideographs"](F)||Je["CJK Compatibility"](F)||Je["CJK Radicals Supplement"](F)||Je["CJK Strokes"](F)||Je["CJK Symbols and Punctuation"](F)||Je["CJK Unified Ideographs Extension A"](F)||Je["CJK Unified Ideographs"](F)||Je["Enclosed CJK Letters and Months"](F)||Je["Halfwidth and Fullwidth Forms"](F)||Je.Hiragana(F)||Je["Ideographic Description Characters"](F)||Je["Kangxi Radicals"](F)||Je["Katakana Phonetic Extensions"](F)||Je.Katakana(F)||Je["Vertical Forms"](F)||Je["Yi Radicals"](F)||Je["Yi Syllables"](F)));(RI[H]||J||W.imageName)&&w.push(mw(U+1,L,E,w,FI(H,s.getCharCode(U+1),J&&A),!1))}}var F;return gw(mw(s.length(),L,E,w,0,!0))}function $y(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function OI(s,n,a,h,f){if(!h&&!f)return;const v=s[a],x=(s[a].x+v.metrics.advance*v.scale)*h;for(let w=n;w<=a;w++)s[w].x-=x,s[w].y+=f}function BI(s,n,a){const{horizontalAlign:h,verticalAlign:f}=$y(a),v=n[0]-s.displaySize[0]*h,x=n[1]-s.displaySize[1]*f;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function yw(s,n,a,h,f,v){const x=s.image;let w;if(x.content){const oe=x.content,ce=x.pixelRatio||1;w=[oe[0]/ce,oe[1]/ce,x.displaySize[0]-oe[2]/ce,x.displaySize[1]-oe[3]/ce]}const E=n.left*v,A=n.right*v;let L,F,U,W;a==="width"||a==="both"?(W=f[0]+E-h[3],F=f[0]+A+h[1]):(W=f[0]+(E+A-x.displaySize[0])/2,F=W+x.displaySize[0]);const H=n.top*v,J=n.bottom*v;return a==="height"||a==="both"?(L=f[1]+H-h[0],U=f[1]+J+h[2]):(L=f[1]+(H+J-x.displaySize[1])/2,U=L+x.displaySize[1]),{image:x,top:L,right:F,bottom:U,left:W,collisionPadding:w}}const nd=255,io=128,_a=nd*io;function vw(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new cn(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=a;let v=0;for(;v<h.length&&h[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const w=h[v],E=h[x];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:E,minSize:a.evaluate(new cn(w)),maxSize:a.evaluate(new cn(E)),interpolationType:f}}}function Gy(s,n,a){let h="never";const f=s.get(n);return f?h=f:s.get(a)&&(h="always"),h}const NI=ya.VectorTileFeature.types,VI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tf(s,n,a,h,f,v,x,w,E,A,L,F,U){const W=w?Math.min(_a,Math.round(w[0])):0,H=w?Math.min(_a,Math.round(w[1])):0;s.emplaceBack(n,a,Math.round(32*h),Math.round(32*f),v,x,(W<<1)+(E?1:0),H,16*A,16*L,256*F,256*U)}function qy(s,n,a){s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a)}function jI(s){for(const n of s.sections)if(yy(n.text))return!0;return!1}class Zy{constructor(n){this.layoutVertexArray=new zt,this.indexArray=new hr,this.programConfigurations=n,this.segments=new un,this.dynamicLayoutVertexArray=new It,this.opacityVertexArray=new Ft,this.hasVisibleVertices=!1,this.placedSymbolArray=new me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,_I.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,VI,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rt("SymbolBuffers",Zy);class Wy{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new un,this.collisionVertexArray=new an}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,xI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rt("CollisionBuffers",Wy);class Zc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ty([]),this.placementViewportMatrix=Ty([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vw(this.zoom,a["text-size"]),this.iconSizeData=vw(this.zoom,a["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Gy(h,"text-overlap","text-allow-overlap")!=="never"||Gy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Zy(new zs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Zy(new zs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ge,this.lineVertexArray=new Ce,this.symbolInstances=new le,this.textAnchorOffsets=new De}calculateGlyphDependencies(n,a,h,f,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(h||f)&&v){const w=Jh[n.charAt(x)];w&&(a[w.charCodeAt(0)]=!0)}}populate(n,a,h){const f=this.layers[0],v=f.layout,x=v.get("text-font"),w=v.get("text-field"),E=v.get("icon-image"),A=(w.value.kind!=="constant"||w.value.value instanceof xr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,F=v.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const U=a.iconDependencies,W=a.glyphDependencies,H=a.availableImages,J=new cn(this.zoom);for(const{feature:oe,id:ce,index:ve,sourceLayerIndex:pe}of n){const xe=f._featureFilter.needGeometry,Te=Il(oe,xe);if(!f._featureFilter.filter(J,Te,h))continue;let Le,et;if(xe||(Te.geometry=Ml(oe)),A){const Qe=f.getValueAndResolveTokens("text-field",Te,h,H),Xe=xr.factory(Qe);jI(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||Lh()==="unavailable"||this.hasRTLText&&pi.isParsed())&&(Le=bI(Xe,f,Te))}if(L){const Qe=f.getValueAndResolveTokens("icon-image",Te,h,H);et=Qe instanceof ur?Qe:ur.fromString(Qe)}if(!Le&&!et)continue;const ct=this.sortFeaturesByKey?F.evaluate(Te,{},h):void 0;if(this.features.push({id:ce,text:Le,icon:et,index:ve,sourceLayerIndex:pe,geometry:Te.geometry,properties:oe.properties,type:NI[oe.type],sortKey:ct}),et&&(U[et.name]=!0),Le){const Qe=x.evaluate(Te,{},h).join(","),Xe=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const Ue of Le.sections)if(Ue.image)U[Ue.image.name]=!0;else{const st=Ch(Le.toString()),qe=Ue.fontStack||Qe,Ne=W[qe]=W[qe]||{};this.calculateGlyphDependencies(Ue.text,Ne,Xe,this.allowVerticalPlacement,st)}}}v.get("symbol-placement")==="line"&&(this.features=function(oe){const ce={},ve={},pe=[];let xe=0;function Te(Qe){pe.push(oe[Qe]),xe++}function Le(Qe,Xe,Ue){const st=ve[Qe];return delete ve[Qe],ve[Xe]=st,pe[st].geometry[0].pop(),pe[st].geometry[0]=pe[st].geometry[0].concat(Ue[0]),st}function et(Qe,Xe,Ue){const st=ce[Xe];return delete ce[Xe],ce[Qe]=st,pe[st].geometry[0].shift(),pe[st].geometry[0]=Ue[0].concat(pe[st].geometry[0]),st}function ct(Qe,Xe,Ue){const st=Ue?Xe[0][Xe[0].length-1]:Xe[0][0];return`${Qe}:${st.x}:${st.y}`}for(let Qe=0;Qe<oe.length;Qe++){const Xe=oe[Qe],Ue=Xe.geometry,st=Xe.text?Xe.text.toString():null;if(!st){Te(Qe);continue}const qe=ct(st,Ue),Ne=ct(st,Ue,!0);if(qe in ve&&Ne in ce&&ve[qe]!==ce[Ne]){const wt=et(qe,Ne,Ue),ht=Le(qe,Ne,pe[wt].geometry);delete ce[qe],delete ve[Ne],ve[ct(st,pe[ht].geometry,!0)]=ht,pe[wt].geometry=null}else qe in ve?Le(qe,Ne,Ue):Ne in ce?et(qe,Ne,Ue):(Te(Qe),ce[qe]=xe-1,ve[Ne]=xe-1)}return pe.filter(Qe=>Qe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((oe,ce)=>oe.sortKey-ce.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let w=n.segment+1;w<a.length;w++)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:f},w<a.length-1&&(f+=a[w+1].dist(a[w]));for(let w=n.segment||0;w>=0;w--)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const E=x[w];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,f,v,x,w,E,A,L,F,U){const W=n.indexArray,H=n.layoutVertexArray,J=n.segments.prepareSegment(4*a.length,H,W,this.canOverlap?x.sortKey:void 0),oe=this.glyphOffsetArray.length,ce=J.vertexLength,ve=this.allowVerticalPlacement&&w===l.ai.vertical?Math.PI/2:0,pe=x.text&&x.text.sections;for(let xe=0;xe<a.length;xe++){const{tl:Te,tr:Le,bl:et,br:ct,tex:Qe,pixelOffsetTL:Xe,pixelOffsetBR:Ue,minFontScaleX:st,minFontScaleY:qe,glyphOffset:Ne,isSDF:wt,sectionIndex:ht}=a[xe],Lt=J.vertexLength,hn=Ne[1];Tf(H,E.x,E.y,Te.x,hn+Te.y,Qe.x,Qe.y,h,wt,Xe.x,Xe.y,st,qe),Tf(H,E.x,E.y,Le.x,hn+Le.y,Qe.x+Qe.w,Qe.y,h,wt,Ue.x,Xe.y,st,qe),Tf(H,E.x,E.y,et.x,hn+et.y,Qe.x,Qe.y+Qe.h,h,wt,Xe.x,Ue.y,st,qe),Tf(H,E.x,E.y,ct.x,hn+ct.y,Qe.x+Qe.w,Qe.y+Qe.h,h,wt,Ue.x,Ue.y,st,qe),qy(n.dynamicLayoutVertexArray,E,ve),W.emplaceBack(Lt,Lt+1,Lt+2),W.emplaceBack(Lt+1,Lt+2,Lt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),xe!==a.length-1&&ht===a[xe+1].sectionIndex||n.programConfigurations.populatePaintArrays(H.length,x,x.index,{},U,pe&&pe[ht])}n.placedSymbolArray.emplaceBack(E.x,E.y,oe,this.glyphOffsetArray.length-oe,ce,A,L,E.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],w,0,!1,0,F)}_addCollisionDebugVertex(n,a,h,f,v,x){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,h,f,v,x,w){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),A=E.vertexLength,L=v.layoutVertexArray,F=v.collisionVertexArray,U=w.anchorX,W=w.anchorY;this._addCollisionDebugVertex(L,F,x,U,W,new k(n,a)),this._addCollisionDebugVertex(L,F,x,U,W,new k(h,a)),this._addCollisionDebugVertex(L,F,x,U,W,new k(h,f)),this._addCollisionDebugVertex(L,F,x,U,W,new k(n,f)),E.vertexLength+=4;const H=v.indexArray;H.emplaceBack(A,A+1),H.emplaceBack(A+1,A+2),H.emplaceBack(A+2,A+3),H.emplaceBack(A+3,A),E.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,f){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wy(Pn,nw.members,Hn),this.iconCollisionBox=new Wy(Pn,nw.members,Hn);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,f,v,x,w,E,A){const L={};for(let F=a;F<h;F++){const U=n.get(F);L.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.textFeatureIndex=U.featureIndex;break}for(let F=f;F<v;F++){const U=n.get(F);L.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalTextFeatureIndex=U.featureIndex;break}for(let F=x;F<w;F++){const U=n.get(F);L.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.iconFeatureIndex=U.featureIndex;break}for(let F=E;F<A;F++){const U=n.get(F);L.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalIconFeatureIndex=U.featureIndex;break}return L}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),f=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),f=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const E=this.symbolInstances.get(w);f.push(0|Math.round(a*E.anchorX+h*E.anchorY)),v.push(E.featureIndex)}return x.sort((w,E)=>f[w]-f[E]||v[E]-v[w]),x}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let _w,xw;rt("SymbolBucket",Zc,{omit:["layers","collisionBoxArray","features","compareText"]}),Zc.MAX_GLYPHS=65535,Zc.addDynamicAttributes=qy;var Hy={get paint(){return xw=xw||new Rn({"icon-opacity":new Tt(Ae.paint_symbol["icon-opacity"]),"icon-color":new Tt(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Tt(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tt(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tt(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new ft(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new ft(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tt(Ae.paint_symbol["text-opacity"]),"text-color":new Tt(Ae.paint_symbol["text-color"],{runtimeType:Dt,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Tt(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Tt(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Tt(Ae.paint_symbol["text-halo-blur"]),"text-translate":new ft(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new ft(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return _w=_w||new Rn({"symbol-placement":new ft(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new ft(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ft(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tt(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ft(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ft(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ft(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ft(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new ft(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ft(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tt(Ae.layout_symbol["icon-size"]),"icon-text-fit":new ft(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ft(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tt(Ae.layout_symbol["icon-image"]),"icon-rotate":new Tt(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Tt(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new ft(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Tt(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Tt(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ft(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ft(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ft(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Tt(Ae.layout_symbol["text-field"]),"text-font":new Tt(Ae.layout_symbol["text-font"]),"text-size":new Tt(Ae.layout_symbol["text-size"]),"text-max-width":new Tt(Ae.layout_symbol["text-max-width"]),"text-line-height":new ft(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Tt(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Tt(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Tt(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ft(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tt(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tt(Ae.layout_symbol["text-anchor"]),"text-max-angle":new ft(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new ft(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Tt(Ae.layout_symbol["text-rotate"]),"text-padding":new ft(Ae.layout_symbol["text-padding"]),"text-keep-upright":new ft(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Tt(Ae.layout_symbol["text-transform"]),"text-offset":new Tt(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new ft(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new ft(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new ft(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new ft(Ae.layout_symbol["text-optional"])})}};class ww{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:sr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rt("FormatSectionOverride",ww,{omit:["defaultValue"]});class Cf extends zi{constructor(n){super(n,Hy)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const v of h)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,f){const v=this.layout.get(n).evaluate(a,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ec(x.value)||!v?v:function(w,E){return E.replace(/{([^{}]+)}/g,(A,L)=>w&&L in w?String(w[L]):"")}(a.properties,v)}createBucket(n){return new Zc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Hy.paint.overridableProperties){if(!Cf.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new ww(a),f=new _h(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new xh("source",f):new kc("composite",f,a.value.zoomStops),this.paint._values[n]=new Ar(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Cf.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),f=Hy.paint.properties[a];let v=!1;const x=w=>{for(const E of w)if(f.overrides&&f.overrides.hasOverride(E))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof xr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=A=>{v||(A instanceof bo&&gn(A.value)===re?x(A.value.sections):A instanceof Cc?x(A.sections):A.eachChild(w))},E=h.value;E._styleExpression&&w(E._styleExpression.expression)}return v}}let bw;var UI={get paint(){return bw=bw||new Rn({"background-color":new ft(Ae.paint_background["background-color"]),"background-pattern":new Rh(Ae.paint_background["background-pattern"]),"background-opacity":new ft(Ae.paint_background["background-opacity"])})}};class $I extends zi{constructor(n){super(n,UI)}}let Sw;var GI={get paint(){return Sw=Sw||new Rn({"raster-opacity":new ft(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new ft(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ft(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ft(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new ft(Ae.paint_raster["raster-saturation"]),"raster-contrast":new ft(Ae.paint_raster["raster-contrast"]),"raster-resampling":new ft(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new ft(Ae.paint_raster["raster-fade-duration"])})}};class qI extends zi{constructor(n){super(n,GI)}}class ZI extends zi{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class WI{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ky=63710088e-1;class xa{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xa(ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,f=n.lat*a,v=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*a);return Ky*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof xa)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new xa(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new xa(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Tw=2*Math.PI*Ky;function Cw(s){return Tw*Math.cos(s*Math.PI/180)}function Ew(s){return(180+s)/360}function Pw(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function kw(s,n){return s/Cw(n)}function Aw(s){return 360*s-180}function Xy(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Ef{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=xa.convert(n);return new Ef(Ew(h.lng),Pw(h.lat),kw(a,h.lat))}toLngLat(){return new xa(Aw(this.x),Xy(this.y))}toAltitude(){return this.z*Cw(Xy(this.y))}meterInMercatorCoordinateUnits(){return 1/Tw*(n=Xy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Mw(s,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[s*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Yy{constructor(n,a,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||a<0||a>=Math.pow(2,n))throw new Error(`x=${a}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=h,this.key=rd(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const f=(x=this.y,w=this.z,E=Mw(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),A=Mw(256*(v+1),256*(x+1),w),E[0]+","+E[1]+","+A[0]+","+A[1]);var v,x,w,E,A;const L=function(F,U,W){let H,J="";for(let oe=F;oe>0;oe--)H=1<<oe-1,J+=(U&H?1:0)+(W&H?2:0);return J}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new k((n.x*a-this.x)*Gn,(n.y*a-this.y)*Gn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Iw{constructor(n,a){this.wrap=n,this.canonical=a,this.key=rd(n,a.z,a.z,a.x,a.y)}}class Hi{constructor(n,a,h,f,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=a,this.canonical=new Yy(h,+f,+v),this.key=rd(a,n,h,f,v)}clone(){return new Hi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new Hi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?rd(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):rd(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new Hi(a,this.wrap,a,h,f),new Hi(a,this.wrap,a,h+1,f),new Hi(a,this.wrap,a,h,f+1),new Hi(a,this.wrap,a,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Hi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Iw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Ef(n.x-this.wrap,n.y))}}function rd(s,n,a,h,f){(s*=2)<0&&(s=-1*s-1);const v=1<<a;return(v*v*s+v*f+h).toString(36)+a.toString(36)+n.toString(36)}rt("CanonicalTileID",Yy),rt("OverscaledTileID",Hi,{omit:["posMatrix"]});class Dw{constructor(n,a,h,f=1,v=1,x=1,w=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ze(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const E=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<E;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(E,A)]=this.data[this._idx(E-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,E)]=this.data[this._idx(A,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<E;A++)for(let L=0;L<E;L++){const F=this.get(A,L);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(n,a){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,a);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,h){return n*this.redFactor+a*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Wi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(a){case-1:f=v-1;break;case 1:v=f+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const E=-a*this.dim,A=-h*this.dim;for(let L=x;L<w;L++)for(let F=f;F<v;F++)this.data[this._idx(F,L)]=n.data[this._idx(F+E,L+A)]}}rt("DEMData",Dw);class Lw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class zw{constructor(n,a,h,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class Rw{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new da(Gn,16,0),this.grid3D=new da(Gn,16,0),this.featureIndexArray=new Re,this.promoteId=a}insert(n,a,h,f,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,v);const E=x?this.grid3D:this.grid;for(let A=0;A<a.length;A++){const L=a[A],F=[1/0,1/0,-1/0,-1/0];for(let U=0;U<L.length;U++){const W=L[U];F[0]=Math.min(F[0],W.x),F[1]=Math.min(F[1],W.y),F[2]=Math.max(F[2],W.x),F[3]=Math.max(F[3],W.y)}F[0]<Gn&&F[1]<Gn&&F[2]>=0&&F[3]>=0&&E.insert(w,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ya.VectorTile(new Ny(this.rawTileData)).layers,this.sourceLayerCoder=new Lw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,f){this.loadVTLayers();const v=n.params||{},x=Gn/n.tileSize/n.scale,w=bh(v.filter),E=n.queryGeometry,A=n.queryPadding*x,L=Ow(E),F=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),U=Ow(n.cameraQueryGeometry),W=this.grid3D.query(U.minX-A,U.minY-A,U.maxX+A,U.maxY+A,(oe,ce,ve,pe)=>function(xe,Te,Le,et,ct){for(const Xe of xe)if(Te<=Xe.x&&Le<=Xe.y&&et>=Xe.x&&ct>=Xe.y)return!0;const Qe=[new k(Te,Le),new k(Te,ct),new k(et,ct),new k(et,Le)];if(xe.length>2){for(const Xe of Qe)if(Nc(xe,Xe))return!0}for(let Xe=0;Xe<xe.length-1;Xe++)if(CM(xe[Xe],xe[Xe+1],Qe))return!0;return!1}(n.cameraQueryGeometry,oe-A,ce-A,ve+A,pe+A));for(const oe of W)F.push(oe);F.sort(HI);const H={};let J;for(let oe=0;oe<F.length;oe++){const ce=F[oe];if(ce===J)continue;J=ce;const ve=this.featureIndexArray.get(ce);let pe=null;this.loadMatchingFeature(H,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,w,v.layers,v.availableImages,a,h,f,(xe,Te,Le)=>(pe||(pe=Ml(xe)),Te.queryIntersectsFeature(E,xe,Le,pe,this.z,n.transform,x,n.pixelPosMatrix)))}return H}loadMatchingFeature(n,a,h,f,v,x,w,E,A,L,F){const U=this.bucketLayerIDs[a];if(x&&!function(oe,ce){for(let ve=0;ve<oe.length;ve++)if(ce.indexOf(oe[ve])>=0)return!0;return!1}(x,U))return;const W=this.sourceLayerCoder.decode(h),H=this.vtLayers[W].feature(f);if(v.needGeometry){const oe=Il(H,!0);if(!v.filter(new cn(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!v.filter(new cn(this.tileID.overscaledZ),H))return;const J=this.getId(H,W);for(let oe=0;oe<U.length;oe++){const ce=U[oe];if(x&&x.indexOf(ce)<0)continue;const ve=E[ce];if(!ve)continue;let pe={};J&&L&&(pe=L.getState(ve.sourceLayer||"_geojsonTileLayer",J));const xe=we({},A[ce]);xe.paint=Fw(xe.paint,ve.paint,H,pe,w),xe.layout=Fw(xe.layout,ve.layout,H,pe,w);const Te=!F||F(H,ve,pe);if(!Te)continue;const Le=new zw(H,this.z,this.x,this.y,J);Le.layer=xe;let et=n[ce];et===void 0&&(et=n[ce]=[]),et.push({featureIndex:f,feature:Le,intersectionZ:Te})}}lookupSymbolFeatures(n,a,h,f,v,x,w,E){const A={};this.loadVTLayers();const L=bh(v);for(const F of n)this.loadMatchingFeature(A,h,f,F,L,x,w,E,a);return A}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function Fw(s,n,a,h,f){return Fe(s,(v,x)=>{const w=n instanceof Oc?n.get(x):null;return w&&w.evaluate?w.evaluate(a,h,f):w})}function Ow(s){let n=1/0,a=1/0,h=-1/0,f=-1/0;for(const v of s)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y);return{minX:n,minY:a,maxX:h,maxY:f}}function HI(s,n){return n-s}function Bw(s,n,a,h,f){const v=[];for(let x=0;x<s.length;x++){const w=s[x];let E;for(let A=0;A<w.length-1;A++){let L=w[A],F=w[A+1];L.x<n&&F.x<n||(L.x<n?L=new k(n,L.y+(n-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x<n&&(F=new k(n,L.y+(n-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y<a&&F.y<a||(L.y<a?L=new k(L.x+(a-L.y)/(F.y-L.y)*(F.x-L.x),a)._round():F.y<a&&(F=new k(L.x+(a-L.y)/(F.y-L.y)*(F.x-L.x),a)._round()),L.x>=h&&F.x>=h||(L.x>=h?L=new k(h,L.y+(h-L.x)/(F.x-L.x)*(F.y-L.y))._round():F.x>=h&&(F=new k(h,L.y+(h-L.x)/(F.x-L.x)*(F.y-L.y))._round()),L.y>=f&&F.y>=f||(L.y>=f?L=new k(L.x+(f-L.y)/(F.y-L.y)*(F.x-L.x),f)._round():F.y>=f&&(F=new k(L.x+(f-L.y)/(F.y-L.y)*(F.x-L.x),f)._round()),E&&L.equals(E[E.length-1])||(E=[L],v.push(E)),E.push(F)))))}}return v}rt("FeatureIndex",Rw,{omit:["rawTileData","sourceLayerCoder"]});class wa extends k{constructor(n,a,h,f){super(n,a),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new wa(this.x,this.y,this.angle,this.segment)}}function Nw(s,n,a,h,f){if(n.segment===void 0||a===0)return!0;let v=n,x=n.segment+1,w=0;for(;w>-a/2;){if(x--,x<0)return!1;w-=s[x].dist(v),v=s[x]}w+=s[x].dist(s[x+1]),x++;const E=[];let A=0;for(;w<a/2;){const L=s[x],F=s[x+1];if(!F)return!1;let U=s[x-1].angleTo(L)-L.angleTo(F);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:w,angleDelta:U}),A+=U;w-E[0].distance>h;)A-=E.shift().angleDelta;if(A>f)return!1;x++,w+=L.dist(F)}return!0}function Vw(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function jw(s,n,a){return s?.6*n*a:0}function Uw(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function KI(s,n,a,h,f,v){const x=jw(a,f,v),w=Uw(a,h)*v;let E=0;const A=Vw(s)/2;for(let L=0;L<s.length-1;L++){const F=s[L],U=s[L+1],W=F.dist(U);if(E+W>A){const H=(A-E)/W,J=ui.number(F.x,U.x,H),oe=ui.number(F.y,U.y,H),ce=new wa(J,oe,U.angleTo(F),L);return ce._round(),!x||Nw(s,ce,w,x,n)?ce:void 0}E+=W}}function XI(s,n,a,h,f,v,x,w,E){const A=jw(h,v,x),L=Uw(h,f),F=L*x,U=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return n-F<n/4&&(n=F+n/4),$w(s,U?n/2*w%n:(L/2+2*v)*x*w%n,n,A,a,F,U,!1,E)}function $w(s,n,a,h,f,v,x,w,E){const A=v/2,L=Vw(s);let F=0,U=n-a,W=[];for(let H=0;H<s.length-1;H++){const J=s[H],oe=s[H+1],ce=J.dist(oe),ve=oe.angleTo(J);for(;U+a<F+ce;){U+=a;const pe=(U-F)/ce,xe=ui.number(J.x,oe.x,pe),Te=ui.number(J.y,oe.y,pe);if(xe>=0&&xe<E&&Te>=0&&Te<E&&U-A>=0&&U+A<=L){const Le=new wa(xe,Te,ve,H);Le._round(),h&&!Nw(s,Le,v,h,f)||W.push(Le)}}F+=ce}return w||W.length||x||(W=$w(s,F/2,a,h,f,v,x,!0,E)),W}rt("Anchor",wa);const Wc=mi;function Gw(s,n,a,h){const f=[],v=s.image,x=v.pixelRatio,w=v.paddedRect.w-2*Wc,E=v.paddedRect.h-2*Wc,A=s.right-s.left,L=s.bottom-s.top,F=v.stretchX||[[0,w]],U=v.stretchY||[[0,E]],W=(Ue,st)=>Ue+st[1]-st[0],H=F.reduce(W,0),J=U.reduce(W,0),oe=w-H,ce=E-J;let ve=0,pe=H,xe=0,Te=J,Le=0,et=oe,ct=0,Qe=ce;if(v.content&&h){const Ue=v.content;ve=Pf(F,0,Ue[0]),xe=Pf(U,0,Ue[1]),pe=Pf(F,Ue[0],Ue[2]),Te=Pf(U,Ue[1],Ue[3]),Le=Ue[0]-ve,ct=Ue[1]-xe,et=Ue[2]-Ue[0]-pe,Qe=Ue[3]-Ue[1]-Te}const Xe=(Ue,st,qe,Ne)=>{const wt=kf(Ue.stretch-ve,pe,A,s.left),ht=Af(Ue.fixed-Le,et,Ue.stretch,H),Lt=kf(st.stretch-xe,Te,L,s.top),hn=Af(st.fixed-ct,Qe,st.stretch,J),mn=kf(qe.stretch-ve,pe,A,s.left),Yn=Af(qe.fixed-Le,et,qe.stretch,H),Fi=kf(Ne.stretch-xe,Te,L,s.top),Zr=Af(Ne.fixed-ct,Qe,Ne.stretch,J),qn=new k(wt,Lt),pr=new k(mn,Lt),Sr=new k(mn,Fi),Wr=new k(wt,Fi),Hr=new k(ht/x,hn/x),Qn=new k(Yn/x,Zr/x),Jn=n*Math.PI/180;if(Jn){const Dr=Math.sin(Jn),gi=Math.cos(Jn),yi=[gi,-Dr,Dr,gi];qn._matMult(yi),pr._matMult(yi),Wr._matMult(yi),Sr._matMult(yi)}const Ir=Ue.stretch+Ue.fixed,Kr=st.stretch+st.fixed;return{tl:qn,tr:pr,bl:Wr,br:Sr,tex:{x:v.paddedRect.x+Wc+Ir,y:v.paddedRect.y+Wc+Kr,w:qe.stretch+qe.fixed-Ir,h:Ne.stretch+Ne.fixed-Kr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:Qn,minFontScaleX:et/x/A,minFontScaleY:Qe/x/L,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Ue=qw(F,oe,H),st=qw(U,ce,J);for(let qe=0;qe<Ue.length-1;qe++){const Ne=Ue[qe],wt=Ue[qe+1];for(let ht=0;ht<st.length-1;ht++)f.push(Xe(Ne,st[ht],wt,st[ht+1]))}}else f.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:E+1}));return f}function Pf(s,n,a){let h=0;for(const f of s)h+=Math.max(n,Math.min(a,f[1]))-Math.max(n,Math.min(a,f[0]));return h}function qw(s,n,a){const h=[{fixed:-Wc,stretch:0}];for(const[f,v]of s){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return h.push({fixed:n+Wc,stretch:a}),h}function kf(s,n,a,h){return s/n*a+h}function Af(s,n,a,h){return s-n*a/h}class Mf{constructor(n,a,h,f,v,x,w,E,A,L){if(this.boxStartIndex=n.length,A){let F=x.top,U=x.bottom;const W=x.collisionPadding;W&&(F-=W[1],U+=W[3]);let H=U-F;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{let F=x.top*w-E[0],U=x.bottom*w+E[2],W=x.left*w-E[3],H=x.right*w+E[1];const J=x.collisionPadding;if(J&&(W-=J[0]*w,F-=J[1]*w,H+=J[2]*w,U+=J[3]*w),L){const oe=new k(W,F),ce=new k(H,F),ve=new k(W,U),pe=new k(H,U),xe=L*Math.PI/180;oe._rotate(xe),ce._rotate(xe),ve._rotate(xe),pe._rotate(xe),W=Math.min(oe.x,ce.x,ve.x,pe.x),H=Math.max(oe.x,ce.x,ve.x,pe.x),F=Math.min(oe.y,ce.y,ve.y,pe.y),U=Math.max(oe.y,ce.y,ve.y,pe.y)}n.emplaceBack(a.x,a.y,W,F,H,U,h,f,v)}this.boxEndIndex=n.length}}class YI{constructor(n=[],a=QI){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,f=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(h(f,x)>=0)break;a[n]=x,n=v}a[n]=f}_down(n){const{data:a,compare:h}=this,f=this.length>>1,v=a[n];for(;n<f;){let x=1+(n<<1),w=a[x];const E=x+1;if(E<this.length&&h(a[E],w)<0&&(x=E,w=a[E]),h(w,v)>=0)break;a[n]=w,n=x}a[n]=v}}function QI(s,n){return s<n?-1:s>n?1:0}function JI(s,n=1,a=!1){let h=1/0,f=1/0,v=-1/0,x=-1/0;const w=s[0];for(let W=0;W<w.length;W++){const H=w[W];(!W||H.x<h)&&(h=H.x),(!W||H.y<f)&&(f=H.y),(!W||H.x>v)&&(v=H.x),(!W||H.y>x)&&(x=H.y)}const E=Math.min(v-h,x-f);let A=E/2;const L=new YI([],eD);if(E===0)return new k(h,f);for(let W=h;W<v;W+=E)for(let H=f;H<x;H+=E)L.push(new Hc(W+A,H+A,A,s));let F=function(W){let H=0,J=0,oe=0;const ce=W[0];for(let ve=0,pe=ce.length,xe=pe-1;ve<pe;xe=ve++){const Te=ce[ve],Le=ce[xe],et=Te.x*Le.y-Le.x*Te.y;J+=(Te.x+Le.x)*et,oe+=(Te.y+Le.y)*et,H+=3*et}return new Hc(J/H,oe/H,0,W)}(s),U=L.length;for(;L.length;){const W=L.pop();(W.d>F.d||!F.d)&&(F=W,a&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,U)),W.max-F.d<=n||(A=W.h/2,L.push(new Hc(W.p.x-A,W.p.y-A,A,s)),L.push(new Hc(W.p.x+A,W.p.y-A,A,s)),L.push(new Hc(W.p.x-A,W.p.y+A,A,s)),L.push(new Hc(W.p.x+A,W.p.y+A,A,s)),U+=4)}return a&&(console.log(`num probes: ${U}`),console.log(`best distance: ${F.d}`)),F.p}function eD(s,n){return n.max-s.max}function Hc(s,n,a,h){this.p=new k(s,n),this.h=a,this.d=function(f,v){let x=!1,w=1/0;for(let E=0;E<v.length;E++){const A=v[E];for(let L=0,F=A.length,U=F-1;L<F;U=L++){const W=A[L],H=A[U];W.y>f.y!=H.y>f.y&&f.x<(H.x-W.x)*(f.y-W.y)/(H.y-W.y)+W.x&&(x=!x),w=Math.min(w,P1(f,W,H))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var br;l.aq=void 0,(br=l.aq||(l.aq={}))[br.center=1]="center",br[br.left=2]="left",br[br.right=3]="right",br[br.top=4]="top",br[br.bottom=5]="bottom",br[br["top-left"]=6]="top-left",br[br["top-right"]=7]="top-right",br[br["bottom-left"]=8]="bottom-left",br[br["bottom-right"]=9]="bottom-right";const ba=7,Qy=Number.POSITIVE_INFINITY;function Zw(s,n){return n[1]!==Qy?function(a,h,f){let v=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),a){case"top-right":case"top-left":case"top":x=f-ba;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+ba}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(s,n[0],n[1]):function(a,h){let f=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-ba;break;case"bottom-right":case"bottom-left":v=-x+ba;break;case"bottom":v=-h+ba;break;case"top":v=h-ba}switch(a){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,v]}(s,n[0])}function Ww(s,n,a){var h;const f=s.layout,v=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},a);if(v){const w=v.values,E=[];for(let A=0;A<w.length;A+=2){const L=E[A]=w[A],F=w[A+1].map(U=>U*Xn);L.startsWith("top")?F[1]-=ba:L.startsWith("bottom")&&(F[1]+=ba),E[A+1]=F}return new Mi(E)}const x=f.get("text-variable-anchor");if(x){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},a)*Xn,Qy]:f.get("text-offset").evaluate(n,{},a).map(A=>A*Xn);const E=[];for(const A of x)E.push(A,Zw(A,w));return new Mi(E)}return null}function Jy(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tD(s,n,a,h,f,v,x,w,E,A,L){let F=v.textMaxSize.evaluate(n,{});F===void 0&&(F=x);const U=s.layers[0].layout,W=U.get("icon-offset").evaluate(n,{},L),H=Kw(a.horizontal),J=x/24,oe=s.tilePixelRatio*J,ce=s.tilePixelRatio*F/24,ve=s.tilePixelRatio*w,pe=s.tilePixelRatio*U.get("symbol-spacing"),xe=U.get("text-padding")*s.tilePixelRatio,Te=function(Ne,wt,ht,Lt=1){const hn=Ne.get("icon-padding").evaluate(wt,{},ht),mn=hn&&hn.values;return[mn[0]*Lt,mn[1]*Lt,mn[2]*Lt,mn[3]*Lt]}(U,n,L,s.tilePixelRatio),Le=U.get("text-max-angle")/180*Math.PI,et=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",ct=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",Qe=U.get("symbol-placement"),Xe=pe/2,Ue=U.get("icon-text-fit");let st;h&&Ue!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(st=yw(h,a.vertical,Ue,U.get("icon-text-fit-padding"),W,J)),H&&(h=yw(h,H,Ue,U.get("icon-text-fit-padding"),W,J)));const qe=(Ne,wt)=>{wt.x<0||wt.x>=Gn||wt.y<0||wt.y>=Gn||function(ht,Lt,hn,mn,Yn,Fi,Zr,qn,pr,Sr,Wr,Hr,Qn,Jn,Ir,Kr,Dr,gi,yi,er,Ot,Lr,Tr,tr,gs){const Rs=ht.addToLineVertexArray(Lt,hn);let Fs,Ro,ys,Ki,vi=0,Fo=0,od=0,Jw=0,av=-1,lv=-1;const Oo={};let eb=Io("");if(ht.allowVerticalPlacement&&mn.vertical){const zr=qn.layout.get("text-rotate").evaluate(Ot,{},tr)+90;ys=new Mf(pr,Lt,Sr,Wr,Hr,mn.vertical,Qn,Jn,Ir,zr),Zr&&(Ki=new Mf(pr,Lt,Sr,Wr,Hr,Zr,Dr,gi,Ir,zr))}if(Yn){const zr=qn.layout.get("icon-rotate").evaluate(Ot,{}),Xi=qn.layout.get("icon-text-fit")!=="none",Ll=Gw(Yn,zr,Tr,Xi),Bs=Zr?Gw(Zr,zr,Tr,Xi):void 0;Ro=new Mf(pr,Lt,Sr,Wr,Hr,Yn,Dr,gi,!1,zr),vi=4*Ll.length;const zl=ht.iconSizeData;let so=null;zl.kind==="source"?(so=[io*qn.layout.get("icon-size").evaluate(Ot,{})],so[0]>_a&&Ze(`${ht.layerIds[0]}: Value for "icon-size" is >= ${nd}. Reduce your "icon-size".`)):zl.kind==="composite"&&(so=[io*Lr.compositeIconSizes[0].evaluate(Ot,{},tr),io*Lr.compositeIconSizes[1].evaluate(Ot,{},tr)],(so[0]>_a||so[1]>_a)&&Ze(`${ht.layerIds[0]}: Value for "icon-size" is >= ${nd}. Reduce your "icon-size".`)),ht.addSymbols(ht.icon,Ll,so,er,yi,Ot,l.ai.none,Lt,Rs.lineStartIndex,Rs.lineLength,-1,tr),av=ht.icon.placedSymbolArray.length-1,Bs&&(Fo=4*Bs.length,ht.addSymbols(ht.icon,Bs,so,er,yi,Ot,l.ai.vertical,Lt,Rs.lineStartIndex,Rs.lineLength,-1,tr),lv=ht.icon.placedSymbolArray.length-1)}const tb=Object.keys(mn.horizontal);for(const zr of tb){const Xi=mn.horizontal[zr];if(!Fs){eb=Io(Xi.text);const Bs=qn.layout.get("text-rotate").evaluate(Ot,{},tr);Fs=new Mf(pr,Lt,Sr,Wr,Hr,Xi,Qn,Jn,Ir,Bs)}const Ll=Xi.positionedLines.length===1;if(od+=Hw(ht,Lt,Xi,Fi,qn,Ir,Ot,Kr,Rs,mn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Ll?tb:[zr],Oo,av,Lr,tr),Ll)break}mn.vertical&&(Jw+=Hw(ht,Lt,mn.vertical,Fi,qn,Ir,Ot,Kr,Rs,l.ai.vertical,["vertical"],Oo,lv,Lr,tr));const iD=Fs?Fs.boxStartIndex:ht.collisionBoxArray.length,sD=Fs?Fs.boxEndIndex:ht.collisionBoxArray.length,oD=ys?ys.boxStartIndex:ht.collisionBoxArray.length,aD=ys?ys.boxEndIndex:ht.collisionBoxArray.length,lD=Ro?Ro.boxStartIndex:ht.collisionBoxArray.length,cD=Ro?Ro.boxEndIndex:ht.collisionBoxArray.length,uD=Ki?Ki.boxStartIndex:ht.collisionBoxArray.length,hD=Ki?Ki.boxEndIndex:ht.collisionBoxArray.length;let Os=-1;const Df=(zr,Xi)=>zr&&zr.circleDiameter?Math.max(zr.circleDiameter,Xi):Xi;Os=Df(Fs,Os),Os=Df(ys,Os),Os=Df(Ro,Os),Os=Df(Ki,Os);const nb=Os>-1?1:0;nb&&(Os*=gs/Xn),ht.glyphOffsetArray.length>=Zc.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ot.sortKey!==void 0&&ht.addToSortKeyRanges(ht.symbolInstances.length,Ot.sortKey);const dD=Ww(qn,Ot,tr),[pD,fD]=function(zr,Xi){const Ll=zr.length,Bs=Xi==null?void 0:Xi.values;if((Bs==null?void 0:Bs.length)>0)for(let zl=0;zl<Bs.length;zl+=2){const so=Bs[zl+1];zr.emplaceBack(l.aq[Bs[zl]],so[0],so[1])}return[Ll,zr.length]}(ht.textAnchorOffsets,dD);ht.symbolInstances.emplaceBack(Lt.x,Lt.y,Oo.right>=0?Oo.right:-1,Oo.center>=0?Oo.center:-1,Oo.left>=0?Oo.left:-1,Oo.vertical||-1,av,lv,eb,iD,sD,oD,aD,lD,cD,uD,hD,Sr,od,Jw,vi,Fo,nb,0,Qn,Os,pD,fD)}(s,wt,Ne,a,h,f,st,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,oe,[xe,xe,xe,xe],et,E,ve,Te,ct,W,n,v,A,L,x)};if(Qe==="line")for(const Ne of Bw(n.geometry,0,0,Gn,Gn)){const wt=XI(Ne,pe,Le,a.vertical||H,h,24,ce,s.overscaling,Gn);for(const ht of wt)H&&nD(s,H.text,Xe,ht)||qe(Ne,ht)}else if(Qe==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const wt=KI(Ne,Le,a.vertical||H,h,24,ce);wt&&qe(Ne,wt)}}else if(n.type==="Polygon")for(const Ne of Iy(n.geometry,0)){const wt=JI(Ne,16);qe(Ne[0],new wa(wt.x,wt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)qe(Ne,new wa(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const wt of Ne)qe([wt],new wa(wt.x,wt.y,0))}function Hw(s,n,a,h,f,v,x,w,E,A,L,F,U,W,H){const J=function(ve,pe,xe,Te,Le,et,ct,Qe){const Xe=Te.layout.get("text-rotate").evaluate(et,{})*Math.PI/180,Ue=[];for(const st of pe.positionedLines)for(const qe of st.positionedGlyphs){if(!qe.rect)continue;const Ne=qe.rect||{};let wt=uw+1,ht=!0,Lt=1,hn=0;const mn=(Le||Qe)&&qe.vertical,Yn=qe.metrics.advance*qe.scale/2;if(Qe&&pe.verticalizable&&(hn=st.lineOffset/2-(qe.imageName?-(Xn-qe.metrics.width*qe.scale)/2:(qe.scale-1)*Xn)),qe.imageName){const er=ct[qe.imageName];ht=er.sdf,Lt=er.pixelRatio,wt=mi/Lt}const Fi=Le?[qe.x+Yn,qe.y]:[0,0];let Zr=Le?[0,0]:[qe.x+Yn+xe[0],qe.y+xe[1]-hn],qn=[0,0];mn&&(qn=Zr,Zr=[0,0]);const pr=qe.metrics.isDoubleResolution?2:1,Sr=(qe.metrics.left-wt)*qe.scale-Yn+Zr[0],Wr=(-qe.metrics.top-wt)*qe.scale+Zr[1],Hr=Sr+Ne.w/pr*qe.scale/Lt,Qn=Wr+Ne.h/pr*qe.scale/Lt,Jn=new k(Sr,Wr),Ir=new k(Hr,Wr),Kr=new k(Sr,Qn),Dr=new k(Hr,Qn);if(mn){const er=new k(-Yn,Yn-ed),Ot=-Math.PI/2,Lr=Xn/2-Yn,Tr=new k(5-ed-Lr,-(qe.imageName?Lr:0)),tr=new k(...qn);Jn._rotateAround(Ot,er)._add(Tr)._add(tr),Ir._rotateAround(Ot,er)._add(Tr)._add(tr),Kr._rotateAround(Ot,er)._add(Tr)._add(tr),Dr._rotateAround(Ot,er)._add(Tr)._add(tr)}if(Xe){const er=Math.sin(Xe),Ot=Math.cos(Xe),Lr=[Ot,-er,er,Ot];Jn._matMult(Lr),Ir._matMult(Lr),Kr._matMult(Lr),Dr._matMult(Lr)}const gi=new k(0,0),yi=new k(0,0);Ue.push({tl:Jn,tr:Ir,bl:Kr,br:Dr,tex:Ne,writingMode:pe.writingMode,glyphOffset:Fi,sectionIndex:qe.sectionIndex,isSDF:ht,pixelOffsetTL:gi,pixelOffsetBR:yi,minFontScaleX:0,minFontScaleY:0})}return Ue}(0,a,w,f,v,x,h,s.allowVerticalPlacement),oe=s.textSizeData;let ce=null;oe.kind==="source"?(ce=[io*f.layout.get("text-size").evaluate(x,{})],ce[0]>_a&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${nd}. Reduce your "text-size".`)):oe.kind==="composite"&&(ce=[io*W.compositeTextSizes[0].evaluate(x,{},H),io*W.compositeTextSizes[1].evaluate(x,{},H)],(ce[0]>_a||ce[1]>_a)&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${nd}. Reduce your "text-size".`)),s.addSymbols(s.text,J,ce,w,v,x,A,n,E.lineStartIndex,E.lineLength,U,H);for(const ve of L)F[ve]=s.text.placedSymbolArray.length-1;return 4*J.length}function Kw(s){for(const n in s)return s[n];return null}function nD(s,n,a,h){const f=s.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else f[n]=[];return f[n].push(h),!1}const Xw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ev{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,h]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=Xw[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new ev(w,x,v,n)}constructor(n,a=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Xw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+E,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+E),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+E,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=a,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return tv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,E=[0,v.length-1,0],A=[];for(;E.length;){const L=E.pop()||0,F=E.pop()||0,U=E.pop()||0;if(F-U<=w){for(let oe=U;oe<=F;oe++){const ce=x[2*oe],ve=x[2*oe+1];ce>=n&&ce<=h&&ve>=a&&ve<=f&&A.push(v[oe])}continue}const W=U+F>>1,H=x[2*W],J=x[2*W+1];H>=n&&H<=h&&J>=a&&J<=f&&A.push(v[W]),(L===0?n<=H:a<=J)&&(E.push(U),E.push(W-1),E.push(1-L)),(L===0?h>=H:f>=J)&&(E.push(W+1),E.push(F),E.push(1-L))}return A}within(n,a,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,w=[0,f.length-1,0],E=[],A=h*h;for(;w.length;){const L=w.pop()||0,F=w.pop()||0,U=w.pop()||0;if(F-U<=x){for(let oe=U;oe<=F;oe++)Qw(v[2*oe],v[2*oe+1],n,a)<=A&&E.push(f[oe]);continue}const W=U+F>>1,H=v[2*W],J=v[2*W+1];Qw(H,J,n,a)<=A&&E.push(f[W]),(L===0?n-h<=H:a-h<=J)&&(w.push(U),w.push(W-1),w.push(1-L)),(L===0?n+h>=H:a+h>=J)&&(w.push(W+1),w.push(F),w.push(1-L))}return E}}function tv(s,n,a,h,f,v){if(f-h<=a)return;const x=h+f>>1;Yw(s,n,x,h,f,v),tv(s,n,a,h,x-1,1-v),tv(s,n,a,x+1,f,1-v)}function Yw(s,n,a,h,f,v){for(;f>h;){if(f-h>600){const A=f-h+1,L=a-h+1,F=Math.log(A),U=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*U*(A-U)/A)*(L-A/2<0?-1:1);Yw(s,n,a,Math.max(h,Math.floor(a-L*U/A+W)),Math.min(f,Math.floor(a+(A-L)*U/A+W)),v)}const x=n[2*a+v];let w=h,E=f;for(id(s,n,h,a),n[2*f+v]>x&&id(s,n,h,f);w<E;){for(id(s,n,w,E),w++,E--;n[2*w+v]<x;)w++;for(;n[2*E+v]>x;)E--}n[2*h+v]===x?id(s,n,h,E):(E++,id(s,n,E,f)),E<=a&&(h=E+1),a<=E&&(f=E-1)}}function id(s,n,a,h){nv(s,a,h),nv(n,2*a,2*h),nv(n,2*a+1,2*h+1)}function nv(s,n,a){const h=s[n];s[n]=s[a],s[a]=h}function Qw(s,n,a,h){const f=s-a,v=n-h;return f*f+v*v}var rv;l.bh=void 0,(rv=l.bh||(l.bh={})).create="create",rv.load="load",rv.fullLoad="fullLoad";let If=null,sd=[];const iv=1e3/60,sv="loadTime",ov="fullLoadTime",rD={mark(s){performance.mark(s)},frame(s){const n=s;If!=null&&sd.push(n-If),If=n},clearMetrics(){If=null,sd=[],performance.clearMeasures(sv),performance.clearMeasures(ov);for(const s in l.bh)performance.clearMarks(l.bh[s])},getPerformanceMetrics(){performance.measure(sv,l.bh.create,l.bh.load),performance.measure(ov,l.bh.create,l.bh.fullLoad);const s=performance.getEntriesByName(sv)[0].duration,n=performance.getEntriesByName(ov)[0].duration,a=sd.length,h=1/(sd.reduce((v,x)=>v+x,0)/a/1e3),f=sd.filter(v=>v>iv).reduce((v,x)=>v+(x-iv)/iv,0);return{loadTime:s,fullLoadTime:n,fps:h,percentDroppedFrames:f/(a+f)*100,totalFrames:a}}};l.$=function(s,n,a){var h,f,v,x,w,E,A,L,F,U,W,H,J=a[0],oe=a[1],ce=a[2];return n===s?(s[12]=n[0]*J+n[4]*oe+n[8]*ce+n[12],s[13]=n[1]*J+n[5]*oe+n[9]*ce+n[13],s[14]=n[2]*J+n[6]*oe+n[10]*ce+n[14],s[15]=n[3]*J+n[7]*oe+n[11]*ce+n[15]):(f=n[1],v=n[2],x=n[3],w=n[4],E=n[5],A=n[6],L=n[7],F=n[8],U=n[9],W=n[10],H=n[11],s[0]=h=n[0],s[1]=f,s[2]=v,s[3]=x,s[4]=w,s[5]=E,s[6]=A,s[7]=L,s[8]=F,s[9]=U,s[10]=W,s[11]=H,s[12]=h*J+w*oe+F*ce+n[12],s[13]=f*J+E*oe+U*ce+n[13],s[14]=v*J+A*oe+W*ce+n[14],s[15]=x*J+L*oe+H*ce+n[15]),s},l.A=Vc,l.B=ui,l.C=class{constructor(s,n,a){this.receive=h=>{const f=h.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Et()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),f=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(h,f)},this.target=s,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new WI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Et()?s:window}send(s,n,a,h,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=[],w={id:v,type:s,hasCallback:!!a,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:to(n,x)};return this.target.postMessage(w,{transfer:x}),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(n.error?a(pa(n.error)):a(null,pa(n.data)))}else{let a=!1;const h=[],f=n.hasCallback?(w,E)=>{a=!0,delete this.cancelCallbacks[s];const A={id:s,type:"<response>",sourceMapId:this.mapId,error:w?to(w):null,data:to(E,h)};this.target.postMessage(A,{transfer:h})}:w=>{a=!0};let v=null;const x=pa(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const w=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,w[0],x.source)[w[1]](x,f)}else f(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[s]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=ft,l.E=dn,l.F=function(s,n){const a={};for(let h=0;h<n.length;h++){const f=n[h];f in s&&(a[f]=s[f])}return a},l.G=Ew,l.H=Pw,l.I=jy,l.J=V,l.K=q,l.L=xa,l.M=ot,l.N=Gn,l.O=Hi,l.P=k,l.Q=_n,l.R=Wi,l.S=un,l.T=of,l.U=Ef,l.V=class extends Ao{},l.W=Yy,l.X=function(s,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<s.length;h++){const f=window.document.createElement("source");kr(s[h])||(a.crossOrigin="Anonymous"),f.src=s[h],a.appendChild(f)}return{cancel:()=>{}}},l.Y=je,l.Z=function(){var s=new Vc(16);return Vc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},l._=S,l.a=He,l.a$=class extends G{},l.a0=function(s,n,a){var h=a[0],f=a[1],v=a[2];return s[0]=n[0]*h,s[1]=n[1]*h,s[2]=n[2]*h,s[3]=n[3]*h,s[4]=n[4]*f,s[5]=n[5]*f,s[6]=n[6]*f,s[7]=n[7]*f,s[8]=n[8]*v,s[9]=n[9]*v,s[10]=n[10]*v,s[11]=n[11]*v,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.a1=I1,l.a2=function(){return We++},l.a3=ie,l.a4=Zc,l.a5=function(){pi.isLoading()||pi.isLoaded()||Lh()!=="deferred"||sf()},l.a6=bh,l.a7=Il,l.a8=cn,l.a9=zw,l.aA=Cl,l.aB=function(s){s=s.slice();const n=Object.create(null);for(let a=0;a<s.length;a++)n[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=Vr(s[a],n[s[a].ref]));return s},l.aC=function(s){if(s.type==="custom")return new ZI(s);switch(s.type){case"background":return new $I(s);case"circle":return new kM(s);case"fill":return new HM(s);case"fill-extrusion":return new cI(s);case"heatmap":return new MM(s);case"hillshade":return new DM(s);case"line":return new yI(s);case"raster":return new qI(s);case"symbol":return new Cf(s)}},l.aD=it,l.aE=function(s,n){if(!s)return[{command:qt.setStyle,args:[n]}];let a=[];try{if(!Ht(s.version,n.version))return[{command:qt.setStyle,args:[n]}];Ht(s.center,n.center)||a.push({command:qt.setCenter,args:[n.center]}),Ht(s.zoom,n.zoom)||a.push({command:qt.setZoom,args:[n.zoom]}),Ht(s.bearing,n.bearing)||a.push({command:qt.setBearing,args:[n.bearing]}),Ht(s.pitch,n.pitch)||a.push({command:qt.setPitch,args:[n.pitch]}),Ht(s.sprite,n.sprite)||a.push({command:qt.setSprite,args:[n.sprite]}),Ht(s.glyphs,n.glyphs)||a.push({command:qt.setGlyphs,args:[n.glyphs]}),Ht(s.transition,n.transition)||a.push({command:qt.setTransition,args:[n.transition]}),Ht(s.light,n.light)||a.push({command:qt.setLight,args:[n.light]});const h={},f=[];(function(x,w,E,A){let L;for(L in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(w,L)||cs(L,E,A));for(L in w)Object.prototype.hasOwnProperty.call(w,L)&&(Object.prototype.hasOwnProperty.call(x,L)?Ht(x[L],w[L])||(x[L].type==="geojson"&&w[L].type==="geojson"&&wo(x,w,L)?E.push({command:qt.setGeoJSONSourceData,args:[L,w[L].data]}):vr(L,w,E,A)):oi(L,w,E))})(s.sources,n.sources,f,h);const v=[];s.layers&&s.layers.forEach(x=>{h[x.source]?a.push({command:qt.removeLayer,args:[x.id]}):v.push(x)}),a=a.concat(f),function(x,w,E){w=w||[];const A=(x=x||[]).map(qi),L=w.map(qi),F=x.reduce(ks,{}),U=w.reduce(ks,{}),W=A.slice(),H=Object.create(null);let J,oe,ce,ve,pe,xe,Te;for(J=0,oe=0;J<A.length;J++)ce=A[J],Object.prototype.hasOwnProperty.call(U,ce)?oe++:(E.push({command:qt.removeLayer,args:[ce]}),W.splice(W.indexOf(ce,oe),1));for(J=0,oe=0;J<L.length;J++)ce=L[L.length-1-J],W[W.length-1-J]!==ce&&(Object.prototype.hasOwnProperty.call(F,ce)?(E.push({command:qt.removeLayer,args:[ce]}),W.splice(W.lastIndexOf(ce,W.length-oe),1)):oe++,xe=W[W.length-J],E.push({command:qt.addLayer,args:[U[ce],xe]}),W.splice(W.length-J,0,ce),H[ce]=!0);for(J=0;J<L.length;J++)if(ce=L[J],ve=F[ce],pe=U[ce],!H[ce]&&!Ht(ve,pe))if(Ht(ve.source,pe.source)&&Ht(ve["source-layer"],pe["source-layer"])&&Ht(ve.type,pe.type)){for(Te in ai(ve.layout,pe.layout,E,ce,null,qt.setLayoutProperty),ai(ve.paint,pe.paint,E,ce,null,qt.setPaintProperty),Ht(ve.filter,pe.filter)||E.push({command:qt.setFilter,args:[ce,pe.filter]}),Ht(ve.minzoom,pe.minzoom)&&Ht(ve.maxzoom,pe.maxzoom)||E.push({command:qt.setLayerZoomRange,args:[ce,pe.minzoom,pe.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ai(ve[Te],pe[Te],E,ce,Te.slice(6),qt.setPaintProperty):Ht(ve[Te],pe[Te])||E.push({command:qt.setLayerProperty,args:[ce,Te,pe[Te]]}));for(Te in pe)Object.prototype.hasOwnProperty.call(pe,Te)&&!Object.prototype.hasOwnProperty.call(ve,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ai(ve[Te],pe[Te],E,ce,Te.slice(6),qt.setPaintProperty):Ht(ve[Te],pe[Te])||E.push({command:qt.setLayerProperty,args:[ce,Te,pe[Te]]}))}else E.push({command:qt.removeLayer,args:[ce]}),xe=W[W.lastIndexOf(ce)+1],E.push({command:qt.addLayer,args:[pe,xe]})}(v,n.layers,a)}catch(h){console.warn("Unable to compute style diff:",h),a=[{command:qt.setStyle,args:[n]}]}return a},l.aF=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function s(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let h=0;h<n.length;h++)if(!s(n[h],a[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const h in n)if(!s(n[h],a[h]))return!1;return!0}return n===a},l.aH=Fe,l.aI=pt,l.aJ=El,l.aK=function(s){return s({pluginStatus:$r,pluginURL:no}),El.on("pluginStateChange",s),s},l.aL=class extends Do{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},l.aM=Bc,l.aN=class extends Do{constructor(s,n){super(s,n),this.current=_y}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},l.aO=uf,l.aP=class extends Do{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},l.aQ=class extends Do{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},l.aR=hf,l.aS=function(s,n,a,h,f,v,x){var w=1/(n-a),E=1/(h-f),A=1/(v-x);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(n+a)*w,s[13]=(f+h)*E,s[14]=(x+v)*A,s[15]=1,s},l.aT=en,l.aU=PM,l.aV=class extends d{},l.aW=wI,l.aX=class extends _{},l.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},l.aZ=F1,l.a_=Ve,l.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,f,v)=>{const x=f||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},l.ab=function(s,n){const a=[];for(const h in s)h in n||a.push(h);return a},l.ac=function(s){if(Pe==null){const n=s.navigator?s.navigator.userAgent:null;Pe=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Pe},l.ad=Se,l.ae=function(s,n,a){var h=Math.sin(a),f=Math.cos(a),v=n[0],x=n[1],w=n[2],E=n[3],A=n[4],L=n[5],F=n[6],U=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*f+A*h,s[1]=x*f+L*h,s[2]=w*f+F*h,s[3]=E*f+U*h,s[4]=A*f-v*h,s[5]=L*f-x*h,s[6]=F*f-w*h,s[7]=U*f-E*h,s},l.af=function(s){var n=new Vc(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},l.ag=mf,l.ah=function(s,n){let a=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=s,w=f?Se(hi.interpolationFactor(f,n,v,x),0,1):0;s.kind==="camera"?h=ui.number(s.minSize,s.maxSize,w):a=w}return{uSizeT:a,uSize:h}},l.aj=function(s,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:f}){return s.kind==="source"?h/io:s.kind==="composite"?ui.number(h/io,f/io,a):n},l.ak=qy,l.al=function(s,n,a,h){const f=n.y-s.y,v=n.x-s.x,x=h.y-a.y,w=h.x-a.x,E=x*v-w*f;if(E===0)return null;const A=(w*(s.y-a.y)-x*(s.x-a.x))/E;return new k(s.x+A*v,s.y+A*f)},l.am=Bw,l.an=C1,l.ao=Ty,l.ap=Xn,l.ar=Gy,l.as=function(s,n){var a=n[0],h=n[1],f=n[2],v=n[3],x=n[4],w=n[5],E=n[6],A=n[7],L=n[8],F=n[9],U=n[10],W=n[11],H=n[12],J=n[13],oe=n[14],ce=n[15],ve=a*w-h*x,pe=a*E-f*x,xe=a*A-v*x,Te=h*E-f*w,Le=h*A-v*w,et=f*A-v*E,ct=L*J-F*H,Qe=L*oe-U*H,Xe=L*ce-W*H,Ue=F*oe-U*J,st=F*ce-W*J,qe=U*ce-W*oe,Ne=ve*qe-pe*st+xe*Ue+Te*Xe-Le*Qe+et*ct;return Ne?(s[0]=(w*qe-E*st+A*Ue)*(Ne=1/Ne),s[1]=(f*st-h*qe-v*Ue)*Ne,s[2]=(J*et-oe*Le+ce*Te)*Ne,s[3]=(U*Le-F*et-W*Te)*Ne,s[4]=(E*Xe-x*qe-A*Qe)*Ne,s[5]=(a*qe-f*Xe+v*Qe)*Ne,s[6]=(oe*xe-H*et-ce*pe)*Ne,s[7]=(L*et-U*xe+W*pe)*Ne,s[8]=(x*st-w*Xe+A*ct)*Ne,s[9]=(h*Xe-a*st-v*ct)*Ne,s[10]=(H*Le-J*xe+ce*ve)*Ne,s[11]=(F*xe-L*Le-W*ve)*Ne,s[12]=(w*Qe-x*Ue-E*ct)*Ne,s[13]=(a*Ue-h*Qe+f*ct)*Ne,s[14]=(J*pe-H*Te-oe*ve)*Ne,s[15]=(L*Te-F*pe+U*ve)*Ne,s):null},l.at=Jy,l.au=$y,l.av=ev,l.aw=function(){const s={},n=Ae.$version;for(const a in Ae.$root){const h=Ae.$root[a];if(h.required){let f=null;f=a==="version"?n:h.type==="array"?[]:{},f!=null&&(s[a]=f)}}return s},l.ax=qt,l.ay=ef,l.az=Un,l.b=function(s,n){const a=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(a).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=hr,l.b1=function(s,n){var a=s[0],h=s[1],f=s[2],v=s[3],x=s[4],w=s[5],E=s[6],A=s[7],L=s[8],F=s[9],U=s[10],W=s[11],H=s[12],J=s[13],oe=s[14],ce=s[15],ve=n[0],pe=n[1],xe=n[2],Te=n[3],Le=n[4],et=n[5],ct=n[6],Qe=n[7],Xe=n[8],Ue=n[9],st=n[10],qe=n[11],Ne=n[12],wt=n[13],ht=n[14],Lt=n[15];return Math.abs(a-ve)<=qr*Math.max(1,Math.abs(a),Math.abs(ve))&&Math.abs(h-pe)<=qr*Math.max(1,Math.abs(h),Math.abs(pe))&&Math.abs(f-xe)<=qr*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(v-Te)<=qr*Math.max(1,Math.abs(v),Math.abs(Te))&&Math.abs(x-Le)<=qr*Math.max(1,Math.abs(x),Math.abs(Le))&&Math.abs(w-et)<=qr*Math.max(1,Math.abs(w),Math.abs(et))&&Math.abs(E-ct)<=qr*Math.max(1,Math.abs(E),Math.abs(ct))&&Math.abs(A-Qe)<=qr*Math.max(1,Math.abs(A),Math.abs(Qe))&&Math.abs(L-Xe)<=qr*Math.max(1,Math.abs(L),Math.abs(Xe))&&Math.abs(F-Ue)<=qr*Math.max(1,Math.abs(F),Math.abs(Ue))&&Math.abs(U-st)<=qr*Math.max(1,Math.abs(U),Math.abs(st))&&Math.abs(W-qe)<=qr*Math.max(1,Math.abs(W),Math.abs(qe))&&Math.abs(H-Ne)<=qr*Math.max(1,Math.abs(H),Math.abs(Ne))&&Math.abs(J-wt)<=qr*Math.max(1,Math.abs(J),Math.abs(wt))&&Math.abs(oe-ht)<=qr*Math.max(1,Math.abs(oe),Math.abs(ht))&&Math.abs(ce-Lt)<=qr*Math.max(1,Math.abs(ce),Math.abs(Lt))},l.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},l.b3=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s},l.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},l.b5=ke,l.b6=Iw,l.b7=kw,l.b8=function(s,n,a,h,f){var v,x=1/Math.tan(n/2);return s[0]=x/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+h)*(v=1/(h-f)),s[14]=2*f*h*v):(s[10]=-1,s[14]=-2*h),s},l.b9=function(s,n,a){var h=Math.sin(a),f=Math.cos(a),v=n[4],x=n[5],w=n[6],E=n[7],A=n[8],L=n[9],F=n[10],U=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=v*f+A*h,s[5]=x*f+L*h,s[6]=w*f+F*h,s[7]=E*f+U*h,s[8]=A*f-v*h,s[9]=L*f-x*h,s[10]=F*f-w*h,s[11]=U*f-E*h,s},l.bA=I,l.bB=rw,l.bC=Pc,l.bD=pi,l.ba=ne,l.bb=he,l.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},l.bd=class extends Al{},l.be=Ky,l.bf=Aw,l.bg=rD,l.bi=lr,l.bj=function(s,n,a=!1){if($r===kh||$r===Ah||$r===Mh)throw new Error("setRTLTextPlugin cannot be called multiple times.");no=Gt.resolveURL(s),$r=kh,Ih=n,Dh(),a||sf()},l.bk=Lh,l.bl=function(s,n){const a={};for(let f=0;f<s.length;f++){const v=n&&n[s[f].id]||Ic(s[f]);n&&(n[s[f].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(s[f])}const h=[];for(const f in a)h.push(a[f]);return h},l.bm=rt,l.bn=Lw,l.bo=Rw,l.bp=dw,l.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Gn/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],a=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new cn(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new cn(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new cn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new cn(A),s.canonical),h["text-size"].possiblyEvaluate(new cn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new cn(A),s.canonical),h["icon-size"].possiblyEvaluate(new cn(L),s.canonical)]}const v=a.get("text-line-height")*Xn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),E=a.get("text-size");for(const A of s.bucket.features){const L=a.get("text-font").evaluate(A,{},s.canonical).join(","),F=E.evaluate(A,{},s.canonical),U=f.layoutTextSize.evaluate(A,{},s.canonical),W=f.layoutIconSize.evaluate(A,{},s.canonical),H={horizontal:{},vertical:void 0},J=A.text;let oe,ce=[0,0];if(J){const xe=J.toString(),Te=a.get("text-letter-spacing").evaluate(A,{},s.canonical)*Xn,Le=Eh(xe)?Te:0,et=a.get("text-anchor").evaluate(A,{},s.canonical),ct=Ww(n,A,s.canonical);if(!ct){const qe=a.get("text-radial-offset").evaluate(A,{},s.canonical);ce=qe?Zw(et,[qe*Xn,Qy]):a.get("text-offset").evaluate(A,{},s.canonical).map(Ne=>Ne*Xn)}let Qe=x?"center":a.get("text-justify").evaluate(A,{},s.canonical);const Xe=a.get("symbol-placement"),Ue=Xe==="point"?a.get("text-max-width").evaluate(A,{},s.canonical)*Xn:0,st=()=>{s.bucket.allowVerticalPlacement&&Ch(xe)&&(H.vertical=bf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,"left",Le,ce,l.ai.vertical,!0,Xe,U,F))};if(!x&&ct){const qe=new Set;if(Qe==="auto")for(let wt=0;wt<ct.values.length;wt+=2)qe.add(Jy(ct.values[wt]));else qe.add(Qe);let Ne=!1;for(const wt of qe)if(!H.horizontal[wt])if(Ne)H.horizontal[wt]=H.horizontal[0];else{const ht=bf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,"center",wt,Le,ce,l.ai.horizontal,!1,Xe,U,F);ht&&(H.horizontal[wt]=ht,Ne=ht.positionedLines.length===1)}st()}else{Qe==="auto"&&(Qe=Jy(et));const qe=bf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,Qe,Le,ce,l.ai.horizontal,!1,Xe,U,F);qe&&(H.horizontal[Qe]=qe),st(),Ch(xe)&&x&&w&&(H.vertical=bf(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ue,v,et,Qe,Le,ce,l.ai.vertical,!1,Xe,U,F))}}let ve=!1;if(A.icon&&A.icon.name){const xe=s.imageMap[A.icon.name];xe&&(oe=BI(s.imagePositions[A.icon.name],a.get("icon-offset").evaluate(A,{},s.canonical),a.get("icon-anchor").evaluate(A,{},s.canonical)),ve=!!xe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ve:s.bucket.sdfIcons!==ve&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xe.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const pe=Kw(H.horizontal)||H.vertical;s.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||oe)&&tD(s.bucket,A,H,oe,s.imageMap,f,U,W,ce,ve,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},l.br=Oy,l.bs=zy,l.bt=Fy,l.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},l.bv=Ny,l.bw=ya,l.bx=function(s,n,a,h,f){return S(this,void 0,void 0,function*(){if(q())try{return yield ot(s,n,a,h,f)}catch{}return function(v,x,w,E,A){const L=v.width,F=v.height;_t&&vt||(_t=new OffscreenCanvas(L,F),vt=_t.getContext("2d",{willReadFrequently:!0})),_t.width=L,_t.height=F,vt.drawImage(v,0,0,L,F);const U=vt.getImageData(x,w,E,A);return vt.clearRect(0,0,L,F),U.data}(s,n,a,h,f)})},l.by=Dw,l.bz=b,l.c=ir,l.d=function(s,n){const a=new Image;a.onload=()=>{n(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=yt})},a.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(s)],{type:"image/png"});a.src=s.byteLength?URL.createObjectURL(h):yt},l.e=we,l.f=function(s,n){return Pr(we(s,{type:"json"}),n)},l.g=Ln,l.h=Gt,l.i=Et,l.j=ki,l.k=Pi,l.l=si,l.m=Pr,l.n=function(s){return new Ny(s).readFields(DI,[])},l.o=function(s,n,a){if(!s.length)return a(null,[]);let h=s.length;const f=new Array(s.length);let v=null;s.forEach((x,w)=>{n(x,(E,A)=>{E&&(v=E),f[w]=A,--h==0&&a(v,f)})})},l.p=hw,l.q=Zh,l.r=Rn,l.s=kr,l.t=my,l.u=Je,l.v=Ae,l.w=Ze,l.x=zc,l.y=Ds,l.z=function([s,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(a),y:s*Math.sin(n)*Math.sin(a),z:s*Math.cos(a)}}}),p(["./shared"],function(l){class S{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,$){for(const se of N){this._layerConfigs[se.id]=se;const ae=this._layers[se.id]=l.aC(se);ae._featureFilter=l.a6(ae.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(const se of $)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};const Y=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const se of Y){const ae=se.map(Ie=>this._layers[Ie.id]),_e=ae[0];if(_e.visibility==="none")continue;const fe=_e.source||"";let ue=this.familiesBySource[fe];ue||(ue=this.familiesBySource[fe]={});const ye=_e.sourceLayer||"_geojsonTileLayer";let Me=ue[ye];Me||(Me=ue[ye]=[]),Me.push(ae)}}}class b{constructor(N){const $={},Y=[];for(const fe in N){const ue=N[fe],ye=$[fe]={};for(const Me in ue){const Ie=ue[+Me];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const ze={x:0,y:0,w:Ie.bitmap.width+2,h:Ie.bitmap.height+2};Y.push(ze),ye[Me]={rect:ze,metrics:Ie.metrics}}}const{w:se,h:ae}=l.p(Y),_e=new l.q({width:se||1,height:ae||1});for(const fe in N){const ue=N[fe];for(const ye in ue){const Me=ue[+ye];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Ie=$[fe][ye].rect;l.q.copy(Me.bitmap,_e,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},Me.bitmap)}}this.image=_e,this.positions=$}}l.bm("GlyphAtlas",b);class I{constructor(N){this.tileID=new l.O(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(N,$,Y,se,ae){this.status="parsing",this.data=N,this.collisionBoxArray=new l.a3;const _e=new l.bn(Object.keys(N.layers).sort()),fe=new l.bo(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const ue={},ye={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y},Me=$.familiesBySource[this.source];for(const Zt in Me){const $t=N.layers[Zt];if(!$t)continue;$t.version===1&&l.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _r=_e.encode(Zt),on=[];for(let $n=0;$n<$t.length;$n++){const cr=$t.feature($n),Ai=fe.getId(cr,Zt);on.push({feature:cr,id:Ai,index:$n,sourceLayerIndex:_r})}for(const $n of Me[Zt]){const cr=$n[0];cr.source!==this.source&&l.w(`layer.source = ${cr.source} does not equal this.source = ${this.source}`),cr.minzoom&&this.zoom<Math.floor(cr.minzoom)||cr.maxzoom&&this.zoom>=cr.maxzoom||cr.visibility!=="none"&&(M($n,this.zoom,Y),(ue[cr.id]=cr.createBucket({index:fe.bucketLayerIDs.length,layers:$n,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source})).populate(on,ye,this.tileID.canonical),fe.bucketLayerIDs.push($n.map(Ai=>Ai.id)))}}let Ie,ze,xt,Pt;const at=l.aH(ye.glyphDependencies,Zt=>Object.keys(Zt).map(Number));this.inFlightDependencies.forEach(Zt=>Zt==null?void 0:Zt.cancel()),this.inFlightDependencies=[];const bt=++this.dependencySentinel;Object.keys(at).length?this.inFlightDependencies.push(se.send("getGlyphs",{uid:this.uid,stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,ze=$t,nn.call(this)))})):ze={};const At=Object.keys(ye.iconDependencies);At.length?this.inFlightDependencies.push(se.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"icons"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,xt=$t,nn.call(this)))})):xt={};const Qt=Object.keys(ye.patternDependencies);function nn(){if(Ie)return ae(Ie);if(ze&&xt&&Pt){const Zt=new b(ze),$t=new l.bp(xt,Pt);for(const _r in ue){const on=ue[_r];on instanceof l.a4?(M(on.layers,this.zoom,Y),l.bq({bucket:on,glyphMap:ze,glyphPositions:Zt.positions,imageMap:xt,imagePositions:$t.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):on.hasPattern&&(on instanceof l.br||on instanceof l.bs||on instanceof l.bt)&&(M(on.layers,this.zoom,Y),on.addFeatures(ye,this.tileID.canonical,$t.patternPositions))}this.status="done",ae(null,{buckets:Object.values(ue).filter(_r=>!_r.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zt.image,imageAtlas:$t,glyphMap:this.returnDependencies?ze:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?Zt.positions:null})}}Qt.length?this.inFlightDependencies.push(se.send("getImages",{icons:Qt,source:this.source,tileID:this.tileID,type:"patterns"},(Zt,$t)=>{bt===this.dependencySentinel&&(Ie||(Ie=Zt,Pt=$t,nn.call(this)))})):Pt={},nn.call(this)}}function M(re,N,$){const Y=new l.a8(N);for(const se of re)se.recalculate(Y,$)}function k(re,N){const $=l.l(re.request,(Y,se,ae,_e)=>{if(Y)N(Y);else if(se)try{const fe=new l.bw.VectorTile(new l.bv(se));N(null,{vectorTile:fe,rawData:se,cacheControl:ae,expires:_e})}catch(fe){const ue=new Uint8Array(se);let ye=`Unable to parse the tile at ${re.request.url}, `;ye+=ue[0]===31&&ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${fe.messge}`,N(new Error(ye))}});return()=>{$.cancel(),N()}}class j{constructor(N,$,Y,se){this.actor=N,this.layerIndex=$,this.availableImages=Y,this.loadVectorData=se||k,this.fetching={},this.loading={},this.loaded={}}loadTile(N,$){const Y=N.uid;this.loading||(this.loading={});const se=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bu(N.request),ae=this.loading[Y]=new I(N);ae.abort=this.loadVectorData(N,(_e,fe)=>{if(delete this.loading[Y],_e||!fe)return ae.status="done",this.loaded[Y]=ae,$(_e);const ue=fe.rawData,ye={};fe.expires&&(ye.expires=fe.expires),fe.cacheControl&&(ye.cacheControl=fe.cacheControl);const Me={};if(se){const Ie=se.finish();Ie&&(Me.resourceTiming=JSON.parse(JSON.stringify(Ie)))}ae.vectorTile=fe.vectorTile,ae.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ie,ze)=>{if(delete this.fetching[Y],Ie||!ze)return $(Ie);$(null,l.e({rawTileData:ue.slice(0)},ze,ye,Me))}),this.loaded=this.loaded||{},this.loaded[Y]=ae,this.fetching[Y]={rawTileData:ue,cacheControl:ye,resourceTiming:Me}})}reloadTile(N,$){const Y=this.loaded,se=N.uid;if(Y&&Y[se]){const ae=Y[se];ae.showCollisionBoxes=N.showCollisionBoxes,ae.status==="parsing"?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,fe)=>{if(_e||!fe)return $(_e,fe);let ue;if(this.fetching[se]){const{rawTileData:ye,cacheControl:Me,resourceTiming:Ie}=this.fetching[se];delete this.fetching[se],ue=l.e({rawTileData:ye.slice(0)},fe,Me,Ie)}else ue=fe;$(null,ue)}):ae.status==="done"&&(ae.vectorTile?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,$):$())}}abortTile(N,$){const Y=this.loading,se=N.uid;Y&&Y[se]&&Y[se].abort&&(Y[se].abort(),delete Y[se]),$()}removeTile(N,$){const Y=this.loaded,se=N.uid;Y&&Y[se]&&delete Y[se],$()}}class K{constructor(){this.loaded={}}loadTile(N,$){return l._(this,void 0,void 0,function*(){const{uid:Y,encoding:se,rawImageData:ae,redFactor:_e,greenFactor:fe,blueFactor:ue,baseShift:ye}=N,Me=ae.width+2,Ie=ae.height+2,ze=l.a(ae)?new l.R({width:Me,height:Ie},yield l.bx(ae,-1,-1,Me,Ie)):ae,xt=new l.by(Y,ze,se,_e,fe,ue,ye);this.loaded=this.loaded||{},this.loaded[Y]=xt,$(null,xt)})}removeTile(N){const $=this.loaded,Y=N.uid;$&&$[Y]&&delete $[Y]}}function O(re,N){if(re.length!==0){X(re[0],N);for(var $=1;$<re.length;$++)X(re[$],!N)}}function X(re,N){for(var $=0,Y=0,se=0,ae=re.length,_e=ae-1;se<ae;_e=se++){var fe=(re[se][0]-re[_e][0])*(re[_e][1]+re[se][1]),ue=$+fe;Y+=Math.abs($)>=Math.abs(fe)?$-ue+fe:fe-ue+$,$=ue}$+Y>=0!=!!N&&re.reverse()}var B=l.bz(function re(N,$){var Y,se=N&&N.type;if(se==="FeatureCollection")for(Y=0;Y<N.features.length;Y++)re(N.features[Y],$);else if(se==="GeometryCollection")for(Y=0;Y<N.geometries.length;Y++)re(N.geometries[Y],$);else if(se==="Feature")re(N.geometry,$);else if(se==="Polygon")O(N.coordinates,$);else if(se==="MultiPolygon")for(Y=0;Y<N.coordinates.length;Y++)O(N.coordinates[Y],$);return N});const V=l.bw.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},ne=l.bA,he=l.bw.VectorTileFeature,Se=ke;function ke(re,N){this.options=N||{},this.features=re,this.length=re.length}function we(re,N){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=N||4096}ke.prototype.feature=function(re){return new we(this.features[re],this.options.extent)},we.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var N=0;N<re.length;N++){for(var $=re[N],Y=[],se=0;se<$.length;se++)Y.push(new ne($[se][0],$[se][1]));this.geometry.push(Y)}return this.geometry},we.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,N=1/0,$=-1/0,Y=1/0,se=-1/0,ae=0;ae<re.length;ae++)for(var _e=re[ae],fe=0;fe<_e.length;fe++){var ue=_e[fe];N=Math.min(N,ue.x),$=Math.max($,ue.x),Y=Math.min(Y,ue.y),se=Math.max(se,ue.y)}return[N,Y,$,se]},we.prototype.toGeoJSON=he.prototype.toGeoJSON;var We=l.bB,Fe=Se;function pt(re){var N=new We;return function($,Y){for(var se in $.layers)Y.writeMessage(3,it,$.layers[se])}(re,N),N.finish()}function it(re,N){var $;N.writeVarintField(15,re.version||1),N.writeStringField(1,re.name||""),N.writeVarintField(5,re.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<re.length;$++)Y.feature=re.feature($),N.writeMessage(2,kt,Y);var se=Y.keys;for($=0;$<se.length;$++)N.writeStringField(3,se[$]);var ae=Y.values;for($=0;$<ae.length;$++)N.writeMessage(4,Pe,ae[$])}function kt(re,N){var $=re.feature;$.id!==void 0&&N.writeVarintField(1,$.id),N.writeMessage(2,Ze,re),N.writeVarintField(3,$.type),N.writeMessage(4,Et,$)}function Ze(re,N){var $=re.feature,Y=re.keys,se=re.values,ae=re.keycache,_e=re.valuecache;for(var fe in $.properties){var ue=$.properties[fe],ye=ae[fe];if(ue!==null){ye===void 0&&(Y.push(fe),ae[fe]=ye=Y.length-1),N.writeVarint(ye);var Me=typeof ue;Me!=="string"&&Me!=="boolean"&&Me!=="number"&&(ue=JSON.stringify(ue));var Ie=Me+":"+ue,ze=_e[Ie];ze===void 0&&(se.push(ue),_e[Ie]=ze=se.length-1),N.writeVarint(ze)}}}function dt(re,N){return(N<<3)+(7&re)}function mt(re){return re<<1^re>>31}function Et(re,N){for(var $=re.loadGeometry(),Y=re.type,se=0,ae=0,_e=$.length,fe=0;fe<_e;fe++){var ue=$[fe],ye=1;Y===1&&(ye=ue.length),N.writeVarint(dt(1,ye));for(var Me=Y===3?ue.length-1:ue.length,Ie=0;Ie<Me;Ie++){Ie===1&&Y!==1&&N.writeVarint(dt(2,Me-1));var ze=ue[Ie].x-se,xt=ue[Ie].y-ae;N.writeVarint(mt(ze)),N.writeVarint(mt(xt)),se+=ze,ae+=xt}Y===3&&N.writeVarint(dt(7,1))}}function Pe(re,N){var $=typeof re;$==="string"?N.writeStringField(1,re):$==="boolean"?N.writeBooleanField(7,re):$==="number"&&(re%1!=0?N.writeDoubleField(3,re):re<0?N.writeSVarintField(6,re):N.writeVarintField(5,re))}q.exports=pt,q.exports.fromVectorTileJs=pt,q.exports.fromGeojsonVt=function(re,N){N=N||{};var $={};for(var Y in re)$[Y]=new Fe(re[Y].features,N),$[Y].name=Y,$[Y].version=N.version,$[Y].extent=N.extent;return pt({layers:$})},q.exports.GeoJSONWrapper=Fe;var He=l.bz(q.exports);const yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},ot=Math.fround||(_t=new Float32Array(1),re=>(_t[0]=+re,_t[0]));var _t;const vt=3,Nt=5,Dn=6;class Gt{constructor(N){this.options=Object.assign(Object.create(yt),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){const{log:$,minZoom:Y,maxZoom:se}=this.options;$&&console.time("total time");const ae=`prepare ${N.length} points`;$&&console.time(ae),this.points=N;const _e=[];for(let ue=0;ue<N.length;ue++){const ye=N[ue];if(!ye.geometry)continue;const[Me,Ie]=ye.geometry.coordinates,ze=ot(Un(Me)),xt=ot(Ln(Ie));_e.push(ze,xt,1/0,ue,-1,1),this.options.reduce&&_e.push(0)}let fe=this.trees[se+1]=this._createTree(_e);$&&console.timeEnd(ae);for(let ue=se;ue>=Y;ue--){const ye=+Date.now();fe=this.trees[ue]=this._createTree(this._cluster(fe,ue)),$&&console.log("z%d: %d clusters in %dms",ue,fe.numItems,+Date.now()-ye)}return $&&console.timeEnd("total time"),this}getClusters(N,$){let Y=((N[0]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,N[1]));let ae=N[2]===180?180:((N[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)Y=-180,ae=180;else if(Y>ae){const Ie=this.getClusters([Y,se,180,_e],$),ze=this.getClusters([-180,se,ae,_e],$);return Ie.concat(ze)}const fe=this.trees[this._limitZoom($)],ue=fe.range(Un(Y),Ln(_e),Un(ae),Ln(se)),ye=fe.data,Me=[];for(const Ie of ue){const ze=this.stride*Ie;Me.push(ye[ze+Nt]>1?ir(ye,ze,this.clusterProps):this.points[ye[ze+vt]])}return Me}getChildren(N){const $=this._getOriginId(N),Y=this._getOriginZoom(N),se="No cluster with the specified id.",ae=this.trees[Y];if(!ae)throw new Error(se);const _e=ae.data;if($*this.stride>=_e.length)throw new Error(se);const fe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),ue=ae.within(_e[$*this.stride],_e[$*this.stride+1],fe),ye=[];for(const Me of ue){const Ie=Me*this.stride;_e[Ie+4]===N&&ye.push(_e[Ie+Nt]>1?ir(_e,Ie,this.clusterProps):this.points[_e[Ie+vt]])}if(ye.length===0)throw new Error(se);return ye}getLeaves(N,$,Y){const se=[];return this._appendLeaves(se,N,$=$||10,Y=Y||0,0),se}getTile(N,$,Y){const se=this.trees[this._limitZoom(N)],ae=Math.pow(2,N),{extent:_e,radius:fe}=this.options,ue=fe/_e,ye=(Y-ue)/ae,Me=(Y+1+ue)/ae,Ie={features:[]};return this._addTileFeatures(se.range(($-ue)/ae,ye,($+1+ue)/ae,Me),se.data,$,Y,ae,Ie),$===0&&this._addTileFeatures(se.range(1-ue/ae,ye,1,Me),se.data,ae,Y,ae,Ie),$===ae-1&&this._addTileFeatures(se.range(0,ye,ue/ae,Me),se.data,-1,Y,ae,Ie),Ie.features.length?Ie:null}getClusterExpansionZoom(N){let $=this._getOriginZoom(N)-1;for(;$<=this.options.maxZoom;){const Y=this.getChildren(N);if($++,Y.length!==1)break;N=Y[0].properties.cluster_id}return $}_appendLeaves(N,$,Y,se,ae){const _e=this.getChildren($);for(const fe of _e){const ue=fe.properties;if(ue&&ue.cluster?ae+ue.point_count<=se?ae+=ue.point_count:ae=this._appendLeaves(N,ue.cluster_id,Y,se,ae):ae<se?ae++:N.push(fe),N.length===Y)break}return ae}_createTree(N){const $=new l.av(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<N.length;Y+=this.stride)$.add(N[Y],N[Y+1]);return $.finish(),$.data=N,$}_addTileFeatures(N,$,Y,se,ae,_e){for(const fe of N){const ue=fe*this.stride,ye=$[ue+Nt]>1;let Me,Ie,ze;if(ye)Me=lr($,ue,this.clusterProps),Ie=$[ue],ze=$[ue+1];else{const at=this.points[$[ue+vt]];Me=at.properties;const[bt,At]=at.geometry.coordinates;Ie=Un(bt),ze=Ln(At)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Ie*ae-Y)),Math.round(this.options.extent*(ze*ae-se))]],tags:Me};let Pt;Pt=ye||this.options.generateId?$[ue+vt]:this.points[$[ue+vt]].id,Pt!==void 0&&(xt.id=Pt),_e.features.push(xt)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,$){const{radius:Y,extent:se,reduce:ae,minPoints:_e}=this.options,fe=Y/(se*Math.pow(2,$)),ue=N.data,ye=[],Me=this.stride;for(let Ie=0;Ie<ue.length;Ie+=Me){if(ue[Ie+2]<=$)continue;ue[Ie+2]=$;const ze=ue[Ie],xt=ue[Ie+1],Pt=N.within(ue[Ie],ue[Ie+1],fe),at=ue[Ie+Nt];let bt=at;for(const At of Pt){const Qt=At*Me;ue[Qt+2]>$&&(bt+=ue[Qt+Nt])}if(bt>at&&bt>=_e){let At,Qt=ze*at,nn=xt*at,Zt=-1;const $t=((Ie/Me|0)<<5)+($+1)+this.points.length;for(const _r of Pt){const on=_r*Me;if(ue[on+2]<=$)continue;ue[on+2]=$;const $n=ue[on+Nt];Qt+=ue[on]*$n,nn+=ue[on+1]*$n,ue[on+4]=$t,ae&&(At||(At=this._map(ue,Ie,!0),Zt=this.clusterProps.length,this.clusterProps.push(At)),ae(At,this._map(ue,on)))}ue[Ie+4]=$t,ye.push(Qt/bt,nn/bt,1/0,$t,-1,bt),ae&&ye.push(Zt)}else{for(let At=0;At<Me;At++)ye.push(ue[Ie+At]);if(bt>1)for(const At of Pt){const Qt=At*Me;if(!(ue[Qt+2]<=$)){ue[Qt+2]=$;for(let nn=0;nn<Me;nn++)ye.push(ue[Qt+nn])}}}}return ye}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,$,Y){if(N[$+Nt]>1){const _e=this.clusterProps[N[$+Dn]];return Y?Object.assign({},_e):_e}const se=this.points[N[$+vt]].properties,ae=this.options.map(se);return Y&&ae===se?Object.assign({},ae):ae}}function ir(re,N,$){return{type:"Feature",id:re[N+vt],properties:lr(re,N,$),geometry:{type:"Point",coordinates:[(Y=re[N],360*(Y-.5)),ls(re[N+1])]}};var Y}function lr(re,N,$){const Y=re[N+Nt],se=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,ae=re[N+Dn],_e=ae===-1?{}:Object.assign({},$[ae]);return Object.assign(_e,{cluster:!0,cluster_id:re[N+vt],point_count:Y,point_count_abbreviated:se})}function Un(re){return re/360+.5}function Ln(re){const N=Math.sin(re*Math.PI/180),$=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return $<0?0:$>1?1:$}function ls(re){const N=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function Pr(re,N,$,Y){for(var se,ae=Y,_e=$-N>>1,fe=$-N,ue=re[N],ye=re[N+1],Me=re[$],Ie=re[$+1],ze=N+3;ze<$;ze+=3){var xt=si(re[ze],re[ze+1],ue,ye,Me,Ie);if(xt>ae)se=ze,ae=xt;else if(xt===ae){var Pt=Math.abs(ze-_e);Pt<fe&&(se=ze,fe=Pt)}}ae>Y&&(se-N>3&&Pr(re,N,se,Y),re[se+2]=ae,$-se>3&&Pr(re,se,$,Y))}function si(re,N,$,Y,se,ae){var _e=se-$,fe=ae-Y;if(_e!==0||fe!==0){var ue=((re-$)*_e+(N-Y)*fe)/(_e*_e+fe*fe);ue>1?($=se,Y=ae):ue>0&&($+=_e*ue,Y+=fe*ue)}return(_e=re-$)*_e+(fe=N-Y)*fe}function kr(re,N,$,Y){var se={id:re===void 0?null:re,type:N,geometry:$,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var _e=ae.geometry,fe=ae.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Gi(ae,_e);else if(fe==="Polygon"||fe==="MultiLineString")for(var ue=0;ue<_e.length;ue++)Gi(ae,_e[ue]);else if(fe==="MultiPolygon")for(ue=0;ue<_e.length;ue++)for(var ye=0;ye<_e[ue].length;ye++)Gi(ae,_e[ue][ye])}(se),se}function Gi(re,N){for(var $=0;$<N.length;$+=3)re.minX=Math.min(re.minX,N[$]),re.minY=Math.min(re.minY,N[$+1]),re.maxX=Math.max(re.maxX,N[$]),re.maxY=Math.max(re.maxY,N[$+1])}function gr(re,N,$,Y){if(N.geometry){var se=N.geometry.coordinates,ae=N.geometry.type,_e=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),fe=[],ue=N.id;if($.promoteId?ue=N.properties[$.promoteId]:$.generateId&&(ue=Y||0),ae==="Point")Pi(se,fe);else if(ae==="MultiPoint")for(var ye=0;ye<se.length;ye++)Pi(se[ye],fe);else if(ae==="LineString")ki(se,fe,_e,!1);else if(ae==="MultiLineString"){if($.lineMetrics){for(ye=0;ye<se.length;ye++)ki(se[ye],fe=[],_e,!1),re.push(kr(ue,"LineString",fe,N.properties));return}dn(se,fe,_e,!1)}else if(ae==="Polygon")dn(se,fe,_e,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ye=0;ye<N.geometry.geometries.length;ye++)gr(re,{id:ue,geometry:N.geometry.geometries[ye],properties:N.properties},$,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<se.length;ye++){var Me=[];dn(se[ye],Me,_e,!0),fe.push(Me)}}re.push(kr(ue,ae,fe,N.properties))}}function Pi(re,N){N.push(Ae(re[0])),N.push(yr(re[1])),N.push(0)}function ki(re,N,$,Y){for(var se,ae,_e=0,fe=0;fe<re.length;fe++){var ue=Ae(re[fe][0]),ye=yr(re[fe][1]);N.push(ue),N.push(ye),N.push(0),fe>0&&(_e+=Y?(se*ye-ue*ae)/2:Math.sqrt(Math.pow(ue-se,2)+Math.pow(ye-ae,2))),se=ue,ae=ye}var Me=N.length-3;N[2]=1,Pr(N,0,Me,$),N[Me+2]=1,N.size=Math.abs(_e),N.start=0,N.end=N.size}function dn(re,N,$,Y){for(var se=0;se<re.length;se++){var ae=[];ki(re[se],ae,$,Y),N.push(ae)}}function Ae(re){return re/360+.5}function yr(re){var N=Math.sin(re*Math.PI/180),$=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return $<0?0:$>1?1:$}function Vr(re,N,$,Y,se,ae,_e,fe){if(Y/=N,ae>=($/=N)&&_e<Y)return re;if(_e<$||ae>=Y)return null;for(var ue=[],ye=0;ye<re.length;ye++){var Me=re[ye],Ie=Me.geometry,ze=Me.type,xt=se===0?Me.minX:Me.minY,Pt=se===0?Me.maxX:Me.maxY;if(xt>=$&&Pt<Y)ue.push(Me);else if(!(Pt<$||xt>=Y)){var at=[];if(ze==="Point"||ze==="MultiPoint")Ht(Ie,at,$,Y,se);else if(ze==="LineString")qt(Ie,at,$,Y,se,!1,fe.lineMetrics);else if(ze==="MultiLineString")cs(Ie,at,$,Y,se,!1);else if(ze==="Polygon")cs(Ie,at,$,Y,se,!0);else if(ze==="MultiPolygon")for(var bt=0;bt<Ie.length;bt++){var At=[];cs(Ie[bt],At,$,Y,se,!0),At.length&&at.push(At)}if(at.length){if(fe.lineMetrics&&ze==="LineString"){for(bt=0;bt<at.length;bt++)ue.push(kr(Me.id,ze,at[bt],Me.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||(at.length===1?(ze="LineString",at=at[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=at.length===3?"Point":"MultiPoint"),ue.push(kr(Me.id,ze,at,Me.tags))}}}return ue.length?ue:null}function Ht(re,N,$,Y,se){for(var ae=0;ae<re.length;ae+=3){var _e=re[ae+se];_e>=$&&_e<=Y&&(N.push(re[ae]),N.push(re[ae+1]),N.push(re[ae+2]))}}function qt(re,N,$,Y,se,ae,_e){for(var fe,ue,ye=oi(re),Me=se===0?wo:ai,Ie=re.start,ze=0;ze<re.length-3;ze+=3){var xt=re[ze],Pt=re[ze+1],at=re[ze+2],bt=re[ze+3],At=re[ze+4],Qt=se===0?xt:Pt,nn=se===0?bt:At,Zt=!1;_e&&(fe=Math.sqrt(Math.pow(xt-bt,2)+Math.pow(Pt-At,2))),Qt<$?nn>$&&(ue=Me(ye,xt,Pt,bt,At,$),_e&&(ye.start=Ie+fe*ue)):Qt>Y?nn<Y&&(ue=Me(ye,xt,Pt,bt,At,Y),_e&&(ye.start=Ie+fe*ue)):vr(ye,xt,Pt,at),nn<$&&Qt>=$&&(ue=Me(ye,xt,Pt,bt,At,$),Zt=!0),nn>Y&&Qt<=Y&&(ue=Me(ye,xt,Pt,bt,At,Y),Zt=!0),!ae&&Zt&&(_e&&(ye.end=Ie+fe*ue),N.push(ye),ye=oi(re)),_e&&(Ie+=fe)}var $t=re.length-3;xt=re[$t],Pt=re[$t+1],at=re[$t+2],(Qt=se===0?xt:Pt)>=$&&Qt<=Y&&vr(ye,xt,Pt,at),$t=ye.length-3,ae&&$t>=3&&(ye[$t]!==ye[0]||ye[$t+1]!==ye[1])&&vr(ye,ye[0],ye[1],ye[2]),ye.length&&N.push(ye)}function oi(re){var N=[];return N.size=re.size,N.start=re.start,N.end=re.end,N}function cs(re,N,$,Y,se,ae){for(var _e=0;_e<re.length;_e++)qt(re[_e],N,$,Y,se,ae,!1)}function vr(re,N,$,Y){re.push(N),re.push($),re.push(Y)}function wo(re,N,$,Y,se,ae){var _e=(ae-N)/(Y-N);return re.push(ae),re.push($+(se-$)*_e),re.push(1),_e}function ai(re,N,$,Y,se,ae){var _e=(ae-$)/(se-$);return re.push(N+(Y-N)*_e),re.push(ae),re.push(1),_e}function qi(re,N){for(var $=[],Y=0;Y<re.length;Y++){var se,ae=re[Y],_e=ae.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")se=ks(ae.geometry,N);else if(_e==="MultiLineString"||_e==="Polygon"){se=[];for(var fe=0;fe<ae.geometry.length;fe++)se.push(ks(ae.geometry[fe],N))}else if(_e==="MultiPolygon")for(se=[],fe=0;fe<ae.geometry.length;fe++){for(var ue=[],ye=0;ye<ae.geometry[fe].length;ye++)ue.push(ks(ae.geometry[fe][ye],N));se.push(ue)}$.push(kr(ae.id,_e,se,ae.tags))}return $}function ks(re,N){var $=[];$.size=re.size,re.start!==void 0&&($.start=re.start,$.end=re.end);for(var Y=0;Y<re.length;Y+=3)$.push(re[Y]+N,re[Y+1],re[Y+2]);return $}function je(re,N){if(re.transformed)return re;var $,Y,se,ae=1<<re.z,_e=re.x,fe=re.y;for($=0;$<re.features.length;$++){var ue=re.features[$],ye=ue.geometry,Me=ue.type;if(ue.geometry=[],Me===1)for(Y=0;Y<ye.length;Y+=2)ue.geometry.push(li(ye[Y],ye[Y+1],N,ae,_e,fe));else for(Y=0;Y<ye.length;Y++){var Ie=[];for(se=0;se<ye[Y].length;se+=2)Ie.push(li(ye[Y][se],ye[Y][se+1],N,ae,_e,fe));ue.geometry.push(Ie)}}return re.transformed=!0,re}function li(re,N,$,Y,se,ae){return[Math.round($*(re*Y-se)),Math.round($*(N*Y-ae))]}function pn(re,N,$,Y,se){for(var ae=N===se.maxZoom?0:se.tolerance/((1<<N)*se.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:Y,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<re.length;fe++){_e.numFeatures++,Zi(_e,re[fe],ae,se);var ue=re[fe].minX,ye=re[fe].minY,Me=re[fe].maxX,Ie=re[fe].maxY;ue<_e.minX&&(_e.minX=ue),ye<_e.minY&&(_e.minY=ye),Me>_e.maxX&&(_e.maxX=Me),Ie>_e.maxY&&(_e.maxY=Ie)}return _e}function Zi(re,N,$,Y){var se=N.geometry,ae=N.type,_e=[];if(ae==="Point"||ae==="MultiPoint")for(var fe=0;fe<se.length;fe+=3)_e.push(se[fe]),_e.push(se[fe+1]),re.numPoints++,re.numSimplified++;else if(ae==="LineString")sr(_e,se,re,$,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(fe=0;fe<se.length;fe++)sr(_e,se[fe],re,$,ae==="Polygon",fe===0);else if(ae==="MultiPolygon")for(var ue=0;ue<se.length;ue++){var ye=se[ue];for(fe=0;fe<ye.length;fe++)sr(_e,ye[fe],re,$,!0,fe===0)}if(_e.length){var Me=N.tags||null;if(ae==="LineString"&&Y.lineMetrics){for(var Ie in Me={},N.tags)Me[Ie]=N.tags[Ie];Me.mapbox_clip_start=se.start/se.size,Me.mapbox_clip_end=se.end/se.size}var ze={geometry:_e,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Me};N.id!==null&&(ze.id=N.id),re.features.push(ze)}}function sr(re,N,$,Y,se,ae){var _e=Y*Y;if(Y>0&&N.size<(se?_e:Y))$.numPoints+=N.length/3;else{for(var fe=[],ue=0;ue<N.length;ue+=3)(Y===0||N[ue+2]>_e)&&($.numSimplified++,fe.push(N[ue]),fe.push(N[ue+1])),$.numPoints++;se&&function(ye,Me){for(var Ie=0,ze=0,xt=ye.length,Pt=xt-2;ze<xt;Pt=ze,ze+=2)Ie+=(ye[ze]-ye[Pt])*(ye[ze+1]+ye[Pt+1]);if(Ie>0===Me)for(ze=0,xt=ye.length;ze<xt/2;ze+=2){var at=ye[ze],bt=ye[ze+1];ye[ze]=ye[xt-2-ze],ye[ze+1]=ye[xt-1-ze],ye[xt-2-ze]=at,ye[xt-1-ze]=bt}}(fe,ae),re.push(fe)}}function $e(re,N){var $=(N=this.options=function(se,ae){for(var _e in ae)se[_e]=ae[_e];return se}(Object.create(this.options),N)).debug;if($&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(se,ae){var _e=[];if(se.type==="FeatureCollection")for(var fe=0;fe<se.features.length;fe++)gr(_e,se.features[fe],ae,fe);else gr(_e,se.type==="Feature"?se:{geometry:se},ae);return _e}(re,N);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Y=function(se,ae){var _e=ae.buffer/ae.extent,fe=se,ue=Vr(se,1,-1-_e,_e,0,-1,2,ae),ye=Vr(se,1,1-_e,2+_e,0,-1,2,ae);return(ue||ye)&&(fe=Vr(se,1,-_e,1+_e,0,-1,2,ae)||[],ue&&(fe=qi(ue,1).concat(fe)),ye&&(fe=fe.concat(qi(ye,-1)))),fe}(Y,N),Y.length&&this.splitTile(Y,0,0,0),$&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ye(re,N,$){return 32*((1<<re)*$+N)+re}function nt(re,N){return N?re.properties[N]:re.id}function Dt(re,N){if(re==null)return!0;if(re.type==="Feature")return nt(re,N)!=null;if(re.type==="FeatureCollection"){const $=new Set;for(const Y of re.features){const se=nt(Y,N);if(se==null||$.has(se))return!1;$.add(se)}return!0}return!1}function zn(re,N){const $=new Map;if(re!=null)if(re.type==="Feature")$.set(nt(re,N),re);else for(const Y of re.features)$.set(nt(Y,N),Y);return $}$e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$e.prototype.splitTile=function(re,N,$,Y,se,ae,_e){for(var fe=[re,N,$,Y],ue=this.options,ye=ue.debug;fe.length;){Y=fe.pop(),$=fe.pop(),N=fe.pop(),re=fe.pop();var Me=1<<N,Ie=Ye(N,$,Y),ze=this.tiles[Ie];if(!ze&&(ye>1&&console.time("creation"),ze=this.tiles[Ie]=pn(re,N,$,Y,ue),this.tileCoords.push({z:N,x:$,y:Y}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,$,Y,ze.numFeatures,ze.numPoints,ze.numSimplified),console.timeEnd("creation"));var xt="z"+N;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(ze.source=re,se){if(N===ue.maxZoom||N===se)continue;var Pt=1<<se-N;if($!==Math.floor(ae/Pt)||Y!==Math.floor(_e/Pt))continue}else if(N===ue.indexMaxZoom||ze.numPoints<=ue.indexMaxPoints)continue;if(ze.source=null,re.length!==0){ye>1&&console.time("clipping");var at,bt,At,Qt,nn,Zt,$t=.5*ue.buffer/ue.extent,_r=.5-$t,on=.5+$t,$n=1+$t;at=bt=At=Qt=null,nn=Vr(re,Me,$-$t,$+on,0,ze.minX,ze.maxX,ue),Zt=Vr(re,Me,$+_r,$+$n,0,ze.minX,ze.maxX,ue),re=null,nn&&(at=Vr(nn,Me,Y-$t,Y+on,1,ze.minY,ze.maxY,ue),bt=Vr(nn,Me,Y+_r,Y+$n,1,ze.minY,ze.maxY,ue),nn=null),Zt&&(At=Vr(Zt,Me,Y-$t,Y+on,1,ze.minY,ze.maxY,ue),Qt=Vr(Zt,Me,Y+_r,Y+$n,1,ze.minY,ze.maxY,ue),Zt=null),ye>1&&console.timeEnd("clipping"),fe.push(at||[],N+1,2*$,2*Y),fe.push(bt||[],N+1,2*$,2*Y+1),fe.push(At||[],N+1,2*$+1,2*Y),fe.push(Qt||[],N+1,2*$+1,2*Y+1)}}},$e.prototype.getTile=function(re,N,$){var Y=this.options,se=Y.extent,ae=Y.debug;if(re<0||re>24)return null;var _e=1<<re,fe=Ye(re,N=(N%_e+_e)%_e,$);if(this.tiles[fe])return je(this.tiles[fe],se);ae>1&&console.log("drilling down to z%d-%d-%d",re,N,$);for(var ue,ye=re,Me=N,Ie=$;!ue&&ye>0;)ye--,Me=Math.floor(Me/2),Ie=Math.floor(Ie/2),ue=this.tiles[Ye(ye,Me,Ie)];return ue&&ue.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ye,Me,Ie),ae>1&&console.time("drilling down"),this.splitTile(ue.source,ye,Me,Ie,re,N,$),ae>1&&console.timeEnd("drilling down"),this.tiles[fe]?je(this.tiles[fe],se):null):null};class St extends j{constructor(N,$,Y,se){super(N,$,Y),this._dataUpdateable=new Map,this.loadGeoJSON=(ae,_e)=>{const{promoteId:fe}=ae;if(ae.request)return l.f(ae.request,(ue,ye,Me,Ie)=>{this._dataUpdateable=Dt(ye,fe)?zn(ye,fe):void 0,_e(ue,ye,Me,Ie)});if(typeof ae.data=="string")try{const ue=JSON.parse(ae.data);this._dataUpdateable=Dt(ue,fe)?zn(ue,fe):void 0,_e(null,ue)}catch{_e(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`))}else ae.dataDiff?this._dataUpdateable?(function(ue,ye,Me){var Ie,ze,xt,Pt;if(ye.removeAll&&ue.clear(),ye.remove)for(const at of ye.remove)ue.delete(at);if(ye.add)for(const at of ye.add){const bt=nt(at,Me);bt!=null&&ue.set(bt,at)}if(ye.update)for(const at of ye.update){let bt=ue.get(at.id);if(bt==null)continue;const At=!at.removeAllProperties&&(((Ie=at.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0||((ze=at.addOrUpdateProperties)===null||ze===void 0?void 0:ze.length)>0);if((at.newGeometry||at.removeAllProperties||At)&&(bt=Object.assign({},bt),ue.set(at.id,bt),At&&(bt.properties=Object.assign({},bt.properties))),at.newGeometry&&(bt.geometry=at.newGeometry),at.removeAllProperties)bt.properties={};else if(((xt=at.removeProperties)===null||xt===void 0?void 0:xt.length)>0)for(const Qt of at.removeProperties)Object.prototype.hasOwnProperty.call(bt.properties,Qt)&&delete bt.properties[Qt];if(((Pt=at.addOrUpdateProperties)===null||Pt===void 0?void 0:Pt.length)>0)for(const{key:Qt,value:nn}of at.addOrUpdateProperties)bt.properties[Qt]=nn}}(this._dataUpdateable,ae.dataDiff,fe),_e(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):_e(new Error(`Cannot update existing geojson data in ${ae.source}`)):_e(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,se&&(this.loadGeoJSON=se)}loadGeoJSONTile(N,$){const Y=N.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const se=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!se)return $(null,null);const ae=new class{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=fe.length,this._features=fe}feature(fe){return new class{constructor(ue){this._feature=ue,this.extent=l.N,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const ye of this._feature.geometry)ue.push([new l.P(ye[0],ye[1])]);return ue}{const ue=[];for(const ye of this._feature.geometry){const Me=[];for(const Ie of ye)Me.push(new l.P(Ie[0],Ie[1]));ue.push(Me)}return ue}}toGeoJSON(ue,ye,Me){return V.call(this,ue,ye,Me)}}(this._features[fe])}}(se.features);let _e=He(ae);_e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),$(null,{vectorTile:ae,rawData:_e.buffer})}loadData(N,$){var Y;(Y=this._pendingRequest)===null||Y===void 0||Y.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const se=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bu(N.request);this._pendingCallback=$,this._pendingRequest=this.loadGeoJSON(N,(ae,_e)=>{if(delete this._pendingCallback,delete this._pendingRequest,ae||!_e)return $(ae);if(typeof _e!="object")return $(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));{B(_e,!0);try{if(N.filter){const ue=l.bC(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(Me=>ue.value.evaluate({zoom:0},Me))}}this._geoJSONIndex=N.cluster?new Gt(function({superclusterOptions:ue,clusterProperties:ye}){if(!ye||!ue)return ue;const Me={},Ie={},ze={accumulated:null,zoom:0},xt={properties:null},Pt=Object.keys(ye);for(const at of Pt){const[bt,At]=ye[at],Qt=l.bC(At),nn=l.bC(typeof bt=="string"?[bt,["accumulated"],["get",at]]:bt);Me[at]=Qt.value,Ie[at]=nn.value}return ue.map=at=>{xt.properties=at;const bt={};for(const At of Pt)bt[At]=Me[At].evaluate(ze,xt);return bt},ue.reduce=(at,bt)=>{xt.properties=bt;for(const At of Pt)ze.accumulated=at[At],at[At]=Ie[At].evaluate(ze,xt)},ue}(N)).load(_e.features):function(ue,ye){return new $e(ue,ye)}(_e,N.geojsonVtOptions)}catch(ue){return $(ue)}this.loaded={};const fe={};if(se){const ue=se.finish();ue&&(fe.resourceTiming={},fe.resourceTiming[N.source]=JSON.parse(JSON.stringify(ue)))}$(null,fe)}})}reloadTile(N,$){const Y=this.loaded;return Y&&Y[N.uid]?super.reloadTile(N,$):this.loadTile(N,$)}removeSource(N,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()}getClusterExpansionZoom(N,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(Y){$(Y)}}getClusterChildren(N,$){try{$(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(Y){$(Y)}}getClusterLeaves(N,$){try{$(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(Y){$(Y)}}}class jr{constructor(N){this.self=N,this.actor=new l.C(N,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:St},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=($,Y)=>{if(this.workerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.workerSourceTypes[$]=Y},this.self.registerRTLTextPlugin=$=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=$.applyArabicShaping,l.bD.processBidirectionalText=$.processBidirectionalText,l.bD.processStyledBidirectionalText=$.processStyledBidirectionalText}}setReferrer(N,$){this.referrer=$}setImages(N,$,Y){this.availableImages[N]=$;for(const se in this.workerSources[N]){const ae=this.workerSources[N][se];for(const _e in ae)ae[_e].availableImages=$}Y()}setLayers(N,$,Y){this.getLayerIndex(N).replace($),Y()}updateLayers(N,$,Y){this.getLayerIndex(N).update($.layers,$.removedIds),Y()}loadTile(N,$,Y){this.getWorkerSource(N,$.type,$.source).loadTile($,Y)}loadDEMTile(N,$,Y){this.getDEMWorkerSource(N,$.source).loadTile($,Y)}reloadTile(N,$,Y){this.getWorkerSource(N,$.type,$.source).reloadTile($,Y)}abortTile(N,$,Y){this.getWorkerSource(N,$.type,$.source).abortTile($,Y)}removeTile(N,$,Y){this.getWorkerSource(N,$.type,$.source).removeTile($,Y)}removeDEMTile(N,$){this.getDEMWorkerSource(N,$.source).removeTile($)}removeSource(N,$,Y){if(!this.workerSources[N]||!this.workerSources[N][$.type]||!this.workerSources[N][$.type][$.source])return;const se=this.workerSources[N][$.type][$.source];delete this.workerSources[N][$.type][$.source],se.removeSource!==void 0?se.removeSource($,Y):Y()}loadWorkerSource(N,$,Y){try{this.self.importScripts($.url),Y()}catch(se){Y(se.toString())}}syncRTLPluginState(N,$,Y){try{l.bD.setState($);const se=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&se!=null){this.self.importScripts(se);const ae=l.bD.isParsed();Y(ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${se}`),ae)}}catch(se){Y(se.toString())}}getAvailableImages(N){let $=this.availableImages[N];return $||($=[]),$}getLayerIndex(N){let $=this.layerIndexes[N];return $||($=this.layerIndexes[N]=new S),$}getWorkerSource(N,$,Y){return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][$]||(this.workerSources[N][$]={}),this.workerSources[N][$][Y]||(this.workerSources[N][$][Y]=new this.workerSourceTypes[$]({send:(se,ae,_e)=>{this.actor.send(se,ae,_e,N)}},this.getLayerIndex(N),this.getAvailableImages(N))),this.workerSources[N][$][Y]}getDEMWorkerSource(N,$){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][$]||(this.demWorkerSources[N][$]=new K),this.demWorkerSources[N][$]}}return l.i()&&(self.worker=new jr(self)),jr}),p(["./shared"],function(l){var S="3.6.2";class b{static testProp(r){if(!b.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in b.docStyle)return r[c];return r[0]}static create(r,c,d){const m=window.document.createElement(r);return c!==void 0&&(m.className=c),d&&d.appendChild(m),m}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(r,c){r.style[b.transformProp]=c}static addEventListener(r,c,d,m={}){r.addEventListener(c,d,"passive"in m?m:m.capture)}static removeEventListener(r,c,d,m={}){r.removeEventListener(c,d,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static mousePos(r,c){const d=r.getBoundingClientRect();return new l.P(c.clientX-d.left-r.clientLeft,c.clientY-d.top-r.clientTop)}static touchPos(r,c){const d=r.getBoundingClientRect(),m=[];for(let _=0;_<c.length;_++)m.push(new l.P(c[_].clientX-d.left-r.clientLeft,c[_].clientY-d.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(g){!j&&k&&(K?O(g):M=g)}};let M,k,j=!1,K=!1;function O(g){const r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,k),g.isContextLost())return;I.supported=!0}catch{}g.deleteTexture(r),j=!0}var X,B;typeof document<"u"&&(k=document.createElement("img"),k.onload=function(){M&&O(M),M=null,K=!0},k.onerror=function(){j=!0,M=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,c,d,m;g.resetRequestQueue=()=>{r=[],c=0,d=0,m={}},g.addThrottleControl=D=>{const z=d++;return m[z]=D,z},g.removeThrottleControl=D=>{delete m[D],C()},g.getImage=(D,z,R=!0)=>{I.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const G={requestParameters:D,supportImageRefresh:R,callback:z,cancelled:!1,completed:!1,cancel:()=>{G.completed||G.cancelled||(G.cancelled=!0,G.innerRequest&&(G.innerRequest.cancel(),c--),C())}};return r.push(G),C(),G};const _=D=>{const{requestParameters:z,supportImageRefresh:R,callback:G}=D;return l.e(z,{type:"image"}),(R!==!1||l.i()||l.g(z.url)||z.headers&&!Object.keys(z.headers).reduce((te,ee)=>te&&ee==="accept",!0)?l.m:P)(z,(te,ee,ie,Q)=>{T(D,G,te,ee,ie,Q)})},T=(D,z,R,G,te,ee)=>{R?z(R):G instanceof HTMLImageElement||l.a(G)?z(null,G):G&&((ie,Q)=>{typeof createImageBitmap=="function"?l.b(ie,Q):l.d(ie,Q)})(G,(ie,Q)=>{ie!=null?z(ie):Q!=null&&z(null,Q,{cacheControl:te,expires:ee})}),D.cancelled||(D.completed=!0,c--,C())},C=()=>{const D=(()=>{const z=Object.keys(m);let R=!1;if(z.length>0){for(const G of z)if(R=m[G](),R)break}return R})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<D&&r.length>0;z++){const R=r.shift();if(R.cancelled){z--;continue}const G=_(R);c++,R.innerRequest=G}},P=(D,z)=>{const R=new Image,G=D.url;let te=!1;const ee=D.credentials;return ee&&ee==="include"?R.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!l.s(G))&&(R.crossOrigin="anonymous"),R.fetchPriority="high",R.onload=()=>{z(null,R),R.onerror=R.onload=null},R.onerror=()=>{te||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),R.onerror=R.onload=null},R.src=G,{cancel:()=>{te=!0,R.src=""}}}}(X||(X={})),X.resetRequestQueue(),function(g){g.Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown"}(B||(B={}));class V{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}normalizeSpriteURL(r,c,d){const m=function(_){const T=_.match(q);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${c}${d}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ne(g){var r=new l.A(3);return r[0]=g[0],r[1]=g[1],r[2]=g[2],r}var he,Se=function(g,r,c){return g[0]=r[0]-c[0],g[1]=r[1]-c[1],g[2]=r[2]-c[2],g};he=new l.A(3),l.A!=Float32Array&&(he[0]=0,he[1]=0,he[2]=0);var ke=function(g){var r=g[0],c=g[1];return r*r+c*c};function we(g){const r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){const c=[];for(const{id:d,url:m}of g){const _=`${d}${m}`;c.indexOf(_)===-1&&(c.push(_),r.push({id:d,url:m}))}}return r}function We(g,r,c,d,m){if(d)return void g(d);if(m!==Object.values(r).length||m!==Object.values(c).length)return;const _={};for(const T in r){_[T]={};const C=l.h.getImageCanvasContext(c[T]),P=r[T];for(const D in P){const{width:z,height:R,x:G,y:te,sdf:ee,pixelRatio:ie,stretchX:Q,stretchY:me,content:be}=P[D];_[T][D]={data:null,pixelRatio:ie,sdf:ee,stretchX:Q,stretchY:me,content:be,spriteData:{width:z,height:R,x:G,y:te,context:C}}}}g(null,_)}(function(){var g=new l.A(2);l.A!=Float32Array&&(g[0]=0,g[1]=0)})();class Fe{constructor(r,c,d,m){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(c,m)}update(r,c,d){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||d),{context:C}=this,{gl:P}=C;if(this.useMipmap=!!(c&&c.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,r):P.texImage2D(P.TEXTURE_2D,0,this.format,m,_,0,this.format,P.UNSIGNED_BYTE,r.data);else{const{x:D,y:z}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.a(r)?P.texSubImage2D(P.TEXTURE_2D,0,D,z,P.RGBA,P.UNSIGNED_BYTE,r):P.texSubImage2D(P.TEXTURE_2D,0,D,z,m,_,P.RGBA,P.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(r,c,d){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),c!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,c),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function pt(g){const{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class it extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,callback:d}of this.requestors)this._notify(c,d);this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const d=c.spriteData;c.data=new l.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let d=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(c.content,c)||(this.fire(new l.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,c){if(!r)return!0;let d=0;for(const m of r){if(m[0]<d||m[1]<m[0]||c<m[1])return!1;d=m[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const d=c.spriteData,m=d&&d.width||c.data.width,_=d&&d.height||c.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,d=!0){const m=this.getImage(r);if(d&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,c){let d=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(d=!1);this.isLoaded()||d?this._notify(r,c):this.requestors.push({ids:r,callback:c})}_notify(r,c){const d={};for(const m of r){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?d[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,d)}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],d=this.getImage(r);if(!d)return null;if(c&&c.position.version===d.version)return c.position;if(c)c.position.version=d.version;else{const m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new l.I(m,d);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Fe(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:c,h:d}=l.p(r),m=this.atlasImage;m.resize({width:c||1,height:d||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],C=T.x+1,P=T.y+1,D=this.getImage(_).data,z=D.width,R=D.height;l.R.copy(D,m,{x:0,y:0},{x:C,y:P},{width:z,height:R}),l.R.copy(D,m,{x:0,y:R-1},{x:C,y:P-1},{width:z,height:1}),l.R.copy(D,m,{x:0,y:0},{x:C,y:P+R},{width:z,height:1}),l.R.copy(D,m,{x:z-1,y:0},{x:C-1,y:P},{width:1,height:R}),l.R.copy(D,m,{x:0,y:0},{x:C+z,y:P},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const d=this.getImage(c);d||l.w(`Image with ID: "${c}" was not found`),pt(d)&&this.updateImage(c,d)}}}const kt=1e20;function Ze(g,r,c,d,m,_,T,C,P){for(let D=r;D<r+d;D++)dt(g,c*_+D,_,m,T,C,P);for(let D=c;D<c+m;D++)dt(g,D*_+r,1,d,T,C,P)}function dt(g,r,c,d,m,_,T){_[0]=0,T[0]=-kt,T[1]=kt,m[0]=g[r];for(let C=1,P=0,D=0;C<d;C++){m[C]=g[r+C*c];const z=C*C;do{const R=_[P];D=(m[C]-m[R]+z-R*R)/(C-R)/2}while(D<=T[P]&&--P>-1);P++,_[P]=C,T[P]=D,T[P+1]=kt}for(let C=0,P=0;C<d;C++){for(;T[P+1]<C;)P++;const D=_[P],z=C-D;g[r+C*c]=m[D]+z*z}}class mt{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r,c){const d=[];for(const m in r)for(const _ of r[m])d.push({stack:m,id:_});l.o(d,({stack:m,id:_},T)=>{let C=this.entries[m];C||(C=this.entries[m]={glyphs:{},requests:{},ranges:{}});let P=C.glyphs[_];if(P!==void 0)return void T(null,{stack:m,id:_,glyph:P});if(P=this._tinySDF(C,m,_),P)return C.glyphs[_]=P,void T(null,{stack:m,id:_,glyph:P});const D=Math.floor(_/256);if(256*D>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[D])return void T(null,{stack:m,id:_,glyph:P});if(!this.url)return void T(new Error("glyphsUrl is not set"));let z=C.requests[D];z||(z=C.requests[D]=[],mt.loadGlyphRange(m,D,this.url,this.requestManager,(R,G)=>{if(G){for(const te in G)this._doesCharSupportLocalGlyph(+te)||(C.glyphs[+te]=G[+te]);C.ranges[D]=!0}for(const te of z)te(R,G);delete C.requests[D]})),z.push((R,G)=>{R?T(R):G&&T(null,{stack:m,id:_,glyph:G[_]||null})})},(m,_)=>{if(m)c(m);else if(_){const T={};for(const{stack:C,id:P,glyph:D}of _)(T[C]||(T[C]={}))[P]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};c(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r))}_tinySDF(r,c,d){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let _=r.tinySDF;if(!_){let C="400";/bold/i.test(c)?C="900":/medium/i.test(c)?C="500":/light/i.test(c)&&(C="200"),_=r.tinySDF=new mt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:C})}const T=_.draw(String.fromCharCode(d));return{id:d,bitmap:new l.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}mt.loadGlyphRange=function(g,r,c,d,m){const _=256*r,T=_+255,C=d.transformRequest(c.replace("{fontstack}",g).replace("{range}",`${_}-${T}`),B.Glyphs);l.l(C,(P,D)=>{if(P)m(P);else if(D){const z={};for(const R of l.n(D))z[R.id]=R;m(null,z)}})},mt.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:c=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=c;const C=this.size=g+4*r,P=this._createCanvas(C),D=this.ctx=P.getContext("2d",{willReadFrequently:!0});D.font=`${T} ${_} ${g}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(g){const r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(g),T=Math.ceil(c),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),P=Math.min(this.size-this.buffer,T+Math.ceil(d)),D=C+2*this.buffer,z=P+2*this.buffer,R=Math.max(D*z,0),G=new Uint8ClampedArray(R),te={data:G,width:D,height:z,glyphWidth:C,glyphHeight:P,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(C===0||P===0)return te;const{ctx:ee,buffer:ie,gridInner:Q,gridOuter:me}=this;ee.clearRect(ie,ie,C,P),ee.fillText(g,ie,ie+T);const be=ee.getImageData(ie,ie,C,P);me.fill(kt,0,R),Q.fill(0,0,R);for(let le=0;le<P;le++)for(let ge=0;ge<C;ge++){const Ce=be.data[4*(le*C+ge)+3]/255;if(Ce===0)continue;const Ee=(le+ie)*D+ge+ie;if(Ce===1)me[Ee]=0,Q[Ee]=kt;else{const De=.5-Ce;me[Ee]=De>0?De*De:0,Q[Ee]=De<0?De*De:0}}Ze(me,0,0,D,z,D,this.f,this.v,this.z),Ze(Q,ie,ie,C,P,D,this.f,this.v,this.z);for(let le=0;le<R;le++){const ge=Math.sqrt(me[le])-Math.sqrt(Q[le]);G[le]=Math.round(255-255*(ge/this.radius+this.cutoff))}return te}};class Et{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,c){return l.z(r.expression.evaluate(c))}interpolate(r,c,d){return{x:l.B.number(r.x,c.x,d),y:l.B.number(r.y,c.y,d),z:l.B.number(r.z,c.z,d)}}}let Pe;class He extends l.E{constructor(r){super(),Pe=Pe||new l.r({anchor:new l.D(l.v.light.anchor),position:new Et,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Pe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(l.t,r,c))for(const d in r){const m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,d){return(!d||d.validate!==!1)&&l.x(this,r.call(l.y,l.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class yt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const d=r.join(",")+String(c);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,c)),this.dashEntry[d]}getDashRanges(r,c,d){const m=[];let _=r.length%2==1?-r[r.length-1]*d:0,T=r[0]*d,C=!0;m.push({left:_,right:T,isDash:C,zeroLength:r[0]===0});let P=r[0];for(let D=1;D<r.length;D++){C=!C;const z=r[D];_=P*d,P+=z,T=P*d,m.push({left:_,right:T,isDash:C,zeroLength:z===0})}return m}addRoundDash(r,c,d){const m=c/2;for(let _=-d;_<=d;_++){const T=this.width*(this.nextRow+d+_);let C=0,P=r[C];for(let D=0;D<this.width;D++){D/P.right>1&&(P=r[++C]);const z=Math.abs(D-P.left),R=Math.abs(D-P.right),G=Math.min(z,R);let te;const ee=_/d*(m+1);if(P.isDash){const ie=m-Math.abs(ee);te=Math.sqrt(G*G+ie*ie)}else te=m-Math.sqrt(G*G+ee*ee);this.data[T+D]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const P=r[C],D=r[C+1];P.zeroLength?r.splice(C,1):D&&D.isDash===P.isDash&&(D.left=P.left,r.splice(C,1))}const c=r[0],d=r[r.length-1];c.isDash===d.isDash&&(c.left=d.left-this.width,d.right=c.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let C=0;C<this.width;C++){C/T.right>1&&(T=r[++_]);const P=Math.abs(C-T.left),D=Math.abs(C-T.right),z=Math.min(P,D);this.data[m+C]=Math.max(0,Math.min(255,(T.isDash?z:-z)+128))}}addDash(r,c){const d=c?7:0,m=2*d+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let C=0;C<r.length;C++)_+=r[C];if(_!==0){const C=this.width/_,P=this.getDashRanges(r,this.width,C);c?this.addRoundDash(P,C,d):this.addRegularDash(P)}const T={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class ot{constructor(r,c,d){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=d;const m=this.workerPool.acquire(d);for(let _=0;_<m.length;_++){const T=new l.C(m[_],c,d);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c,d){l.o(this.actors,(m,_)=>{m.send(r,c,_)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function _t(g,r,c){const d=function(m,_){if(m)return c(m);if(_){const T=l.F(l.e(_,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),c(null,T)}};return g.url?l.f(r.transformRequest(g.url,B.Source),d):l.h.frame(()=>d(null,g))}class vt{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.L?new l.L(r.lng,r.lat):l.L.convert(r),this}extend(r){const c=this._sw,d=this._ne;let m,_;if(r instanceof l.L)m=r,_=r;else{if(!(r instanceof vt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(vt.convert(r)):this.extend(l.L.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.L.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return c||d?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:d}=l.L.convert(r);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(r){return r instanceof vt?r:r&&new vt(r)}static fromLngLat(r,c=0){const d=360*c/40075017,m=d/Math.cos(Math.PI/180*r.lat);return new vt(new l.L(r.lng-m,r.lat-d),new l.L(r.lng+m,r.lat+d))}}class Nt{constructor(r,c,d){this.bounds=vt.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),d=Math.floor(l.G(this.bounds.getWest())*c),m=Math.floor(l.H(this.bounds.getNorth())*c),_=Math.ceil(l.G(this.bounds.getEast())*c),T=Math.ceil(l.H(this.bounds.getSouth())*c);return r.x>=d&&r.x<_&&r.y>=m&&r.y<T}}class Dn extends l.E{constructor(r,c,d,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_t(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):T&&(l.e(this,T),T.bounds&&(this.tileBounds=new Nt(T.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(c,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(d,B.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,C){return delete r.request,r.aborted?c(null):T&&T.status!==404?c(T):(C&&C.resourceTiming&&(r.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&r.setExpiryData(C),r.loadVectorData(C,this.map.painter),c(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=c:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Gt extends l.E{constructor(r,c,d,m){super(),this.id=r,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},c),l.e(this,l.F(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=_t(this._options,this.map._requestManager,(r,c)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.j(r)):c&&(l.e(this,c),c.bounds&&(this.tileBounds=new Nt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=X.getImage(this.map._requestManager.transformRequest(d,B.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(m)r.state="errored",c(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const C=this.map.painter.context,P=C.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new Fe(C,_,P.RGBA,{useMipmap:!0}),r.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),r.state="loaded",c(null)}},this.map._refreshExpiredTiles)}abortTile(r,c){r.request&&(r.request.cancel(),delete r.request),c()}unloadTile(r,c){r.texture&&this.map.painter.saveTileTexture(r.texture),c()}hasTransition(){return!1}}class ir extends Gt{constructor(r,c,d,m){super(r,c,d,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r,c){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(d,B.Tile);function _(T,C){T&&(r.state="errored",c(T)),C&&(r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",c(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=X.getImage(m,(T,C,P)=>l._(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(T)r.state="errored",c(T);else if(C){this.map._refreshExpiredTiles&&r.setExpiryData(P);const D=l.a(C)&&l.J()?C:yield function(R){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const G=R.width+2,te=R.height+2;try{return new l.R({width:G,height:te},yield l.M(R,-1,-1,G,te))}catch{}}return l.h.getImageData(R,1)})}(C),z={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",z,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const c=r.canonical,d=Math.pow(2,c.z),m=(c.x-1+d)%d,_=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+d)%d,C=c.x+1===d?r.wrap+1:r.wrap,P={};return P[new l.O(r.overscaledZ,_,c.z,m,c.y).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(P[new l.O(r.overscaledZ,_,c.z,m,c.y-1).key]={backfilled:!1},P[new l.O(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<d&&(P[new l.O(r.overscaledZ,_,c.z,m,c.y+1).key]={backfilled:!1},P[new l.O(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},P[new l.O(r.overscaledZ,C,c.z,T,c.y+1).key]={backfilled:!1}),P}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class lr extends l.E{constructor(r,c,d,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(m),this._data=c.data,this._options=l.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*_,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:l.N,radius:(c.clusterRadius||50)*_,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},c),this}getClusterChildren(r,c){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},c),this}getClusterLeaves(r,c,d,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:c,offset:d},m),this}_updateWorkerData(r){const c=l.e({},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),B.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(d,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),d)return void this.fire(new l.j(d));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(T,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,c){const d=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(d,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?c(null):_?c(_):(r.loadVectorData(T,this.map.painter,d==="reloadTile"),c(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Un=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ln extends l.E{constructor(r,c,d,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=X.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(C,P)=>{this._request=null,this._loaded=!0,C?this.fire(new l.j(C)):P&&(this.image=P,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Un.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Fe(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,C=-1/0,P=-1/0;for(const G of m)_=Math.min(_,G.x),T=Math.min(T,G.y),C=Math.max(C,G.x),P=Math.max(P,G.y);const D=Math.max(C-_,P-T),z=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),R=Math.pow(2,z);return new l.W(z,Math.floor((_+C)/2*R),Math.floor((T+P)/2*R))}(c),this.minzoom=this.maxzoom=this.tileID.z;const d=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.N,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.N),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,c){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},c(null)):(r.state="errored",c(null))}hasTransition(){return!1}}class ls extends Ln{constructor(r,c,d,m){super(r,c,d,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,B.Source).url);l.X(this.urls,(T,C)=>{this._loaded=!0,T?this.fire(new l.j(T)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,Un.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new Fe(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let C=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,C=!0)}C&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=c}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Pr extends Ln{constructor(r,c,d,m){super(r,c,d,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,C=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,Un.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Fe(T,this.canvas,C.RGBA,{premultiply:!0});let P=!1;for(const D in this.tiles){const z=this.tiles[D];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,P=!0)}P&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const si={},kr=g=>{switch(g){case"geojson":return lr;case"image":return Ln;case"raster":return Gt;case"raster-dem":return ir;case"vector":return Dn;case"video":return ls;case"canvas":return Pr}return si[g]};function Gi(g,r){const c=l.Z();return l.$(c,c,[1,1,0]),l.a0(c,c,[.5*g.width,.5*g.height,1]),l.a1(c,c,g.calculatePosMatrix(r.toUnwrapped()))}function gr(g,r,c,d,m,_){const T=function(R,G,te){if(R)for(const ee of R){const ie=G[ee];if(ie&&ie.source===te&&ie.type==="fill-extrusion")return!0}else for(const ee in G){const ie=G[ee];if(ie.source===te&&ie.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,g.id),C=_.maxPitchScaleFactor(),P=g.tilesIn(d,C,T);P.sort(Pi);const D=[];for(const R of P)D.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(r,c,g._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,m,_,C,Gi(g.transform,R.tileID))});const z=function(R){const G={},te={};for(const ee of R){const ie=ee.queryResults,Q=ee.wrappedTileID,me=te[Q]=te[Q]||{};for(const be in ie){const le=ie[be],ge=me[be]=me[be]||{},Ce=G[be]=G[be]||[];for(const Ee of le)ge[Ee.featureIndex]||(ge[Ee.featureIndex]=!0,Ce.push(Ee))}}return G}(D);for(const R in z)z[R].forEach(G=>{const te=G.feature,ee=g.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ee});return z}function Pi(g,r){const c=g.tileID,d=r.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}class ki{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a2(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const C of m){const P=C.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(P.length!==0){C.layers=P,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(D=>P.filter(z=>z.id===D)[0]));for(const D of P)T[D.id]=C}}return T}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const m=this.buckets[d];m.uploadPending()&&m.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Fe(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Fe(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,d,m,_,T,C,P,D,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:z,transform:P,params:C,queryPadding:this.queryPadding*D},r,c,d):{}}querySourceFeatures(r,c){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const m=d.loadVTLayers(),_=c&&c.sourceLayer?c.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const C=l.a6(c&&c.filter),{z:P,x:D,y:z}=this.tileID.canonical,R={z:P,x:D,y:z};for(let G=0;G<T.length;G++){const te=T.feature(G);if(C.needGeometry){const Q=l.a7(te,!0);if(!C.filter(new l.a8(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!C.filter(new l.a8(this.tileID.overscaledZ),te))continue;const ee=d.getId(te,_),ie=new l.a9(te,P,D,z,ee);ie.tile=R,r.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const d=l.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let m=!1;if(this.expirationTime>d)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const _=this.expirationTime-c;_?this.expirationTime=d+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",C=d[T],P=r[T];if(!C||!P||Object.keys(P).length===0)continue;_.update(P,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=c&&c.style&&c.style.getLayer(m);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.h.now()+r}setDependencies(r,c){const d={};for(const m of c)d[m]=!0;this.dependencies[r]=d}hasDependency(r,c){for(const d of r){const m=this.dependencies[d];if(m){for(const _ of c)if(m[_])return!0}}return!1}}class dn{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,d){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:c,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},d)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const d=r.wrapped().key,m=c===void 0?0:this.data[d].indexOf(c),_=this.data[d][m];return this.data[d].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const d in this.data)for(const m of this.data[d])r(m.value)||c.push(m);for(const d of c)this.remove(d.value.tileID,d)}}class Ae{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,d){const m=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},l.e(this.stateChanges[r][m],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])d[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in d)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,c,d){if(this.deletedStates[r]===null)return;const m=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&c!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][d]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(d in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][d]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,c){const d=String(c),m=l.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][c];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const d={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),l.e(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];d[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const C of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][C];_[T]=this.state[m][T]}d[m]=d[m]||{},l.e(d[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const m in r)r[m].setFeatureState(d,c)}}class yr extends l.E{constructor(r,c,d){super(),this.id=r,this.dispatcher=d,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,C)=>{const P=new(kr(_.type))(m,_,T,C);if(P.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${P.id}`);return P})(r,c,d,this),this._tiles={},this._cache=new dn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ae,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c){return this._source.loadTile(r,c)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const d=this._tiles[c];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Vr).map(r=>r.key)}getRenderableIds(r){const c=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&c.push(this._tiles[d]);return r?c.sort((d,m)=>{const _=d.tileID,T=m.tileID,C=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||P.y-C.y||P.x-C.x}).map(d=>d.tileID.key):c.map(d=>d.tileID).sort(Vr).map(d=>d.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=c),this._loadTile(d,this._tileLoaded.bind(this,d,r,c)))}_tileLoaded(r,c,d,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.h.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const _=c[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);d(r,T),d(T,r)}}function d(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const C=_.tileID.canonical.y-m.tileID.canonical.y,P=Math.pow(2,m.tileID.canonical.z),D=_.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+P)===1?T+=P:Math.abs(T-P)===1&&(T-=P)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,C),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,d,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>d)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const D=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[D.key],T&&T.hasData()&&(C=D)}let P=C;for(;P.overscaledZ>c;)if(P=P.scaledTo(P.overscaledZ-1),r[P.key]){m[C.key]=C;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=c?d:null}for(let d=r.overscaledZ-1;d>=c;d--){const m=r.scaledTo(d),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(c*d*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const d={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+c),d[_.tileID.key]=_}this._tiles=d;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,c){if(this.transform=r,this.terrain=c,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new l.O(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(d=d.filter(z=>this._source.hasTile(z)))):d=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-yr.maxOverzooming,this._source.minzoom),T=Math.max(m+yr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const R of d)if(R.canonical.z>this._source.minzoom){const G=R.scaledTo(R.canonical.z-1);z[G.key]=G;const te=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));z[te.key]=te}d=d.concat(Object.values(z))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(d,m);if(Ht(this._source.type)){const z={},R={},G=Object.keys(P),te=l.h.now();for(const ee of G){const ie=P[ee],Q=this._tiles[ee];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=te)continue;const me=this.findLoadedParent(ie,_);me&&(this._addTile(me.tileID),z[me.tileID.key]=me.tileID),R[ee]=ie}this._retainLoadedChildren(R,m,T,P);for(const ee in z)P[ee]||(this._coveredTiles[ee]=!0,P[ee]=z[ee]);if(c){const ee={},ie={};for(const Q of d)this._tiles[Q.key].hasData()?ee[Q.key]=Q:ie[Q.key]=Q;for(const Q in ie){const me=ie[Q].children(this._source.maxzoom);this._tiles[me[0].key]&&this._tiles[me[1].key]&&this._tiles[me[2].key]&&this._tiles[me[3].key]&&(ee[me[0].key]=P[me[0].key]=me[0],ee[me[1].key]=P[me[1].key]=me[1],ee[me[2].key]=P[me[2].key]=me[2],ee[me[3].key]=P[me[3].key]=me[3],delete ie[Q])}for(const Q in ie){const me=this.findLoadedParent(ie[Q],this._source.minzoom);if(me){ee[me.tileID.key]=P[me.tileID.key]=me.tileID;for(const be in ee)ee[be].isChildOf(me.tileID)&&delete ee[be]}}for(const Q in this._tiles)ee[Q]||(this._coveredTiles[Q]=!0)}}for(const z in P)this._tiles[z].clearFadeHold();const D=l.ab(this._tiles,P);for(const z of D){const R=this._tiles[z];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){const d={},m={},_=Math.max(c-yr.maxOverzooming,this._source.minzoom),T=Math.max(c+yr.maxUnderzooming,this._source.minzoom),C={};for(const P of r){const D=this._addTile(P);d[P.key]=P,D.hasData()||c<this._source.maxzoom&&(C[P.key]=P)}this._retainLoadedChildren(C,c,T,d);for(const P of r){let D=this._tiles[P.key];if(D.hasData())continue;if(c+1>this._source.maxzoom){const R=P.children(this._source.maxzoom)[0],G=this.getTile(R);if(G&&G.hasData()){d[R.key]=R;continue}}else{const R=P.children(this._source.maxzoom);if(d[R[0].key]&&d[R[1].key]&&d[R[2].key]&&d[R[3].key])continue}let z=D.wasRequested();for(let R=P.overscaledZ-1;R>=_;--R){const G=P.scaledTo(R);if(m[G.key])break;if(m[G.key]=!0,D=this.getTile(G),!D&&z&&(D=this._addTile(G)),D){const te=D.hasData();if((z||te)&&(d[G.key]=G),z=D.wasRequested(),te)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let d,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}c.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;m=_}for(const _ of c)this._loadedParentTiles[_]=d}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const d=c;return c||(c=new ki(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,r.key,c.state))),c.uses++,this._tiles[r.key]=c,d||this._source.fire(new l.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=c.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,d){const m=[],_=this.transform;if(!_)return m;const T=d?_.getCameraQueryGeometry(r):r,C=r.map(ee=>_.pointCoordinate(ee,this.terrain)),P=T.map(ee=>_.pointCoordinate(ee,this.terrain)),D=this.getIds();let z=1/0,R=1/0,G=-1/0,te=-1/0;for(const ee of P)z=Math.min(z,ee.x),R=Math.min(R,ee.y),G=Math.max(G,ee.x),te=Math.max(te,ee.y);for(let ee=0;ee<D.length;ee++){const ie=this._tiles[D[ee]];if(ie.holdingForFade())continue;const Q=ie.tileID,me=Math.pow(2,_.zoom-ie.tileID.overscaledZ),be=c*ie.queryPadding*l.N/ie.tileSize/me,le=[Q.getTilePoint(new l.U(z,R)),Q.getTilePoint(new l.U(G,te))];if(le[0].x-be<l.N&&le[0].y-be<l.N&&le[1].x+be>=0&&le[1].y+be>=0){const ge=C.map(Ee=>Q.getTilePoint(Ee)),Ce=P.map(Ee=>Q.getTilePoint(Ee));m.push({tile:ie,tileID:Q,queryGeometry:ge,cameraQueryGeometry:Ce,scale:me})}}return m}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of c)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Ht(this._source.type)){const r=l.h.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,d){this._state.updateState(r=r||"_geojsonTileLayer",c,d)}removeFeatureState(r,c,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,d)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,d){const m=this._tiles[r];m&&m.setDependencies(c,d)}reloadTilesForDependencies(r,c){for(const d in this._tiles)this._tiles[d].hasDependency(r,c)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,c))}}function Vr(g,r){const c=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||d-c||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function Ht(g){return g==="raster"||g==="image"||g==="video"}yr.maxOverzooming=10,yr.maxUnderzooming=3;const qt="mapboxgl_preloaded_worker_pool";class oi{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<oi.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qt]}numActive(){return Object.keys(this.active).length}}const cs=Math.floor(l.h.hardwareConcurrency/2);let vr;function wo(){return vr||(vr=new oi),vr}oi.workerCount=l.ac(globalThis)?Math.max(Math.min(cs,3),1):1;class ai{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let c=1,d=this._distances[c];const m=r*this.paddedLength+this.padding;for(;d<m&&c<this._distances.length;)d=this._distances[++c];const _=c-1,T=this._distances[_],C=d-T,P=C>0?(m-T)/C:0;return this.points[_].mult(1-P).add(this.points[c].mult(P))}}function qi(g,r){let c=!0;return g==="always"||g!=="never"&&r!=="never"||(c=!1),c}class ks{constructor(r,c,d){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(c/d);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,d,m,_){this._forEachCell(c,d,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,c,d,m){this._forEachCell(c-m,d-m,c+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(d),this.circles.push(m)}_insertBoxCell(r,c,d,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,c,d,m,_,T){this.circleCells[_].push(T)}_query(r,c,d,m,_,T,C){if(d<0||r>this.width||m<0||c>this.height)return[];const P=[];if(r<=0&&c<=0&&this.width<=d&&this.height<=m){if(_)return[{key:null,x1:r,y1:c,x2:d,y2:m}];for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const z=this.circles[3*D],R=this.circles[3*D+1],G=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:z-G,y1:R-G,x2:z+G,y2:R+G})}}else this._forEachCell(r,c,d,m,this._queryCell,P,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},C);return P}query(r,c,d,m){return this._query(r,c,d,m,!1,null)}hitTest(r,c,d,m,_,T){return this._query(r,c,d,m,!0,_,T).length>0}hitTestCircle(r,c,d,m,_){const T=r-d,C=r+d,P=c-d,D=c+d;if(C<0||T>this.width||D<0||P>this.height)return!1;const z=[];return this._forEachCell(T,P,C,D,this._queryCellCircle,z,{hitTest:!0,overlapMode:m,circle:{x:r,y:c,radius:d},seenUids:{box:{},circle:{}}},_),z.length>0}_queryCell(r,c,d,m,_,T,C,P){const{seenUids:D,hitTest:z,overlapMode:R}=C,G=this.boxCells[_];if(G!==null){const ee=this.bboxes;for(const ie of G)if(!D.box[ie]){D.box[ie]=!0;const Q=4*ie,me=this.boxKeys[ie];if(r<=ee[Q+2]&&c<=ee[Q+3]&&d>=ee[Q+0]&&m>=ee[Q+1]&&(!P||P(me))&&(!z||!qi(R,me.overlapMode))&&(T.push({key:me,x1:ee[Q],y1:ee[Q+1],x2:ee[Q+2],y2:ee[Q+3]}),z))return!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!D.circle[ie]){D.circle[ie]=!0;const Q=3*ie,me=this.circleKeys[ie];if(this._circleAndRectCollide(ee[Q],ee[Q+1],ee[Q+2],r,c,d,m)&&(!P||P(me))&&(!z||!qi(R,me.overlapMode))){const be=ee[Q],le=ee[Q+1],ge=ee[Q+2];if(T.push({key:me,x1:be-ge,y1:le-ge,x2:be+ge,y2:le+ge}),z)return!0}}}return!1}_queryCellCircle(r,c,d,m,_,T,C,P){const{circle:D,seenUids:z,overlapMode:R}=C,G=this.boxCells[_];if(G!==null){const ee=this.bboxes;for(const ie of G)if(!z.box[ie]){z.box[ie]=!0;const Q=4*ie,me=this.boxKeys[ie];if(this._circleAndRectCollide(D.x,D.y,D.radius,ee[Q+0],ee[Q+1],ee[Q+2],ee[Q+3])&&(!P||P(me))&&!qi(R,me.overlapMode))return T.push(!0),!0}}const te=this.circleCells[_];if(te!==null){const ee=this.circles;for(const ie of te)if(!z.circle[ie]){z.circle[ie]=!0;const Q=3*ie,me=this.circleKeys[ie];if(this._circlesCollide(ee[Q],ee[Q+1],ee[Q+2],D.x,D.y,D.radius)&&(!P||P(me))&&!qi(R,me.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,d,m,_,T,C,P){const D=this._convertToXCellCoord(r),z=this._convertToYCellCoord(c),R=this._convertToXCellCoord(d),G=this._convertToYCellCoord(m);for(let te=D;te<=R;te++)for(let ee=z;ee<=G;ee++)if(_.call(this,r,c,d,m,this.xCellCount*ee+te,T,C,P))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,d,m,_,T){const C=m-r,P=_-c,D=d+T;return D*D>C*C+P*P}_circleAndRectCollide(r,c,d,m,_,T,C){const P=(T-m)/2,D=Math.abs(r-(m+P));if(D>P+d)return!1;const z=(C-_)/2,R=Math.abs(c-(_+z));if(R>z+d)return!1;if(D<=P||R<=z)return!0;const G=D-P,te=R-z;return G*G+te*te<=d*d}}function je(g,r,c,d,m){const _=l.Z();return r?(l.a0(_,_,[1/m,1/m,1]),c||l.ae(_,_,d.angle)):l.a1(_,d.labelPlaneMatrix,g),_}function li(g,r,c,d,m){if(r){const _=l.af(g);return l.a0(_,_,[m,m,1]),c||l.ae(_,_,-d.angle),_}return d.glCoordMatrix}function pn(g,r,c){let d;c?(d=[g.x,g.y,c(g.x,g.y),1],l.ag(d,d,r)):(d=[g.x,g.y,0,1],se(d,d,r));const m=d[3];return{point:new l.P(d[0]/m,d[1]/m),signedDistanceFromCamera:m}}function Zi(g,r){return .5+g/r*.5}function sr(g,r){const c=g[0]/g[3],d=g[1]/g[3];return c>=-r[0]&&c<=r[0]&&d>=-r[1]&&d<=r[1]}function $e(g,r,c,d,m,_,T,C,P,D){const z=d?g.textSizeData:g.iconSizeData,R=l.ah(z,c.transform.zoom),G=[256/c.width*2+1,256/c.height*2+1],te=d?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;te.clear();const ee=g.lineVertexArray,ie=d?g.text.placedSymbolArray:g.icon.placedSymbolArray,Q=c.transform.width/c.transform.height;let me=!1;for(let be=0;be<ie.length;be++){const le=ie.get(be);if(le.hidden||le.writingMode===l.ai.vertical&&!me){Y(le.numGlyphs,te);continue}let ge;if(me=!1,D?(ge=[le.anchorX,le.anchorY,D(le.anchorX,le.anchorY),1],l.ag(ge,ge,r)):(ge=[le.anchorX,le.anchorY,0,1],se(ge,ge,r)),!sr(ge,G)){Y(le.numGlyphs,te);continue}const Ce=Zi(c.transform.cameraToCenterDistance,ge[3]),Ee=l.aj(z,R,le),De=T?Ee/Ce:Ee*Ce,Be=new l.P(le.anchorX,le.anchorY),Re=pn(Be,m,D).point,Ve={projections:{},offsets:{}},lt=Dt(le,De,!1,C,r,m,_,g.glyphOffsetArray,ee,te,Re,Be,Ve,Q,P,D);me=lt.useVertical,(lt.notEnoughRoom||me||lt.needsFlipping&&Dt(le,De,!0,C,r,m,_,g.glyphOffsetArray,ee,te,Re,Be,Ve,Q,P,D).notEnoughRoom)&&Y(le.numGlyphs,te)}d?g.text.dynamicLayoutVertexBuffer.updateData(te):g.icon.dynamicLayoutVertexBuffer.updateData(te)}function Ye(g,r,c,d,m,_,T,C,P,D,z,R,G){const te=C.glyphStartIndex+C.numGlyphs,ee=C.lineStartIndex,ie=C.lineStartIndex+C.lineLength,Q=r.getoffsetX(C.glyphStartIndex),me=r.getoffsetX(te-1),be=N(g*Q,c,d,m,_,T,C.segment,ee,ie,P,D,z,R,G);if(!be)return null;const le=N(g*me,c,d,m,_,T,C.segment,ee,ie,P,D,z,R,G);return le?{first:be,last:le}:null}function nt(g,r,c,d){return g===l.ai.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*d?{useVertical:!0}:(g===l.ai.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Dt(g,r,c,d,m,_,T,C,P,D,z,R,G,te,ee,ie){const Q=r/24,me=g.lineOffsetX*Q,be=g.lineOffsetY*Q;let le;if(g.numGlyphs>1){const ge=g.glyphStartIndex+g.numGlyphs,Ce=g.lineStartIndex,Ee=g.lineStartIndex+g.lineLength,De=Ye(Q,C,me,be,c,z,R,g,P,_,G,ee,ie);if(!De)return{notEnoughRoom:!0};const Be=pn(De.first.point,T,ie).point,Re=pn(De.last.point,T,ie).point;if(d&&!c){const Ve=nt(g.writingMode,Be,Re,te);if(Ve)return Ve}le=[De.first];for(let Ve=g.glyphStartIndex+1;Ve<ge-1;Ve++)le.push(N(Q*C.getoffsetX(Ve),me,be,c,z,R,g.segment,Ce,Ee,P,_,G,ee,ie));le.push(De.last)}else{if(d&&!c){const Ce=pn(R,m,ie).point,Ee=g.lineStartIndex+g.segment+1,De=new l.P(P.getx(Ee),P.gety(Ee)),Be=pn(De,m,ie),Re=Be.signedDistanceFromCamera>0?Be.point:zn(R,De,Ce,1,m,ie),Ve=nt(g.writingMode,Ce,Re,te);if(Ve)return Ve}const ge=N(Q*C.getoffsetX(g.glyphStartIndex),me,be,c,z,R,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,P,_,G,ee,ie);if(!ge)return{notEnoughRoom:!0};le=[ge]}for(const ge of le)l.ak(D,ge.point,ge.angle);return{}}function zn(g,r,c,d,m,_){const T=pn(g.add(g.sub(r)._unit()),m,_).point,C=c.sub(T);return c.add(C._mult(d/C.mag()))}function St(g,r){const{projectionCache:c,lineVertexArray:d,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:C,previousVertex:P,direction:D,absOffsetX:z}=r;if(c.projections[g])return c.projections[g];const R=new l.P(d.getx(g),d.gety(g)),G=pn(R,m,C);if(G.signedDistanceFromCamera>0)return c.projections[g]=G.point,G.point;const te=g-D;return zn(T===0?_:new l.P(d.getx(te),d.gety(te)),R,P,z-T+1,m,C)}function jr(g,r,c){return g._unit()._perp()._mult(r*c)}function re(g,r,c,d,m,_,T,C){const{projectionCache:P,direction:D}=C;if(P.offsets[g])return P.offsets[g];const z=c.add(r);if(g+D<d||g+D>=m)return P.offsets[g]=z,z;const R=St(g+D,C),G=jr(R.sub(c),T,D),te=c.add(G),ee=R.add(G);return P.offsets[g]=l.al(_,z,te,ee)||z,P.offsets[g]}function N(g,r,c,d,m,_,T,C,P,D,z,R,G,te){const ee=d?g-r:g+r;let ie=ee>0?1:-1,Q=0;d&&(ie*=-1,Q=Math.PI),ie<0&&(Q+=Math.PI);let me,be,le=ie>0?C+T:C+T+1,ge=m,Ce=m,Ee=0,De=0;const Be=Math.abs(ee),Re=[];let Ve;for(;Ee+De<=Be;){if(le+=ie,le<C||le>=P)return null;Ee+=De,Ce=ge,be=me;const Ke={projectionCache:R,lineVertexArray:D,labelPlaneMatrix:z,tileAnchorPoint:_,distanceFromAnchor:Ee,getElevation:te,previousVertex:Ce,direction:ie,absOffsetX:Be};if(ge=St(le,Ke),c===0)Re.push(Ce),Ve=ge.sub(Ce);else{let Ct;const ut=ge.sub(Ce);Ct=ut.mag()===0?jr(St(le+ie,Ke).sub(ge),c,ie):jr(ut,c,ie),be||(be=Ce.add(Ct)),me=re(le,Ct,ge,C,P,be,c,Ke),Re.push(be),Ve=me.sub(be)}De=Ve.mag()}const lt=Ve._mult((Be-Ee)/De)._add(be||Ce),Rt=Q+Math.atan2(ge.y-Ce.y,ge.x-Ce.x);return Re.push(lt),{point:lt,angle:G?Rt:0,path:Re}}const $=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Y(g,r){for(let c=0;c<g;c++){const d=r.length;r.resize(d+4),r.float32.set($,3*d)}}function se(g,r,c){const d=r[0],m=r[1];return g[0]=c[0]*d+c[4]*m+c[12],g[1]=c[1]*d+c[5]*m+c[13],g[3]=c[3]*d+c[7]*m+c[15],g}const ae=100;class _e{constructor(r,c=new ks(r.width+200,r.height+200,25),d=new ks(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+ae,this.screenBottomBoundary=r.height+ae,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,d,m,_,T){const C=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),P=d*C.perspectiveRatio,D=r.x1*P+C.point.x,z=r.y1*P+C.point.y,R=r.x2*P+C.point.x,G=r.y2*P+C.point.y;return!this.isInsideGrid(D,z,R,G)||c!=="always"&&this.grid.hitTest(D,z,R,G,c,_)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,z,R,G],offscreen:this.isOffscreen(D,z,R,G)}}placeCollisionCircles(r,c,d,m,_,T,C,P,D,z,R,G,te,ee){const ie=[],Q=new l.P(c.anchorX,c.anchorY),me=pn(Q,T,ee),be=Zi(this.transform.cameraToCenterDistance,me.signedDistanceFromCamera),le=(z?_/be:_*be)/l.ap,ge=pn(Q,C,ee).point,Ce=Ye(le,m,c.lineOffsetX*le,c.lineOffsetY*le,!1,ge,Q,c,d,C,{projections:{},offsets:{}},!1,ee);let Ee=!1,De=!1,Be=!0;if(Ce){const Re=.5*G*be+te,Ve=new l.P(-100,-100),lt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new ai,Ke=Ce.first,Ct=Ce.last;let ut=[];for(let It=Ke.path.length-1;It>=1;It--)ut.push(Ke.path[It]);for(let It=1;It<Ct.path.length;It++)ut.push(Ct.path[It]);const tn=2.5*Re;if(P){const It=ut.map(Ft=>pn(Ft,P,ee));ut=It.some(Ft=>Ft.signedDistanceFromCamera<=0)?[]:It.map(Ft=>Ft.point)}let zt=[];if(ut.length>0){const It=ut[0].clone(),Ft=ut[0].clone();for(let Pn=1;Pn<ut.length;Pn++)It.x=Math.min(It.x,ut[Pn].x),It.y=Math.min(It.y,ut[Pn].y),Ft.x=Math.max(Ft.x,ut[Pn].x),Ft.y=Math.max(Ft.y,ut[Pn].y);zt=It.x>=Ve.x&&Ft.x<=lt.x&&It.y>=Ve.y&&Ft.y<=lt.y?[ut]:Ft.x<Ve.x||It.x>lt.x||Ft.y<Ve.y||It.y>lt.y?[]:l.am([ut],Ve.x,Ve.y,lt.x,lt.y)}for(const It of zt){Rt.reset(It,.25*Re);let Ft=0;Ft=Rt.length<=.5*Re?1:Math.ceil(Rt.paddedLength/tn)+1;for(let Pn=0;Pn<Ft;Pn++){const an=Pn/Math.max(Ft-1,1),hr=Rt.lerp(an),Hn=hr.x+ae,Fn=hr.y+ae;ie.push(Hn,Fn,Re,0);const fi=Hn-Re,un=Fn-Re,hs=Hn+Re,ds=Fn+Re;if(Be=Be&&this.isOffscreen(fi,un,hs,ds),De=De||this.isInsideGrid(fi,un,hs,ds),r!=="always"&&this.grid.hitTestCircle(Hn,Fn,Re,r,R)&&(Ee=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!D&&Ee||!De||be<this.perspectiveRatioCutoff?[]:ie,offscreen:Be,collisionDetected:Ee}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let d=1/0,m=1/0,_=-1/0,T=-1/0;for(const z of r){const R=new l.P(z.x+ae,z.y+ae);d=Math.min(d,R.x),m=Math.min(m,R.y),_=Math.max(_,R.x),T=Math.max(T,R.y),c.push(R)}const C=this.grid.query(d,m,_,T).concat(this.ignoredGrid.query(d,m,_,T)),P={},D={};for(const z of C){const R=z.key;if(P[R.bucketInstanceId]===void 0&&(P[R.bucketInstanceId]={}),P[R.bucketInstanceId][R.featureIndex])continue;const G=[new l.P(z.x1,z.y1),new l.P(z.x2,z.y1),new l.P(z.x2,z.y2),new l.P(z.x1,z.y2)];l.an(c,G)&&(P[R.bucketInstanceId][R.featureIndex]=!0,D[R.bucketInstanceId]===void 0&&(D[R.bucketInstanceId]=[]),D[R.bucketInstanceId].push(R.featureIndex))}return D}insertCollisionBox(r,c,d,m,_,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,d,m,_,T){const C=d?this.ignoredGrid:this.grid,P={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:c};for(let D=0;D<r.length;D+=4)C.insertCircle(P,r[D],r[D+1],r[D+2])}projectAndGetPerspectiveRatio(r,c,d,m){let _;return m?(_=[c,d,m(c,d),1],l.ag(_,_,r)):(_=[c,d,0,1],se(_,_,r)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+ae,(-_[1]/_[3]+1)/2*this.transform.height+ae),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,c,d,m){return d<ae||r>=this.screenRightBoundary||m<ae||c>this.screenBottomBoundary}isInsideGrid(r,c,d,m){return d>=0&&r<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=l.ao([]);return l.$(r,r,[-100,-100,0]),r}}function fe(g,r,c){return r*(l.N/(g.tileSize*Math.pow(2,c-g.tileID.overscaledZ)))}class ue{constructor(r,c,d,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class ye{constructor(r,c,d,m,_){this.text=new ue(r?r.text:null,c,d,_),this.icon=new ue(r?r.icon:null,c,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Me{constructor(r,c,d){this.text=r,this.icon=c,this.skipFade=d}}class Ie{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class ze{constructor(r,c,d,m,_){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=_}}class xt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:d=>d.collisionGroupID===c}}return this.collisionGroups[r]}}function Pt(g,r,c,d,m){const{horizontalAlign:_,verticalAlign:T}=l.au(g);return new l.P(-(_-.5)*r+d[0]*m,-(T-.5)*c+d[1]*m)}function at(g,r,c,d,m,_){const{x1:T,x2:C,y1:P,y2:D,anchorPointX:z,anchorPointY:R}=g,G=new l.P(r,c);return d&&G._rotate(m?_:-_),{x1:T+G.x,y1:P+G.y,x2:C+G.x,y2:D+G.y,anchorPointX:z,anchorPointY:R}}class bt{constructor(r,c,d,m,_){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new _e(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new xt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,c,d,m){const _=d.getBucket(c),T=d.latestFeatureIndex;if(!_||!T||c.id!==_.layerIds[0])return;const C=d.collisionBoxArray,P=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/l.N,R=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),G=P.get("text-pitch-alignment")==="map",te=P.get("text-rotation-alignment")==="map",ee=fe(d,1,this.transform.zoom),ie=je(R,G,te,this.transform,ee);let Q=null;if(G){const be=li(R,G,te,this.transform,ee);Q=l.a1([],this.transform.labelPlaneMatrix,be)}this.retainedQueryData[_.bucketInstanceId]=new ze(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,d.tileID);const me={bucket:_,layout:P,posMatrix:R,textLabelPlaneMatrix:ie,labelToScreenMatrix:Q,scale:D,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const be of _.sortKeyRanges){const{sortKey:le,symbolInstanceStart:ge,symbolInstanceEnd:Ce}=be;r.push({sortKey:le,symbolInstanceStart:ge,symbolInstanceEnd:Ce,parameters:me})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:me})}attemptAnchorPlacement(r,c,d,m,_,T,C,P,D,z,R,G,te,ee,ie,Q){const me=l.aq[r.textAnchor],be=[r.textOffset0,r.textOffset1],le=Pt(me,d,m,be,_),ge=this.collisionIndex.placeCollisionBox(at(c,le.x,le.y,T,C,this.transform.angle),R,P,D,z.predicate,Q);if((!ie||this.collisionIndex.placeCollisionBox(at(ie,le.x,le.y,T,C,this.transform.angle),R,P,D,z.predicate,Q).box.length!==0)&&ge.box.length>0){let Ce;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Ce=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:be,width:d,height:m,anchor:me,textBoxScale:_,prevAnchor:Ce},this.markUsedJustification(te,me,G,ee),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ee,G),this.placedOrientations[G.crossTileID]=ee),{shift:le,placedGlyphBoxes:ge}}}placeLayerBucketPart(r,c,d){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:P,textPixelRatio:D,holdingForFade:z,collisionBoxArray:R,partiallyEvaluatedTextSize:G,collisionGroup:te}=r.parameters,ee=_.get("text-optional"),ie=_.get("icon-optional"),Q=l.ar(_,"text-overlap","text-allow-overlap"),me=Q==="always",be=l.ar(_,"icon-overlap","icon-allow-overlap"),le=be==="always",ge=_.get("text-rotation-alignment")==="map",Ce=_.get("text-pitch-alignment")==="map",Ee=_.get("icon-text-fit")!=="none",De=_.get("symbol-z-order")==="viewport-y",Be=me&&(le||!m.hasIconData()||ie),Re=le&&(me||!m.hasTextData()||ee);!m.collisionArrays&&R&&m.deserializeCollisionBoxes(R);const Ve=this.retainedQueryData[m.bucketInstanceId].tileID,lt=this.terrain?(Ke,Ct)=>this.terrain.getElevation(Ve,Ke,Ct):null,Rt=(Ke,Ct)=>{var ut,tn;if(c[Ke.crossTileID])return;if(z)return void(this.placements[Ke.crossTileID]=new Me(!1,!1,!1));let zt=!1,It=!1,Ft=!0,Pn=null,an={box:null,offscreen:null},hr={box:null,offscreen:null},Hn=null,Fn=null,fi=null,un=0,hs=0,ds=0;Ct.textFeatureIndex?un=Ct.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(un=Ke.featureIndex),Ct.verticalTextFeatureIndex&&(hs=Ct.verticalTextFeatureIndex);const ro=Ct.textBox;if(ro){const wr=kn=>{let Kn=l.ai.horizontal;if(m.allowVerticalPlacement&&!kn&&this.prevPlacement){const Gr=this.prevPlacement.placedOrientations[Ke.crossTileID];Gr&&(this.placedOrientations[Ke.crossTileID]=Gr,Kn=Gr,this.markUsedOrientation(m,Kn,Ke))}return Kn},dr=(kn,Kn)=>{if(m.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Ct.verticalTextBox){for(const Gr of m.writingModes)if(Gr===l.ai.vertical?(an=Kn(),hr=an):an=kn(),an&&an.box&&an.box.length)break}else an=kn()},Mr=Ke.textAnchorOffsetStartIndex,Io=Ke.textAnchorOffsetEndIndex;if(Io===Mr){const kn=(Kn,Gr)=>{const An=this.collisionIndex.placeCollisionBox(Kn,Q,D,T,te.predicate,lt);return An&&An.box&&An.box.length&&(this.markUsedOrientation(m,Gr,Ke),this.placedOrientations[Ke.crossTileID]=Gr),An};dr(()=>kn(ro,l.ai.horizontal),()=>{const Kn=Ct.verticalTextBox;return m.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Kn?kn(Kn,l.ai.vertical):{box:null,offscreen:null}}),wr(an&&an.box&&an.box.length)}else{let kn=l.aq[(tn=(ut=this.prevPlacement)===null||ut===void 0?void 0:ut.variableOffsets[Ke.crossTileID])===null||tn===void 0?void 0:tn.anchor];const Kn=(An,Do,Bc)=>{const uf=An.x2-An.x1,hf=An.y2-An.y1,_y=Ke.textBoxScale,Uh=Ee&&be==="never"?Do:null;let ps={box:[],offscreen:!1},Lo=Q==="never"?1:2,fs="never";kn&&Lo++;for(let Ri=0;Ri<Lo;Ri++){for(let ms=Mr;ms<Io;ms++){const $h=m.textAnchorOffsets.get(ms);if(kn&&$h.textAnchor!==kn)continue;const zs=this.attemptAnchorPlacement($h,An,uf,hf,_y,ge,Ce,D,T,te,fs,Ke,m,Bc,Uh,lt);if(zs&&(ps=zs.placedGlyphBoxes,ps&&ps.box&&ps.box.length))return zt=!0,Pn=zs.shift,ps}kn?kn=null:fs=Q}return ps};dr(()=>Kn(ro,Ct.iconBox,l.ai.horizontal),()=>{const An=Ct.verticalTextBox;return m.allowVerticalPlacement&&!(an&&an.box&&an.box.length)&&Ke.numVerticalGlyphVertices>0&&An?Kn(An,Ct.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),an&&(zt=an.box,Ft=an.offscreen);const Gr=wr(an&&an.box);if(!zt&&this.prevPlacement){const An=this.prevPlacement.variableOffsets[Ke.crossTileID];An&&(this.variableOffsets[Ke.crossTileID]=An,this.markUsedJustification(m,An.anchor,Ke,Gr))}}}if(Hn=an,zt=Hn&&Hn.box&&Hn.box.length>0,Ft=Hn&&Hn.offscreen,Ke.useRuntimeCollisionCircles){const wr=m.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),dr=l.aj(m.textSizeData,G,wr),Mr=_.get("text-padding");Fn=this.collisionIndex.placeCollisionCircles(Q,wr,m.lineVertexArray,m.glyphOffsetArray,dr,T,C,P,d,Ce,te.predicate,Ke.collisionCircleDiameter,Mr,lt),Fn.circles.length&&Fn.collisionDetected&&!d&&l.w("Collisions detected, but collision boxes are not shown"),zt=me||Fn.circles.length>0&&!Fn.collisionDetected,Ft=Ft&&Fn.offscreen}if(Ct.iconFeatureIndex&&(ds=Ct.iconFeatureIndex),Ct.iconBox){const wr=dr=>{const Mr=Ee&&Pn?at(dr,Pn.x,Pn.y,ge,Ce,this.transform.angle):dr;return this.collisionIndex.placeCollisionBox(Mr,be,D,T,te.predicate,lt)};hr&&hr.box&&hr.box.length&&Ct.verticalIconBox?(fi=wr(Ct.verticalIconBox),It=fi.box.length>0):(fi=wr(Ct.iconBox),It=fi.box.length>0),Ft=Ft&&fi.offscreen}const Mo=ee||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,ga=ie||Ke.numIconVertices===0;if(Mo||ga?ga?Mo||(It=It&&zt):zt=It&&zt:It=zt=It&&zt,zt&&Hn&&Hn.box&&this.collisionIndex.insertCollisionBox(Hn.box,Q,_.get("text-ignore-placement"),m.bucketInstanceId,hr&&hr.box&&hs?hs:un,te.ID),It&&fi&&this.collisionIndex.insertCollisionBox(fi.box,be,_.get("icon-ignore-placement"),m.bucketInstanceId,ds,te.ID),Fn&&(zt&&this.collisionIndex.insertCollisionCircles(Fn.circles,Q,_.get("text-ignore-placement"),m.bucketInstanceId,un,te.ID),d)){const wr=m.bucketInstanceId;let dr=this.collisionCircleArrays[wr];dr===void 0&&(dr=this.collisionCircleArrays[wr]=new Ie);for(let Mr=0;Mr<Fn.circles.length;Mr+=4)dr.circles.push(Fn.circles[Mr+0]),dr.circles.push(Fn.circles[Mr+1]),dr.circles.push(Fn.circles[Mr+2]),dr.circles.push(Fn.collisionDetected?1:0)}if(Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new Me(zt||Be,It||Re,Ft||m.justReloaded),c[Ke.crossTileID]=!0};if(De){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ke=m.getSortedSymbolIndexes(this.transform.angle);for(let Ct=Ke.length-1;Ct>=0;--Ct){const ut=Ke[Ct];Rt(m.symbolInstances.get(ut),m.collisionArrays[ut])}}else for(let Ke=r.symbolInstanceStart;Ke<r.symbolInstanceEnd;Ke++)Rt(m.symbolInstances.get(Ke),m.collisionArrays[Ke]);if(d&&m.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[m.bucketInstanceId];l.as(Ke.invProjMatrix,T),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,c,d,m){let _;_=m===l.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.at(c)];const T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=_>=0&&C!==_?0:d.crossTileID)}markUsedOrientation(r,c,d){const m=c===l.ai.horizontal||c===l.ai.horizontalOnly?c:0,_=c===l.ai.vertical?c:0,T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of T)r.text.placedSymbolArray.get(C).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let d=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(r):1,_=c?c.opacities:{},T=c?c.variableOffsets:{},C=c?c.placedOrientations:{};for(const P in this.placements){const D=this.placements[P],z=_[P];z?(this.opacities[P]=new ye(z,m,D.text,D.icon),d=d||D.text!==z.text.placed||D.icon!==z.icon.placed):(this.opacities[P]=new ye(null,m,D.text,D.icon,D.skipFade),d=d||D.text||D.icon)}for(const P in _){const D=_[P];if(!this.opacities[P]){const z=new ye(D,m,!1,!1);z.isHidden()||(this.opacities[P]=z,d=d||D.text.placed||D.icon.placed)}}for(const P in T)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=T[P]);for(const P in C)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=C[P]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const d={};for(const m of c){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,d,m.collisionBoxArray)}}updateBucketOpacities(r,c,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new ye(null,0,!1,!1,!0),C=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),D=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=_.get("text-rotation-alignment")==="map",R=_.get("text-pitch-alignment")==="map",G=_.get("icon-text-fit")!=="none",te=new ye(null,0,C&&(P||!r.hasIconData()||_.get("icon-optional")),P&&(C||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const ee=(ie,Q,me)=>{for(let be=0;be<Q/4;be++)ie.opacityVertexArray.emplaceBack(me);ie.hasVisibleVertices=ie.hasVisibleVertices||me!==Ai};for(let ie=0;ie<r.symbolInstances.length;ie++){const Q=r.symbolInstances.get(ie),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:be,crossTileID:le}=Q;let ge=this.opacities[le];c[le]?ge=T:ge||(ge=te,this.opacities[le]=ge),c[le]=!0;const Ce=Q.numIconVertices>0,Ee=this.placedOrientations[Q.crossTileID],De=Ee===l.ai.vertical,Be=Ee===l.ai.horizontal||Ee===l.ai.horizontalOnly;if(me>0||be>0){const Re=cr(ge.text);ee(r.text,me,De?Ai:Re),ee(r.text,be,Be?Ai:Re);const Ve=ge.text.isHidden();[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(Ke=>{Ke>=0&&(r.text.placedSymbolArray.get(Ke).hidden=Ve||De?1:0)}),Q.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).hidden=Ve||Be?1:0);const lt=this.variableOffsets[Q.crossTileID];lt&&this.markUsedJustification(r,lt.anchor,Q,Ee);const Rt=this.placedOrientations[Q.crossTileID];Rt&&(this.markUsedJustification(r,"left",Q,Rt),this.markUsedOrientation(r,Rt,Q))}if(Ce){const Re=cr(ge.icon),Ve=!(G&&Q.verticalPlacedIconSymbolIndex&&De);Q.placedIconSymbolIndex>=0&&(ee(r.icon,Q.numIconVertices,Ve?Re:Ai),r.icon.placedSymbolArray.get(Q.placedIconSymbolIndex).hidden=ge.icon.isHidden()),Q.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,Q.numVerticalIconVertices,Ve?Ai:Re),r.icon.placedSymbolArray.get(Q.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Re=r.collisionArrays[ie];if(Re){let Ve=new l.P(0,0);if(Re.textBox||Re.verticalTextBox){let Rt=!0;if(D){const Ke=this.variableOffsets[le];Ke?(Ve=Pt(Ke.anchor,Ke.width,Ke.height,Ke.textOffset,Ke.textBoxScale),z&&Ve._rotate(R?this.transform.angle:-this.transform.angle)):Rt=!1}Re.textBox&&At(r.textCollisionBox.collisionVertexArray,ge.text.placed,!Rt||De,Ve.x,Ve.y),Re.verticalTextBox&&At(r.textCollisionBox.collisionVertexArray,ge.text.placed,!Rt||Be,Ve.x,Ve.y)}const lt=!!(!Be&&Re.verticalIconBox);Re.iconBox&&At(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,lt,G?Ve.x:0,G?Ve.y:0),Re.verticalIconBox&&At(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,!lt,G?Ve.x:0,G?Ve.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ie.invProjMatrix,r.placementViewportMatrix=ie.viewportMatrix,r.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const d=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function At(g,r,c,d,m){g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0),g.emplaceBack(r?1:0,c?1:0,d||0,m||0)}const Qt=Math.pow(2,25),nn=Math.pow(2,24),Zt=Math.pow(2,17),$t=Math.pow(2,16),_r=Math.pow(2,9),on=Math.pow(2,8),$n=Math.pow(2,1);function cr(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const r=g.placed?1:0,c=Math.floor(127*g.opacity);return c*Qt+r*nn+c*Zt+r*$t+c*_r+r*on+c*$n+r}const Ai=0;class Cp{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,d,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,P)=>C.sortKey-P.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class ra{constructor(r,c,d,m,_,T,C,P){this.placement=new bt(r,c,T,C,P),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,c,d){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Cp(T)),this._inProgressLayer.continuePlacement(d[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ia=512/l.N/2;class ny{constructor(r,c,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const m=new Map;for(let _=0;_<c.length;_++){const T=c.get(_),C=T.key,P=m.get(C);P?P.push(T):m.set(C,[T])}for(const[_,T]of m){const C={positions:T.map(P=>({x:Math.floor(P.anchorX*ia),y:Math.floor(P.anchorY*ia)})),crossTileIDs:T.map(P=>P.crossTileID)};if(C.positions.length>128){const P=new l.av(C.positions.length,16,Uint16Array);for(const{x:D,y:z}of C.positions)P.add(D,z);P.finish(),delete C.positions,C.index=P}this._symbolsByKey[_]=C}}getScaledCoordinates(r,c){const{x:d,y:m,z:_}=this.tileID.canonical,{x:T,y:C,z:P}=c.canonical,D=ia/Math.pow(2,P-_),z=(C*l.N+r.anchorY)*D,R=m*l.N*ia;return{x:Math.floor((T*l.N+r.anchorX)*D-d*l.N*ia),y:Math.floor(z-R)}}findMatches(r,c,d){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const C=this._symbolsByKey[T.key];if(!C)continue;const P=this.getScaledCoordinates(T,c);if(C.index){const D=C.index.range(P.x-m,P.y-m,P.x+m,P.y+m).sort();for(const z of D){const R=C.crossTileIDs[z];if(!d[R]){d[R]=!0,T.crossTileID=R;break}}}else if(C.positions)for(let D=0;D<C.positions.length;D++){const z=C.positions[D],R=C.crossTileIDs[D];if(Math.abs(z.x-P.x)<=m&&Math.abs(z.y-P.y)<=m&&!d[R]){d[R]=!0,T.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class en{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class th{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const d in this.indexes){const m=this.indexes[d],_={};for(const T in m){const C=m[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),_[C.tileID.key]=C}this.indexes[d]=_}this.lng=r}addBucket(r,c,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<c.symbolInstances.length;_++)c.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const C in T){const P=T[C];P.tileID.isChildOf(r)&&P.findMatches(c.symbolInstances,r,m)}else{const C=T[r.scaledTo(Number(_)).key];C&&C.findMatches(c.symbolInstances,r,m)}}for(let _=0;_<c.symbolInstances.length;_++){const T=c.symbolInstances.get(_);T.crossTileID||(T.crossTileID=d.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ny(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const d of c.getCrossTileIDsLists())for(const m of d)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let c=!1;for(const d in this.indexes){const m=this.indexes[d];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[_]),delete m[_],c=!0)}return c}}class uc{constructor(){this.layerIndexes={},this.crossTileIDs=new en,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,d){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new th);let _=!1;const T={};m.handleWrapJump(d);for(const C of c){const P=C.getBucket(r);P&&r.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,P,this.crossTileIDs)&&(_=!0),T[P.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const c={};r.forEach(d=>{c[d]=!0});for(const d in this.layerIndexes)c[d]||delete this.layerIndexes[d]}}const xr=(g,r)=>l.x(g,r&&r.filter(c=>c.identifier!=="source.canvas")),ci=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ry=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Mi=l.aw();class ur extends l.E{constructor(r,c={}){super(),this.map=r,this.dispatcher=new ot(wo(),this,r._getMapId()),this.imageManager=new it,this.imageManager.setEventedParent(this),this.glyphManager=new mt(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new yt(256,512),this.crossTileSymbolIndex=new uc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const d=this;this._rtlTextPluginCallback=ur.registerForPluginStateChange(m=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(l.aA(_),T&&T.every(C=>C))for(const C in d.sourceCaches){const P=d.sourceCaches[C].getSource().type;P!=="vector"&&P!=="geojson"||d.sourceCaches[C].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const P=this._layers[C];P.source===T.id&&this._validateLayer(P)}})}loadURL(r,c={},d){this.fire(new l.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(r,B.Style);this._request=l.f(m,(_,T)=>{this._request=null,_?this.fire(new l.j(_)):T&&this._load(T,c,d)})}loadJSON(r,c={},d){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,c.validate=c.validate!==!1,this._load(r,c,d)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Mi,{validate:!1})}_load(r,c,d){var m;const _=c.transformStyle?c.transformStyle(d,r):r;if(!c.validate||!xr(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new He(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const r=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const d=l.aC(c);d.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=d}}_loadSprite(r,c=!1,d=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,C){const P=we(m),D=P.length,z=T>1?"@2x":"",R={},G={},te={};for(const{id:ee,url:ie}of P){const Q=_.transformRequest(_.normalizeSpriteURL(ie,z,".json"),B.SpriteJSON),me=`${ee}_${Q.url}`;R[me]=l.f(Q,(ge,Ce)=>{delete R[me],G[ee]=Ce,We(C,G,te,ge,D)});const be=_.transformRequest(_.normalizeSpriteURL(ie,z,".png"),B.SpriteImage),le=`${ee}_${be.url}`;R[le]=X.getImage(be,(ge,Ce)=>{delete R[le],te[ee]=Ce,We(C,G,te,ge,D)})}return{cancel(){for(const ee of Object.values(R))ee.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const C=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(P=>!(P in _)):[];for(const P of C)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in _[T]){const D=T==="default"?P:`${T}:${P}`;this._spritesImagesIds[T].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[T][P],!1):this.imageManager.addImage(D,_[T][P]),c&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const d=r.sourceLayer;if(!d)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.j(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const c=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c);const d=[];for(const m of r)c[m]&&d.push(c[m]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const d of c){const m=this._layers[d];m.type!=="custom"&&(r[d]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const C=this._updatedSources[T];if(C==="reload")this._reloadSource(T);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];d[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in d){const _=this.sourceCaches[m];d[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){this._checkLoaded();const d=this.serialize();if(r=c.transformStyle?c.transformStyle(d,r):r,xr(this,l.y(r)))return!1;(r=l.aD(r)).layers=l.aB(r.layers);const m=l.aE(d,r).filter(T=>!(T.command in ry));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in ci));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,c){if(this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(l.y.source,`sources.${r}`,c,null,d))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[r]=new yr(r,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new l.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,d={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(xr(this,l.aF(r)))return;_=l.aC(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=l.aD(r),r=l.e(r,{source:m})),this._validate(l.y.layer,`layers.${m}`,r,{arrayIndex:-1},d))return;_=l.aC(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const C=this._removedLayers[m];delete this._removedLayers[m],C.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const d=this._order.indexOf(r);this._order.splice(d,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,d){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===c&&m.maxzoom===d||(c!=null&&(m.minzoom=c),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,d={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!l.aG(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,c,null,d)||(m.filter=l.aD(c),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.aD(this.getLayer(r).filter)}setLayoutProperty(r,c,d,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getLayoutProperty(c),d)||(_.setLayoutProperty(c,d,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const d=this.getLayer(r);if(d)return d.getLayoutProperty(c);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,d,m={}){this._checkLoaded();const _=this.getLayer(r);_?l.aG(_.getPaintProperty(c),d)||(_.setPaintProperty(c,d,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const d=r.source,m=r.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,c)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const d=r.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,c):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,d=r.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,r.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.aH(this.sourceCaches,_=>_.serialize()),c=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:c,terrain:d},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",d={},m=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(c(C)){d[C]=T;for(const P of r){const D=P[C];if(D)for(const z of D)m.push(z)}}}m.sort((T,C)=>C.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(c(C))for(let P=m.length-1;P>=0;P--){const D=m[P].feature;if(d[D.layer.id]<T)break;_.push(D),m.pop()}else for(const P of r){const D=P[C];if(D)for(const z of D)_.push(z.feature)}}return _}queryRenderedFeatures(r,c,d){c&&c.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const C of c.layers){const P=this._layers[C];if(!P)return this.fire(new l.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];m[P.source]=!0}}const _=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const C in this.sourceCaches)c.layers&&!m[C]||_.push(gr(this.sourceCaches[C],this._layers,T,r,c,d));return this.placement&&_.push(function(C,P,D,z,R,G,te){const ee={},ie=G.queryRenderedSymbols(z),Q=[];for(const me of Object.keys(ie).map(Number))Q.push(te[me]);Q.sort(Pi);for(const me of Q){const be=me.featureIndex.lookupSymbolFeatures(ie[me.bucketInstanceId],P,me.bucketIndex,me.sourceLayerIndex,R.filter,R.layers,R.availableImages,C);for(const le in be){const ge=ee[le]=ee[le]||[],Ce=be[le];Ce.sort((Ee,De)=>{const Be=me.featureSortOrder;if(Be){const Re=Be.indexOf(Ee.featureIndex);return Be.indexOf(De.featureIndex)-Re}return De.featureIndex-Ee.featureIndex});for(const Ee of Ce)ge.push(Ee)}}for(const me in ee)ee[me].forEach(be=>{const le=be.feature,ge=D[C[me].source].getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=ge});return ee}(this._layers,T,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,c){c&&c.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",c.filter,null,c);const d=this.sourceCaches[r];return d?function(m,_){const T=m.getRenderableIds().map(D=>m.getTileByID(D)),C=[],P={};for(let D=0;D<T.length;D++){const z=T[D],R=z.tileID.canonical.key;P[R]||(P[R]=!0,z.querySourceFeatures(C,_))}return C}(d,c):[]}addSourceType(r,c,d){return kr(r)?d(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{si[m]=_})(r,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:c.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const d=this.light.getLight();let m=!1;for(const T in r)if(!l.aG(r[T],d[T])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(_)}_validate(r,c,d,m,_={}){return(!_||_.validate!==!1)&&xr(this,r.call(l.y,l.e({key:c,style:this.serialize(),value:d,styleSpec:l.v},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const d=this.sourceCaches[c];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,d,m,_=!1){let T=!1,C=!1;const P={};for(const D of this._order){const z=this._layers[D];if(z.type!=="symbol")continue;if(!P[z.source]){const G=this.sourceCaches[z.source];P[z.source]=G.getRenderableIds(!0).map(te=>G.getTileByID(te)).sort((te,ee)=>ee.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(ee.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(z,P[z.source],r.center.lng);T=T||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),r.zoom))&&(this.pauseablePlacement=new ra(r,this.map.terrain,this._order,_,c,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const D of this._order){const z=this._layers[D];z.type==="symbol"&&this.placement.updateLayerOpacities(z,P[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c,d){this.imageManager.getImages(c.icons,d),this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(r,c,d){this.glyphManager.getGlyphs(c.stacks,d);const m=this.sourceCaches[c.source];m&&m.setDependencies(c.tileID.key,c.type,[""])}getResource(r,c,d){return l.m(c,d)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,d={},m){this._checkLoaded();const _=[{id:r,url:c}],T=[...we(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",T,null,d)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const c=we(this.stylesheet.sprite);if(c.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;c.splice(c.findIndex(d=>d.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(r,c={},d){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}ur.registerForPluginStateChange=l.aK;var hc=l.Q([{name:"a_pos",type:"Int16",components:2}]),sa="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const gn={prelude:Kt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",sa),terrainDepth:Kt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",sa),terrainCoords:Kt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",sa)};function Kt(g,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,C={};return{fragmentSource:g=g.replace(c,(P,D,z,R,G)=>(C[G]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${z} ${R} ${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = u_${G};
#endif
`)),vertexSource:r=r.replace(c,(P,D,z,R,G)=>{const te=R==="float"?"vec2":"vec4",ee=G.match(/color/)?"color":te;return C[G]?D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${te} a_${G};
varying ${z} ${R} ${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${z} ${te} a_${G};
#else
uniform ${z} ${R} u_${G};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = a_${G};
#else
    ${z} ${R} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${z} ${R} ${G} = unpack_mix_${ee}(a_${G}, u_${G}_t);
#else
    ${z} ${R} ${G} = u_${G};
#endif
`}),staticAttributes:d,staticUniforms:T}}class bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,d,m,_,T,C,P,D){this.context=r;let z=this.boundPaintVertexBuffers.length!==m.length;for(let R=0;!z&&R<m.length;R++)this.boundPaintVertexBuffers[R]!==m[R]&&(z=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==d||z||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==D?this.freshBind(c,d,m,_,T,C,P,D):(r.bindVertexArray.set(this.vao),C&&C.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),D&&D.bind())}freshBind(r,c,d,m,_,T,C,P){const D=r.numAttributes,z=this.context,R=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=P,c.enableAttributes(R,r);for(const G of d)G.enableAttributes(R,r);T&&T.enableAttributes(R,r),C&&C.enableAttributes(R,r),P&&P.enableAttributes(R,r),c.bind(),c.setVertexAttribPointers(R,r,_);for(const G of d)G.bind(),G.setVertexAttribPointers(R,r,_);T&&(T.bind(),T.setVertexAttribPointers(R,r,_)),m&&m.bind(),C&&(C.bind(),C.setVertexAttribPointers(R,r,_)),P&&(P.bind(),P.setVertexAttribPointers(R,r,_)),z.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function wn(g){const r=[];for(let c=0;c<g.length;c++){if(g[c]===null)continue;const d=g[c].split(" ");r.push(d.pop())}return r}class dc{constructor(r,c,d,m,_,T){const C=r.gl;this.program=C.createProgram();const P=wn(c.staticAttributes),D=d?d.getBinderAttributes():[],z=P.concat(D),R=gn.prelude.staticUniforms?wn(gn.prelude.staticUniforms):[],G=c.staticUniforms?wn(c.staticUniforms):[],te=d?d.getBinderUniforms():[],ee=R.concat(G).concat(te),ie=[];for(const Ee of ee)ie.indexOf(Ee)<0&&ie.push(Ee);const Q=d?d.defines():[];_&&Q.push("#define OVERDRAW_INSPECTOR;"),T&&Q.push("#define TERRAIN3D;");const me=Q.concat(gn.prelude.fragmentSource,c.fragmentSource).join(`
`),be=Q.concat(gn.prelude.vertexSource,c.vertexSource).join(`
`),le=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(le,me),C.compileShader(le),!C.getShaderParameter(le,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(le)}`);C.attachShader(this.program,le);const ge=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(ge,be),C.compileShader(ge),!C.getShaderParameter(ge,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(ge)}`);C.attachShader(this.program,ge),this.attributes={};const Ce={};this.numAttributes=z.length;for(let Ee=0;Ee<this.numAttributes;Ee++)z[Ee]&&(C.bindAttribLocation(this.program,Ee,z[Ee]),this.attributes[z[Ee]]=Ee);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(ge),C.deleteShader(le);for(let Ee=0;Ee<ie.length;Ee++){const De=ie[Ee];if(De&&!Ce[De]){const Be=C.getUniformLocation(this.program,De);Be&&(Ce[De]=Be)}}this.fixedUniforms=m(r,Ce),this.terrainUniforms=((Ee,De)=>({u_depth:new l.aL(Ee,De.u_depth),u_terrain:new l.aL(Ee,De.u_terrain),u_terrain_dim:new l.aM(Ee,De.u_terrain_dim),u_terrain_matrix:new l.aN(Ee,De.u_terrain_matrix),u_terrain_unpack:new l.aO(Ee,De.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Ee,De.u_terrain_exaggeration)}))(r,Ce),this.binderUniforms=d?d.getUniforms(r,Ce):[]}draw(r,c,d,m,_,T,C,P,D,z,R,G,te,ee,ie,Q,me,be){const le=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),P){r.activeTexture.set(le.TEXTURE2),le.bindTexture(le.TEXTURE_2D,P.depthTexture),r.activeTexture.set(le.TEXTURE3),le.bindTexture(le.TEXTURE_2D,P.texture);for(const Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(P[Ce])}for(const Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(C[Ce]);ie&&ie.setUniforms(r,this.binderUniforms,te,{zoom:ee});let ge=0;switch(c){case le.LINES:ge=2;break;case le.TRIANGLES:ge=3;break;case le.LINE_STRIP:ge=1}for(const Ce of G.get()){const Ee=Ce.vaos||(Ce.vaos={});(Ee[D]||(Ee[D]=new bo)).bind(r,this,z,ie?ie.getPaintVertexBuffers():[],R,Ce.vertexOffset,Q,me,be),le.drawElements(c,Ce.primitiveLength*ge,le.UNSIGNED_SHORT,Ce.primitiveOffset*ge*2)}}}function Ii(g,r,c){const d=1/fe(c,1,r.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(c.tileID.canonical.x+c.tileID.wrap*m),C=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const nh=(g,r,c,d)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],C=function(){var D=new l.A(9);return l.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();m.properties.get("anchor")==="viewport"&&function(D,z){var R=Math.sin(z),G=Math.cos(z);D[0]=G,D[1]=R,D[2]=0,D[3]=-R,D[4]=G,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(C,-r.transform.angle),function(D,z,R){var G=z[0],te=z[1],ee=z[2];D[0]=G*R[0]+te*R[3]+ee*R[6],D[1]=G*R[1]+te*R[4]+ee*R[7],D[2]=G*R[2]+te*R[5]+ee*R[8]}(T,T,C);const P=m.properties.get("color");return{u_matrix:g,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+c,u_opacity:d}},Ys=(g,r,c,d,m,_,T)=>l.e(nh(g,r,c,d),Ii(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),Ep=g=>({u_matrix:g}),rh=(g,r,c,d)=>l.e(Ep(g),Ii(c,r,d)),pc=(g,r)=>({u_matrix:g,u_world:r}),fc=(g,r,c,d,m)=>l.e(rh(g,r,c,d),{u_world:m}),Qs=(g,r,c,d)=>{const m=g.transform;let _,T;if(d.paint.get("circle-pitch-alignment")==="map"){const C=fe(c,1,m.zoom);_=!0,T=[C,C]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(r.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:T}},ih=(g,r,c)=>{const d=fe(c,1,r.zoom),m=Math.pow(2,r.zoom-c.tileID.overscaledZ),_=c.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*m),r.pixelsToGLUnits[1]/(d*m)],u_overscale_factor:_}},fl=(g,r,c=1)=>({u_matrix:g,u_color:r,u_overlay:0,u_overlay_scale:c}),Pp=g=>({u_matrix:g}),iy=(g,r,c,d)=>({u_matrix:g,u_extrude_scale:fe(r,1,c),u_intensity:d});function sh(g,r){const c=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new l.U(0,d/c).toLngLat().lat,new l.U(0,(d+1)/c).toLngLat().lat]}const oh=(g,r,c,d)=>{const m=g.transform;return{u_matrix:mc(g,r,c,d),u_ratio:1/fe(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},kp=(g,r,c,d,m)=>l.e(oh(g,r,c,m),{u_image:0,u_image_height:d}),sy=(g,r,c,d,m)=>{const _=g.transform,T=Mp(r,_);return{u_matrix:mc(g,r,c,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/fe(r,1,_.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[T,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ap=(g,r,c,d,m,_)=>{const T=g.lineAtlas,C=Mp(r,g.transform),P=c.layout.get("line-cap")==="round",D=T.getDash(d.from,P),z=T.getDash(d.to,P),R=D.width*m.fromScale,G=z.width*m.toScale;return l.e(oh(g,r,c,_),{u_patternscale_a:[C/R,-D.height/2],u_patternscale_b:[C/G,-z.height/2],u_sdfgamma:T.width/(256*Math.min(R,G)*g.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:z.y,u_mix:m.t})};function Mp(g,r){return 1/fe(g,1,r.tileZoom)}function mc(g,r,c,d){return g.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ip=(g,r,c,d,m)=>{return{u_matrix:g,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Dp(m.paint.get("raster-hue-rotate"))};var _,T};function Dp(g){g*=Math.PI/180;const r=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const ah=(g,r,c,d,m,_,T,C,P,D)=>{const z=m.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:z.width/z.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+P,u_pitch_with_map:+d,u_texsize:D,u_texture:0}},lh=(g,r,c,d,m,_,T,C,P,D,z)=>{const R=m.transform;return l.e(ah(g,r,c,d,m,_,T,C,P,D),{u_gamma_scale:d?Math.cos(R._pitch)*R.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+z})},So=(g,r,c,d,m,_,T,C,P,D)=>l.e(lh(g,r,c,d,m,_,T,C,!0,P,!0),{u_texsize_icon:D,u_texture_icon:1}),gc=(g,r,c)=>({u_matrix:g,u_opacity:r,u_color:c}),Di=(g,r,c,d,m,_)=>l.e(function(T,C,P,D){const z=P.imageManager.getPattern(T.from.toString()),R=P.imageManager.getPattern(T.to.toString()),{width:G,height:te}=P.imageManager.getPixelSize(),ee=Math.pow(2,D.tileID.overscaledZ),ie=D.tileSize*Math.pow(2,P.transform.tileZoom)/ee,Q=ie*(D.tileID.canonical.x+D.tileID.wrap*ee),me=ie*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[G,te],u_mix:C.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/fe(D,1,P.transform.tileZoom),u_pixel_coord_upper:[Q>>16,me>>16],u_pixel_coord_lower:[65535&Q,65535&me]}}(d,_,c,m),{u_matrix:g,u_opacity:r}),yc={fillExtrusion:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_lightpos:new l.aP(g,r.u_lightpos),u_lightintensity:new l.aM(g,r.u_lightintensity),u_lightcolor:new l.aP(g,r.u_lightcolor),u_vertical_gradient:new l.aM(g,r.u_vertical_gradient),u_opacity:new l.aM(g,r.u_opacity)}),fillExtrusionPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_lightpos:new l.aP(g,r.u_lightpos),u_lightintensity:new l.aM(g,r.u_lightintensity),u_lightcolor:new l.aP(g,r.u_lightcolor),u_vertical_gradient:new l.aM(g,r.u_vertical_gradient),u_height_factor:new l.aM(g,r.u_height_factor),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade),u_opacity:new l.aM(g,r.u_opacity)}),fill:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix)}),fillPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),fillOutline:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world)}),fillOutlinePattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world),u_image:new l.aL(g,r.u_image),u_texsize:new l.aQ(g,r.u_texsize),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),circle:(g,r)=>({u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_scale_with_map:new l.aL(g,r.u_scale_with_map),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_extrude_scale:new l.aQ(g,r.u_extrude_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_matrix:new l.aN(g,r.u_matrix)}),collisionBox:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(g,r.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(g,r.u_extrude_scale),u_overscale_factor:new l.aM(g,r.u_overscale_factor)}),collisionCircle:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_inv_matrix:new l.aN(g,r.u_inv_matrix),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_viewport_size:new l.aQ(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new l.aR(g,r.u_color),u_matrix:new l.aN(g,r.u_matrix),u_overlay:new l.aL(g,r.u_overlay),u_overlay_scale:new l.aM(g,r.u_overlay_scale)}),clippingMask:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix)}),heatmap:(g,r)=>({u_extrude_scale:new l.aM(g,r.u_extrude_scale),u_intensity:new l.aM(g,r.u_intensity),u_matrix:new l.aN(g,r.u_matrix)}),heatmapTexture:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_world:new l.aQ(g,r.u_world),u_image:new l.aL(g,r.u_image),u_color_ramp:new l.aL(g,r.u_color_ramp),u_opacity:new l.aM(g,r.u_opacity)}),hillshade:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_latrange:new l.aQ(g,r.u_latrange),u_light:new l.aQ(g,r.u_light),u_shadow:new l.aR(g,r.u_shadow),u_highlight:new l.aR(g,r.u_highlight),u_accent:new l.aR(g,r.u_accent)}),hillshadePrepare:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_image:new l.aL(g,r.u_image),u_dimension:new l.aQ(g,r.u_dimension),u_zoom:new l.aM(g,r.u_zoom),u_unpack:new l.aO(g,r.u_unpack)}),line:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_image:new l.aL(g,r.u_image),u_image_height:new l.aM(g,r.u_image_height)}),linePattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texsize:new l.aQ(g,r.u_texsize),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_image:new l.aL(g,r.u_image),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_scale:new l.aP(g,r.u_scale),u_fade:new l.aM(g,r.u_fade)}),lineSDF:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ratio:new l.aM(g,r.u_ratio),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(g,r.u_units_to_pixels),u_patternscale_a:new l.aQ(g,r.u_patternscale_a),u_patternscale_b:new l.aQ(g,r.u_patternscale_b),u_sdfgamma:new l.aM(g,r.u_sdfgamma),u_image:new l.aL(g,r.u_image),u_tex_y_a:new l.aM(g,r.u_tex_y_a),u_tex_y_b:new l.aM(g,r.u_tex_y_b),u_mix:new l.aM(g,r.u_mix)}),raster:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_tl_parent:new l.aQ(g,r.u_tl_parent),u_scale_parent:new l.aM(g,r.u_scale_parent),u_buffer_scale:new l.aM(g,r.u_buffer_scale),u_fade_t:new l.aM(g,r.u_fade_t),u_opacity:new l.aM(g,r.u_opacity),u_image0:new l.aL(g,r.u_image0),u_image1:new l.aL(g,r.u_image1),u_brightness_low:new l.aM(g,r.u_brightness_low),u_brightness_high:new l.aM(g,r.u_brightness_high),u_saturation_factor:new l.aM(g,r.u_saturation_factor),u_contrast_factor:new l.aM(g,r.u_contrast_factor),u_spin_weights:new l.aP(g,r.u_spin_weights)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texture:new l.aL(g,r.u_texture)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texture:new l.aL(g,r.u_texture),u_gamma_scale:new l.aM(g,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_is_halo:new l.aL(g,r.u_is_halo)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new l.aL(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(g,r.u_is_size_feature_constant),u_size_t:new l.aM(g,r.u_size_t),u_size:new l.aM(g,r.u_size),u_camera_to_center_distance:new l.aM(g,r.u_camera_to_center_distance),u_pitch:new l.aM(g,r.u_pitch),u_rotate_symbol:new l.aL(g,r.u_rotate_symbol),u_aspect_ratio:new l.aM(g,r.u_aspect_ratio),u_fade_change:new l.aM(g,r.u_fade_change),u_matrix:new l.aN(g,r.u_matrix),u_label_plane_matrix:new l.aN(g,r.u_label_plane_matrix),u_coord_matrix:new l.aN(g,r.u_coord_matrix),u_is_text:new l.aL(g,r.u_is_text),u_pitch_with_map:new l.aL(g,r.u_pitch_with_map),u_texsize:new l.aQ(g,r.u_texsize),u_texsize_icon:new l.aQ(g,r.u_texsize_icon),u_texture:new l.aL(g,r.u_texture),u_texture_icon:new l.aL(g,r.u_texture_icon),u_gamma_scale:new l.aM(g,r.u_gamma_scale),u_device_pixel_ratio:new l.aM(g,r.u_device_pixel_ratio),u_is_halo:new l.aL(g,r.u_is_halo)}),background:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_opacity:new l.aM(g,r.u_opacity),u_color:new l.aR(g,r.u_color)}),backgroundPattern:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_opacity:new l.aM(g,r.u_opacity),u_image:new l.aL(g,r.u_image),u_pattern_tl_a:new l.aQ(g,r.u_pattern_tl_a),u_pattern_br_a:new l.aQ(g,r.u_pattern_br_a),u_pattern_tl_b:new l.aQ(g,r.u_pattern_tl_b),u_pattern_br_b:new l.aQ(g,r.u_pattern_br_b),u_texsize:new l.aQ(g,r.u_texsize),u_mix:new l.aM(g,r.u_mix),u_pattern_size_a:new l.aQ(g,r.u_pattern_size_a),u_pattern_size_b:new l.aQ(g,r.u_pattern_size_b),u_scale_a:new l.aM(g,r.u_scale_a),u_scale_b:new l.aM(g,r.u_scale_b),u_pixel_coord_upper:new l.aQ(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texture:new l.aL(g,r.u_texture),u_ele_delta:new l.aM(g,r.u_ele_delta)}),terrainDepth:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_ele_delta:new l.aM(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_matrix:new l.aN(g,r.u_matrix),u_texture:new l.aL(g,r.u_texture),u_terrain_coords_id:new l.aM(g,r.u_terrain_coords_id),u_ele_delta:new l.aM(g,r.u_ele_delta)})};class vc{constructor(r,c,d){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ml={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _c{constructor(r,c,d,m){this.length=c.length,this.attributes=d,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let d=0;d<this.attributes.length;d++){const m=c.attributes[this.attributes[d].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,c,d){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=c.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[ml[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const oa=new WeakMap;function Js(g){var r;if(oa.has(g))return oa.get(g);{const c=(r=g.getParameter(g.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return oa.set(g,c),c}}class Vt{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xc extends Vt{getDefault(){return l.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ui extends Vt{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class hi extends Vt{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class ch extends Vt{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class wc extends Vt{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class bc extends Vt{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class uh extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class hh extends Vt{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Sc extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class dh extends Vt{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ph extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Tc extends Vt{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Lp extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class zp extends Vt{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class aa extends Vt{getDefault(){return l.aT.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class oy extends Vt{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ay extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class ly extends Vt{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class cy extends Vt{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class uy extends Vt{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class hy extends Vt{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class fh extends Vt{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Cc extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class mh extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class gh extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class la extends Vt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Rp extends Vt{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Fp extends Vt{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const d=this.gl;Js(d)?d.bindVertexArray(r):(c=d.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class yh extends Vt{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class To extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Op extends Vt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class eo extends Vt{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class ca extends eo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Bp extends eo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class vh extends eo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xt{constructor(r,c,d,m,_){this.context=r,this.width=c,this.height=d;const T=r.gl,C=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new ca(r,C),m)this.depthAttachment=_?new vh(r,C):new Bp(r,C);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class yn{constructor(r,c,d){this.blendFunction=r,this.blendColor=c,this.mask=d}}yn.Replace=[1,0],yn.disabled=new yn(yn.Replace,l.aT.transparent,[!1,!1,!1,!1]),yn.unblended=new yn(yn.Replace,l.aT.transparent,[!0,!0,!0,!0]),yn.alphaBlended=new yn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class dy{constructor(r){var c,d;if(this.gl=r,this.clearColor=new xc(this),this.clearDepth=new ui(this),this.clearStencil=new hi(this),this.colorMask=new ch(this),this.depthMask=new wc(this),this.stencilMask=new bc(this),this.stencilFunc=new uh(this),this.stencilOp=new hh(this),this.stencilTest=new Sc(this),this.depthRange=new dh(this),this.depthTest=new ph(this),this.depthFunc=new Tc(this),this.blend=new Lp(this),this.blendFunc=new zp(this),this.blendColor=new aa(this),this.blendEquation=new oy(this),this.cullFace=new ay(this),this.cullFaceSide=new ly(this),this.frontFace=new cy(this),this.program=new uy(this),this.activeTexture=new hy(this),this.viewport=new fh(this),this.bindFramebuffer=new Cc(this),this.bindRenderbuffer=new mh(this),this.bindTexture=new gh(this),this.bindVertexBuffer=new la(this),this.bindElementBuffer=new Rp(this),this.bindVertexArray=new Fp(this),this.pixelStoreUnpack=new yh(this),this.pixelStoreUnpackPremultiplyAlpha=new To(this),this.pixelStoreUnpackFlipY=new Op(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Js(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new vc(this,r,c)}createVertexBuffer(r,c,d){return new _c(this,r,c,d)}createRenderbuffer(r,c,d){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,c,d),this.bindRenderbuffer.set(null),_}createFramebuffer(r,c,d,m){return new Xt(this,r,c,d,m)}clear({color:r,depth:c,stencil:d}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.aG(r.blendFunction,yn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Js(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Js(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class jt{constructor(r,c,d){this.func=r,this.mask=c,this.range=d}}jt.ReadOnly=!1,jt.ReadWrite=!0,jt.disabled=new jt(519,jt.ReadOnly,[0,1]);const Co=7680;class vn{constructor(r,c,d,m,_,T){this.test=r,this.ref=c,this.mask=d,this.fail=m,this.depthFail=_,this.pass=T}}vn.disabled=new vn({func:519,mask:0},0,0,Co,Co,Co);class fn{constructor(r,c,d){this.enable=r,this.mode=c,this.frontFace=d}}let gl;function Np(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D=g.useProgram("collisionBox"),z=[];let R=0,G=0;for(let le=0;le<d.length;le++){const ge=d[le],Ce=r.getTile(ge),Ee=Ce.getBucket(c);if(!Ee)continue;let De=ge.posMatrix;m[0]===0&&m[1]===0||(De=g.translatePosMatrix(ge.posMatrix,Ce,m,_));const Be=T?Ee.textCollisionBox:Ee.iconCollisionBox,Re=Ee.collisionCircleArray;if(Re.length>0){const Ve=l.Z(),lt=De;l.aU(Ve,Ee.placementInvProjMatrix,g.transform.glCoordMatrix),l.aU(Ve,Ve,Ee.placementViewportMatrix),z.push({circleArray:Re,circleOffset:G,transform:lt,invTransform:Ve,coord:ge}),R+=Re.length/4,G=R}Be&&D.draw(C,P.LINES,jt.disabled,vn.disabled,g.colorModeForRenderPass(),fn.disabled,ih(De,g.transform,Ce),g.style.map.terrain&&g.style.map.terrain.getTerrainData(ge),c.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,null,g.transform.zoom,null,null,Be.collisionVertexBuffer)}if(!T||!z.length)return;const te=g.useProgram("collisionCircle"),ee=new l.aV;ee.resize(4*R),ee._trim();let ie=0;for(const le of z)for(let ge=0;ge<le.circleArray.length/4;ge++){const Ce=4*ge,Ee=le.circleArray[Ce+0],De=le.circleArray[Ce+1],Be=le.circleArray[Ce+2],Re=le.circleArray[Ce+3];ee.emplace(ie++,Ee,De,Be,Re,0),ee.emplace(ie++,Ee,De,Be,Re,1),ee.emplace(ie++,Ee,De,Be,Re,2),ee.emplace(ie++,Ee,De,Be,Re,3)}(!gl||gl.length<2*R)&&(gl=function(le){const ge=2*le,Ce=new l.aX;Ce.resize(ge),Ce._trim();for(let Ee=0;Ee<ge;Ee++){const De=6*Ee;Ce.uint16[De+0]=4*Ee+0,Ce.uint16[De+1]=4*Ee+1,Ce.uint16[De+2]=4*Ee+2,Ce.uint16[De+3]=4*Ee+2,Ce.uint16[De+4]=4*Ee+3,Ce.uint16[De+5]=4*Ee+0}return Ce}(R));const Q=C.createIndexBuffer(gl,!0),me=C.createVertexBuffer(ee,l.aW.members,!0);for(const le of z){const ge={u_matrix:le.transform,u_inv_matrix:le.invTransform,u_camera_to_center_distance:(be=g.transform).cameraToCenterDistance,u_viewport_size:[be.width,be.height]};te.draw(C,P.TRIANGLES,jt.disabled,vn.disabled,g.colorModeForRenderPass(),fn.disabled,ge,g.style.map.terrain&&g.style.map.terrain.getTerrainData(le.coord),c.id,me,Q,l.S.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,g.transform.zoom,null,null,null)}var be;me.destroy(),Q.destroy()}fn.disabled=new fn(!1,1029,2305),fn.backCCW=new fn(!0,1029,2305);const _h=l.ao(new Float32Array(16));function Ec(g,r,c,d,m,_){const{horizontalAlign:T,verticalAlign:C}=l.au(g);return new l.P((-(T-.5)*r/m+d[0])*_,(-(C-.5)*c/m+d[1])*_)}function Pc(g,r,c,d,m,_,T,C,P,D,z){const R=g.text.placedSymbolArray,G=g.text.dynamicLayoutVertexArray,te=g.icon.dynamicLayoutVertexArray,ee={};G.clear();for(let ie=0;ie<R.length;ie++){const Q=R.get(ie),me=Q.hidden||!Q.crossTileID||g.allowVerticalPlacement&&!Q.placedOrientation?null:d[Q.crossTileID];if(me){const be=new l.P(Q.anchorX,Q.anchorY),le=pn(be,c?T:_,z),ge=Zi(m.cameraToCenterDistance,le.signedDistanceFromCamera);let Ce=l.aj(g.textSizeData,P,Q)*ge/l.ap;c&&(Ce*=g.tilePixelRatio/C);const{width:Ee,height:De,anchor:Be,textOffset:Re,textBoxScale:Ve}=me,lt=Ec(Be,Ee,De,Re,Ve,Ce),Rt=c?pn(be.add(lt),_,z).point:le.point.add(r?lt.rotate(-m.angle):lt),Ke=g.allowVerticalPlacement&&Q.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let Ct=0;Ct<Q.numGlyphs;Ct++)l.ak(G,Rt,Ke);D&&Q.associatedIconIndex>=0&&(ee[Q.associatedIconIndex]={shiftedAnchor:Rt,angle:Ke})}else Y(Q.numGlyphs,G)}if(D){te.clear();const ie=g.icon.placedSymbolArray;for(let Q=0;Q<ie.length;Q++){const me=ie.get(Q);if(me.hidden)Y(me.numGlyphs,te);else{const be=ee[Q];if(be)for(let le=0;le<me.numGlyphs;le++)l.ak(te,be.shiftedAnchor,be.angle);else Y(me.numGlyphs,te)}}g.icon.dynamicLayoutVertexBuffer.updateData(te)}g.text.dynamicLayoutVertexBuffer.updateData(G)}function xh(g,r,c){return c.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function kc(g,r,c,d,m,_,T,C,P,D,z,R){const G=g.context,te=G.gl,ee=g.transform,ie=C==="map",Q=P==="map",me=C!=="viewport"&&c.layout.get("symbol-placement")!=="point",be=ie&&!Q&&!me,le=!c.layout.get("symbol-sort-key").isConstant();let ge=!1;const Ce=g.depthModeForSublayer(0,jt.ReadOnly),Ee=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[];for(const Be of d){const Re=r.getTile(Be),Ve=Re.getBucket(c);if(!Ve)continue;const lt=m?Ve.text:Ve.icon;if(!lt||!lt.segments.get().length||!lt.hasVisibleVertices)continue;const Rt=lt.programConfigurations.get(c.id),Ke=m||Ve.sdfIcons,Ct=m?Ve.textSizeData:Ve.iconSizeData,ut=Q||ee.pitch!==0,tn=g.useProgram(xh(Ke,m,Ve),Rt),zt=l.ah(Ct,ee.zoom),It=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Be);let Ft,Pn,an,hr,Hn=[0,0],Fn=null;if(m)Pn=Re.glyphAtlasTexture,an=te.LINEAR,Ft=Re.glyphAtlasTexture.size,Ve.iconsInText&&(Hn=Re.imageAtlasTexture.size,Fn=Re.imageAtlasTexture,hr=ut||g.options.rotating||g.options.zooming||Ct.kind==="composite"||Ct.kind==="camera"?te.LINEAR:te.NEAREST);else{const kn=c.layout.get("icon-size").constantOr(0)!==1||Ve.iconsNeedLinear;Pn=Re.imageAtlasTexture,an=Ke||g.options.rotating||g.options.zooming||kn||ut?te.LINEAR:te.NEAREST,Ft=Re.imageAtlasTexture.size}const fi=fe(Re,1,g.transform.zoom),un=je(Be.posMatrix,Q,ie,g.transform,fi),hs=li(Be.posMatrix,Q,ie,g.transform,fi),ds=Ee&&Ve.hasTextData(),ro=c.layout.get("icon-text-fit")!=="none"&&ds&&Ve.hasIconData();if(me){const kn=g.style.map.terrain?(Gr,An)=>g.style.map.terrain.getElevation(Be,Gr,An):null,Kn=c.layout.get("text-rotation-alignment")==="map";$e(Ve,Be.posMatrix,g,m,un,hs,Q,D,Kn,kn)}const Mo=g.translatePosMatrix(Be.posMatrix,Re,_,T),ga=me||m&&Ee||ro?_h:un,wr=g.translatePosMatrix(hs,Re,_,T,!0),dr=Ke&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Mr;Mr=Ke?Ve.iconsInText?So(Ct.kind,zt,be,Q,g,Mo,ga,wr,Ft,Hn):lh(Ct.kind,zt,be,Q,g,Mo,ga,wr,m,Ft,!0):ah(Ct.kind,zt,be,Q,g,Mo,ga,wr,m,Ft);const Io={program:tn,buffers:lt,uniformValues:Mr,atlasTexture:Pn,atlasTextureIcon:Fn,atlasInterpolation:an,atlasInterpolationIcon:hr,isSDF:Ke,hasHalo:dr};if(le&&Ve.canOverlap){ge=!0;const kn=lt.segments.get();for(const Kn of kn)De.push({segments:new l.S([Kn]),sortKey:Kn.sortKey,state:Io,terrainData:It})}else De.push({segments:lt.segments,sortKey:0,state:Io,terrainData:It})}ge&&De.sort((Be,Re)=>Be.sortKey-Re.sortKey);for(const Be of De){const Re=Be.state;if(G.activeTexture.set(te.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,te.CLAMP_TO_EDGE),Re.atlasTextureIcon&&(G.activeTexture.set(te.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Re.isSDF){const Ve=Re.uniformValues;Re.hasHalo&&(Ve.u_is_halo=1,wh(Re.buffers,Be.segments,c,g,Re.program,Ce,z,R,Ve,Be.terrainData)),Ve.u_is_halo=0}wh(Re.buffers,Be.segments,c,g,Re.program,Ce,z,R,Re.uniformValues,Be.terrainData)}}function wh(g,r,c,d,m,_,T,C,P,D){const z=d.context;m.draw(z,z.gl.TRIANGLES,_,T,C,fn.disabled,P,D,c.id,g.layoutVertexBuffer,g.indexBuffer,r,c.paint,d.transform.zoom,g.programConfigurations.get(c.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function yl(g,r,c,d,m){if(!c||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let T=_[c.to.toString()],C=_[c.from.toString()];if(!T&&C&&(T=C),!C&&T&&(C=T),!T||!C){const P=m.getPaintProperty(r);T=_[P],C=_[P]}T&&C&&g.setConstantPatternPositions(T,C)}function vl(g,r,c,d,m,_,T){const C=g.context.gl,P="fill-pattern",D=c.paint.get(P),z=D&&D.constantOr(1),R=c.getCrossfadeParameters();let G,te,ee,ie,Q;T?(te=z&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=C.LINES):(te=z?"fillPattern":"fill",G=C.TRIANGLES);const me=D.constantOr(null);for(const be of d){const le=r.getTile(be);if(z&&!le.patternsLoaded())continue;const ge=le.getBucket(c);if(!ge)continue;const Ce=ge.programConfigurations.get(c.id),Ee=g.useProgram(te,Ce),De=g.style.map.terrain&&g.style.map.terrain.getTerrainData(be);z&&(g.context.activeTexture.set(C.TEXTURE0),le.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ce.updatePaintBuffers(R)),yl(Ce,P,me,le,c);const Be=De?be:null,Re=g.translatePosMatrix(Be?Be.posMatrix:be.posMatrix,le,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(T){ie=ge.indexBuffer2,Q=ge.segments2;const Ve=[C.drawingBufferWidth,C.drawingBufferHeight];ee=te==="fillOutlinePattern"&&z?fc(Re,g,R,le,Ve):pc(Re,Ve)}else ie=ge.indexBuffer,Q=ge.segments,ee=z?rh(Re,g,R,le):Ep(Re);Ee.draw(g.context,G,m,g.stencilModeForClipping(be),_,fn.disabled,ee,De,c.id,ge.layoutVertexBuffer,ie,Q,c.paint,g.transform.zoom,Ce)}}function _l(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D="fill-extrusion-pattern",z=c.paint.get(D),R=z.constantOr(1),G=c.getCrossfadeParameters(),te=c.paint.get("fill-extrusion-opacity"),ee=z.constantOr(null);for(const ie of d){const Q=r.getTile(ie),me=Q.getBucket(c);if(!me)continue;const be=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ie),le=me.programConfigurations.get(c.id),ge=g.useProgram(R?"fillExtrusionPattern":"fillExtrusion",le);R&&(g.context.activeTexture.set(P.TEXTURE0),Q.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),le.updatePaintBuffers(G)),yl(le,D,ee,Q,c);const Ce=g.translatePosMatrix(ie.posMatrix,Q,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ee=c.paint.get("fill-extrusion-vertical-gradient"),De=R?Ys(Ce,g,Ee,te,ie,G,Q):nh(Ce,g,Ee,te);ge.draw(C,C.gl.TRIANGLES,m,_,T,fn.backCCW,De,be,c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,c.paint,g.transform.zoom,le,g.style.map.terrain&&me.centroidVertexBuffer)}}function py(g,r,c,d,m,_,T){const C=g.context,P=C.gl,D=c.fbo;if(!D)return;const z=g.useProgram("hillshade"),R=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);C.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),z.draw(C,P.TRIANGLES,m,_,T,fn.disabled,((G,te,ee,ie)=>{const Q=ee.paint.get("hillshade-shadow-color"),me=ee.paint.get("hillshade-highlight-color"),be=ee.paint.get("hillshade-accent-color");let le=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=G.transform.angle);const ge=!G.options.moving;return{u_matrix:ie?ie.posMatrix:G.transform.calculatePosMatrix(te.tileID.toUnwrapped(),ge),u_image:0,u_latrange:sh(0,te.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),le],u_shadow:Q,u_highlight:me,u_accent:be}})(g,c,d,R?r:null),R,d.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function bh(g,r,c,d,m,_){const T=g.context,C=T.gl,P=r.dem;if(P&&P.data){const D=P.dim,z=P.stride,R=P.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||g.getTileTexture(z),r.demTexture){const te=r.demTexture;te.update(R,{premultiply:!1}),te.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else r.demTexture=new Fe(T,R,C.RGBA,{premultiply:!1}),r.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let G=r.fbo;if(!G){const te=new Fe(T,{width:D,height:D,data:null},C.RGBA);te.bind(C.LINEAR,C.CLAMP_TO_EDGE),G=r.fbo=T.createFramebuffer(D,D,!0,!1),G.colorAttachment.set(te.texture)}T.bindFramebuffer.set(G.framebuffer),T.viewport.set([0,0,D,D]),g.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,d,m,_,fn.disabled,((te,ee)=>{const ie=ee.stride,Q=l.Z();return l.aS(Q,0,l.N,-l.N,0,0,1),l.$(Q,Q,[0,-l.N,0]),{u_matrix:Q,u_image:1,u_dimension:[ie,ie],u_zoom:te.overscaledZ,u_unpack:ee.getUnpackVector()}})(r.tileID,P),null,c.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function fy(g,r,c,d,m,_){const T=d.paint.get("raster-fade-duration");if(!_&&T>0){const C=l.h.now(),P=(C-g.timeAdded)/T,D=r?(C-r.timeAdded)/T:-1,z=c.getSource(),R=m.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),G=!r||Math.abs(r.tileID.overscaledZ-R)>Math.abs(g.tileID.overscaledZ-R),te=G&&g.refreshedUponExpiration?1:l.ad(G?P:1-D,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const Vp=new l.aT(1,0,0,1),Ac=new l.aT(0,1,0,1),Sh=new l.aT(0,0,1,1),jp=new l.aT(1,0,1,1),Up=new l.aT(0,1,1,1);function xl(g,r,c,d){Ic(g,0,r+c/2,g.transform.width,c,d)}function Mc(g,r,c,d){Ic(g,r-c/2,0,c,g.transform.height,d)}function Ic(g,r,c,d,m,_){const T=g.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*g.pixelRatio,c*g.pixelRatio,d*g.pixelRatio,m*g.pixelRatio),T.clear({color:_}),C.disable(C.SCISSOR_TEST)}function $p(g,r,c){const d=g.context,m=d.gl,_=c.posMatrix,T=g.useProgram("debug"),C=jt.disabled,P=vn.disabled,D=g.colorModeForRenderPass(),z="$debug",R=g.style.map.terrain&&g.style.map.terrain.getTerrainData(c);d.activeTexture.set(m.TEXTURE0);const G=r.getTileByID(c.key).latestRawTileData,te=Math.floor((G&&G.byteLength||0)/1024),ee=r.getTile(c).tileSize,ie=512/Math.min(ee,512)*(c.overscaledZ/g.transform.zoom)*.5;let Q=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Q+=` => ${c.overscaledZ}`),function(me,be){me.initDebugOverlayCanvas();const le=me.debugOverlayCanvas,ge=me.context.gl,Ce=me.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,le.width,le.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(be,5,5),Ce.strokeText(be,5,5),me.debugOverlayTexture.update(le),me.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}(g,`${Q} ${te}kB`),T.draw(d,m.TRIANGLES,C,P,yn.alphaBlended,fn.disabled,fl(_,l.aT.transparent,ie),null,z,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),T.draw(d,m.LINE_STRIP,C,P,D,fn.disabled,fl(_,l.aT.red),R,z,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function bn(g,r,c){const d=g.context,m=d.gl,_=g.colorModeForRenderPass(),T=new jt(m.LEQUAL,jt.ReadWrite,g.depthRangeFor3D),C=g.useProgram("terrain"),P=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,g.width,g.height]);for(const D of c){const z=g.renderToTexture.getTexture(D),R=r.getTerrainData(D.tileID);d.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,z.texture);const G={u_matrix:g.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(g.transform.zoom)};C.draw(d,m.TRIANGLES,T,vn.disabled,_,fn.backCCW,G,R,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class Eo{constructor(r,c){this.context=new dy(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=yr.maxUnderzooming+yr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new uc}resize(r,c,d){if(this.width=Math.floor(r*d),this.height=Math.floor(c*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,c=new l.a_;c.emplaceBack(0,0),c.emplaceBack(l.N,0),c.emplaceBack(0,l.N),c.emplaceBack(l.N,l.N),this.tileExtentBuffer=r.createVertexBuffer(c,hc.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const d=new l.a_;d.emplaceBack(0,0),d.emplaceBack(l.N,0),d.emplaceBack(0,l.N),d.emplaceBack(l.N,l.N),this.debugBuffer=r.createVertexBuffer(d,hc.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=r.createVertexBuffer(m,Un.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,hc.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const T=new l.a$;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const C=new l.b0;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(C);const P=this.context.gl;this.stencilClearMode=new vn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.Z();l.aS(d,0,this.width,this.height,0,0,1),l.a0(d,d,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,jt.disabled,this.stencilClearMode,yn.disabled,fn.disabled,Pp(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const d=this.context,m=d.gl;this.nextStencilID+c.length>256&&this.clearStencil(),d.setColorMode(yn.disabled),d.setDepthMode(jt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of c){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(d,m.TRIANGLES,jt.disabled,new vn({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),yn.disabled,fn.disabled,Pp(T.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new vn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new vn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,d=r.sort((T,C)=>C.overscaledZ-T.overscaledZ),m=d[d.length-1].overscaledZ,_=d[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let C=0;C<_;C++)T[C+m]=new vn({func:c.GEQUAL,mask:255},C+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=_,[T,d]}return[{[m]:vn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new yn([r.CONSTANT_COLOR,r.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yn.unblended:yn.alphaBlended}depthModeForSublayer(r,c,d){if(!this.opaquePassEnabledForLayer())return jt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new jt(d||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const d=this.style._order,m=this.style.sourceCaches,_={},T={},C={};for(const P in m){const D=m[P];D.used&&D.prepare(this.context),_[P]=D.getVisibleCoordinates(),T[P]=_[P].slice().reverse(),C[P]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<d.length;P++)if(this.style._layers[d[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,z){const R=D.context,G=R.gl,te=yn.unblended,ee=new jt(G.LEQUAL,jt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Q=z.sourceCache.getRenderableTiles(),me=D.useProgram("terrainDepth");R.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:l.aT.transparent,depth:1});for(const be of Q){const le=z.getTerrainData(be.tileID),ge={u_matrix:D.transform.calculatePosMatrix(be.tileID.toUnwrapped()),u_ele_delta:z.getMeshFrameDelta(D.transform.zoom)};me.draw(R,G.TRIANGLES,ee,vn.disabled,te,fn.backCCW,ge,le,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,z){const R=D.context,G=R.gl,te=yn.unblended,ee=new jt(G.LEQUAL,jt.ReadWrite,[0,1]),ie=z.getTerrainMesh(),Q=z.getCoordsTexture(),me=z.sourceCache.getRenderableTiles(),be=D.useProgram("terrainCoords");R.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),R.clear({color:l.aT.transparent,depth:1}),z.coordsIndex=[];for(const le of me){const ge=z.getTerrainData(le.tileID);R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,Q.texture);const Ce={u_matrix:D.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(D.transform.zoom)};be.draw(R,G.TRIANGLES,ee,vn.disabled,te,fn.backCCW,Ce,ge,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments),z.coordsIndex.push(le.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of d){const D=this.style._layers[P];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const z=T[D.source];(D.type==="custom"||z.length)&&this.renderLayer(this,m[D.source],D,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[d[this.currentLayer]],D=m[P.source],z=_[P.source];this._renderTileClippingMasks(P,z),this.renderLayer(this,D,P,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const P=this.style._layers[d[this.currentLayer]],D=m[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const z=(P.type==="symbol"?C:T)[P.source];this._renderTileClippingMasks(P,_[P.source]),this.renderLayer(this,D,P,z)}if(this.options.showTileBoundaries){const P=function(D,z){let R=null;const G=Object.values(D._layers).flatMap(Q=>Q.source&&!Q.isHidden(z)?[D.sourceCaches[Q.source]]:[]),te=G.filter(Q=>Q.getSource().type==="vector"),ee=G.filter(Q=>Q.getSource().type!=="vector"),ie=Q=>{(!R||R.getSource().maxzoom<Q.getSource().maxzoom)&&(R=Q)};return te.forEach(Q=>ie(Q)),R||ee.forEach(Q=>ie(Q)),R}(this.style,this.transform.zoom);P&&function(D,z,R){for(let G=0;G<R.length;G++)$p(D,z,R[G])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const D=P.transform.padding;xl(P,P.transform.height-(D.top||0),3,Vp),xl(P,D.bottom||0,3,Ac),Mc(P,D.left||0,3,Sh),Mc(P,P.transform.width-(D.right||0),3,jp);const z=P.transform.centerPoint;(function(R,G,te,ee){Ic(R,G-1,te-10,2,20,ee),Ic(R,G-10,te-1,20,2,ee)})(P,z.x,P.transform.height-z.y,Up)}(this),this.context.setDefault()}renderLayer(r,c,d,m){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(m||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,T,C,P,D){if(_.renderPass!=="translucent")return;const z=vn.disabled,R=_.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(G,te,ee,ie,Q,me,be){const le=te.transform,ge=Q==="map",Ce=me==="map";for(const Ee of G){const De=ie.getTile(Ee),Be=De.getBucket(ee);if(!Be||!Be.text||!Be.text.segments.get().length)continue;const Re=l.ah(Be.textSizeData,le.zoom),Ve=fe(De,1,te.transform.zoom),lt=je(Ee.posMatrix,Ce,ge,te.transform,Ve),Rt=ee.layout.get("icon-text-fit")!=="none"&&Be.hasIconData();if(Re){const Ke=Math.pow(2,le.zoom-De.tileID.overscaledZ);Pc(Be,ge,Ce,be,le,lt,Ee.posMatrix,Ke,Re,Rt,te.style.map.terrain?(Ct,ut)=>te.style.map.terrain.getElevation(Ee,Ct,ut):null)}}}(P,_,C,T,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),D),C.paint.get("icon-opacity").constantOr(1)!==0&&kc(_,T,C,P,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),z,R),C.paint.get("text-opacity").constantOr(1)!==0&&kc(_,T,C,P,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),z,R),T.map.showCollisionBoxes&&(Np(_,T,C,P,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),Np(_,T,C,P,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))})(r,c,d,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,C,P){if(_.renderPass!=="translucent")return;const D=C.paint.get("circle-opacity"),z=C.paint.get("circle-stroke-width"),R=C.paint.get("circle-stroke-opacity"),G=!C.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(z.constantOr(1)===0||R.constantOr(1)===0))return;const te=_.context,ee=te.gl,ie=_.depthModeForSublayer(0,jt.ReadOnly),Q=vn.disabled,me=_.colorModeForRenderPass(),be=[];for(let le=0;le<P.length;le++){const ge=P[le],Ce=T.getTile(ge),Ee=Ce.getBucket(C);if(!Ee)continue;const De=Ee.programConfigurations.get(C.id),Be=_.useProgram("circle",De),Re=Ee.layoutVertexBuffer,Ve=Ee.indexBuffer,lt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge),Rt={programConfiguration:De,program:Be,layoutVertexBuffer:Re,indexBuffer:Ve,uniformValues:Qs(_,ge,Ce,C),terrainData:lt};if(G){const Ke=Ee.segments.get();for(const Ct of Ke)be.push({segments:new l.S([Ct]),sortKey:Ct.sortKey,state:Rt})}else be.push({segments:Ee.segments,sortKey:0,state:Rt})}G&&be.sort((le,ge)=>le.sortKey-ge.sortKey);for(const le of be){const{programConfiguration:ge,program:Ce,layoutVertexBuffer:Ee,indexBuffer:De,uniformValues:Be,terrainData:Re}=le.state;Ce.draw(te,ee.TRIANGLES,ie,Q,me,fn.disabled,Be,Re,C.id,Ee,De,le.segments,C.paint,_.transform.zoom,ge)}})(r,c,d,m);break;case"heatmap":(function(_,T,C,P){if(C.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,z=D.gl,R=vn.disabled,G=new yn([z.ONE,z.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(te,ee,ie){const Q=te.gl;te.activeTexture.set(Q.TEXTURE1),te.viewport.set([0,0,ee.width/4,ee.height/4]);let me=ie.heatmapFbo;if(me)Q.bindTexture(Q.TEXTURE_2D,me.colorAttachment.get()),te.bindFramebuffer.set(me.framebuffer);else{const be=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,be),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),me=ie.heatmapFbo=te.createFramebuffer(ee.width/4,ee.height/4,!1,!1),function(le,ge,Ce,Ee){var De,Be;const Re=le.gl,Ve=(De=le.HALF_FLOAT)!==null&&De!==void 0?De:Re.UNSIGNED_BYTE,lt=(Be=le.RGBA16F)!==null&&Be!==void 0?Be:Re.RGBA;Re.texImage2D(Re.TEXTURE_2D,0,lt,ge.width/4,ge.height/4,0,Re.RGBA,Ve,null),Ee.colorAttachment.set(Ce)}(te,ee,be,me)}})(D,_,C),D.clear({color:l.aT.transparent});for(let te=0;te<P.length;te++){const ee=P[te];if(T.hasRenderableParent(ee))continue;const ie=T.getTile(ee),Q=ie.getBucket(C);if(!Q)continue;const me=Q.programConfigurations.get(C.id),be=_.useProgram("heatmap",me),{zoom:le}=_.transform;be.draw(D,z.TRIANGLES,jt.disabled,R,G,fn.disabled,iy(ee.posMatrix,ie,le,C.paint.get("heatmap-intensity")),null,C.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,C.paint,_.transform.zoom,me)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,z){const R=D.context,G=R.gl,te=z.heatmapFbo;if(!te)return;R.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,te.colorAttachment.get()),R.activeTexture.set(G.TEXTURE1);let ee=z.colorRampTexture;ee||(ee=z.colorRampTexture=new Fe(R,z.colorRamp,G.RGBA)),ee.bind(G.LINEAR,G.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(R,G.TRIANGLES,jt.disabled,vn.disabled,D.colorModeForRenderPass(),fn.disabled,((ie,Q,me,be)=>{const le=l.Z();l.aS(le,0,ie.width,ie.height,0,0,1);const ge=ie.context.gl;return{u_matrix:le,u_world:[ge.drawingBufferWidth,ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Q.paint.get("heatmap-opacity")}})(D,z),null,z.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,z.paint,D.transform.zoom)}(_,C))})(r,c,d,m);break;case"line":(function(_,T,C,P){if(_.renderPass!=="translucent")return;const D=C.paint.get("line-opacity"),z=C.paint.get("line-width");if(D.constantOr(1)===0||z.constantOr(1)===0)return;const R=_.depthModeForSublayer(0,jt.ReadOnly),G=_.colorModeForRenderPass(),te=C.paint.get("line-dasharray"),ee=C.paint.get("line-pattern"),ie=ee.constantOr(1),Q=C.paint.get("line-gradient"),me=C.getCrossfadeParameters(),be=ie?"linePattern":te?"lineSDF":Q?"lineGradient":"line",le=_.context,ge=le.gl;let Ce=!0;for(const Ee of P){const De=T.getTile(Ee);if(ie&&!De.patternsLoaded())continue;const Be=De.getBucket(C);if(!Be)continue;const Re=Be.programConfigurations.get(C.id),Ve=_.context.program.get(),lt=_.useProgram(be,Re),Rt=Ce||lt.program!==Ve,Ke=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ee),Ct=ee.constantOr(null);if(Ct&&De.imageAtlas){const zt=De.imageAtlas,It=zt.patternPositions[Ct.to.toString()],Ft=zt.patternPositions[Ct.from.toString()];It&&Ft&&Re.setConstantPatternPositions(It,Ft)}const ut=Ke?Ee:null,tn=ie?sy(_,De,C,me,ut):te?Ap(_,De,C,te,me,ut):Q?kp(_,De,C,Be.lineClipsArray.length,ut):oh(_,De,C,ut);if(ie)le.activeTexture.set(ge.TEXTURE0),De.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Re.updatePaintBuffers(me);else if(te&&(Rt||_.lineAtlas.dirty))le.activeTexture.set(ge.TEXTURE0),_.lineAtlas.bind(le);else if(Q){const zt=Be.gradients[C.id];let It=zt.texture;if(C.gradientVersion!==zt.version){let Ft=256;if(C.stepInterpolant){const Pn=T.getSource().maxzoom,an=Ee.canonical.z===Pn?Math.ceil(1<<_.transform.maxZoom-Ee.canonical.z):1;Ft=l.ad(l.aY(Be.maxLineLength/l.N*1024*an),256,le.maxTextureSize)}zt.gradient=l.aZ({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:zt.gradient||void 0,clips:Be.lineClipsArray}),zt.texture?zt.texture.update(zt.gradient):zt.texture=new Fe(le,zt.gradient,ge.RGBA),zt.version=C.gradientVersion,It=zt.texture}le.activeTexture.set(ge.TEXTURE0),It.bind(C.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}lt.draw(le,ge.TRIANGLES,R,_.stencilModeForClipping(Ee),G,fn.disabled,tn,Ke,C.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,C.paint,_.transform.zoom,Re,Be.layoutVertexBuffer2),Ce=!1}})(r,c,d,m);break;case"fill":(function(_,T,C,P){const D=C.paint.get("fill-color"),z=C.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const R=_.colorModeForRenderPass(),G=C.paint.get("fill-pattern"),te=_.opaquePassEnabledForLayer()&&!G.constantOr(1)&&D.constantOr(l.aT.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===te){const ee=_.depthModeForSublayer(1,_.renderPass==="opaque"?jt.ReadWrite:jt.ReadOnly);vl(_,T,C,P,ee,R,!1)}if(_.renderPass==="translucent"&&C.paint.get("fill-antialias")){const ee=_.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,jt.ReadOnly);vl(_,T,C,P,ee,R,!0)}})(r,c,d,m);break;case"fill-extrusion":(function(_,T,C,P){const D=C.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const z=new jt(_.context.gl.LEQUAL,jt.ReadWrite,_.depthRangeFor3D);if(D!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))_l(_,T,C,P,z,vn.disabled,yn.disabled),_l(_,T,C,P,z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const R=_.colorModeForRenderPass();_l(_,T,C,P,z,vn.disabled,R)}}})(r,c,d,m);break;case"hillshade":(function(_,T,C,P){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,z=_.depthModeForSublayer(0,jt.ReadOnly),R=_.colorModeForRenderPass(),[G,te]=_.renderPass==="translucent"?_.stencilConfigForOverlap(P):[{},P];for(const ee of te){const ie=T.getTile(ee);ie.needsHillshadePrepare!==void 0&&ie.needsHillshadePrepare&&_.renderPass==="offscreen"?bh(_,ie,C,z,vn.disabled,R):_.renderPass==="translucent"&&py(_,ee,ie,C,z,G[ee.overscaledZ],R)}D.viewport.set([0,0,_.width,_.height])})(r,c,d,m);break;case"raster":(function(_,T,C,P){if(_.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!P.length)return;const D=_.context,z=D.gl,R=T.getSource(),G=_.useProgram("raster"),te=_.colorModeForRenderPass(),[ee,ie]=R instanceof Ln?[{},P]:_.stencilConfigForOverlap(P),Q=ie[ie.length-1].overscaledZ,me=!_.options.moving;for(const be of ie){const le=_.depthModeForSublayer(be.overscaledZ-Q,C.paint.get("raster-opacity")===1?jt.ReadWrite:jt.ReadOnly,z.LESS),ge=T.getTile(be);ge.registerFadeDuration(C.paint.get("raster-fade-duration"));const Ce=T.findLoadedParent(be,0),Ee=fy(ge,Ce,T,C,_.transform,_.style.map.terrain);let De,Be;const Re=C.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;D.activeTexture.set(z.TEXTURE0),ge.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(z.TEXTURE1),Ce?(Ce.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Ce.tileID.overscaledZ-ge.tileID.overscaledZ),Be=[ge.tileID.canonical.x*De%1,ge.tileID.canonical.y*De%1]):ge.texture.bind(Re,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(be),lt=Ve?be:null,Rt=lt?lt.posMatrix:_.transform.calculatePosMatrix(be.toUnwrapped(),me),Ke=Ip(Rt,Be||[0,0],De||1,Ee,C);R instanceof Ln?G.draw(D,z.TRIANGLES,le,vn.disabled,te,fn.disabled,Ke,Ve,C.id,R.boundsBuffer,_.quadTriangleIndexBuffer,R.boundsSegments):G.draw(D,z.TRIANGLES,le,ee[be.overscaledZ],te,fn.disabled,Ke,Ve,C.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,c,d,m);break;case"background":(function(_,T,C,P){const D=C.paint.get("background-color"),z=C.paint.get("background-opacity");if(z===0)return;const R=_.context,G=R.gl,te=_.transform,ee=te.tileSize,ie=C.paint.get("background-pattern");if(_.isPatternMissing(ie))return;const Q=!ie&&D.a===1&&z===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Q)return;const me=vn.disabled,be=_.depthModeForSublayer(0,Q==="opaque"?jt.ReadWrite:jt.ReadOnly),le=_.colorModeForRenderPass(),ge=_.useProgram(ie?"backgroundPattern":"background"),Ce=P||te.coveringTiles({tileSize:ee,terrain:_.style.map.terrain});ie&&(R.activeTexture.set(G.TEXTURE0),_.imageManager.bind(_.context));const Ee=C.getCrossfadeParameters();for(const De of Ce){const Be=P?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),Re=ie?Di(Be,z,_,ie,{tileID:De,tileSize:ee},Ee):gc(Be,z,D),Ve=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);ge.draw(R,G.TRIANGLES,be,me,le,fn.disabled,Re,Ve,C.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,d,m);break;case"custom":(function(_,T,C){const P=_.context,D=C.implementation;if(_.renderPass==="offscreen"){const z=D.prerender;z&&(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),z.call(D,P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(vn.disabled);const z=D.renderingMode==="3d"?new jt(_.context.gl.LEQUAL,jt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,jt.ReadOnly);P.setDepthMode(z),D.render(P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,c,d,m,_){if(!d[0]&&!d[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const D=Math.sin(T),z=Math.cos(T);d=[d[0]*z-d[1]*D,d[0]*D+d[1]*z]}const C=[_?d[0]:fe(c,d[0],this.transform.zoom),_?d[1]:fe(c,d[1],this.transform.zoom),0],P=new Float32Array(16);return l.$(P,r,C),P}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!c||!d}useProgram(r,c){this.cache=this.cache||{};const d=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new dc(this.context,gn[r],c,yc[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Fe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class Ur{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,d){const m=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const P=1/(C=l.ag([],C,r))[3]/c*m;return l.b3(C,C,[P,P,1/C[3],P])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const P=function(G,te){var ee=te[0],ie=te[1],Q=te[2],me=ee*ee+ie*ie+Q*Q;return me>0&&(me=1/Math.sqrt(me)),G[0]=te[0]*me,G[1]=te[1]*me,G[2]=te[2]*me,G}([],function(G,te,ee){var ie=te[0],Q=te[1],me=te[2],be=ee[0],le=ee[1],ge=ee[2];return G[0]=Q*ge-me*le,G[1]=me*be-ie*ge,G[2]=ie*le-Q*be,G}([],Se([],_[C[0]],_[C[1]]),Se([],_[C[2]],_[C[1]]))),D=-((z=P)[0]*(R=_[C[1]])[0]+z[1]*R[1]+z[2]*R[2]);var z,R;return P.concat(D)});return new Ur(_,T)}}class ua{constructor(r,c){this.min=r,this.max=c,this.center=function(d,m,_){return d[0]=.5*m[0],d[1]=.5*m[1],d[2]=.5*m[2],d}([],function(d,m,_){return d[0]=m[0]+_[0],d[1]=m[1]+_[1],d[2]=m[2]+_[2],d}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],d=ne(this.min),m=ne(this.max);for(let _=0;_<c.length;_++)d[_]=c[_]?this.min[_]:this.center[_],m[_]=c[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new ua(d,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let C=0;C<c.length;C++)l.b4(_,c[C])>=0&&T++;if(T===0)return 0;T!==c.length&&(d=!1)}if(d)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<r.points.length;C++){const P=r.points[C][m]-this.min[m];_=Math.min(_,P),T=Math.max(T,P)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class wl{constructor(r=0,c=0,d=0,m=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=d,this.right=m}interpolate(r,c,d){return c.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,c.top,d)),c.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,c.bottom,d)),c.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,c.left,d)),c.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,c.right,d)),this}getCenter(r,c){const d=l.ad((this.left+r-this.right)/2,0,r),m=l.ad((this.top+c-this.bottom)/2,0,c);return new l.P(d,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new wl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Dc{constructor(r,c,d,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=d??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Dc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-l.b5(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var d=new l.A(4);return l.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,m,_){var T=m[0],C=m[1],P=m[2],D=m[3],z=Math.sin(_),R=Math.cos(_);d[0]=T*R+P*z,d[1]=C*R+D*z,d[2]=T*-z+P*R,d[3]=C*-z+D*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,d){this._unmodified=!1,this._edgeInsets.interpolate(r,c,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new l.b6(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),T=this.pointCoordinate(new l.P(0,this.height)),C=Math.floor(Math.min(d.x,m.x,_.x,T.x)),P=Math.floor(Math.max(d.x,m.x,_.x,T.x)),D=1;for(let z=C-D;z<=P+D;z++)z!==0&&c.push(new l.b6(z,r))}return c}coveringTiles(r){var c,d;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),C=l.U.fromLngLat(this.center),P=Math.pow(2,m),D=[P*T.x,P*T.y,0],z=[P*C.x,P*C.y,0],R=Ur.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let G=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=m);const te=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ee=le=>({aabb:new ua([le*P,0,0],[(le+1)*P,P,0]),zoom:0,x:0,y:0,wrap:le,fullyVisible:!1}),ie=[],Q=[],me=m,be=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let le=1;le<=3;le++)ie.push(ee(-le)),ie.push(ee(le));for(ie.push(ee(0));ie.length>0;){const le=ie.pop(),ge=le.x,Ce=le.y;let Ee=le.fullyVisible;if(!Ee){const lt=le.aabb.intersects(R);if(lt===0)continue;Ee=lt===2}const De=r.terrain?D:z,Be=le.aabb.distanceX(De),Re=le.aabb.distanceY(De),Ve=Math.max(Math.abs(Be),Math.abs(Re));if(le.zoom===me||Ve>te+(1<<me-le.zoom)-2&&le.zoom>=G){const lt=me-le.zoom,Rt=D[0]-.5-(ge<<lt),Ke=D[1]-.5-(Ce<<lt);Q.push({tileID:new l.O(le.zoom===me?be:le.zoom,le.wrap,le.zoom,ge,Ce),distanceSq:ke([z[0]-.5-ge,z[1]-.5-Ce]),tileDistanceToCamera:Math.sqrt(Rt*Rt+Ke*Ke)})}else for(let lt=0;lt<4;lt++){const Rt=(ge<<1)+lt%2,Ke=(Ce<<1)+(lt>>1),Ct=le.zoom+1;let ut=le.aabb.quadrant(lt);if(r.terrain){const tn=new l.O(Ct,le.wrap,Ct,Rt,Ke),zt=r.terrain.getMinMaxElevation(tn),It=(c=zt.minElevation)!==null&&c!==void 0?c:this.elevation,Ft=(d=zt.maxElevation)!==null&&d!==void 0?d:this.elevation;ut=new ua([ut.min[0],ut.min[1],It],[ut.max[0],ut.max[1],Ft])}ie.push({aabb:ut,zoom:Ct,x:Rt,y:Ke,wrap:le.wrap,fullyVisible:Ee})}}return Q.sort((le,ge)=>le.distanceSq-ge.distanceSq).map(le=>le.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=l.ad(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(r.lng)*this.worldSize,l.H(c)*this.worldSize)}unproject(r){return new l.U(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.pointLocation(this.centerPoint,r),d=r.getElevationForLngLatZoom(c,this.tileZoom);if(!(this.elevation-d))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),T=l.U.fromLngLat(c,d),C=_.x-T.x,P=_.y-T.y,D=_.z-T.z,z=Math.sqrt(C*C+P*P+D*D),R=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=d,this._center=c,this.zoom=R}setLocationAtPoint(r,c){const d=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new l.U(_.x-(d.x-m.x),_.y-(d.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return l.U.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const G=c.pointCoordinate(r);if(G!=null)return G}const d=[r.x,r.y,0,1],m=[r.x,r.y,1,1];l.ag(d,d,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=d[3],T=m[3],C=d[1]/_,P=m[1]/T,D=d[2]/_,z=m[2]/T,R=D===z?0:(0-D)/(z-D);return new l.U(l.B.number(d[0]/_,m[0]/T,R)/this.worldSize,l.B.number(C,P,R)/this.worldSize)}coordinatePoint(r,c=0,d=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,c,1];return l.ag(m,m,d),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new vt().extend(this.pointLocation(new l.P(0,r))).extend(this.pointLocation(new l.P(this.width,r))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new vt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,c=!1){const d=r.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[d])return m[d];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),C=_.x+Math.pow(2,_.z)*r.wrap,P=l.ao(new Float64Array(16));return l.$(P,P,[C*T,_.y*T,0]),l.a0(P,P,[T/l.N,T/l.N,1]),l.a1(P,c?this.alignedProjMatrix:this.projMatrix,P),m[d]=new Float32Array(P),m[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,c,d,m,_=-90,T=90,C=-180,P=180;const D=this.size,z=this._unmodified;if(this.latRange){const te=this.latRange;_=l.H(te[1])*this.worldSize,T=l.H(te[0])*this.worldSize,r=T-_<D.y?D.y/(T-_):0}if(this.lngRange){const te=this.lngRange;C=l.b5(l.G(te[0])*this.worldSize,0,this.worldSize),P=l.b5(l.G(te[1])*this.worldSize,0,this.worldSize),P<C&&(P+=this.worldSize),c=P-C<D.x?D.x/(P-C):0}const R=this.point,G=Math.max(c||0,r||0);if(G)return this.center=this.unproject(new l.P(c?(P+C)/2:R.x,r?(T+_)/2:R.y)),this.zoom+=this.scaleZoom(G),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const te=R.y,ee=D.y/2;te-ee<_&&(m=_+ee),te+ee>T&&(m=T-ee)}if(this.lngRange){const te=(C+P)/2,ee=l.b5(R.x,te-this.worldSize/2,te+this.worldSize/2),ie=D.x/2;ee-ie<C&&(d=C+ie),ee+ie>P&&(d=P-ie)}d===void 0&&m===void 0||(this.center=this.unproject(new l.P(d!==void 0?d:R.x,m!==void 0?m:R.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),C=_-T*this._pixelPerMeter/Math.cos(this._pitch),P=T<0?C:_,D=Math.PI/2+this._pitch,z=this._fov*(.5+r.y/this.height),R=Math.sin(z)*P/Math.sin(l.ad(Math.PI-D-z,.01,Math.PI-.01)),G=this.getHorizon(),te=2*Math.atan(G/this.cameraToCenterDistance)*(.5+r.y/(2*G)),ee=Math.sin(te)*P/Math.sin(l.ad(Math.PI-D-te,.01,Math.PI-.01)),ie=Math.min(R,ee),Q=1.01*(Math.cos(Math.PI/2-this._pitch)*ie+P),me=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,me,Q),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-c,-d,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const be=this.width%2/2,le=this.height%2/2,ge=Math.cos(this.angle),Ce=Math.sin(this.angle),Ee=c-Math.round(c)+ge*be+Ce*le,De=d-Math.round(d)+ge*le+Ce*be,Be=new Float64Array(m);if(l.$(Be,Be,[Ee>.5?Ee-1:Ee,De>.5?De-1:De,0]),this.alignedProjMatrix=Be,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ag(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let d=c.x,m=c.y,_=c.x,T=c.y;for(const C of r)d=Math.min(d,C.x),m=Math.min(m,C.y),_=Math.max(_,C.x),T=Math.max(T,C.y);return[new l.P(d,m),new l.P(_,m),new l.P(_,T),new l.P(d,T),new l.P(d,m)]}}}function Po(g,r){let c,d=!1,m=null,_=null;const T=()=>{m=null,d&&(g.apply(_,c),m=setTimeout(T,r),d=!1)};return(...C)=>(d=!0,_=this,c=C,m||T(),m)}class bl{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:d,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Po(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const c=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(c.lng*_)/_,C=Math.round(c.lat*_)/_,P=this._map.getBearing(),D=this._map.getPitch();let z="";if(z+=r?`/${T}/${C}/${d}`:`${d}/${C}/${T}`,(P||D)&&(z+="/"+Math.round(10*P)/10),D&&(z+=`/${Math.round(D)}`),this._hashName){const R=this._hashName;let G=!1;const te=window.location.hash.slice(1).split("&").map(ee=>{const ie=ee.split("=")[0];return ie===R?(G=!0,`${ie}=${z}`):ee}).filter(ee=>ee);return G||te.push(`${R}=${z}`),`#${te.join("&")}`}return`#${z}`}}const ha={linearity:.3,easing:l.ba(0,0,.3,1)},Gp=l.e({deceleration:2500,maxSpeed:1400},ha),qp=l.e({deceleration:20,maxSpeed:1400},ha),Zp=l.e({deceleration:1e3,maxSpeed:360},ha),Wp=l.e({deceleration:1e3,maxSpeed:90},ha);class Hp{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=l.h.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)c.zoom+=_.zoomDelta||0,c.bearing+=_.bearingDelta||0,c.pitch+=_.pitchDelta||0,_.panDelta&&c.pan._add(_.panDelta),_.around&&(c.around=_.around),_.pinchAround&&(c.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const _=Sl(c.pan.mag(),d,l.e({},Gp,r||{}));m.offset=c.pan.mult(_.amount/c.pan.mag()),m.center=this._map.transform.center,us(m,_)}if(c.zoom){const _=Sl(c.zoom,d,qp);m.zoom=this._map.transform.zoom+_.amount,us(m,_)}if(c.bearing){const _=Sl(c.bearing,d,Zp);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),us(m,_)}if(c.pitch){const _=Sl(c.pitch,d,Wp);m.pitch=this._map.transform.pitch+_.amount,us(m,_)}if(m.zoom||m.bearing){const _=c.pinchAround===void 0?c.around:c.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function us(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function Sl(g,r,c){const{maxSpeed:d,linearity:m,deceleration:_}=c,T=l.ad(g*m/(r/1e3),-d,d),C=Math.abs(T)/(_*m);return{easing:c.easing,duration:1e3*C,amount:T*(C/2)}}class di extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d,m={}){const _=b.mousePos(c.getCanvasContainer(),d),T=c.unproject(_);super(r,l.e({point:_,lngLat:T,originalEvent:d},m)),this._defaultPrevented=!1,this.target=c}}class Tl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){const m=r==="touchend"?d.changedTouches:d.touches,_=b.touchPos(c.getCanvasContainer(),m),T=_.map(P=>c.unproject(P)),C=_.reduce((P,D,z,R)=>P.add(D.div(R.length)),new l.P(0,0));super(r,{points:_,point:C,lngLats:T,lngLat:c.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Kp extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Xp{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Kp(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new di(r.type,this._map,r))}mouseup(r){this._map.fire(new di(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new di(r.type,this._map,r))}dblclick(r){return this._firePreventable(new di(r.type,this._map,r))}mouseover(r){this._map.fire(new di(r.type,this._map,r))}mouseout(r){this._map.fire(new di(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Tl(r.type,this._map,r))}touchmove(r){this._map.fire(new Tl(r.type,this._map,r))}touchend(r){this._map.fire(new Tl(r.type,this._map,r))}touchcancel(r){this._map.fire(new Tl(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yp{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new di(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new di(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class As{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.P.convert(r),this._map.terrain)}}class Qp{constructor(r,c){this._map=r,this._tr=new As(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(b.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const d=c;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=d,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,d.x),T=Math.max(m.x,d.x),C=Math.min(m.y,d.y),P=Math.max(m.y,d.y);b.setTransform(this._box,`translate(${_}px,${C}px)`),this._box.style.width=T-_+"px",this._box.style.height=P-C+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const d=this._startPos,m=c;if(this.reset(),b.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new l.k(r,{originalEvent:c}))}}function Li(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);const c={};for(let d=0;d<g.length;d++)c[g[d].identifier]=r[d];return c}class Ms{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const T of m)_._add(T);return _.div(m.length)}(c),this.touches=Li(d,c)))}touchmove(r,c,d){if(this.aborted||!this.centroid)return;const m=Li(d,c);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,c,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Lc{constructor(r){this.singleTap=new Ms(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,d){this.singleTap.touchstart(r,c,d)}touchmove(r,c,d){this.singleTap.touchmove(r,c,d)}touchend(r,c,d){const m=this.singleTap.touchend(r,c,d);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Is{constructor(r){this._tr=new As(r),this._zoomIn=new Lc({numTouches:1,numTaps:2}),this._zoomOut=new Lc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,d){this._zoomIn.touchstart(r,c,d),this._zoomOut.touchstart(r,c,d)}touchmove(r,c,d){this._zoomIn.touchmove(r,c,d),this._zoomOut.touchmove(r,c,d)}touchend(r,c,d){const m=this._zoomIn.touchend(r,c,d),_=this._zoomOut.touchend(r,c,d),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ds{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=c.length?c[0]:c;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&b.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const my={0:1,2:2};class Th{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=b.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,d){const m=my[d];return c.buttons===void 0||(c.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return b.mouseButton(r)===this._eventButton}}class Jp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const zc=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(r){r.preventDefault()}},da=({enable:g,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const d=new Th({checkCorrectEvent:m=>b.mouseButton(m)===0&&m.ctrlKey||b.mouseButton(m)===2});return new Ds({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*c}),moveStateManager:d,enable:g,assignEvents:zc})},Ls=({enable:g,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const d=new Th({checkCorrectEvent:m=>b.mouseButton(m)===0&&m.ctrlKey||b.mouseButton(m)===2});return new Ds({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*c}),moveStateManager:d,enable:g,assignEvents:zc})};class rt{constructor(r,c){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,c,d){return this._calculateTransform(r,c,d)}touchmove(r,c,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,c,d)}touchend(r,c,d){this._calculateTransform(r,c,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,d){d.length>0&&(this._active=!0);const m=Li(d,c),_=new l.P(0,0),T=new l.P(0,0);let C=0;for(const D in m){const z=m[D],R=this._touches[D];R&&(_._add(z),T._add(z.sub(R)),C++,m[D]=z)}if(this._touches=m,C<this._minTouches||!T.mag())return;const P=T.div(C);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(C),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,d){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=to(d,c,m),C=to(d,c,_);if(!T||!C)return;const P=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],P,r)}touchend(r,c,d){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=to(d,c,m),C=to(d,c,_);T&&C||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function to(g,r,c){for(let d=0;d<g.length;d++)if(g[d].identifier===c)return r[d]}function pa(g,r){return Math.log(g/r)/Math.LN2}class ef extends Rc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(pa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pa(this._distance,d),pinchAround:c}}}function Je(g,r){return 180*g.angleWith(r)/Math.PI}class Ch extends Rc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Je(this._vector,d),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,d=Je(r,this._startVector);return Math.abs(d)<c}}function Eh(g){return Math.abs(g.y)>Math.abs(g.x)}class gy extends Rc{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,d){super.touchstart(r,c,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Eh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,d){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=c.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Eh(r)&&Eh(c)&&T}}const Ph={panStep:100,bearingStep:15,pitchStep:10};class tf{constructor(r){this._tr=new As(r);const c=Ph;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,d=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:C=>{const P=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:nf,zoom:c?Math.round(P.zoom)+c*(r.shiftKey?2:1):P.zoom,bearing:P.bearing+d*this._bearingStep,pitch:P.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:P.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nf(g){return g*(2-g)}const rf=4.000244140625;class yy{constructor(r,c){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new As(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=l.h.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,c!==0&&c%rf==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=b.mousePos(this._el,r),d=this._tr;this._around=l.L.convert(this._aroundCenter?d.center:d.unproject(c)),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>rf?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&P!==0&&(P=1/P);const D=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(D*P))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&d&&m){const C=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),P=m(C);_=l.B.number(d,c,P),C<1?this._frameId||(this._frameId=!0):T=!0}else _=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=l.bb;if(this._prevEase){const d=this._prevEase,m=(l.h.now()-d.start)/d.duration,_=d.easing(m+.01)-d.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,C=Math.sqrt(.0729-T*T);c=l.ba(T,C,.25,1)}return this._prevEase={start:l.h.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class kh{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ah{constructor(r){this._tr=new As(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mh{constructor(){this._tap=new Lc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,d){if(!this._swipePoint)if(this._tapTime){const m=c[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,c,d)}touchmove(r,c,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const m=c[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,c,d)}touchend(r,c,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const m=this._tap.touchend(r,c,d);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ih{constructor(r,c,d){this._el=r,this._mousePan=c,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $r{constructor(r,c,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class no{constructor(r,c,d,m){this._el=r,this._touchZoom=c,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Cl=g=>g.zoom||g.drag||g.pitch||g.rotate;class Dh extends l.k{}function El(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Lh{constructor(r,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,C={needsRenderFrame:!1},P={},D={},z=m.touches,R=z?this._getMapTouches(z):void 0,G=R?b.touchPos(this._el,R):b.mousePos(this._el,m);for(const{handlerName:ie,handler:Q,allowed:me}of this._handlers){if(!Q.isEnabled())continue;let be;this._blockedByActive(D,me,ie)?Q.reset():Q[_||m.type]&&(be=Q[_||m.type](m,G,R),this.mergeHandlerResult(C,P,be,ie,T),be&&be.needsRenderFrame&&this._triggerRenderFrame()),(be||Q.isActive())&&(D[ie]=Q)}const te={};for(const ie in this._previousActiveHandlers)D[ie]||(te[ie]=T);this._previousActiveHandlers=D,(Object.keys(te).length||El(C))&&(this._changes.push([C,P,te]),this._triggerRenderFrame()),(Object.keys(D).length||El(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=C;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Hp(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)b.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,d]of this._listeners)b.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const c=this._map,d=c.getCanvasContainer();this._add("mapEvent",new Xp(c,r));const m=c.boxZoom=new Qp(c,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new Is(c),T=new Ah(c);c.doubleClickZoom=new kh(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const C=new Mh;this._add("tapDragZoom",C);const P=c.touchPitch=new gy(c);this._add("touchPitch",P),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const D=da(r),z=Ls(r);c.dragRotate=new $r(r,D,z),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const R=(({enable:me,clickTolerance:be})=>{const le=new Th({checkCorrectEvent:ge=>b.mouseButton(ge)===0&&!ge.ctrlKey});return new Ds({clickTolerance:be,move:(ge,Ce)=>({around:Ce,panDelta:Ce.sub(ge)}),activateOnStart:!0,moveStateManager:le,enable:me,assignEvents:zc})})(r),G=new rt(r,c);c.dragPan=new Ih(d,R,G),this._add("mousePan",R),this._add("touchPan",G,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const te=new Ch,ee=new ef;c.touchZoomRotate=new no(d,ee,te,C),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const ie=c.scrollZoom=new yy(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ie,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const Q=c.keyboard=new tf(c);this._add("keyboard",Q),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Yp(c))}_add(r,c,d){this._handlers.push({handlerName:r,handler:c,allowed:d}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cl(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,d){for(const m in r)if(m!==d&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const d of r)this._el.contains(d.target)&&c.push(d);return c}mergeHandlerResult(r,c,d,m,_){if(!d)return;l.e(r,d);const T={handlerName:m,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(c.zoom=T),d.panDelta!==void 0&&(c.drag=T),d.pitchDelta!==void 0&&(c.pitch=T),d.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},d={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),l.e(c,_),l.e(d,T);this._updateMapTransform(r,c,d),this._changes=[]}_updateMapTransform(r,c,d){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(El(r)||T&&this._terrainMovement))return this._fireEvents(c,d,!0);let{panDelta:C,zoomDelta:P,bearingDelta:D,pitchDelta:z,around:R,pinchAround:G}=r;G!==void 0&&(R=G),m._stop(!0),R=R||m.transform.centerPoint;const te=_.pointLocation(C?R.sub(C):R);D&&(_.bearing+=D),z&&(_.pitch+=z),P&&(_.zoom+=P),T?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(C)):_.setLocationAtPoint(te,R):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(te,R),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(te,R),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,d,!0)}_fireEvents(r,c,d){const m=Cl(this._eventsInProgress),_=Cl(r),T={};for(const z in r){const{originalEvent:R}=r[z];this._eventsInProgress[z]||(T[`${z}start`]=R),this._eventsInProgress[z]=r[z]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const z in T)this._fireEvent(z,T[z]);_&&this._fireEvent("move",_.originalEvent);for(const z in r){const{originalEvent:R}=r[z];this._fireEvent(z,R)}const C={};let P;for(const z in this._eventsInProgress){const{handlerName:R,originalEvent:G}=this._eventsInProgress[z];this._handlersById[R].isActive()||(delete this._eventsInProgress[z],P=c[R]||G,C[`${z}end`]=P)}for(const z in C)this._fireEvent(z,C[z]);const D=Cl(this._eventsInProgress);if(d&&(m||_)&&!D){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),R=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!z||!z.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:P})),R(this._map.getBearing())&&this._map.resetNorth()):(R(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new l.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Dh("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sf extends l.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const d=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,d){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},c),d)}panTo(r,c,d){return this.easeTo(l.e({center:r},c),d)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,d){return this.easeTo(l.e({zoom:r},c),d)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,d){return this.easeTo(l.e({bearing:r},c),d)}resetNorth(r,c){return this.rotateTo(0,l.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=vt.convert(r);const d=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,c)}_cameraForBoxAndBearing(r,c,d,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Ce=m.padding;m.padding={top:Ce,bottom:Ce,right:Ce,left:Ce}}m.padding=l.e(_,m.padding);const T=this.transform,C=T.padding,P=T.project(l.L.convert(r)),D=T.project(l.L.convert(c)),z=P.rotate(-d*Math.PI/180),R=D.rotate(-d*Math.PI/180),G=new l.P(Math.max(z.x,R.x),Math.max(z.y,R.y)),te=new l.P(Math.min(z.x,R.x),Math.min(z.y,R.y)),ee=G.sub(te),ie=(T.width-(C.left+C.right+m.padding.left+m.padding.right))/ee.x,Q=(T.height-(C.top+C.bottom+m.padding.top+m.padding.bottom))/ee.y;if(Q<0||ie<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const me=Math.min(T.scaleZoom(T.scale*Math.min(ie,Q)),m.maxZoom),be=l.P.convert(m.offset),le=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(d*Math.PI/180),ge=be.add(le).mult(T.scale/T.zoomScale(me));return{center:T.unproject(P.add(D).div(2).sub(ge)),zoom:me,bearing:d}}fitBounds(r,c,d){return this._fitInternal(this.cameraForBounds(r,c),c,d)}fitScreenCoordinates(r,c,d,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(r)),this.transform.pointLocation(l.P.convert(c)),d,m),m,_)}_fitInternal(r,c,d){return r?(delete(c=l.e(r,c)).padding,c.linear?this.easeTo(c,d):this.flyTo(c,d)):this}jumpTo(r,c){this.stop();const d=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(m=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=l.L.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(_=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(T=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new l.k("movestart",c)).fire(new l.k("move",c)),m&&this.fire(new l.k("zoomstart",c)).fire(new l.k("zoom",c)).fire(new l.k("zoomend",c)),_&&this.fire(new l.k("rotatestart",c)).fire(new l.k("rotate",c)).fire(new l.k("rotateend",c)),T&&this.fire(new l.k("pitchstart",c)).fire(new l.k("pitch",c)).fire(new l.k("pitchend",c)),this.fire(new l.k("moveend",c))}calculateCameraOptionsFromTo(r,c,d,m=0){const _=l.U.fromLngLat(r,c),T=l.U.fromLngLat(d,m),C=T.x-_.x,P=T.y-_.y,D=T.z-_.z,z=Math.hypot(C,P,D);if(z===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(C,P),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),te=180*Math.atan2(C,-P)/Math.PI;let ee=180*Math.acos(R/z)/Math.PI;return ee=D<0?90-ee:90+ee,{center:T.toLngLat(),zoom:G,pitch:ee,bearing:te}}easeTo(r,c){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.bb},r)).animate===!1||!r.essential&&l.h.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),C=this.getPadding(),P="zoom"in r?+r.zoom:m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,z="pitch"in r?+r.pitch:T,R="padding"in r?r.padding:d.padding,G=l.P.convert(r.offset);let te=d.centerPoint.add(G);const ee=d.pointLocation(te),ie=l.L.convert(r.center||ee);this._normalizeCenter(ie);const Q=d.project(ee),me=d.project(ie).sub(Q),be=d.zoomScale(P-m);let le,ge;r.around&&(le=l.L.convert(r.around),ge=d.locationPoint(le));const Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==m,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||z!==T,this._padding=!d.isPaddingEqual(R),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,Ce),this.terrain&&this._prepareElevation(ie),this._ease(Ee=>{if(this._zooming&&(d.zoom=l.B.number(m,P,Ee)),this._rotating&&(d.bearing=l.B.number(_,D,Ee)),this._pitching&&(d.pitch=l.B.number(T,z,Ee)),this._padding&&(d.interpolatePadding(C,R,Ee),te=d.centerPoint.add(G)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ee),le)d.setLocationAtPoint(le,ge);else{const De=d.zoomScale(d.zoom-m),Be=P>m?Math.min(2,be):Math.max(.5,be),Re=Math.pow(Be,1-Ee),Ve=d.unproject(Q.add(me.mult(Ee*Re)).mult(De));d.setLocationAtPoint(d.renderWorldCopies?Ve.wrap():Ve,te)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},Ee=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Ee)},r),this}_prepareEase(r,c,d={}){this._moving=!0,c||d.moving||this.fire(new l.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new l.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new l.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new l.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(c-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const c=r.clone(),{center:d,zoom:m,pitch:_,bearing:T,elevation:C}=this.transformCameraUpdate(c);d&&(c.center=d),m!==void 0&&(c.zoom=m),_!==void 0&&(c.pitch=_),T!==void 0&&(c.bearing=T),C!==void 0&&(c.elevation=C),this.transform.apply(c)}_fireMoveEvents(r){this.fire(new l.k("move",r)),this._zooming&&this.fire(new l.k("zoom",r)),this._rotating&&this.fire(new l.k("rotate",r)),this._pitching&&this.fire(new l.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const d=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.k("zoomend",r)),m&&this.fire(new l.k("rotateend",r)),_&&this.fire(new l.k("pitchend",r)),this.fire(new l.k("moveend",r))}flyTo(r,c){if(!r.essential&&l.h.prefersReducedMotion){const ut=l.F(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,c)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},r);const d=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),C=this.getPadding(),P="zoom"in r?l.ad(+r.zoom,d.minZoom,d.maxZoom):m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,z="pitch"in r?+r.pitch:T,R="padding"in r?r.padding:d.padding,G=d.zoomScale(P-m),te=l.P.convert(r.offset);let ee=d.centerPoint.add(te);const ie=d.pointLocation(ee),Q=l.L.convert(r.center||ie);this._normalizeCenter(Q);const me=d.project(ie),be=d.project(Q).sub(me);let le=r.curve;const ge=Math.max(d.width,d.height),Ce=ge/G,Ee=be.mag();if("minZoom"in r){const ut=l.ad(Math.min(r.minZoom,m,P),d.minZoom,d.maxZoom),tn=ge/d.zoomScale(ut-m);le=Math.sqrt(tn/Ee*2)}const De=le*le;function Be(ut){const tn=(Ce*Ce-ge*ge+(ut?-1:1)*De*De*Ee*Ee)/(2*(ut?Ce:ge)*De*Ee);return Math.log(Math.sqrt(tn*tn+1)-tn)}function Re(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function Ve(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const lt=Be(!1);let Rt=function(ut){return Ve(lt)/Ve(lt+le*ut)},Ke=function(ut){return ge*((Ve(lt)*(Re(tn=lt+le*ut)/Ve(tn))-Re(lt))/De)/Ee;var tn},Ct=(Be(!0)-lt)/le;if(Math.abs(Ee)<1e-6||!isFinite(Ct)){if(Math.abs(ge-Ce)<1e-6)return this.easeTo(r,c);const ut=Ce<ge?-1:1;Ct=Math.abs(Math.log(Ce/ge))/le,Ke=function(){return 0},Rt=function(tn){return Math.exp(ut*le*tn)}}return r.duration="duration"in r?+r.duration:1e3*Ct/("screenSpeed"in r?+r.screenSpeed/le:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=z!==T,this._padding=!d.isPaddingEqual(R),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Q),this._ease(ut=>{const tn=ut*Ct,zt=1/Rt(tn);d.zoom=ut===1?P:m+d.scaleZoom(zt),this._rotating&&(d.bearing=l.B.number(_,D,ut)),this._pitching&&(d.pitch=l.B.number(T,z,ut)),this._padding&&(d.interpolatePadding(C,R,ut),ee=d.centerPoint.add(te)),this.terrain&&!r.freezeElevation&&this._updateElevation(ut);const It=ut===1?Q:d.unproject(me.add(be.mult(Ke(tn))).mult(zt));d.setLocationAtPoint(d.renderWorldCopies?It.wrap():It,ee),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,c,d){d.animate===!1||d.duration===0?(r(1),c()):(this._easeStart=l.h.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=l.b5(r,-180,180);const d=Math.abs(r-c);return Math.abs(r-360-c)<d&&(r-=360),Math.abs(r+360-c)<d&&(r+=360),r}_normalizeCenter(r){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const d=r.lng-c.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class pi{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const d=this._map._getUIString(`AttributionControl.${c}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const _=c[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cn{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const c=b.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,d=c?this._queue.concat(c):this._queue;for(const m of d)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const d of c)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const zh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var of=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class af extends l.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const d={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new ki(m,this.tileSize));for(const m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(r){for(const c in this._tiles){const d=this._tiles[c];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const d of this._renderableTilesKeys){const m=this._tiles[d].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),c[d]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,C=m.canonical.x-(m.canonical.x>>T<<T),P=m.canonical.y-(m.canonical.y>>T<<T),D=l.N>>T;l.aS(_.posMatrix,0,D,0,D,0,1),l.$(_.posMatrix,_.posMatrix,[-C*D,-P*D,0]),c[d]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,C=r.canonical.x-(r.canonical.x>>T<<T),P=r.canonical.y-(r.canonical.y>>T<<T),D=l.N>>T;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[C*D,P*D,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),c[d]=_}}return c}getSourceTile(r,c){const d=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&c)for(;m>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class lf{constructor(r,c,d){this.painter=r,this.sourceCache=new af(c),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,d,m=l.N){var _;if(!(c>=0&&c<m&&d>=0&&d<m))return 0;const T=this.getTerrainData(r),C=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!C)return 0;const P=function(ee,ie,Q){var me=ie[0],be=ie[1];return ee[0]=Q[0]*me+Q[4]*be+Q[12],ee[1]=Q[1]*me+Q[5]*be+Q[13],ee}([],[c/m*l.N,d/m*l.N],T.u_terrain_matrix),D=[P[0]*C.dim,P[1]*C.dim],z=Math.floor(D[0]),R=Math.floor(D[1]),G=D[0]-z,te=D[1]-R;return C.get(z,R)*(1-G)*(1-te)+C.get(z+1,R)*G*(1-te)+C.get(z,R+1)*(1-G)*te+C.get(z+1,R+1)*G*te}getElevationForLngLatZoom(r,c){const{tileID:d,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(d,m%l.N,_%l.N,l.N)}getElevation(r,c,d,m=l.N){return this.getDEMElevation(r,c,d,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Fe(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Fe(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Fe(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const d=c&&c+c.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),C=r.canonical.y-(r.canonical.y>>_<<_),P=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(P,P,[T*l.N,C*l.N,0]),this._demMatrixCache[r.key]={matrix:P,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,d=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Fe(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Fe(c.context,{width:d,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let C=0;C<this._coordsTextureSize;C++,T+=4)c[T+0]=255&C,c[T+1]=255&_,c[T+2]=C>>8<<4|_>>8,c[T+3]=0;const d=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new Fe(r,d,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const c=new Uint8Array(4),d=this.painter.context,m=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),d.bindFramebuffer.set(null);const _=c[0]+(c[2]>>4<<8),T=c[1]+((15&c[2])<<8),C=this.coordsIndex[255-c[3]],P=C&&this.sourceCache.getTileByID(C);if(!P)return null;const D=this._coordsTextureSize,z=(1<<P.tileID.canonical.z)*D;return new l.U(this._allowMercatorOverflow(r,(P.tileID.canonical.x*D+_)/z),(P.tileID.canonical.y*D+T)/z,this.getElevation(P.tileID,_,T,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new l.bd,d=new l.b0,m=this.meshSize,_=l.N/m,T=m*m;for(let R=0;R<=m;R++)for(let G=0;G<=m;G++)c.emplaceBack(G*_,R*_,0);for(let R=0;R<T;R+=m+1)for(let G=0;G<m;G++)d.emplaceBack(G+R,m+G+R+1,m+G+R+2),d.emplaceBack(G+R,m+G+R+2,G+R+1);const C=c.length,P=C+2*(m+1);for(const R of[0,1])for(let G=0;G<=m;G++)for(const te of[0,1])c.emplaceBack(G*_,R*l.N,te);for(let R=0;R<2*m;R+=2)d.emplaceBack(P+R,P+R+1,P+R+3),d.emplaceBack(P+R,P+R+3,P+R+2),d.emplaceBack(C+R,C+R+3,C+R+1),d.emplaceBack(C+R,C+R+2,C+R+3);const D=c.length,z=D+2*(m+1);for(const R of[0,1])for(let G=0;G<=m;G++)for(const te of[0,1])c.emplaceBack(R*l.N,G*_,te);for(let R=0;R<2*m;R+=2)d.emplaceBack(D+R,D+R+1,D+R+3),d.emplaceBack(D+R,D+R+3,D+R+2),d.emplaceBack(z+R,z+R+3,z+R+1),d.emplaceBack(z+R,z+R+2,z+R+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(c,of.members),segments:l.S.simpleSegment(0,0,c.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var d;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(d=this.getMinMaxElevation(m).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return c&&c.dem&&(d.minElevation=c.dem.min*this.exaggeration,d.maxElevation=c.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,c){const d=l.U.fromLngLat(r.wrap()),m=(1<<c)*l.N,_=d.x*m,T=d.y*m,C=Math.floor(_/l.N),P=Math.floor(T/l.N);return{tileID:new l.O(c,0,c,C,P),mercatorX:_,mercatorY:T}}_allowMercatorOverflow(r,c){const d=r.x<this.painter.width/2;let m=l.bf(c);const _=this.painter.transform.center.lng;return d&&Math.sign(m)>0&&Math.sign(_)<0||!d&&Math.sign(m)<0&&Math.sign(_)>0?(m=360*Math.sign(_)+m,l.G(m)):c}}class vy{constructor(r,c,d){this._context=r,this._size=c,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Fe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(d.texture),{id:r,fbo:c,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ar={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Oc{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new vy(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(c)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const m=r.sourceCaches[d].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const C in T)this._coordsDescendingInv[d][C]||(this._coordsDescendingInv[d][C]=[]),this._coordsDescendingInv[d][C].push(T[C])}}this._coordsDescendingInvStr={};for(const d of r._order){const m=r._layers[d],_=m.source;if(Ar[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][d.tileID.key];_&&_!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,d=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ar[c]&&(this._prevType&&Ar[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ar[this._prevType]||Ar[c]&&m){this._prevType=c;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[_]){const D=this.pool.getObjectForId(C.rtt[_].id);if(D.stamp===C.rtt[_].stamp){this.pool.useObject(D);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),C.rtt[_]={id:P.id,stamp:P.stamp},d.context.bindFramebuffer.set(P.fbo.framebuffer),d.context.clear({color:l.aT.transparent,stencil:0}),d.currentStencilSource=void 0;for(let D=0;D<T.length;D++){const z=d.style._layers[T[D]],R=z.source?this._coordsDescendingInv[z.source][C.tileID.key]:[C.tileID];d.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),d._renderTileClippingMasks(z,R),d.renderLayer(d,d.style.sourceCaches[z.source],z,R),z.source&&(C.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][C.tileID.key])}}return bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ar[c]}return!1}}const ft=S,Tt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Pl=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},Rh={showCompass:!0,showZoom:!0,visualizePitch:!1};class Fh{constructor(r,c,d=!1){this.mousedown=T=>{this.startMouse(l.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),b.mousePos(this.element,T)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,b.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=da({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:C,bearingDegreesPerPixelMoved:P=.8})=>{const D=new Jp;return new Ds({clickTolerance:C,move:(z,R)=>({bearingDelta:(R.x-z.x)*P}),moveStateManager:D,enable:T,assignEvents:Pl})})({clickTolerance:m,enable:!0}),this.map=r,d&&(this.mousePitch=Ls({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:C,pitchDegreesPerPixelMoved:P=-.5})=>{const D=new Jp;return new Ds({clickTolerance:C,move:(z,R)=>({pitchDelta:(R.y-z.y)*P}),moveStateManager:D,enable:T,assignEvents:Pl})})({clickTolerance:_,enable:!0})),b.addEventListener(c,"mousedown",this.mousedown),b.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),b.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),b.disableDrag()}moveMouse(r,c){const d=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,c)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(r,c){const d=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,c)||{};if(m&&d.setBearing(d.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,c)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const r=this.element;b.removeEventListener(r,"mousedown",this.mousedown),b.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Rn;function Oh(g,r,c){if(g=new l.L(g.lng,g.lat),r){const d=new l.L(g.lng-360,g.lat),m=new l.L(g.lng+360,g.lat),_=c.locationPoint(g).distSqr(r);c.locationPoint(d).distSqr(r)<_?g=d:c.locationPoint(m).distSqr(r)<_&&(g=m)}for(;Math.abs(g.lng-c.center.lng)>180;){const d=c.locationPoint(g);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g}const zi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cf(g,r,c){const d=g.classList;for(const m in zi)d.remove(`maplibregl-${c}-anchor-${m}`);d.add(`maplibregl-${c}-anchor-${r}`)}class ko extends l.E{constructor(r){if(super(),this._onKeyPress=c=>{const d=c.code,m=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const d=c.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Oh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${zi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=c=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");const c=b.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${d}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);const _=b.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=b.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const C=b.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of P){const be=b.createNS("http://www.w3.org/2000/svg","ellipse");be.setAttributeNS(null,"opacity","0.04"),be.setAttributeNS(null,"cx","10.5"),be.setAttributeNS(null,"cy","5.80029008"),be.setAttributeNS(null,"rx",me.rx),be.setAttributeNS(null,"ry",me.ry),C.appendChild(be)}const D=b.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const z=b.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(z);const R=b.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"opacity","0.25"),R.setAttributeNS(null,"fill","#000000");const G=b.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),R.appendChild(G);const te=b.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");const ee=b.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ie=b.createNS("http://www.w3.org/2000/svg","circle");ie.setAttributeNS(null,"fill","#000000"),ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"cx","5.5"),ie.setAttributeNS(null,"cy","5.5"),ie.setAttributeNS(null,"r","5.4999962");const Q=b.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),ee.appendChild(ie),ee.appendChild(Q),T.appendChild(C),T.appendChild(D),T.appendChild(R),T.appendChild(te),T.appendChild(ee),c.appendChild(T),c.setAttributeNS(null,"height",d*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),cf(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.L.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Sn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let _n=0,fa=!1;const kl={maxWidth:100,unit:"metric"};function Al(g,r,c){const d=c&&c.maxWidth||100,m=g._container.clientHeight/2,_=g.unproject([0,m]),T=g.unproject([d,m]),C=_.distanceTo(T);if(c&&c.unit==="imperial"){const P=3.2808*C;P>5280?Ao(r,d,P/5280,g._getUIString("ScaleControl.Miles")):Ao(r,d,P,g._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ao(r,d,C/1852,g._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Ao(r,d,C/1e3,g._getUIString("ScaleControl.Kilometers")):Ao(r,d,C,g._getUIString("ScaleControl.Meters"))}function Ao(g,r,c,d){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let C=_/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(P){const D=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*D)/D}(C),T*C}(c);g.style.width=r*(m/c)+"px",g.innerHTML=`${m}&nbsp;${d}`}const Bh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(g){if(g){if(typeof g=="number"){const r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,g),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-g),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(g,0),right:new l.P(-g,0)}}if(g instanceof l.P||Array.isArray(g)){const r=l.P.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(g.center||[0,0]),top:l.P.convert(g.top||[0,0]),"top-left":l.P.convert(g["top-left"]||[0,0]),"top-right":l.P.convert(g["top-right"]||[0,0]),bottom:l.P.convert(g.bottom||[0,0]),"bottom-left":l.P.convert(g["bottom-left"]||[0,0]),"bottom-right":l.P.convert(g["bottom-right"]||[0,0]),left:l.P.convert(g.left||[0,0]),right:l.P.convert(g.right||[0,0])}}return ma(new l.P(0,0))}const Vh={extend:(g,...r)=>l.e(g,...r),run(g){g()},logToElement(g,r=!1,c="log"){const d=window.document.getElementById(c);d&&(r&&(d.innerHTML=""),d.innerHTML+=`<br>${g}`)}},jh=S;class Yt{static get version(){return jh}static get workerCount(){return oi.workerCount}static set workerCount(r){oi.workerCount=r}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){l.c.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(r){l.c.WORKER_URL=r}static addProtocol(r,c){l.c.REGISTERED_PROTOCOLS[r]=c}static removeProtocol(r){delete l.c.REGISTERED_PROTOCOLS[r]}}return Yt.Map=class extends sf{constructor(g){if(l.bg.mark(l.bh.create),(g=l.e({},Tt,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Dc(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new Fc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},zh,g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const c=Po(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?c(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Lh(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new bl(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,l.e({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new pi({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new cn,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new l.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new l.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new l.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=g.onAdd(this);this._controls.push(g);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(c,d.firstChild):d.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,r,c,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,c,d)}resize(g){var r;const c=this._containerDimensions(),d=c[0],m=c[1],_=this._getClampedPixelRatio(d,m);if(this._resizeCanvas(d,m,_),this.painter.resize(d,m,_),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const P=this._getClampedPixelRatio(d,m);this._resizeCanvas(d,m,P),this.painter.resize(d,m,P)}this.transform.resize(d,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,m);const T=!this._moving;return T&&(this.stop(),this.fire(new l.k("movestart",g)).fire(new l.k("move",g))),this.fire(new l.k("resize",g)),T&&this.fire(new l.k("moveend",g)),this}_getClampedPixelRatio(g,r){const{0:c,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),_=g*m,T=r*m;return Math.min(_>c?c/_:1,T>d?d/T:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(vt.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(g){return this.transform.locationPoint(l.L.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(l.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,c){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layer:r,listener:c,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?d||(d=!0,c.call(this,new di(g,this,_.originalEvent,{features:T}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layer:r,listener:c,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,c.call(this,new di(g,this,T.originalEvent)))},mouseout:T=>{d&&(d=!1,c.call(this,new di(g,this,T.originalEvent)))}}}}{const d=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,c.call(this,m),delete m.features)};return{layer:r,listener:c,delegates:{[g]:d}}}}on(g,r,c){if(c===void 0)return super.on(g,r);const d=this._createDelegatedListener(g,r,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(d);for(const m in d.delegates)this.on(m,d.delegates[m]);return this}once(g,r,c){if(c===void 0)return super.once(g,r);const d=this._createDelegatedListener(g,r,c);for(const m in d.delegates)this.once(m,d.delegates[m]);return this}off(g,r,c){return c===void 0?super.off(g,r):(this._delegatedListeners&&this._delegatedListeners[g]&&(d=>{const m=this._delegatedListeners[g];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===c){for(const C in T.delegates)this.off(C,T.delegates[C]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let c;const d=g instanceof l.P||Array.isArray(g),m=d?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:g)||{},m instanceof l.P||typeof m[0]=="number")c=[l.P.convert(m)];else{const _=l.P.convert(m[0]),T=l.P.convert(m[1]);c=[_,new l.P(T.x,_.y),T,new l.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new ur(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,c):this.style.loadJSON(g,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ur(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){const c=this._requestManager.transformRequest(g,B.Style);l.f(c,(d,m)=>{d?this.fire(new l.j(d)):m&&this._updateDiff(m,r)})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(c){l.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){const r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new l.j(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);for(const c in this.style._layers){const d=this.style._layers[c];d.type==="hillshade"&&d.source===g.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lf(this.painter,r,g),this.painter.renderToTexture=new Oc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==g.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const r in g){const c=g[r]._tiles;for(const d in c){const m=c[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(g,r,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,r,c)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,r,c={}){const{pixelRatio:d=1,sdf:m=!1,stretchX:_,stretchY:T,content:C}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.a(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:D,data:z}=r,R=r;return this.style.addImage(g,{data:new l.R({width:P,height:D},new Uint8Array(z)),pixelRatio:d,stretchX:_,stretchY:T,content:C,sdf:m,version:0,userImage:R}),R.onAdd&&R.onAdd(this,g),this}}{const{width:P,height:D,data:z}=l.h.getImageData(r);this.style.addImage(g,{data:new l.R({width:P,height:D},z),pixelRatio:d,stretchX:_,stretchY:T,content:C,sdf:m,version:0})}}updateImage(g,r){const c=this.style.getImage(g);if(!c)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||l.a(r)?l.h.getImageData(r):r,{width:m,height:_,data:T}=d;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||_!==c.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||l.a(r));return c.data.replace(T,C),this.style.updateImage(g,c),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,r){X.getImage(this._requestManager.transformRequest(g,B.Image),r)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,r,c){return this.style.setLayerZoomRange(g,r,c),this._update(!0)}setFilter(g,r,c={}){return this.style.setFilter(g,r,c),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,c,d={}){return this.style.setPaintProperty(g,r,c,d),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,c,d={}){return this.style.setLayoutProperty(g,r,c,d),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,c,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,c=>{c||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const r=this._canvasContainer=b.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),d=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],d);const m=this._controlContainer=b.create("div","maplibregl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=b.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=b.create("div","maplibregl-cooperative-gesture-screen",this._container);let g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${g}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){b.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(g,r,c){this._canvas.width=Math.floor(c*g),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:g},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const c=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!c){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new Eo(c,this.transform),I.testSupport(c)}_onCooperativeGesture(g,r,c){return!r&&c<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const T=new l.a8(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=T.crossFadingFactor();C===1&&C===this._crossFadingFactor||(c=!0,this._crossFadingFactor=C),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(g=>{l.bg.frame(g),this._frame=null,this._render(g)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return ft}getCameraTargetElevation(){return this.transform.elevation}},Yt.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const d=this._map._getUIString(`NavigationControl.${c}`);r.title=d,r.setAttribute("aria-label",d)},this.options=l.e({},Rh,g),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){const c=b.create("button",g,this._container);return c.type="button",c.addEventListener("click",r),c}},Yt.GeolocateControl=class extends l.E{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new l.L(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),T=vt.fromLngLat(c,d);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new l.L(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&fa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ko({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ko({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},Sn,g)}onAdd(g){return this._map=g,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,c=!1){Rn===void 0||c?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{Rn=d.state!=="denied",r(Rn)}).catch(()=>{Rn=!!window.navigator.geolocation,r(Rn)}):(Rn=!!window.navigator.geolocation,r(Rn)):r(Rn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_n=0,fa=!1}_isOutOfMapMaxBounds(g){const r=this._map.getMaxBounds(),c=g.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),r=g.getSouthEast(),c=g.getNorthEast(),d=r.distanceTo(c),m=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_n--,fa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),_n++,_n>1?(g={maximumAge:6e5,timeout:0},fa=!0):(g=this.options.positionOptions,fa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Yt.AttributionControl=pi,Yt.LogoControl=cn,Yt.ScaleControl=class{constructor(g){this._onMove=()=>{Al(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Al(this._map,this._container,this.options)},this.options=l.e({},kl,g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Yt.FullscreenControl=class extends l.E{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Yt.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=g}onAdd(g){return this._map=g,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Yt.Popup=class extends l.E{constructor(g){super(),this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const c=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let d=this.options.anchor;const m=ma(this.options.offset);if(!d){const T=this._container.offsetWidth,C=this._container.offsetHeight;let P;P=c.y+m.bottom.y<C?["top"]:c.y>this._map.transform.height-C?["bottom"]:[],c.x<T/2?P.push("left"):c.x>this._map.transform.width-T/2&&P.push("right"),d=P.length===0?"bottom":P.join("-")}const _=c.add(m[d]).round();b.setTransform(this._container,`${zi[d]} translate(${_.x}px,${_.y}px)`),cf(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Bh),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=l.L.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const r=document.createDocumentFragment(),c=document.createElement("body");let d;for(c.innerHTML=g;d=c.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(Nh);g&&g.focus()}},Yt.Marker=ko,Yt.Style=ur,Yt.LngLat=l.L,Yt.LngLatBounds=vt,Yt.Point=l.P,Yt.MercatorCoordinate=l.U,Yt.Evented=l.E,Yt.AJAXError=l.bi,Yt.config=l.c,Yt.CanvasSource=Pr,Yt.GeoJSONSource=lr,Yt.ImageSource=Ln,Yt.RasterDEMTileSource=ir,Yt.RasterTileSource=Gt,Yt.VectorTileSource=Dn,Yt.VideoSource=ls,Yt.setRTLTextPlugin=l.bj,Yt.getRTLTextPluginStatus=l.bk,Yt.prewarm=function(){wo().acquire(qt)},Yt.clearPrewarmedResources=function(){const g=vr;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(qt),vr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Vh.extend(Yt,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Yt});var y=u;return y})})(vk);var V7=vk.exports;const Rl=L_(V7),Ya={timeout:1e4,updateInterval:5e3,distanceThreshold:5,highAccuracy:!0,maxAge:2e3,retryAttempts:3,retryDelay:1e3,accuracyThreshold:20},nm={className:"bg-background/95 border-border/50 text-foreground"},bd={success:e=>ja.success(e,nm),error:e=>ja.error(e,nm),info:e=>ja.info(e,nm),warning:e=>ja.warning(e,nm)},W2=e=>{const{latitude:t,longitude:i,accuracy:o}=e.coords;return!(isNaN(t)||isNaN(i)||o>Ya.accuracyThreshold)},j7=e=>{if(e instanceof GeolocationPositionError)switch(e.code){case GeolocationPositionError.PERMISSION_DENIED:return"Permission refuse. Veuillez activer la golocalisation.";case GeolocationPositionError.POSITION_UNAVAILABLE:return"Position indisponible. Vrifiez votre connexion GPS.";case GeolocationPositionError.TIMEOUT:return"Dlai d'attente dpass. Tentative de reconnexion...";default:return"Erreur de golocalisation"}return e.message},U7=e=>{const t=j7(e);(!(e instanceof GeolocationPositionError)||e.code!==GeolocationPositionError.TIMEOUT)&&bd.error(t),console.error("Geolocation error:",e)},H2=(e=1)=>({enableHighAccuracy:Ya.highAccuracy,timeout:Ya.timeout*e,maximumAge:Ya.maxAge}),$7=(e={})=>{const[t,i]=Z.useState({isTracking:!1,isPaused:!1,error:null,isLoading:!1}),[o,u]=Z.useState(null),[p,y]=Z.useState(null),l={...Ya,...e},S=(O,X,B)=>{i(V=>({...V,isLoading:!1,error:null})),B==null||B({...t,isLoading:!1,error:null}),X(O)},b=(O,X,B)=>{U7(O),i(V=>({...V,isLoading:!1,error:O})),B==null||B({...t,isLoading:!1,error:O}),X(O)},I=Z.useCallback(async O=>{const{onSuccess:X,onError:B,onStateChange:V}=O;if(!navigator.geolocation){const he=new Error("Geolocation is not supported");b(he,B,V);return}i(he=>({...he,isLoading:!0})),V==null||V({...t,isLoading:!0});let q=1;const ne=()=>{navigator.geolocation.getCurrentPosition(he=>{if(!W2(he)){const Se=new Error("Invalid position data");b(Se,B,V);return}S(he,X,V)},he=>{he.code===he.TIMEOUT&&q<l.retryAttempts?(q++,setTimeout(ne,l.retryDelay)):b(he,B,V)},H2(q))};ne()},[l,t]),M=Z.useCallback(O=>{const{onSuccess:X,onError:B,onStateChange:V}=O;if(y(O),!navigator.geolocation){const ne=new Error("Geolocation is not supported");b(ne,B,V);return}i(ne=>({...ne,isTracking:!0,isLoading:!0})),V==null||V({...t,isTracking:!0,isLoading:!0});const q=navigator.geolocation.watchPosition(ne=>{if(!W2(ne)){const he=new Error("Invalid position data");b(he,B,V);return}S(ne,X,V)},ne=>b(ne,B,V),H2());u(q),bd.success("Dbut de l'enregistrement")},[t]),k=Z.useCallback(()=>{o!==null&&(navigator.geolocation.clearWatch(o),u(null)),i(O=>({...O,isPaused:!0})),bd.info("Enregistrement en pause")},[o]),j=Z.useCallback(()=>{p&&M(p),i(O=>({...O,isPaused:!1})),bd.success("Reprise de l'enregistrement")},[p,M]),K=Z.useCallback(()=>{o!==null&&(navigator.geolocation.clearWatch(o),u(null)),y(null),i(O=>({...O,isTracking:!1,isPaused:!1})),bd.success("Fin de l'enregistrement")},[o]);return Z.useEffect(()=>()=>{o!==null&&navigator.geolocation.clearWatch(o)},[o]),{...t,getCurrentPosition:I,startTracking:M,stopTracking:K,pauseTracking:k,resumeTracking:j}};var Oi=63710088e-1,G7={centimeters:Oi*100,centimetres:Oi*100,degrees:Oi/111325,feet:Oi*3.28084,inches:Oi*39.37,kilometers:Oi/1e3,kilometres:Oi/1e3,meters:Oi,metres:Oi,miles:Oi/1609.344,millimeters:Oi*1e3,millimetres:Oi*1e3,nauticalmiles:Oi/1852,radians:1,yards:Oi*1.0936};function lg(e,t,i){i===void 0&&(i={});var o={type:"Feature"};return(i.id===0||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=t||{},o.geometry=e,o}function K2(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X2(e[0])||!X2(e[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:e};return lg(o,t,i)}function xk(e,t,i){if(i===void 0&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var o={type:"LineString",coordinates:e};return lg(o,t,i)}function q7(e,t){t===void 0&&(t="kilometers");var i=G7[t];if(!i)throw new Error(t+" units is invalid");return e*i}function rm(e){var t=e%360;return t*Math.PI/180}function X2(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function wk(e,t,i){if(e!==null)for(var o,u,p,y,l,S,b,I=0,M=0,k,j=e.type,K=j==="FeatureCollection",O=j==="Feature",X=K?e.features.length:1,B=0;B<X;B++){b=K?e.features[B].geometry:O?e.geometry:e,k=b?b.type==="GeometryCollection":!1,l=k?b.geometries.length:1;for(var V=0;V<l;V++){var q=0,ne=0;if(y=k?b.geometries[V]:b,y!==null){S=y.coordinates;var he=y.type;switch(I=0,he){case null:break;case"Point":if(t(S,M,B,q,ne)===!1)return!1;M++,q++;break;case"LineString":case"MultiPoint":for(o=0;o<S.length;o++){if(t(S[o],M,B,q,ne)===!1)return!1;M++,he==="MultiPoint"&&q++}he==="LineString"&&q++;break;case"Polygon":case"MultiLineString":for(o=0;o<S.length;o++){for(u=0;u<S[o].length-I;u++){if(t(S[o][u],M,B,q,ne)===!1)return!1;M++}he==="MultiLineString"&&q++,he==="Polygon"&&ne++}he==="Polygon"&&q++;break;case"MultiPolygon":for(o=0;o<S.length;o++){for(ne=0,u=0;u<S[o].length;u++){for(p=0;p<S[o][u].length-I;p++){if(t(S[o][u][p],M,B,q,ne)===!1)return!1;M++}ne++}q++}break;case"GeometryCollection":for(o=0;o<y.geometries.length;o++)if(wk(y.geometries[o],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Z7(e,t){var i,o,u,p,y,l,S,b,I,M,k=0,j=e.type==="FeatureCollection",K=e.type==="Feature",O=j?e.features.length:1;for(i=0;i<O;i++){for(l=j?e.features[i].geometry:K?e.geometry:e,b=j?e.features[i].properties:K?e.properties:{},I=j?e.features[i].bbox:K?e.bbox:void 0,M=j?e.features[i].id:K?e.id:void 0,S=l?l.type==="GeometryCollection":!1,y=S?l.geometries.length:1,u=0;u<y;u++){if(p=S?l.geometries[u]:l,p===null){if(t(null,k,b,I,M)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(p,k,b,I,M)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<p.geometries.length;o++)if(t(p.geometries[o],k,b,I,M)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}k++}}function W7(e,t){Z7(e,function(i,o,u,p,y){var l=i===null?null:i.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(lg(i,u,{bbox:p,id:y}),o,0)===!1?!1:void 0}var S;switch(l){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var b=0;b<i.coordinates.length;b++){var I=i.coordinates[b],M={type:S,coordinates:I};if(t(lg(M,u),o,b)===!1)return!1}})}function H7(e,t){W7(e,function(i,o,u){var p=0;if(i.geometry){var y=i.geometry.type;if(!(y==="Point"||y==="MultiPoint")){var l,S=0,b=0,I=0;if(wk(i,function(M,k,j,K,O){if(l===void 0||o>S||K>b||O>I){l=M,S=o,b=K,I=O,p=0;return}var X=xk([l,M],i.properties);if(t(X,o,u,O,p)===!1)return!1;p++,l=M})===!1)return!1}}})}function K7(e,t,i){var o=i,u=!1;return H7(e,function(p,y,l,S,b){u===!1&&i===void 0?o=p:o=t(o,p,y,l,S,b),u=!0}),o}function Y2(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bk(e,t,i){i===void 0&&(i={});var o=Y2(e),u=Y2(t),p=rm(u[1]-o[1]),y=rm(u[0]-o[0]),l=rm(o[1]),S=rm(u[1]),b=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(y/2),2)*Math.cos(l)*Math.cos(S);return q7(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)),i.units)}function X7(e,t){return t===void 0&&(t={}),K7(e,function(i,o){var u=o.geometry.coordinates;return i+bk(u[0],u[1],t)},0)}const Y7=()=>({q:.0015,r:1.2,p:[1,1],v:[0,0],lastPos:null,lastTime:0,heading:null,speed:0,reset(){this.p=[1,1],this.v=[0,0],this.lastPos=null,this.lastTime=0,this.heading=null,this.speed=0}}),Q7=(e=.15)=>({alpha:e,lastValue:null,filter(t){if(this.lastValue===null)return this.lastValue=t,t;const i=this.lastValue+this.alpha*(t-this.lastValue);return this.lastValue=i,i},reset(){this.lastValue=null}}),J7=Y7(),eF=Q7(),tF=()=>{const[e,t]=Z.useState([]),[i,o]=Z.useState(null),[u,p]=Z.useState(null),[y,l]=Z.useState([]),[S,b]=Z.useState(""),[I,M]=Z.useState(0),[k,j]=Z.useState(null),K=Z.useCallback((V,q,ne)=>{if(e.length===0)return!0;const he=e[e.length-1].coordinates;return bk(K2(he),K2(V),{units:"meters"})>Ya.distanceThreshold&&q<=Ya.accuracyThreshold||ne-I>=Ya.updateInterval*3},[e,I]),O=Z.useCallback((V,q)=>{const{latitude:ne,longitude:he,altitude:Se,accuracy:ke}=V.coords,we=[he,ne],We=Date.now();if(o(we),p(Se),q){!k&&e.length>0&&j(e[e.length-1]);return}if(k){const Fe={coordinates:we,altitude:Se,timestamp:V.timestamp};t(pt=>[...pt,Fe]),j(null),M(We);return}if(K(we,ke,We)){M(We);const Fe={coordinates:we,altitude:Se,timestamp:V.timestamp};t(pt=>[...pt,Fe])}},[e,I,k,K]),X=Z.useCallback(V=>{l(q=>[...q,V])},[]),B=Z.useCallback(()=>{t([]),l([]),M(0),j(null),J7.reset(),eF.reset()},[]);return{currentPath:e,currentLocation:i,currentAltitude:u,pois:y,trackName:S,setTrackName:b,updatePosition:O,addPOI:X,resetTrack:B}},Sk=Z.createContext(void 0),nF=({children:e})=>{const{isTracking:t,isPaused:i,error:o,isLoading:u,getCurrentPosition:p,startTracking:y,stopTracking:l,pauseTracking:S,resumeTracking:b}=$7(),{currentPath:I,currentLocation:M,currentAltitude:k,pois:j,trackName:K,setTrackName:O,updatePosition:X,addPOI:B,resetTrack:V}=tF(),q=ne=>{O(ne),V(),y({onSuccess:he=>X(he,i),onError:console.error})};return de.jsx(Sk.Provider,{value:{isTracking:t,isPaused:i,currentPath:I,currentLocation:M,currentAltitude:k,trackName:K,pois:j,error:o,isLoading:u,startTracking:q,stopTracking:l,pauseTracking:S,resumeTracking:b,addPOI:B},children:e})},dl=()=>{const e=Z.useContext(Sk);if(!e)throw new Error("useLocation must be used within a LocationProvider");return e},Fl={INITIAL_LOCATION:[2.3488,48.8534],ZOOM:17,MAX_ZOOM:19,MIN_ZOOM:3},Xc={line:{color:"#ace47c",width:3,opacity:.8},marker:{color:"#ace47c"}},Q2={version:8,sources:{terrain:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attribution">CARTO</a>'}},layers:[{id:"terrain",type:"raster",source:"terrain",minzoom:0,maxzoom:19}]},rF=(e,t)=>`
  <div class="p-3 min-w-[200px]">
    <h3 class="text-black text-lg font-semibold mb-1" style="color: black !important;">
      ${e}
    </h3>
    ${t?`<p class="text-black text-base" style="color: black !important;">${t}</p>`:""}
  </div>
`,iF=()=>{const e=Z.useRef(null),t=Z.useRef(null),i=Z.useRef(null),o=Z.useRef([]),{currentLocation:u,currentPath:p,isTracking:y,isPaused:l,pois:S}=dl(),[b,I]=Z.useState(!1);return Z.useEffect(()=>{if(!(!e.current||t.current))return navigator.geolocation.getCurrentPosition(M=>{const k=[M.coords.longitude,M.coords.latitude],j=new Rl.Map({container:e.current,style:Q2,center:k,zoom:Fl.ZOOM,maxZoom:Fl.MAX_ZOOM,minZoom:Fl.MIN_ZOOM,attributionControl:!0,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0});j.addControl(new Rl.NavigationControl({showCompass:!1,showZoom:!0,visualizePitch:!1})),j.on("load",()=>{j.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:p.map(K=>K.coordinates)}}}),j.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Xc.line.color,"line-width":Xc.line.width,"line-opacity":Xc.line.opacity}}),i.current=new Rl.Marker({color:Xc.marker.color}).setLngLat(k).addTo(j),I(!0)}),t.current=j},M=>{console.error("Error getting initial location:",M),ja.error("Impossible d'accder  votre position");const k=new Rl.Map({container:e.current,style:Q2,center:Fl.INITIAL_LOCATION,zoom:Fl.ZOOM,maxZoom:Fl.MAX_ZOOM,minZoom:Fl.MIN_ZOOM,attributionControl:!0,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0});t.current=k,I(!0)}),()=>{t.current&&(t.current.remove(),t.current=null)}},[]),Z.useEffect(()=>{!t.current||!b||(o.current.forEach(M=>M.remove()),o.current=[],S.forEach(M=>{const k=new Rl.Popup({closeButton:!0,closeOnClick:!1,maxWidth:"300px",className:"custom-popup"}).setHTML(rF(M.name,M.comment)),j=new Rl.Marker({color:Xc.marker.color}).setLngLat(M.coordinates).setPopup(k).addTo(t.current);o.current.push(j)}))},[S,b]),Z.useEffect(()=>{if(!t.current||!b)return;u&&(i.current?i.current.setLngLat(u):i.current=new Rl.Marker({color:Xc.marker.color}).setLngLat(u).addTo(t.current),y&&!l&&t.current.easeTo({center:u,duration:1e3}));const M=t.current.getSource("route");M&&M.setData({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:p.map(k=>k.coordinates)}})},[u,p,y,l,b]),de.jsxs("div",{className:"absolute inset-0 bg-background",children:[de.jsx("div",{ref:e,className:"h-full w-full brightness-90 contrast-120"}),de.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-b from-background/10 to-transparent"}),l&&de.jsx("div",{className:"absolute inset-0 bg-black/40 pointer-events-none backdrop-blur-[2px] transition-opacity duration-200"})]})},sF=gP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_o=Z.forwardRef(({className:e,variant:t,size:i,asChild:o=!1,...u},p)=>{const y=o?Uu:"button";return de.jsx(y,{className:Ei(sF({variant:t,size:i,className:e})),ref:p,...u})});_o.displayName="Button";const Tk=Z.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Hg=Z.createContext({}),qx=Z.createContext(null),Zx=typeof document<"u",oF=Zx?Z.useLayoutEffect:Z.useEffect,Ck=Z.createContext({strict:!1}),Wx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aF="framerAppearId",Ek="data-"+Wx(aF),lF={skipAnimations:!1,useManualTiming:!1};class J2{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const i=this.order.indexOf(t);i!==-1&&(this.order.splice(i,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function cF(e){let t=new J2,i=new J2,o=0,u=!1,p=!1;const y=new WeakSet,l={schedule:(S,b=!1,I=!1)=>{const M=I&&u,k=M?t:i;return b&&y.add(S),k.add(S)&&M&&u&&(o=t.order.length),S},cancel:S=>{i.remove(S),y.delete(S)},process:S=>{if(u){p=!0;return}if(u=!0,[t,i]=[i,t],i.clear(),o=t.order.length,o)for(let b=0;b<o;b++){const I=t.order[b];y.has(I)&&(l.schedule(I),e()),I(S)}u=!1,p&&(p=!1,l.process(S))}};return l}const im=["read","resolveKeyframes","update","preRender","render","postRender"],uF=40;function Pk(e,t){let i=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},p=im.reduce((M,k)=>(M[k]=cF(()=>i=!0),M),{}),y=M=>{p[M].process(u)},l=()=>{const M=performance.now();i=!1,u.delta=o?1e3/60:Math.max(Math.min(M-u.timestamp,uF),1),u.timestamp=M,u.isProcessing=!0,im.forEach(y),u.isProcessing=!1,i&&t&&(o=!1,e(l))},S=()=>{i=!0,o=!0,u.isProcessing||e(l)};return{schedule:im.reduce((M,k)=>{const j=p[k];return M[k]=(K,O=!1,X=!1)=>(i||S(),j.schedule(K,O,X)),M},{}),cancel:M=>im.forEach(k=>p[k].cancel(M)),state:u,steps:p}}const{schedule:Hx,cancel:XN}=Pk(queueMicrotask,!1);function hF(e,t,i,o){const{visualElement:u}=Z.useContext(Hg),p=Z.useContext(Ck),y=Z.useContext(qx),l=Z.useContext(Tk).reducedMotion,S=Z.useRef();o=o||p.renderer,!S.current&&o&&(S.current=o(e,{visualState:t,parent:u,props:i,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:l}));const b=S.current;Z.useInsertionEffect(()=>{b&&b.update(i,y)});const I=Z.useRef(!!(i[Ek]&&!window.HandoffComplete));return oF(()=>{b&&(Hx.postRender(b.render),I.current&&b.animationState&&b.animationState.animateChanges())}),Z.useEffect(()=>{b&&(b.updateFeatures(),!I.current&&b.animationState&&b.animationState.animateChanges(),I.current&&(I.current=!1,window.HandoffComplete=!0))}),b}function du(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function dF(e,t,i){return Z.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),i&&(typeof i=="function"?i(o):du(i)&&(i.current=o))},[t])}function sp(e){return typeof e=="string"||Array.isArray(e)}function Kg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Kx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xx=["initial",...Kx];function Xg(e){return Kg(e.animate)||Xx.some(t=>sp(e[t]))}function kk(e){return!!(Xg(e)||e.variants)}function pF(e,t){if(Xg(e)){const{initial:i,animate:o}=e;return{initial:i===!1||sp(i)?i:void 0,animate:sp(o)?o:void 0}}return e.inherit!==!1?t:{}}function fF(e){const{initial:t,animate:i}=pF(e,Z.useContext(Hg));return Z.useMemo(()=>({initial:t,animate:i}),[eS(t),eS(i)])}function eS(e){return Array.isArray(e)?e.join(" "):e}const tS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},op={};for(const e in tS)op[e]={isEnabled:t=>tS[e].some(i=>!!t[i])};function mF(e){for(const t in e)op[t]={...op[t],...e[t]}}const Ak=Z.createContext({}),Mk=Z.createContext({}),gF=Symbol.for("motionComponentSymbol");function yF({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:o,Component:u}){e&&mF(e);function p(l,S){let b;const I={...Z.useContext(Tk),...l,layoutId:vF(l)},{isStatic:M}=I,k=fF(l),j=o(l,M);if(!M&&Zx){k.visualElement=hF(u,j,I,t);const K=Z.useContext(Mk),O=Z.useContext(Ck).strict;k.visualElement&&(b=k.visualElement.loadFeatures(I,O,e,K))}return Z.createElement(Hg.Provider,{value:k},b&&k.visualElement?Z.createElement(b,{visualElement:k.visualElement,...I}):null,i(u,l,dF(j,k.visualElement,S),j,M,k.visualElement))}const y=Z.forwardRef(p);return y[gF]=u,y}function vF({layoutId:e}){const t=Z.useContext(Ak).id;return t&&e!==void 0?t+"-"+e:e}function _F(e){function t(o,u={}){return yF(e(o,u))}if(typeof Proxy>"u")return t;const i=new Map;return new Proxy(t,{get:(o,u)=>(i.has(u)||i.set(u,t(u)),i.get(u))})}const xF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yx(e){return typeof e!="string"||e.includes("-")?!1:!!(xF.indexOf(e)>-1||/[A-Z]/u.test(e))}const cg={};function wF(e){Object.assign(cg,e)}const vp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cc=new Set(vp);function Ik(e,{layout:t,layoutId:i}){return cc.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!cg[e]||e==="opacity")}const ni=e=>!!(e&&e.getVelocity),bF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SF=vp.length;function TF(e,{enableHardwareAcceleration:t=!0,allowTransformNone:i=!0},o,u){let p="";for(let y=0;y<SF;y++){const l=vp[y];if(e[l]!==void 0){const S=bF[l]||l;p+=`${S}(${e[l]}) `}}return t&&!e.z&&(p+="translateZ(0)"),p=p.trim(),u?p=u(e,o?"":p):i&&o&&(p="none"),p}const Dk=e=>t=>typeof t=="string"&&t.startsWith(e),Lk=Dk("--"),CF=Dk("var(--"),Qx=e=>CF(e)?EF.test(e.split("/*")[0].trim()):!1,EF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PF=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ol=(e,t,i)=>i>t?t:i<e?e:i,eh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},zd={...eh,transform:e=>ol(0,1,e)},sm={...eh,default:1},Rd=e=>Math.round(e*1e5)/1e5,Jx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,kF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,AF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function _p(e){return typeof e=="string"}const xp=e=>({test:t=>_p(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pa=xp("deg"),yo=xp("%"),Mt=xp("px"),MF=xp("vh"),IF=xp("vw"),nS={...yo,parse:e=>yo.parse(e)/100,transform:e=>yo.transform(e*100)},rS={...eh,transform:Math.round},zk={borderWidth:Mt,borderTopWidth:Mt,borderRightWidth:Mt,borderBottomWidth:Mt,borderLeftWidth:Mt,borderRadius:Mt,radius:Mt,borderTopLeftRadius:Mt,borderTopRightRadius:Mt,borderBottomRightRadius:Mt,borderBottomLeftRadius:Mt,width:Mt,maxWidth:Mt,height:Mt,maxHeight:Mt,size:Mt,top:Mt,right:Mt,bottom:Mt,left:Mt,padding:Mt,paddingTop:Mt,paddingRight:Mt,paddingBottom:Mt,paddingLeft:Mt,margin:Mt,marginTop:Mt,marginRight:Mt,marginBottom:Mt,marginLeft:Mt,rotate:Pa,rotateX:Pa,rotateY:Pa,rotateZ:Pa,scale:sm,scaleX:sm,scaleY:sm,scaleZ:sm,skew:Pa,skewX:Pa,skewY:Pa,distance:Mt,translateX:Mt,translateY:Mt,translateZ:Mt,x:Mt,y:Mt,z:Mt,perspective:Mt,transformPerspective:Mt,opacity:zd,originX:nS,originY:nS,originZ:Mt,zIndex:rS,backgroundPositionX:Mt,backgroundPositionY:Mt,fillOpacity:zd,strokeOpacity:zd,numOctaves:rS};function e1(e,t,i,o){const{style:u,vars:p,transform:y,transformOrigin:l}=e;let S=!1,b=!1,I=!0;for(const M in t){const k=t[M];if(Lk(M)){p[M]=k;continue}const j=zk[M],K=PF(k,j);if(cc.has(M)){if(S=!0,y[M]=K,!I)continue;k!==(j.default||0)&&(I=!1)}else M.startsWith("origin")?(b=!0,l[M]=K):u[M]=K}if(t.transform||(S||o?u.transform=TF(e.transform,i,I,o):u.transform&&(u.transform="none")),b){const{originX:M="50%",originY:k="50%",originZ:j=0}=l;u.transformOrigin=`${M} ${k} ${j}`}}const t1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rk(e,t,i){for(const o in t)!ni(t[o])&&!Ik(o,i)&&(e[o]=t[o])}function DF({transformTemplate:e},t,i){return Z.useMemo(()=>{const o=t1();return e1(o,t,{enableHardwareAcceleration:!i},e),Object.assign({},o.vars,o.style)},[t])}function LF(e,t,i){const o=e.style||{},u={};return Rk(u,o,e),Object.assign(u,DF(e,t,i)),u}function zF(e,t,i){const o={},u=LF(e,t,i);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=u,o}const RF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ug(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RF.has(e)}let Fk=e=>!ug(e);function FF(e){e&&(Fk=t=>t.startsWith("on")?!ug(t):e(t))}try{FF(require("@emotion/is-prop-valid").default)}catch{}function OF(e,t,i){const o={};for(const u in e)u==="values"&&typeof e.values=="object"||(Fk(u)||i===!0&&ug(u)||!t&&!ug(u)||e.draggable&&u.startsWith("onDrag"))&&(o[u]=e[u]);return o}function iS(e,t,i){return typeof e=="string"?e:Mt.transform(t+i*e)}function BF(e,t,i){const o=iS(t,e.x,e.width),u=iS(i,e.y,e.height);return`${o} ${u}`}const NF={offset:"stroke-dashoffset",array:"stroke-dasharray"},VF={offset:"strokeDashoffset",array:"strokeDasharray"};function jF(e,t,i=1,o=0,u=!0){e.pathLength=1;const p=u?NF:VF;e[p.offset]=Mt.transform(-o);const y=Mt.transform(t),l=Mt.transform(i);e[p.array]=`${y} ${l}`}function n1(e,{attrX:t,attrY:i,attrScale:o,originX:u,originY:p,pathLength:y,pathSpacing:l=1,pathOffset:S=0,...b},I,M,k){if(e1(e,b,I,k),M){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:j,style:K,dimensions:O}=e;j.transform&&(O&&(K.transform=j.transform),delete j.transform),O&&(u!==void 0||p!==void 0||K.transform)&&(K.transformOrigin=BF(O,u!==void 0?u:.5,p!==void 0?p:.5)),t!==void 0&&(j.x=t),i!==void 0&&(j.y=i),o!==void 0&&(j.scale=o),y!==void 0&&jF(j,y,l,S,!1)}const Ok=()=>({...t1(),attrs:{}}),r1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function UF(e,t,i,o){const u=Z.useMemo(()=>{const p=Ok();return n1(p,t,{enableHardwareAcceleration:!1},r1(o),e.transformTemplate),{...p.attrs,style:{...p.style}}},[t]);if(e.style){const p={};Rk(p,e.style,e),u.style={...p,...u.style}}return u}function $F(e=!1){return(i,o,u,{latestValues:p},y)=>{const S=(Yx(i)?UF:zF)(o,p,y,i),b=OF(o,typeof i=="string",e),I=i!==Z.Fragment?{...b,...S,ref:u}:{},{children:M}=o,k=Z.useMemo(()=>ni(M)?M.get():M,[M]);return Z.createElement(i,{...I,children:k})}}function Bk(e,{style:t,vars:i},o,u){Object.assign(e.style,t,u&&u.getProjectionStyles(o));for(const p in i)e.style.setProperty(p,i[p])}const Nk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vk(e,t,i,o){Bk(e,t,void 0,o);for(const u in t.attrs)e.setAttribute(Nk.has(u)?u:Wx(u),t.attrs[u])}function i1(e,t){const{style:i}=e,o={};for(const u in i)(ni(i[u])||t.style&&ni(t.style[u])||Ik(u,e))&&(o[u]=i[u]);return o}function jk(e,t){const i=i1(e,t);for(const o in e)if(ni(e[o])||ni(t[o])){const u=vp.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[u]=e[o]}return i}function s1(e,t,i,o={},u={}){return typeof t=="function"&&(t=t(i!==void 0?i:e.custom,o,u)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(i!==void 0?i:e.custom,o,u)),t}function GF(e){const t=Z.useRef(null);return t.current===null&&(t.current=e()),t.current}const y_=e=>Array.isArray(e),qF=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ZF=e=>y_(e)?e[e.length-1]||0:e;function Em(e){const t=ni(e)?e.get():e;return qF(t)?t.toValue():t}function WF({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:i},o,u,p){const y={latestValues:HF(o,u,p,e),renderState:t()};return i&&(y.mount=l=>i(o,l,y)),y}const Uk=e=>(t,i)=>{const o=Z.useContext(Hg),u=Z.useContext(qx),p=()=>WF(e,t,o,u);return i?p():GF(p)};function HF(e,t,i,o){const u={},p=o(e,{});for(const k in p)u[k]=Em(p[k]);let{initial:y,animate:l}=e;const S=Xg(e),b=kk(e);t&&b&&!S&&e.inherit!==!1&&(y===void 0&&(y=t.initial),l===void 0&&(l=t.animate));let I=i?i.initial===!1:!1;I=I||y===!1;const M=I?l:y;return M&&typeof M!="boolean"&&!Kg(M)&&(Array.isArray(M)?M:[M]).forEach(j=>{const K=s1(e,j);if(!K)return;const{transitionEnd:O,transition:X,...B}=K;for(const V in B){let q=B[V];if(Array.isArray(q)){const ne=I?q.length-1:0;q=q[ne]}q!==null&&(u[V]=q)}for(const V in O)u[V]=O[V]}),u}const ri=e=>e,{schedule:Br,cancel:al,state:Fr,steps:Gv}=Pk(typeof requestAnimationFrame<"u"?requestAnimationFrame:ri,!0),KF={useVisualState:Uk({scrapeMotionValuesFromProps:jk,createRenderState:Ok,onMount:(e,t,{renderState:i,latestValues:o})=>{Br.read(()=>{try{i.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}),Br.render(()=>{n1(i,o,{enableHardwareAcceleration:!1},r1(t.tagName),e.transformTemplate),Vk(t,i)})}})},XF={useVisualState:Uk({scrapeMotionValuesFromProps:i1,createRenderState:t1})};function YF(e,{forwardMotionProps:t=!1},i,o){return{...Yx(e)?KF:XF,preloadedFeatures:i,useRender:$F(t),createVisualElement:o,Component:e}}function Go(e,t,i,o={passive:!0}){return e.addEventListener(t,i,o),()=>e.removeEventListener(t,i)}const $k=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Yg(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const QF=e=>t=>$k(t)&&e(t,Yg(t));function Zo(e,t,i,o){return Go(e,t,QF(i),o)}const JF=(e,t)=>i=>t(e(i)),Wo=(...e)=>e.reduce(JF);function Gk(e){let t=null;return()=>{const i=()=>{t=null};return t===null?(t=e,i):!1}}const sS=Gk("dragHorizontal"),oS=Gk("dragVertical");function qk(e){let t=!1;if(e==="y")t=oS();else if(e==="x")t=sS();else{const i=sS(),o=oS();i&&o?t=()=>{i(),o()}:(i&&i(),o&&o())}return t}function Zk(){const e=qk(!0);return e?(e(),!1):!0}class pl{constructor(t){this.isMounted=!1,this.node=t}update(){}}function aS(e,t){const i="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),u=(p,y)=>{if(p.pointerType==="touch"||Zk())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&l[o](p,y)};return Zo(e.current,i,u,{passive:!e.getProps()[o]})}class e6 extends pl{mount(){this.unmount=Wo(aS(this.node,!0),aS(this.node,!1))}unmount(){}}class t6 extends pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wo(Go(this.node.current,"focus",()=>this.onFocus()),Go(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Wk=(e,t)=>t?e===t?!0:Wk(e,t.parentElement):!1;function qv(e,t){if(!t)return;const i=new PointerEvent("pointer"+e);t(i,Yg(i))}class n6 extends pl{constructor(){super(...arguments),this.removeStartListeners=ri,this.removeEndListeners=ri,this.removeAccessibleListeners=ri,this.startPointerPress=(t,i)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),p=Zo(window,"pointerup",(l,S)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:I,globalTapTarget:M}=this.node.getProps();!M&&!Wk(this.node.current,l.target)?I&&I(l,S):b&&b(l,S)},{passive:!(o.onTap||o.onPointerUp)}),y=Zo(window,"pointercancel",(l,S)=>this.cancelPress(l,S),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=Wo(p,y),this.startPress(t,i)},this.startAccessiblePress=()=>{const t=p=>{if(p.key!=="Enter"||this.isPressing)return;const y=l=>{l.key!=="Enter"||!this.checkPressEnd()||qv("up",(S,b)=>{const{onTap:I}=this.node.getProps();I&&I(S,b)})};this.removeEndListeners(),this.removeEndListeners=Go(this.node.current,"keyup",y),qv("down",(l,S)=>{this.startPress(l,S)})},i=Go(this.node.current,"keydown",t),o=()=>{this.isPressing&&qv("cancel",(p,y)=>this.cancelPress(p,y))},u=Go(this.node.current,"blur",o);this.removeAccessibleListeners=Wo(i,u)}}startPress(t,i){this.isPressing=!0;const{onTapStart:o,whileTap:u}=this.node.getProps();u&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&o(t,i)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Zk()}cancelPress(t,i){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&o(t,i)}mount(){const t=this.node.getProps(),i=Zo(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=Go(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wo(i,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const v_=new WeakMap,Zv=new WeakMap,r6=e=>{const t=v_.get(e.target);t&&t(e)},i6=e=>{e.forEach(r6)};function s6({root:e,...t}){const i=e||document;Zv.has(i)||Zv.set(i,{});const o=Zv.get(i),u=JSON.stringify(t);return o[u]||(o[u]=new IntersectionObserver(i6,{root:e,...t})),o[u]}function o6(e,t,i){const o=s6(t);return v_.set(e,i),o.observe(e),()=>{v_.delete(e),o.unobserve(e)}}const a6={some:0,all:1};class l6 extends pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:o,amount:u="some",once:p}=t,y={root:i?i.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:a6[u]},l=S=>{const{isIntersecting:b}=S;if(this.isInView===b||(this.isInView=b,p&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:I,onViewportLeave:M}=this.node.getProps(),k=b?I:M;k&&k(S)};return o6(this.node.current,y,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(c6(t,i))&&this.startObserver()}unmount(){}}function c6({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const u6={inView:{Feature:l6},tap:{Feature:n6},focus:{Feature:t6},hover:{Feature:e6}};function Hk(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}function h6(e){const t={};return e.values.forEach((i,o)=>t[o]=i.get()),t}function d6(e){const t={};return e.values.forEach((i,o)=>t[o]=i.getVelocity()),t}function Qg(e,t,i){const o=e.getProps();return s1(o,t,i!==void 0?i:o.custom,h6(e),d6(e))}const Ql=e=>e*1e3,Ho=e=>e/1e3,p6={type:"spring",stiffness:500,damping:25,restSpeed:10},f6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),m6={type:"keyframes",duration:.8},g6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},y6=(e,{keyframes:t})=>t.length>2?m6:cc.has(e)?e.startsWith("scale")?f6(t[1]):p6:g6;function v6({when:e,delay:t,delayChildren:i,staggerChildren:o,staggerDirection:u,repeat:p,repeatType:y,repeatDelay:l,from:S,elapsed:b,...I}){return!!Object.keys(I).length}function o1(e,t){return e[t]||e.default||e}const _6=e=>e!==null;function Jg(e,{repeat:t,repeatType:i="loop"},o){const u=e.filter(_6),p=t&&i!=="loop"&&t%2===1?0:u.length-1;return!p||o===void 0?u[p]:o}let Pm;function x6(){Pm=void 0}const Qa={now:()=>(Pm===void 0&&Qa.set(Fr.isProcessing||lF.useManualTiming?Fr.timestamp:performance.now()),Pm),set:e=>{Pm=e,queueMicrotask(x6)}},Kk=e=>/^0[^.\s]+$/u.test(e);function w6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Kk(e):!0}let __=ri;const Xk=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),b6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S6(e){const t=b6.exec(e);if(!t)return[,];const[,i,o,u]=t;return[`--${i??o}`,u]}function Yk(e,t,i=1){const[o,u]=S6(e);if(!o)return;const p=window.getComputedStyle(t).getPropertyValue(o);if(p){const y=p.trim();return Xk(y)?parseFloat(y):y}return Qx(u)?Yk(u,t,i+1):u}const T6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lS=e=>e===eh||e===Mt,cS=(e,t)=>parseFloat(e.split(", ")[t]),uS=(e,t)=>(i,{transform:o})=>{if(o==="none"||!o)return 0;const u=o.match(/^matrix3d\((.+)\)$/u);if(u)return cS(u[1],t);{const p=o.match(/^matrix\((.+)\)$/u);return p?cS(p[1],e):0}},C6=new Set(["x","y","z"]),E6=vp.filter(e=>!C6.has(e));function hS(e){const t=[];return E6.forEach(i=>{const o=e.getValue(i);o!==void 0&&(t.push([i,o.get()]),o.set(i.startsWith("scale")?1:0))}),t}const qu={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:uS(4,13),y:uS(5,14)};qu.translateX=qu.x;qu.translateY=qu.y;const Qk=e=>t=>t.test(e),P6={test:e=>e==="auto",parse:e=>e},Jk=[eh,Mt,yo,Pa,IF,MF,P6],dS=e=>Jk.find(Qk(e)),Jl=new Set;let x_=!1,w_=!1;function eA(){if(w_){const e=Array.from(Jl).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),i=new Map;t.forEach(o=>{hS(o).length&&(i.set(o,hS(o)),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render()}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}w_=!1,x_=!1,Jl.forEach(e=>e.complete()),Jl.clear()}function tA(){Jl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(w_=!0)})}function k6(){tA(),eA()}class a1{constructor(t,i,o,u,p,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=o,this.motionValue=u,this.element=p,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Jl.add(this),x_||(x_=!0,Br.read(tA),Br.resolveKeyframes(eA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:o,motionValue:u}=this;for(let p=0;p<t.length;p++)if(t[p]===null)if(p===0){const y=u==null?void 0:u.get(),l=t[t.length-1];if(y!==void 0)t[0]=y;else if(o&&i){const S=o.readValue(i,l);S!=null&&(t[0]=S)}t[0]===void 0&&(t[0]=l),u&&y===void 0&&u.set(t[0])}else t[p]=t[p-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Jl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Jl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const l1=(e,t)=>i=>!!(_p(i)&&AF.test(i)&&i.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(i,t)),nA=(e,t,i)=>o=>{if(!_p(o))return o;const[u,p,y,l]=o.match(Jx);return{[e]:parseFloat(u),[t]:parseFloat(p),[i]:parseFloat(y),alpha:l!==void 0?parseFloat(l):1}},A6=e=>ol(0,255,e),Wv={...eh,transform:e=>Math.round(A6(e))},ql={test:l1("rgb","red"),parse:nA("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:o=1})=>"rgba("+Wv.transform(e)+", "+Wv.transform(t)+", "+Wv.transform(i)+", "+Rd(zd.transform(o))+")"};function M6(e){let t="",i="",o="",u="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),o=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),o=e.substring(3,4),u=e.substring(4,5),t+=t,i+=i,o+=o,u+=u),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const b_={test:l1("#"),parse:M6,transform:ql.transform},pu={test:l1("hsl","hue"),parse:nA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:o=1})=>"hsla("+Math.round(e)+", "+yo.transform(Rd(t))+", "+yo.transform(Rd(i))+", "+Rd(zd.transform(o))+")"},ei={test:e=>ql.test(e)||b_.test(e)||pu.test(e),parse:e=>ql.test(e)?ql.parse(e):pu.test(e)?pu.parse(e):b_.parse(e),transform:e=>_p(e)?e:e.hasOwnProperty("red")?ql.transform(e):pu.transform(e)};function I6(e){var t,i;return isNaN(e)&&_p(e)&&(((t=e.match(Jx))===null||t===void 0?void 0:t.length)||0)+(((i=e.match(kF))===null||i===void 0?void 0:i.length)||0)>0}const rA="number",iA="color",D6="var",L6="var(",pS="${}",z6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hg(e){const t=e.toString(),i=[],o={color:[],number:[],var:[]},u=[];let p=0;const l=t.replace(z6,S=>(ei.test(S)?(o.color.push(p),u.push(iA),i.push(ei.parse(S))):S.startsWith(L6)?(o.var.push(p),u.push(D6),i.push(S)):(o.number.push(p),u.push(rA),i.push(parseFloat(S))),++p,pS)).split(pS);return{values:i,split:l,indexes:o,types:u}}function sA(e){return hg(e).values}function oA(e){const{split:t,types:i}=hg(e),o=t.length;return u=>{let p="";for(let y=0;y<o;y++)if(p+=t[y],u[y]!==void 0){const l=i[y];l===rA?p+=Rd(u[y]):l===iA?p+=ei.transform(u[y]):p+=u[y]}return p}}const R6=e=>typeof e=="number"?0:e;function F6(e){const t=sA(e);return oA(e)(t.map(R6))}const ll={test:I6,parse:sA,createTransformer:oA,getAnimatableNone:F6},O6=new Set(["brightness","contrast","saturate","opacity"]);function B6(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=i.match(Jx)||[];if(!o)return e;const u=i.replace(o,"");let p=O6.has(t)?1:0;return o!==i&&(p*=100),t+"("+p+u+")"}const N6=/\b([a-z-]*)\(.*?\)/gu,S_={...ll,getAnimatableNone:e=>{const t=e.match(N6);return t?t.map(B6).join(" "):e}},V6={...zk,color:ei,backgroundColor:ei,outlineColor:ei,fill:ei,stroke:ei,borderColor:ei,borderTopColor:ei,borderRightColor:ei,borderBottomColor:ei,borderLeftColor:ei,filter:S_,WebkitFilter:S_},c1=e=>V6[e];function aA(e,t){let i=c1(e);return i!==S_&&(i=ll),i.getAnimatableNone?i.getAnimatableNone(t):void 0}function j6(e,t,i){let o=0,u;for(;o<e.length&&!u;)typeof e[o]=="string"&&e[o]!=="none"&&e[o]!=="0"&&(u=e[o]),o++;if(u&&i)for(const p of t)e[p]=aA(i,u)}class lA extends a1{constructor(t,i,o,u){super(t,i,o,u,u==null?void 0:u.owner,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:o}=this;if(!i.current)return;super.readKeyframes();for(let S=0;S<t.length;S++){const b=t[S];if(typeof b=="string"&&Qx(b)){const I=Yk(b,i.current);I!==void 0&&(t[S]=I)}}if(!T6.has(o)||t.length!==2)return this.resolveNoneKeyframes();const[u,p]=t,y=dS(u),l=dS(p);if(y!==l)if(lS(y)&&lS(l))for(let S=0;S<t.length;S++){const b=t[S];typeof b=="string"&&(t[S]=parseFloat(b))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,o=[];for(let u=0;u<t.length;u++)w6(t[u])&&o.push(u);o.length&&j6(t,o,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:o}=this;if(!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qu[o](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const u=i[i.length-1];u!==void 0&&t.getValue(o,u).jump(u,!1)}measureEndState(){var t;const{element:i,name:o,unresolvedKeyframes:u}=this;if(!i.current)return;const p=i.getValue(o);p&&p.jump(this.measuredOrigin,!1);const y=u.length-1,l=u[y];u[y]=qu[o](i.measureViewportBox(),window.getComputedStyle(i.current)),l!==null&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([S,b])=>{i.getValue(S).set(b)}),this.resolveNoneKeyframes()}}function U6(e){let t;return()=>(t===void 0&&(t=e()),t)}const fS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ll.test(e)||e==="0")&&!e.startsWith("url("));function $6(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function G6(e,t,i,o){const u=e[0];if(u===null)return!1;const p=e[e.length-1],y=fS(u,t),l=fS(p,t);return!y||!l?!1:$6(e)||i==="spring"&&o}class cA{constructor({autoplay:t=!0,delay:i=0,type:o="keyframes",repeat:u=0,repeatDelay:p=0,repeatType:y="loop",...l}){this.isStopped=!1,this.options={autoplay:t,delay:i,type:o,repeat:u,repeatDelay:p,repeatType:y,...l},this.updateFinishedPromise()}get resolved(){return this._resolved||k6(),this._resolved}onKeyframesResolved(t,i){const{name:o,type:u,velocity:p,delay:y,onComplete:l,onUpdate:S}=this.options;if(!G6(t,o,u,p))if(y)this.options.duration=0;else{S==null||S(Jg(t,this.options,i)),l==null||l(),this.resolveFinishedPromise(),this.updateFinishedPromise();return}this._resolved={keyframes:t,finalKeyframe:i,...this.initPlayback(t,i)},this.onPostResolved()}onPostResolved(){}then(t,i){return this.currentFinishedPromise.then(t,i)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=()=>{t(),this.updateFinishedPromise()}})}}function uA(e,t){return t?e*(1e3/t):0}const q6=5;function hA(e,t,i){const o=Math.max(t-q6,0);return uA(i-e(o),t-o)}const Hv=.001,Z6=.01,W6=10,H6=.05,K6=1;function X6({duration:e=800,bounce:t=.25,velocity:i=0,mass:o=1}){let u,p,y=1-t;y=ol(H6,K6,y),e=ol(Z6,W6,Ho(e)),y<1?(u=b=>{const I=b*y,M=I*e,k=I-i,j=T_(b,y),K=Math.exp(-M);return Hv-k/j*K},p=b=>{const M=b*y*e,k=M*i+i,j=Math.pow(y,2)*Math.pow(b,2)*e,K=Math.exp(-M),O=T_(Math.pow(b,2),y);return(-u(b)+Hv>0?-1:1)*((k-j)*K)/O}):(u=b=>{const I=Math.exp(-b*e),M=(b-i)*e+1;return-Hv+I*M},p=b=>{const I=Math.exp(-b*e),M=(i-b)*(e*e);return I*M});const l=5/e,S=Q6(u,p,l);if(e=Ql(e),isNaN(S))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(S,2)*o;return{stiffness:b,damping:y*2*Math.sqrt(o*b),duration:e}}}const Y6=12;function Q6(e,t,i){let o=i;for(let u=1;u<Y6;u++)o=o-e(o)/t(o);return o}function T_(e,t){return e*Math.sqrt(1-t*t)}const J6=["duration","bounce"],eO=["stiffness","damping","mass"];function mS(e,t){return t.some(i=>e[i]!==void 0)}function tO(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!mS(e,eO)&&mS(e,J6)){const i=X6(e);t={...t,...i,mass:1},t.isResolvedFromDuration=!0}return t}function dA({keyframes:e,restDelta:t,restSpeed:i,...o}){const u=e[0],p=e[e.length-1],y={done:!1,value:u},{stiffness:l,damping:S,mass:b,duration:I,velocity:M,isResolvedFromDuration:k}=tO({...o,velocity:-Ho(o.velocity||0)}),j=M||0,K=S/(2*Math.sqrt(l*b)),O=p-u,X=Ho(Math.sqrt(l/b)),B=Math.abs(O)<5;i||(i=B?.01:2),t||(t=B?.005:.5);let V;if(K<1){const q=T_(X,K);V=ne=>{const he=Math.exp(-K*X*ne);return p-he*((j+K*X*O)/q*Math.sin(q*ne)+O*Math.cos(q*ne))}}else if(K===1)V=q=>p-Math.exp(-X*q)*(O+(j+X*O)*q);else{const q=X*Math.sqrt(K*K-1);V=ne=>{const he=Math.exp(-K*X*ne),Se=Math.min(q*ne,300);return p-he*((j+K*X*O)*Math.sinh(Se)+q*O*Math.cosh(Se))/q}}return{calculatedDuration:k&&I||null,next:q=>{const ne=V(q);if(k)y.done=q>=I;else{let he=j;q!==0&&(K<1?he=hA(V,q,ne):he=0);const Se=Math.abs(he)<=i,ke=Math.abs(p-ne)<=t;y.done=Se&&ke}return y.value=y.done?p:ne,y}}}function gS({keyframes:e,velocity:t=0,power:i=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:p=500,modifyTarget:y,min:l,max:S,restDelta:b=.5,restSpeed:I}){const M=e[0],k={done:!1,value:M},j=we=>l!==void 0&&we<l||S!==void 0&&we>S,K=we=>l===void 0?S:S===void 0||Math.abs(l-we)<Math.abs(S-we)?l:S;let O=i*t;const X=M+O,B=y===void 0?X:y(X);B!==X&&(O=B-M);const V=we=>-O*Math.exp(-we/o),q=we=>B+V(we),ne=we=>{const We=V(we),Fe=q(we);k.done=Math.abs(We)<=b,k.value=k.done?B:Fe};let he,Se;const ke=we=>{j(k.value)&&(he=we,Se=dA({keyframes:[k.value,K(k.value)],velocity:hA(q,we,k.value),damping:u,stiffness:p,restDelta:b,restSpeed:I}))};return ke(0),{calculatedDuration:null,next:we=>{let We=!1;return!Se&&he===void 0&&(We=!0,ne(we),ke(we)),he!==void 0&&we>=he?Se.next(we-he):(!We&&ne(we),k)}}}const pA=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,nO=1e-7,rO=12;function iO(e,t,i,o,u){let p,y,l=0;do y=t+(i-t)/2,p=pA(y,o,u)-e,p>0?i=y:t=y;while(Math.abs(p)>nO&&++l<rO);return y}function wp(e,t,i,o){if(e===t&&i===o)return ri;const u=p=>iO(p,0,1,e,i);return p=>p===0||p===1?p:pA(u(p),t,o)}const sO=wp(.42,0,1,1),oO=wp(0,0,.58,1),fA=wp(.42,0,.58,1),aO=e=>Array.isArray(e)&&typeof e[0]!="number",mA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,gA=e=>t=>1-e(1-t),u1=e=>1-Math.sin(Math.acos(e)),yA=gA(u1),lO=mA(u1),vA=wp(.33,1.53,.69,.99),h1=gA(vA),cO=mA(h1),uO=e=>(e*=2)<1?.5*h1(e):.5*(2-Math.pow(2,-10*(e-1))),yS={linear:ri,easeIn:sO,easeInOut:fA,easeOut:oO,circIn:u1,circInOut:lO,circOut:yA,backIn:h1,backInOut:cO,backOut:vA,anticipate:uO},vS=e=>{if(Array.isArray(e)){__(e.length===4);const[t,i,o,u]=e;return wp(t,i,o,u)}else if(typeof e=="string")return __(yS[e]!==void 0),yS[e];return e},ap=(e,t,i)=>{const o=t-e;return o===0?1:(i-e)/o},Nn=(e,t,i)=>e+(t-e)*i;function Kv(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function hO({hue:e,saturation:t,lightness:i,alpha:o}){e/=360,t/=100,i/=100;let u=0,p=0,y=0;if(!t)u=p=y=i;else{const l=i<.5?i*(1+t):i+t-i*t,S=2*i-l;u=Kv(S,l,e+1/3),p=Kv(S,l,e),y=Kv(S,l,e-1/3)}return{red:Math.round(u*255),green:Math.round(p*255),blue:Math.round(y*255),alpha:o}}const Xv=(e,t,i)=>{const o=e*e,u=i*(t*t-o)+o;return u<0?0:Math.sqrt(u)},dO=[b_,ql,pu],pO=e=>dO.find(t=>t.test(e));function _S(e){const t=pO(e);let i=t.parse(e);return t===pu&&(i=hO(i)),i}const xS=(e,t)=>{const i=_S(e),o=_S(t),u={...i};return p=>(u.red=Xv(i.red,o.red,p),u.green=Xv(i.green,o.green,p),u.blue=Xv(i.blue,o.blue,p),u.alpha=Nn(i.alpha,o.alpha,p),ql.transform(u))};function C_(e,t){return i=>i>0?t:e}function fO(e,t){return i=>Nn(e,t,i)}function d1(e){return typeof e=="number"?fO:typeof e=="string"?Qx(e)?C_:ei.test(e)?xS:yO:Array.isArray(e)?_A:typeof e=="object"?ei.test(e)?xS:mO:C_}function _A(e,t){const i=[...e],o=i.length,u=e.map((p,y)=>d1(p)(p,t[y]));return p=>{for(let y=0;y<o;y++)i[y]=u[y](p);return i}}function mO(e,t){const i={...e,...t},o={};for(const u in i)e[u]!==void 0&&t[u]!==void 0&&(o[u]=d1(e[u])(e[u],t[u]));return u=>{for(const p in o)i[p]=o[p](u);return i}}function gO(e,t){var i;const o=[],u={color:0,var:0,number:0};for(let p=0;p<t.values.length;p++){const y=t.types[p],l=e.indexes[y][u[y]],S=(i=e.values[l])!==null&&i!==void 0?i:0;o[p]=S,u[y]++}return o}const yO=(e,t)=>{const i=ll.createTransformer(t),o=hg(e),u=hg(t);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?Wo(_A(gO(o,u),u.values),i):C_(e,t)};function xA(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Nn(e,t,i):d1(e)(e,t)}function vO(e,t,i){const o=[],u=i||xA,p=e.length-1;for(let y=0;y<p;y++){let l=u(e[y],e[y+1]);if(t){const S=Array.isArray(t)?t[y]||ri:t;l=Wo(S,l)}o.push(l)}return o}function _O(e,t,{clamp:i=!0,ease:o,mixer:u}={}){const p=e.length;if(__(p===t.length),p===1)return()=>t[0];if(p===2&&e[0]===e[1])return()=>t[1];e[0]>e[p-1]&&(e=[...e].reverse(),t=[...t].reverse());const y=vO(t,o,u),l=y.length,S=b=>{let I=0;if(l>1)for(;I<e.length-2&&!(b<e[I+1]);I++);const M=ap(e[I],e[I+1],b);return y[I](M)};return i?b=>S(ol(e[0],e[p-1],b)):S}function xO(e,t){const i=e[e.length-1];for(let o=1;o<=t;o++){const u=ap(0,t,o);e.push(Nn(i,1,u))}}function wO(e){const t=[0];return xO(t,e.length-1),t}function bO(e,t){return e.map(i=>i*t)}function SO(e,t){return e.map(()=>t||fA).splice(0,e.length-1)}function dg({duration:e=300,keyframes:t,times:i,ease:o="easeInOut"}){const u=aO(o)?o.map(vS):vS(o),p={done:!1,value:t[0]},y=bO(i&&i.length===t.length?i:wO(t),e),l=_O(y,t,{ease:Array.isArray(u)?u:SO(t,u)});return{calculatedDuration:e,next:S=>(p.value=l(S),p.done=S>=e,p)}}const wS=2e4;function TO(e){let t=0;const i=50;let o=e.next(t);for(;!o.done&&t<wS;)t+=i,o=e.next(t);return t>=wS?1/0:t}const CO=e=>{const t=({timestamp:i})=>e(i);return{start:()=>Br.update(t,!0),stop:()=>al(t),now:()=>Fr.isProcessing?Fr.timestamp:Qa.now()}},EO={decay:gS,inertia:gS,tween:dg,keyframes:dg,spring:dA},PO=e=>e/100;class p1 extends cA{constructor({KeyframeResolver:t=a1,...i}){super(i),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle";const{name:o,motionValue:u,keyframes:p}=this.options,y=(l,S)=>this.onKeyframesResolved(l,S);o&&u&&u.owner?this.resolver=u.owner.resolveKeyframes(p,y,o,u):this.resolver=new t(p,y,o,u),this.resolver.scheduleResolve()}initPlayback(t){const{type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:p,velocity:y=0}=this.options,l=EO[i]||dg;let S,b;l!==dg&&typeof t[0]!="number"&&(S=Wo(PO,xA(t[0],t[1])),t=[0,100]);const I=l({...this.options,keyframes:t});p==="mirror"&&(b=l({...this.options,keyframes:[...t].reverse(),velocity:-y})),I.calculatedDuration===null&&(I.calculatedDuration=TO(I));const{calculatedDuration:M}=I,k=M+u,j=k*(o+1)-u;return{generator:I,mirroredGenerator:b,mapPercentToKeyframes:S,calculatedDuration:M,resolvedDuration:k,totalDuration:j}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,i=!1){const{resolved:o}=this;if(!o){const{keyframes:we}=this.options;return{done:!0,value:we[we.length-1]}}const{finalKeyframe:u,generator:p,mirroredGenerator:y,mapPercentToKeyframes:l,keyframes:S,calculatedDuration:b,totalDuration:I,resolvedDuration:M}=o;if(this.startTime===null)return p.next(0);const{delay:k,repeat:j,repeatType:K,repeatDelay:O,onUpdate:X}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-I/this.speed,this.startTime)),i?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const B=this.currentTime-k*(this.speed>=0?1:-1),V=this.speed>=0?B<0:B>I;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=I);let q=this.currentTime,ne=p;if(j){const we=Math.min(this.currentTime,I)/M;let We=Math.floor(we),Fe=we%1;!Fe&&we>=1&&(Fe=1),Fe===1&&We--,We=Math.min(We,j+1),!!(We%2)&&(K==="reverse"?(Fe=1-Fe,O&&(Fe-=O/M)):K==="mirror"&&(ne=y)),q=ol(0,1,Fe)*M}const he=V?{done:!1,value:S[0]}:ne.next(q);l&&(he.value=l(he.value));let{done:Se}=he;!V&&b!==null&&(Se=this.speed>=0?this.currentTime>=I:this.currentTime<=0);const ke=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Se);return ke&&u!==void 0&&(he.value=Jg(S,this.options,u)),X&&X(he.value),ke&&this.finish(),he}get duration(){const{resolved:t}=this;return t?Ho(t.calculatedDuration):0}get time(){return Ho(this.currentTime)}set time(t){t=Ql(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=Ho(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=CO,onPlay:i}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),i&&i();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=o),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}stop(){if(this.isStopped=!0,this.state==="idle")return;this.state="idle";const{onStop:t}=this.options;t&&t(),this.teardown()}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const wA=e=>Array.isArray(e)&&typeof e[0]=="number";function bA(e){return!!(!e||typeof e=="string"&&SA[e]||wA(e)||Array.isArray(e)&&e.every(bA))}const Sd=([e,t,i,o])=>`cubic-bezier(${e}, ${t}, ${i}, ${o})`,SA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sd([0,.65,.55,1]),circOut:Sd([.55,0,1,.45]),backIn:Sd([.31,.01,.66,-.59]),backOut:Sd([.33,1.53,.69,.99])};function TA(e){if(e)return wA(e)?Sd(e):Array.isArray(e)?e.map(TA):SA[e]}function kO(e,t,i,{delay:o=0,duration:u=300,repeat:p=0,repeatType:y="loop",ease:l,times:S}={}){const b={[t]:i};S&&(b.offset=S);const I=TA(l);return Array.isArray(I)&&(b.easing=I),e.animate(b,{delay:o,duration:u,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:p+1,direction:y==="reverse"?"alternate":"normal"})}const AO=U6(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),MO=new Set(["opacity","clipPath","filter","transform"]),pg=10,IO=2e4;function DO(e){return e.type==="spring"||e.name==="backgroundColor"||!bA(e.ease)}function LO(e,t){const i=new p1({...t,keyframes:e,repeat:0,delay:0});let o={done:!1,value:e[0]};const u=[];let p=0;for(;!o.done&&p<IO;)o=i.sample(p),u.push(o.value),p+=pg;return{times:void 0,keyframes:u,duration:p-pg,ease:"linear"}}class bS extends cA{constructor(t){super(t);const{name:i,motionValue:o,keyframes:u}=this.options;this.resolver=new lA(u,(p,y)=>this.onKeyframesResolved(p,y),i,o),this.resolver.scheduleResolve()}initPlayback(t,i){let o=this.options.duration||300;if(DO(this.options)){const{onComplete:l,onUpdate:S,motionValue:b,...I}=this.options,M=LO(t,I);t=M.keyframes,o=M.duration,this.options.times=M.times,this.options.ease=M.ease}const{motionValue:u,name:p}=this.options,y=kO(u.owner.current,p,t,{...this.options,duration:o});return y.startTime=Qa.now(),this.pendingTimeline?(y.timeline=this.pendingTimeline,this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:l}=this.options;u.set(Jg(t,this.options,i)),l&&l(),this.cancel(),this.resolveFinishedPromise(),this.updateFinishedPromise()},{animation:y,duration:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:i}=t;return Ho(i)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:i}=t;return Ho(i.currentTime||0)}set time(t){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.currentTime=Ql(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:i}=t;return i.playbackRate}set speed(t){const{resolved:i}=this;if(!i)return;const{animation:o}=i;o.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:i}=t;return i.playState}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:i}=this;if(!i)return ri;const{animation:o}=i;o.timeline=t,o.onfinish=null}return ri}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.pause()}stop(){this.isStopped=!0;const{resolved:t}=this;if(!t)return;const{animation:i,keyframes:o}=t;if(!(i.playState==="idle"||i.playState==="finished")){if(this.time){const{motionValue:u,onUpdate:p,onComplete:y,...l}=this.options,S=new p1({...l,keyframes:o});u.setWithVelocity(S.sample(this.time-pg).value,S.sample(this.time).value,pg)}this.cancel()}}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:i,name:o,repeatDelay:u,repeatType:p,damping:y,type:l}=t;return AO()&&o&&MO.has(o)&&i&&i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate&&!u&&p!=="mirror"&&y!==0&&l!=="inertia"}}const f1=(e,t,i,o={},u,p)=>y=>{const l=o1(o,e)||{},S=l.delay||o.delay||0;let{elapsed:b=0}=o;b=b-Ql(S);let I={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-b,onUpdate:k=>{t.set(k),l.onUpdate&&l.onUpdate(k)},onComplete:()=>{y(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:p?void 0:u};v6(l)||(I={...I,...y6(e,I)}),I.duration&&(I.duration=Ql(I.duration)),I.repeatDelay&&(I.repeatDelay=Ql(I.repeatDelay)),I.from!==void 0&&(I.keyframes[0]=I.from);let M=!1;if(I.type===!1&&(I.duration=0,I.delay===0&&(M=!0)),M&&!p&&t.get()!==void 0){const k=Jg(I.keyframes,l);if(k!==void 0){Br.update(()=>{I.onUpdate(k),I.onComplete()});return}}return!p&&bS.supports(I)?new bS(I):new p1(I)};function fg(e){return!!(ni(e)&&e.add)}function m1(e,t){e.indexOf(t)===-1&&e.push(t)}function g1(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}class y1{constructor(){this.subscriptions=[]}add(t){return m1(this.subscriptions,t),()=>g1(this.subscriptions,t)}notify(t,i,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,i,o);else for(let p=0;p<u;p++){const y=this.subscriptions[p];y&&y(t,i,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const SS=30,zO=e=>!isNaN(parseFloat(e));class RO{constructor(t,i={}){this.version="11.0.15",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,u=!0)=>{const p=Qa.now();this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),u&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=zO(this.current),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Qa.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new y1);const o=this.events[t].add(i);return t==="change"?()=>{o(),Br.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,o){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Qa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>SS)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,SS);return uA(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lp(e,t){return new RO(e,t)}function FO(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,lp(i))}function OO(e,t){const i=Qg(e,t);let{transitionEnd:o={},transition:u={},...p}=i||{};p={...p,...o};for(const y in p){const l=ZF(p[y]);FO(e,y,l)}}function BO({protectedKeys:e,needsAnimating:t},i){const o=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,o}function CA(e,t,{delay:i=0,transitionOverride:o,type:u}={}){var p;let{transition:y=e.getDefaultTransition(),transitionEnd:l,...S}=t;const b=e.getValue("willChange");o&&(y=o);const I=[],M=u&&e.animationState&&e.animationState.getState()[u];for(const k in S){const j=e.getValue(k,(p=e.latestValues[k])!==null&&p!==void 0?p:null),K=S[k];if(K===void 0||M&&BO(M,k))continue;const O={delay:i,elapsed:0,...o1(y||{},k)};let X=!1;if(window.HandoffAppearAnimations){const V=e.getProps()[Ek];if(V){const q=window.HandoffAppearAnimations(V,k);q!==null&&(O.elapsed=q,X=!0)}}j.start(f1(k,j,K,e.shouldReduceMotion&&cc.has(k)?{type:!1}:O,e,X));const B=j.animation;B&&(fg(b)&&(b.add(k),B.then(()=>b.remove(k))),I.push(B))}return l&&Promise.all(I).then(()=>{Br.update(()=>{l&&OO(e,l)})}),I}function E_(e,t,i={}){var o;const u=Qg(e,t,i.type==="exit"?(o=e.presenceContext)===null||o===void 0?void 0:o.custom:void 0);let{transition:p=e.getDefaultTransition()||{}}=u||{};i.transitionOverride&&(p=i.transitionOverride);const y=u?()=>Promise.all(CA(e,u,i)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:I=0,staggerChildren:M,staggerDirection:k}=p;return NO(e,t,I+b,M,k,i)}:()=>Promise.resolve(),{when:S}=p;if(S){const[b,I]=S==="beforeChildren"?[y,l]:[l,y];return b().then(()=>I())}else return Promise.all([y(),l(i.delay)])}function NO(e,t,i=0,o=0,u=1,p){const y=[],l=(e.variantChildren.size-1)*o,S=u===1?(b=0)=>b*o:(b=0)=>l-b*o;return Array.from(e.variantChildren).sort(VO).forEach((b,I)=>{b.notify("AnimationStart",t),y.push(E_(b,t,{...p,delay:i+S(I)}).then(()=>b.notify("AnimationComplete",t)))}),Promise.all(y)}function VO(e,t){return e.sortNodePosition(t)}function jO(e,t,i={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const u=t.map(p=>E_(e,p,i));o=Promise.all(u)}else if(typeof t=="string")o=E_(e,t,i);else{const u=typeof t=="function"?Qg(e,t,i.custom):t;o=Promise.all(CA(e,u,i))}return o.then(()=>{Br.postRender(()=>{e.notify("AnimationComplete",t)})})}const UO=[...Kx].reverse(),$O=Kx.length;function GO(e){return t=>Promise.all(t.map(({animation:i,options:o})=>jO(e,i,o)))}function qO(e){let t=GO(e);const i=WO();let o=!0;const u=S=>(b,I)=>{var M;const k=Qg(e,I,S==="exit"?(M=e.presenceContext)===null||M===void 0?void 0:M.custom:void 0);if(k){const{transition:j,transitionEnd:K,...O}=k;b={...b,...O,...K}}return b};function p(S){t=S(e)}function y(S){const b=e.getProps(),I=e.getVariantContext(!0)||{},M=[],k=new Set;let j={},K=1/0;for(let X=0;X<$O;X++){const B=UO[X],V=i[B],q=b[B]!==void 0?b[B]:I[B],ne=sp(q),he=B===S?V.isActive:null;he===!1&&(K=X);let Se=q===I[B]&&q!==b[B]&&ne;if(Se&&o&&e.manuallyAnimateOnMount&&(Se=!1),V.protectedKeys={...j},!V.isActive&&he===null||!q&&!V.prevProp||Kg(q)||typeof q=="boolean")continue;let we=ZO(V.prevProp,q)||B===S&&V.isActive&&!Se&&ne||X>K&&ne,We=!1;const Fe=Array.isArray(q)?q:[q];let pt=Fe.reduce(u(B),{});he===!1&&(pt={});const{prevResolvedValues:it={}}=V,kt={...it,...pt},Ze=dt=>{we=!0,k.has(dt)&&(We=!0,k.delete(dt)),V.needsAnimating[dt]=!0};for(const dt in kt){const mt=pt[dt],Et=it[dt];if(j.hasOwnProperty(dt))continue;let Pe=!1;y_(mt)&&y_(Et)?Pe=!Hk(mt,Et):Pe=mt!==Et,Pe?mt!=null?Ze(dt):k.add(dt):mt!==void 0&&k.has(dt)?Ze(dt):V.protectedKeys[dt]=!0}V.prevProp=q,V.prevResolvedValues=pt,V.isActive&&(j={...j,...pt}),o&&e.blockInitialAnimation&&(we=!1),we&&(!Se||We)&&M.push(...Fe.map(dt=>({animation:dt,options:{type:B}})))}if(k.size){const X={};k.forEach(B=>{const V=e.getBaseTarget(B);X[B]=V===void 0?null:V}),M.push({animation:X})}let O=!!M.length;return o&&(b.initial===!1||b.initial===b.animate)&&!e.manuallyAnimateOnMount&&(O=!1),o=!1,O?t(M):Promise.resolve()}function l(S,b){var I;if(i[S].isActive===b)return Promise.resolve();(I=e.variantChildren)===null||I===void 0||I.forEach(k=>{var j;return(j=k.animationState)===null||j===void 0?void 0:j.setActive(S,b)}),i[S].isActive=b;const M=y(S);for(const k in i)i[k].protectedKeys={};return M}return{animateChanges:y,setActive:l,setAnimateFunction:p,getState:()=>i}}function ZO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Hk(t,e):!1}function Ol(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WO(){return{animate:Ol(!0),whileInView:Ol(),whileHover:Ol(),whileTap:Ol(),whileDrag:Ol(),whileFocus:Ol(),exit:Ol()}}class HO extends pl{constructor(t){super(t),t.animationState||(t.animationState=qO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Kg(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){}}let KO=0;class XO extends pl{constructor(){super(...arguments),this.id=KO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const u=this.node.animationState.setActive("exit",!t);i&&!t&&u.then(()=>i(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const YO={animation:{Feature:HO},exit:{Feature:XO}},TS=(e,t)=>Math.abs(e-t);function QO(e,t){const i=TS(e.x,t.x),o=TS(e.y,t.y);return Math.sqrt(i**2+o**2)}class EA{constructor(t,i,{transformPagePoint:o,contextWindow:u,dragSnapToOrigin:p=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=Qv(this.lastMoveEventInfo,this.history),k=this.startEvent!==null,j=QO(M.offset,{x:0,y:0})>=3;if(!k&&!j)return;const{point:K}=M,{timestamp:O}=Fr;this.history.push({...K,timestamp:O});const{onStart:X,onMove:B}=this.handlers;k||(X&&X(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,M)},this.handlePointerMove=(M,k)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=Yv(k,this.transformPagePoint),Br.update(this.updatePoint,!0)},this.handlePointerUp=(M,k)=>{this.end();const{onEnd:j,onSessionEnd:K,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const X=Qv(M.type==="pointercancel"?this.lastMoveEventInfo:Yv(k,this.transformPagePoint),this.history);this.startEvent&&j&&j(M,X),K&&K(M,X)},!$k(t))return;this.dragSnapToOrigin=p,this.handlers=i,this.transformPagePoint=o,this.contextWindow=u||window;const y=Yg(t),l=Yv(y,this.transformPagePoint),{point:S}=l,{timestamp:b}=Fr;this.history=[{...S,timestamp:b}];const{onSessionStart:I}=i;I&&I(t,Qv(l,this.history)),this.removeListeners=Wo(Zo(this.contextWindow,"pointermove",this.handlePointerMove),Zo(this.contextWindow,"pointerup",this.handlePointerUp),Zo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),al(this.updatePoint)}}function Yv(e,t){return t?{point:t(e.point)}:e}function CS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qv({point:e},t){return{point:e,delta:CS(e,PA(t)),offset:CS(e,JO(t)),velocity:e8(t,.1)}}function JO(e){return e[0]}function PA(e){return e[e.length-1]}function e8(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,o=null;const u=PA(e);for(;i>=0&&(o=e[i],!(u.timestamp-o.timestamp>Ql(t)));)i--;if(!o)return{x:0,y:0};const p=Ho(u.timestamp-o.timestamp);if(p===0)return{x:0,y:0};const y={x:(u.x-o.x)/p,y:(u.y-o.y)/p};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function ss(e){return e.max-e.min}function P_(e,t=0,i=.01){return Math.abs(e-t)<=i}function ES(e,t,i,o=.5){e.origin=o,e.originPoint=Nn(t.min,t.max,e.origin),e.scale=ss(i)/ss(t),(P_(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Nn(i.min,i.max,e.origin)-e.originPoint,(P_(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Fd(e,t,i,o){ES(e.x,t.x,i.x,o?o.originX:void 0),ES(e.y,t.y,i.y,o?o.originY:void 0)}function PS(e,t,i){e.min=i.min+t.min,e.max=e.min+ss(t)}function t8(e,t,i){PS(e.x,t.x,i.x),PS(e.y,t.y,i.y)}function kS(e,t,i){e.min=t.min-i.min,e.max=e.min+ss(t)}function Od(e,t,i){kS(e.x,t.x,i.x),kS(e.y,t.y,i.y)}function n8(e,{min:t,max:i},o){return t!==void 0&&e<t?e=o?Nn(t,e,o.min):Math.max(e,t):i!==void 0&&e>i&&(e=o?Nn(i,e,o.max):Math.min(e,i)),e}function AS(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function r8(e,{top:t,left:i,bottom:o,right:u}){return{x:AS(e.x,i,u),y:AS(e.y,t,o)}}function MS(e,t){let i=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,o]=[o,i]),{min:i,max:o}}function i8(e,t){return{x:MS(e.x,t.x),y:MS(e.y,t.y)}}function s8(e,t){let i=.5;const o=ss(e),u=ss(t);return u>o?i=ap(t.min,t.max-o,e.min):o>u&&(i=ap(e.min,e.max-u,t.min)),ol(0,1,i)}function o8(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const k_=.35;function a8(e=k_){return e===!1?e=0:e===!0&&(e=k_),{x:IS(e,"left","right"),y:IS(e,"top","bottom")}}function IS(e,t,i){return{min:DS(e,t),max:DS(e,i)}}function DS(e,t){return typeof e=="number"?e:e[t]||0}const LS=()=>({translate:0,scale:1,origin:0,originPoint:0}),fu=()=>({x:LS(),y:LS()}),zS=()=>({min:0,max:0}),nr=()=>({x:zS(),y:zS()});function _s(e){return[e("x"),e("y")]}function kA({top:e,left:t,right:i,bottom:o}){return{x:{min:t,max:i},y:{min:e,max:o}}}function l8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function c8(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}}function Jv(e){return e===void 0||e===1}function A_({scale:e,scaleX:t,scaleY:i}){return!Jv(e)||!Jv(t)||!Jv(i)}function Vl(e){return A_(e)||AA(e)||e.z||e.rotate||e.rotateX||e.rotateY}function AA(e){return RS(e.x)||RS(e.y)}function RS(e){return e&&e!=="0%"}function mg(e,t,i){const o=e-i,u=t*o;return i+u}function FS(e,t,i,o,u){return u!==void 0&&(e=mg(e,u,o)),mg(e,i,o)+t}function M_(e,t=0,i=1,o,u){e.min=FS(e.min,t,i,o,u),e.max=FS(e.max,t,i,o,u)}function MA(e,{x:t,y:i}){M_(e.x,t.translate,t.scale,t.originPoint),M_(e.y,i.translate,i.scale,i.originPoint)}function u8(e,t,i,o=!1){const u=i.length;if(!u)return;t.x=t.y=1;let p,y;for(let l=0;l<u;l++){p=i[l],y=p.projectionDelta;const S=p.instance;S&&S.style&&S.style.display==="contents"||(o&&p.options.layoutScroll&&p.scroll&&p!==p.root&&mu(e,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),y&&(t.x*=y.x.scale,t.y*=y.y.scale,MA(e,y)),o&&Vl(p.latestValues)&&mu(e,p.latestValues))}t.x=OS(t.x),t.y=OS(t.y)}function OS(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ia(e,t){e.min=e.min+t,e.max=e.max+t}function BS(e,t,[i,o,u]){const p=t[u]!==void 0?t[u]:.5,y=Nn(e.min,e.max,p);M_(e,t[i],t[o],y,t.scale)}const h8=["x","scaleX","originX"],d8=["y","scaleY","originY"];function mu(e,t){BS(e.x,t,h8),BS(e.y,t,d8)}function IA(e,t){return kA(c8(e.getBoundingClientRect(),t))}function p8(e,t,i){const o=IA(e,i),{scroll:u}=t;return u&&(Ia(o.x,u.offset.x),Ia(o.y,u.offset.y)),o}const DA=({current:e})=>e?e.ownerDocument.defaultView:null,f8=new WeakMap;class m8{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nr(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=I=>{const{dragSnapToOrigin:M}=this.getProps();M?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Yg(I,"page").point)},p=(I,M)=>{const{drag:k,dragPropagation:j,onDragStart:K}=this.getProps();if(k&&!j&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qk(k),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_s(X=>{let B=this.getAxisMotionValue(X).get()||0;if(yo.test(B)){const{projection:V}=this.visualElement;if(V&&V.layout){const q=V.layout.layoutBox[X];q&&(B=ss(q)*(parseFloat(B)/100))}}this.originPoint[X]=B}),K&&K(I,M);const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},y=(I,M)=>{const{dragPropagation:k,dragDirectionLock:j,onDirectionLock:K,onDrag:O}=this.getProps();if(!k&&!this.openGlobalLock)return;const{offset:X}=M;if(j&&this.currentDirection===null){this.currentDirection=g8(X),this.currentDirection!==null&&K&&K(this.currentDirection);return}this.updateAxis("x",M.point,X),this.updateAxis("y",M.point,X),this.visualElement.render(),O&&O(I,M)},l=(I,M)=>this.stop(I,M),S=()=>_s(I=>{var M;return this.getAnimationState(I)==="paused"&&((M=this.getAxisMotionValue(I).animation)===null||M===void 0?void 0:M.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new EA(t,{onSessionStart:u,onStart:p,onMove:y,onSessionEnd:l,resumeAnimation:S},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:DA(this.visualElement)})}stop(t,i){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:u}=i;this.startAnimation(u);const{onDragEnd:p}=this.getProps();p&&p(t,i)}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,o){const{drag:u}=this.getProps();if(!o||!om(t,u,this.currentDirection))return;const p=this.getAxisMotionValue(t);let y=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(y=n8(y,this.constraints[t],this.elastic[t])),p.set(y)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:o}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,p=this.constraints;i&&du(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&u?this.constraints=r8(u.layoutBox,i):this.constraints=!1,this.elastic=a8(o),p!==this.constraints&&u&&this.constraints&&!this.hasMutatedConstraints&&_s(y=>{this.getAxisMotionValue(y)&&(this.constraints[y]=o8(u.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!du(t))return!1;const o=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const p=p8(o,u.root,this.visualElement.getTransformPagePoint());let y=i8(u.layout.layoutBox,p);if(i){const l=i(l8(y));this.hasMutatedConstraints=!!l,l&&(y=kA(l))}return y}startAnimation(t){const{drag:i,dragMomentum:o,dragElastic:u,dragTransition:p,dragSnapToOrigin:y,onDragTransitionEnd:l}=this.getProps(),S=this.constraints||{},b=_s(I=>{if(!om(I,i,this.currentDirection))return;let M=S&&S[I]||{};y&&(M={min:0,max:0});const k=u?200:1e6,j=u?40:1e7,K={type:"inertia",velocity:o?t[I]:0,bounceStiffness:k,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...p,...M};return this.startAxisValueAnimation(I,K)});return Promise.all(b).then(l)}startAxisValueAnimation(t,i){const o=this.getAxisMotionValue(t);return o.start(f1(t,o,0,i,this.visualElement))}stopAnimation(){_s(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_s(t=>{var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(t){const i="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),u=o[i];return u||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){_s(i=>{const{drag:o}=this.getProps();if(!om(i,o,this.currentDirection))return;const{projection:u}=this.visualElement,p=this.getAxisMotionValue(i);if(u&&u.layout){const{min:y,max:l}=u.layout.layoutBox[i];p.set(t[i]-Nn(y,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:o}=this.visualElement;if(!du(i)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};_s(y=>{const l=this.getAxisMotionValue(y);if(l){const S=l.get();u[y]=s8({min:S,max:S},this.constraints[y])}});const{transformTemplate:p}=this.visualElement.getProps();this.visualElement.current.style.transform=p?p({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),_s(y=>{if(!om(y,t,null))return;const l=this.getAxisMotionValue(y),{min:S,max:b}=this.constraints[y];l.set(Nn(S,b,u[y]))})}addListeners(){if(!this.visualElement.current)return;f8.set(this.visualElement,this);const t=this.visualElement.current,i=Zo(t,"pointerdown",S=>{const{drag:b,dragListener:I=!0}=this.getProps();b&&I&&this.start(S)}),o=()=>{const{dragConstraints:S}=this.getProps();du(S)&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,p=u.addEventListener("measure",o);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),o();const y=Go(window,"resize",()=>this.scalePositionWithinConstraints()),l=u.addEventListener("didUpdate",({delta:S,hasLayoutChanged:b})=>{this.isDragging&&b&&(_s(I=>{const M=this.getAxisMotionValue(I);M&&(this.originPoint[I]+=S[I].translate,M.set(M.get()+S[I].translate))}),this.visualElement.render())});return()=>{y(),i(),p(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:p=!1,dragElastic:y=k_,dragMomentum:l=!0}=t;return{...t,drag:i,dragDirectionLock:o,dragPropagation:u,dragConstraints:p,dragElastic:y,dragMomentum:l}}}function om(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function g8(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class y8 extends pl{constructor(t){super(t),this.removeGroupControls=ri,this.removeListeners=ri,this.controls=new m8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const NS=e=>(t,i)=>{e&&e(t,i)};class v8 extends pl{constructor(){super(...arguments),this.removePointerDownListener=ri}onPointerDown(t){this.session=new EA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:NS(t),onStart:NS(i),onMove:o,onEnd:(p,y)=>{delete this.session,u&&u(p,y)}}}mount(){this.removePointerDownListener=Zo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _8(){const e=Z.useContext(qx);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:o}=e,u=Z.useId();return Z.useEffect(()=>o(u),[]),!t&&i?[!1,()=>i&&i(u)]:[!0]}const km={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const yd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Mt.test(e))e=parseFloat(e);else return e;const i=VS(e,t.target.x),o=VS(e,t.target.y);return`${i}% ${o}%`}},x8={correct:(e,{treeScale:t,projectionDelta:i})=>{const o=e,u=ll.parse(e);if(u.length>5)return o;const p=ll.createTransformer(e),y=typeof u[0]!="number"?1:0,l=i.x.scale*t.x,S=i.y.scale*t.y;u[0+y]/=l,u[1+y]/=S;const b=Nn(l,S,.5);return typeof u[2+y]=="number"&&(u[2+y]/=b),typeof u[3+y]=="number"&&(u[3+y]/=b),p(u)}};class w8 extends tt.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:o,layoutId:u}=this.props,{projection:p}=t;wF(b8),p&&(i.group&&i.group.add(p),o&&o.register&&u&&o.register(p),p.root.didUpdate(),p.addEventListener("animationComplete",()=>{this.safeToRemove()}),p.setOptions({...p.options,onExitComplete:()=>this.safeToRemove()})),km.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:o,drag:u,isPresent:p}=this.props,y=o.projection;return y&&(y.isPresent=p,u||t.layoutDependency!==i||i===void 0?y.willUpdate():this.safeToRemove(),t.isPresent!==p&&(p?y.promote():y.relegate()||Br.postRender(()=>{const l=y.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Hx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:o}=this.props,{projection:u}=t;u&&(u.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function LA(e){const[t,i]=_8(),o=Z.useContext(Ak);return tt.createElement(w8,{...e,layoutGroup:o,switchLayoutGroup:Z.useContext(Mk),isPresent:t,safeToRemove:i})}const b8={borderRadius:{...yd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yd,borderTopRightRadius:yd,borderBottomLeftRadius:yd,borderBottomRightRadius:yd,boxShadow:x8},zA=["TopLeft","TopRight","BottomLeft","BottomRight"],S8=zA.length,jS=e=>typeof e=="string"?parseFloat(e):e,US=e=>typeof e=="number"||Mt.test(e);function T8(e,t,i,o,u,p){u?(e.opacity=Nn(0,i.opacity!==void 0?i.opacity:1,C8(o)),e.opacityExit=Nn(t.opacity!==void 0?t.opacity:1,0,E8(o))):p&&(e.opacity=Nn(t.opacity!==void 0?t.opacity:1,i.opacity!==void 0?i.opacity:1,o));for(let y=0;y<S8;y++){const l=`border${zA[y]}Radius`;let S=$S(t,l),b=$S(i,l);if(S===void 0&&b===void 0)continue;S||(S=0),b||(b=0),S===0||b===0||US(S)===US(b)?(e[l]=Math.max(Nn(jS(S),jS(b),o),0),(yo.test(b)||yo.test(S))&&(e[l]+="%")):e[l]=b}(t.rotate||i.rotate)&&(e.rotate=Nn(t.rotate||0,i.rotate||0,o))}function $S(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const C8=RA(0,.5,yA),E8=RA(.5,.95,ri);function RA(e,t,i){return o=>o<e?0:o>t?1:i(ap(e,t,o))}function GS(e,t){e.min=t.min,e.max=t.max}function vs(e,t){GS(e.x,t.x),GS(e.y,t.y)}function qS(e,t,i,o,u){return e-=t,e=mg(e,1/i,o),u!==void 0&&(e=mg(e,1/u,o)),e}function P8(e,t=0,i=1,o=.5,u,p=e,y=e){if(yo.test(t)&&(t=parseFloat(t),t=Nn(y.min,y.max,t/100)-y.min),typeof t!="number")return;let l=Nn(p.min,p.max,o);e===p&&(l-=t),e.min=qS(e.min,t,i,l,u),e.max=qS(e.max,t,i,l,u)}function ZS(e,t,[i,o,u],p,y){P8(e,t[i],t[o],t[u],t.scale,p,y)}const k8=["x","scaleX","originX"],A8=["y","scaleY","originY"];function WS(e,t,i,o){ZS(e.x,t,k8,i?i.x:void 0,o?o.x:void 0),ZS(e.y,t,A8,i?i.y:void 0,o?o.y:void 0)}function HS(e){return e.translate===0&&e.scale===1}function FA(e){return HS(e.x)&&HS(e.y)}function M8(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function OA(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function KS(e){return ss(e.x)/ss(e.y)}class I8{constructor(){this.members=[]}add(t){m1(this.members,t),t.scheduleRender()}remove(t){if(g1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(u=>t===u);if(i===0)return!1;let o;for(let u=i;u>=0;u--){const p=this.members[u];if(p.isPresent!==!1){o=p;break}}return o?(this.promote(o),!0):!1}promote(t,i){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,i&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:o}=t;i.onExitComplete&&i.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XS(e,t,i){let o="";const u=e.x.translate/t.x,p=e.y.translate/t.y;if((u||p)&&(o=`translate3d(${u}px, ${p}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),i){const{rotate:S,rotateX:b,rotateY:I}=i;S&&(o+=`rotate(${S}deg) `),b&&(o+=`rotateX(${b}deg) `),I&&(o+=`rotateY(${I}deg) `)}const y=e.x.scale*t.x,l=e.y.scale*t.y;return(y!==1||l!==1)&&(o+=`scale(${y}, ${l})`),o||"none"}const D8=(e,t)=>e.depth-t.depth;class L8{constructor(){this.children=[],this.isDirty=!1}add(t){m1(this.children,t),this.isDirty=!0}remove(t){g1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(D8),this.isDirty=!1,this.children.forEach(t)}}function z8(e,t){const i=Qa.now(),o=({timestamp:u})=>{const p=u-i;p>=t&&(al(o),e(p-t))};return Br.read(o,!0),()=>al(o)}function R8(e){window.MotionDebug&&window.MotionDebug.record(e)}function F8(e){return e instanceof SVGElement&&e.tagName!=="svg"}function O8(e,t,i){const o=ni(e)?e:lp(e);return o.start(f1("",o,t,i)),o.animation}const YS=["","X","Y","Z"],B8={visibility:"hidden"},QS=1e3;let N8=0;const jl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function BA({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(y={},l=t==null?void 0:t()){this.id=N8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jl.totalNodes=jl.resolvedTargetDeltas=jl.recalculatedProjection=0,this.nodes.forEach(U8),this.nodes.forEach(W8),this.nodes.forEach(H8),this.nodes.forEach($8),R8(jl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let S=0;S<this.path.length;S++)this.path[S].shouldResetTransform=!0;this.root===this&&(this.nodes=new L8)}addEventListener(y,l){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new y1),this.eventHandlers.get(y).add(l)}notifyListeners(y,...l){const S=this.eventHandlers.get(y);S&&S.notify(...l)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=F8(y),this.instance=y;const{layoutId:S,layout:b,visualElement:I}=this.options;if(I&&!I.current&&I.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(b||S)&&(this.isLayoutDirty=!0),e){let M;const k=()=>this.root.updateBlockedByResize=!1;e(y,()=>{this.root.updateBlockedByResize=!0,M&&M(),M=z8(k,250),km.hasAnimatedSinceResize&&(km.hasAnimatedSinceResize=!1,this.nodes.forEach(eT))})}S&&this.root.registerSharedNode(S,this),this.options.animate!==!1&&I&&(S||b)&&this.addEventListener("didUpdate",({delta:M,hasLayoutChanged:k,hasRelativeTargetChanged:j,layout:K})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||I.getDefaultTransition()||J8,{onLayoutAnimationStart:X,onLayoutAnimationComplete:B}=I.getProps(),V=!this.targetLayout||!OA(this.targetLayout,K)||j,q=!k&&j;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||q||k&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(M,q);const ne={...o1(O,"layout"),onPlay:X,onComplete:B};(I.shouldReduceMotion||this.options.layoutRoot)&&(ne.delay=0,ne.type=!1),this.startAnimation(ne)}else k||eT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=K})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,al(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K8),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let I=0;I<this.path.length;I++){const M=this.path[I];M.shouldResetTransform=!0,M.updateScroll("snapshot"),M.options.layoutRoot&&M.willUpdate(!1)}const{layoutId:l,layout:S}=this.options;if(l===void 0&&!S)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JS);return}this.isUpdating||this.nodes.forEach(q8),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(Z8),this.nodes.forEach(V8),this.nodes.forEach(j8),this.clearAllSnapshots();const l=Qa.now();Fr.delta=ol(0,1e3/60,l-Fr.timestamp),Fr.timestamp=l,Fr.isProcessing=!0,Gv.update.process(Fr),Gv.preRender.process(Fr),Gv.render.process(Fr),Fr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hx.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(G8),this.sharedNodes.forEach(X8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Br.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Br.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let S=0;S<this.path.length;S++)this.path[S].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:y,isRoot:o(this.instance),offset:i(this.instance)})}resetTransform(){if(!u)return;const y=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!FA(this.projectionDelta),S=this.getTransformTemplate(),b=S?S(this.latestValues,""):void 0,I=b!==this.prevTransformTemplateValue;y&&(l||Vl(this.latestValues)||I)&&(u(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const l=this.measurePageBox();let S=this.removeElementScroll(l);return y&&(S=this.removeTransform(S)),eB(S),{animationId:this.root.animationId,measuredBox:l,layoutBox:S,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:y}=this.options;if(!y)return nr();const l=y.measureViewportBox(),{scroll:S}=this.root;return S&&(Ia(l.x,S.offset.x),Ia(l.y,S.offset.y)),l}removeElementScroll(y){const l=nr();vs(l,y);for(let S=0;S<this.path.length;S++){const b=this.path[S],{scroll:I,options:M}=b;if(b!==this.root&&I&&M.layoutScroll){if(I.isRoot){vs(l,y);const{scroll:k}=this.root;k&&(Ia(l.x,-k.offset.x),Ia(l.y,-k.offset.y))}Ia(l.x,I.offset.x),Ia(l.y,I.offset.y)}}return l}applyTransform(y,l=!1){const S=nr();vs(S,y);for(let b=0;b<this.path.length;b++){const I=this.path[b];!l&&I.options.layoutScroll&&I.scroll&&I!==I.root&&mu(S,{x:-I.scroll.offset.x,y:-I.scroll.offset.y}),Vl(I.latestValues)&&mu(S,I.latestValues)}return Vl(this.latestValues)&&mu(S,this.latestValues),S}removeTransform(y){const l=nr();vs(l,y);for(let S=0;S<this.path.length;S++){const b=this.path[S];if(!b.instance||!Vl(b.latestValues))continue;A_(b.latestValues)&&b.updateSnapshot();const I=nr(),M=b.measurePageBox();vs(I,M),WS(l,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,I)}return Vl(this.latestValues)&&WS(l,this.latestValues),l}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var l;const S=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=S.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=S.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=S.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==S;if(!(y||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:M,layoutId:k}=this.options;if(!(!this.layout||!(M||k))){if(this.resolvedRelativeTargetAt=Fr.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Od(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nr(),this.targetWithTransforms=nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vs(this.target,this.layout.layoutBox),MA(this.target,this.targetDelta)):vs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Od(this.relativeTargetOrigin,this.target,j.target),vs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||A_(this.parent.latestValues)||AA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const l=this.getLead(),S=!!this.resumingFrom||this!==l;let b=!0;if((this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty)&&(b=!1),S&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===Fr.timestamp&&(b=!1),b)return;const{layout:I,layoutId:M}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(I||M))return;vs(this.layoutCorrected,this.layout.layoutBox);const k=this.treeScale.x,j=this.treeScale.y;u8(this.layoutCorrected,this.treeScale,this.path,S),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=nr());const{target:K}=l;if(!K){this.projectionTransform&&(this.projectionDelta=fu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fu(),this.projectionDeltaWithTransform=fu());const O=this.projectionTransform;Fd(this.projectionDelta,this.layoutCorrected,K,this.latestValues),this.projectionTransform=XS(this.projectionDelta,this.treeScale),(this.projectionTransform!==O||this.treeScale.x!==k||this.treeScale.y!==j)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",K)),jl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),y){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(y,l=!1){const S=this.snapshot,b=S?S.latestValues:{},I={...this.latestValues},M=fu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const k=nr(),j=S?S.source:void 0,K=this.layout?this.layout.source:void 0,O=j!==K,X=this.getStack(),B=!X||X.members.length<=1,V=!!(O&&!B&&this.options.crossfade===!0&&!this.path.some(Q8));this.animationProgress=0;let q;this.mixTargetDelta=ne=>{const he=ne/1e3;tT(M.x,y.x,he),tT(M.y,y.y,he),this.setTargetDelta(M),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Od(k,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y8(this.relativeTarget,this.relativeTargetOrigin,k,he),q&&M8(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=nr()),vs(q,this.relativeTarget)),O&&(this.animationValues=I,T8(I,b,this.latestValues,he,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=he},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(al(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Br.update(()=>{km.hasAnimatedSinceResize=!0,this.currentAnimation=O8(0,QS,{...y,onUpdate:l=>{this.mixTargetDelta(l),y.onUpdate&&y.onUpdate(l)},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:l,target:S,layout:b,latestValues:I}=y;if(!(!l||!S||!b)){if(this!==y&&this.layout&&b&&NA(this.options.animationType,this.layout.layoutBox,b.layoutBox)){S=this.target||nr();const M=ss(this.layout.layoutBox.x);S.x.min=y.target.x.min,S.x.max=S.x.min+M;const k=ss(this.layout.layoutBox.y);S.y.min=y.target.y.min,S.y.max=S.y.min+k}vs(l,S),mu(l,I),Fd(this.projectionDeltaWithTransform,this.layoutCorrected,l,I)}}registerSharedNode(y,l){this.sharedNodes.has(y)||this.sharedNodes.set(y,new I8),this.sharedNodes.get(y).add(l);const b=l.options.initialPromotionConfig;l.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(l):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var y;const{layoutId:l}=this.options;return l?((y=this.getStack())===null||y===void 0?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:l}=this.options;return l?(y=this.getStack())===null||y===void 0?void 0:y.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:l,preserveFollowOpacity:S}={}){const b=this.getStack();b&&b.promote(this,S),y&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetRotation(){const{visualElement:y}=this.options;if(!y)return;let l=!1;const{latestValues:S}=y;if((S.rotate||S.rotateX||S.rotateY||S.rotateZ)&&(l=!0),!l)return;const b={};for(let I=0;I<YS.length;I++){const M="rotate"+YS[I];S[M]&&(b[M]=S[M],y.setStaticValue(M,0))}y.render();for(const I in b)y.setStaticValue(I,b[I]);y.scheduleRender()}getProjectionStyles(y){var l,S;if(!this.instance||this.isSVG)return;if(!this.isVisible)return B8;const b={visibility:""},I=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=Em(y==null?void 0:y.pointerEvents)||"",b.transform=I?I(this.latestValues,""):"none",b;const M=this.getLead();if(!this.projectionDelta||!this.layout||!M.target){const O={};return this.options.layoutId&&(O.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,O.pointerEvents=Em(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Vl(this.latestValues)&&(O.transform=I?I({},""):"none",this.hasProjected=!1),O}const k=M.animationValues||M.latestValues;this.applyTransformsToTarget(),b.transform=XS(this.projectionDeltaWithTransform,this.treeScale,k),I&&(b.transform=I(k,b.transform));const{x:j,y:K}=this.projectionDelta;b.transformOrigin=`${j.origin*100}% ${K.origin*100}% 0`,M.animationValues?b.opacity=M===this?(S=(l=k.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&S!==void 0?S:1:this.preserveOpacity?this.latestValues.opacity:k.opacityExit:b.opacity=M===this?k.opacity!==void 0?k.opacity:"":k.opacityExit!==void 0?k.opacityExit:0;for(const O in cg){if(k[O]===void 0)continue;const{correct:X,applyTo:B}=cg[O],V=b.transform==="none"?k[O]:X(k[O],M);if(B){const q=B.length;for(let ne=0;ne<q;ne++)b[B[ne]]=V}else b[O]=V}return this.options.layoutId&&(b.pointerEvents=M===this?Em(y==null?void 0:y.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var l;return(l=y.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(JS),this.root.sharedNodes.clear()}}}function V8(e){e.updateLayout()}function j8(e){var t;const i=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:u}=e.layout,{animationType:p}=e.options,y=i.source!==e.layout.source;p==="size"?_s(M=>{const k=y?i.measuredBox[M]:i.layoutBox[M],j=ss(k);k.min=o[M].min,k.max=k.min+j}):NA(p,i.layoutBox,o)&&_s(M=>{const k=y?i.measuredBox[M]:i.layoutBox[M],j=ss(o[M]);k.max=k.min+j,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[M].max=e.relativeTarget[M].min+j)});const l=fu();Fd(l,o,i.layoutBox);const S=fu();y?Fd(S,e.applyTransform(u,!0),i.measuredBox):Fd(S,o,i.layoutBox);const b=!FA(l);let I=!1;if(!e.resumeFrom){const M=e.getClosestProjectingParent();if(M&&!M.resumeFrom){const{snapshot:k,layout:j}=M;if(k&&j){const K=nr();Od(K,i.layoutBox,k.layoutBox);const O=nr();Od(O,o,j.layoutBox),OA(K,O)||(I=!0),M.options.layoutRoot&&(e.relativeTarget=O,e.relativeTargetOrigin=K,e.relativeParent=M)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:S,layoutDelta:l,hasLayoutChanged:b,hasRelativeTargetChanged:I})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function U8(e){jl.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function G8(e){e.clearSnapshot()}function JS(e){e.clearMeasurements()}function q8(e){e.isLayoutDirty=!1}function Z8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function W8(e){e.resolveTargetDelta()}function H8(e){e.calcProjection()}function K8(e){e.resetRotation()}function X8(e){e.removeLeadSnapshot()}function tT(e,t,i){e.translate=Nn(t.translate,0,i),e.scale=Nn(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function nT(e,t,i,o){e.min=Nn(t.min,i.min,o),e.max=Nn(t.max,i.max,o)}function Y8(e,t,i,o){nT(e.x,t.x,i.x,o),nT(e.y,t.y,i.y,o)}function Q8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const J8={duration:.45,ease:[.4,0,.1,1]},rT=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),iT=rT("applewebkit/")&&!rT("chrome/")?Math.round:ri;function sT(e){e.min=iT(e.min),e.max=iT(e.max)}function eB(e){sT(e.x),sT(e.y)}function NA(e,t,i){return e==="position"||e==="preserve-aspect"&&!P_(KS(t),KS(i),.2)}const tB=BA({attachResizeListener:(e,t)=>Go(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),e0={current:void 0},VA=BA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!e0.current){const e=new tB({});e.mount(window),e.setOptions({layoutScroll:!0}),e0.current=e}return e0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nB={pan:{Feature:v8},drag:{Feature:y8,ProjectionNode:VA,MeasureLayout:LA}},I_={current:null},jA={current:!1};function rB(){if(jA.current=!0,!!Zx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>I_.current=e.matches;e.addListener(t),t()}else I_.current=!1}function iB(e,t,i){const{willChange:o}=t;for(const u in t){const p=t[u],y=i[u];if(ni(p))e.addValue(u,p),fg(o)&&o.add(u);else if(ni(y))e.addValue(u,lp(p,{owner:e})),fg(o)&&o.remove(u);else if(y!==p)if(e.hasValue(u)){const l=e.getValue(u);!l.hasAnimated&&l.set(p)}else{const l=e.getStaticValue(u);e.addValue(u,lp(l!==void 0?l:p,{owner:e}))}}for(const u in i)t[u]===void 0&&e.removeValue(u);return t}const oT=new WeakMap,sB=[...Jk,ei,ll],oB=e=>sB.find(Qk(e)),UA=Object.keys(op),aB=UA.length,aT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],lB=Xx.length;class cB{constructor({parent:t,props:i,presenceContext:o,reducedMotionConfig:u,blockInitialAnimation:p,visualState:y},l={}){this.resolveKeyframes=(k,j,K,O)=>new this.KeyframeResolver(k,j,K,O,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Br.render(this.render,!1,!0);const{latestValues:S,renderState:b}=y;this.latestValues=S,this.baseTarget={...S},this.initialValues=i.initial?{...S}:{},this.renderState=b,this.parent=t,this.props=i,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=l,this.blockInitialAnimation=!!p,this.isControllingVariants=Xg(i),this.isVariantNode=kk(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:I,...M}=this.scrapeMotionValuesFromProps(i,{});for(const k in M){const j=M[k];S[k]!==void 0&&ni(j)&&(j.set(S[k],!1),fg(I)&&I.add(k))}}scrapeMotionValuesFromProps(t,i){return{}}mount(t){this.current=t,oT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),jA.current||rB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:I_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oT.delete(this.current),this.projection&&this.projection.unmount(),al(this.notifyUpdate),al(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,i){const o=cc.has(t),u=i.on("change",y=>{this.latestValues[t]=y,this.props.onUpdate&&Br.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),p=i.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{u(),p()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...i},o,u,p){let y,l;for(let S=0;S<aB;S++){const b=UA[S],{isEnabled:I,Feature:M,ProjectionNode:k,MeasureLayout:j}=op[b];k&&(y=k),I(i)&&(!this.features[b]&&M&&(this.features[b]=new M(this)),j&&(l=j))}if((this.type==="html"||this.type==="svg")&&!this.projection&&y){this.projection=new y(this.latestValues,this.parent&&this.parent.projection);const{layoutId:S,layout:b,drag:I,dragConstraints:M,layoutScroll:k,layoutRoot:j}=i;this.projection.setOptions({layoutId:S,layout:b,alwaysMeasureLayout:!!I||M&&du(M),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof b=="string"?b:"both",initialPromotionConfig:p,layoutScroll:k,layoutRoot:j})}return l}updateFeatures(){for(const t in this.features){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let o=0;o<aT.length;o++){const u=aT[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const p=t["on"+u];p&&(this.propEventSubscriptions[u]=this.on(u,p))}this.prevMotionValues=iB(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const i={};for(let o=0;o<lB;o++){const u=Xx[o],p=this.props[u];(sp(p)||p===!1)&&(i[u]=p)}return i}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){i!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,i)),this.values.set(t,i),this.latestValues[t]=i.get()}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&i!==void 0&&(o=lp(i===null?void 0:i,{owner:this}),this.addValue(t,o)),o}readValue(t,i){var o;let u=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(o=this.getBaseTargetFromProps(this.props,t))!==null&&o!==void 0?o:this.readValueFromInstance(this.current,t,this.options);return u!=null&&(typeof u=="string"&&(Xk(u)||Kk(u))?u=parseFloat(u):!oB(u)&&ll.test(i)&&(u=aA(t,i)),this.setBaseTarget(t,ni(u)?u.get():u)),ni(u)?u.get():u}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i,o;const{initial:u}=this.props,p=typeof u=="string"||typeof u=="object"?(o=s1(this.props,u,(i=this.presenceContext)===null||i===void 0?void 0:i.custom))===null||o===void 0?void 0:o[t]:void 0;if(u&&p!==void 0)return p;const y=this.getBaseTargetFromProps(this.props,t);return y!==void 0&&!ni(y)?y:this.initialValues[t]!==void 0&&p===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new y1),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class $A extends cB{constructor(){super(...arguments),this.KeyframeResolver=lA}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:o}){delete i[t],delete o[t]}}function uB(e){return window.getComputedStyle(e)}class hB extends $A{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,i){if(cc.has(i)){const o=c1(i);return o&&o.default||0}else{const o=uB(t),u=(Lk(i)?o.getPropertyValue(i):o[i])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:i}){return IA(t,i)}build(t,i,o,u){e1(t,i,o,u.transformTemplate)}scrapeMotionValuesFromProps(t,i){return i1(t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ni(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}renderInstance(t,i,o,u){Bk(t,i,o,u)}}class dB extends $A{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(cc.has(i)){const o=c1(i);return o&&o.default||0}return i=Nk.has(i)?i:Wx(i),t.getAttribute(i)}measureInstanceViewportBox(){return nr()}scrapeMotionValuesFromProps(t,i){return jk(t,i)}build(t,i,o,u){n1(t,i,o,this.isSVGTag,u.transformTemplate)}renderInstance(t,i,o,u){Vk(t,i,o,u)}mount(t){this.isSVGTag=r1(t.tagName),super.mount(t)}}const pB=(e,t)=>Yx(e)?new dB(t,{enableHardwareAcceleration:!1}):new hB(t,{enableHardwareAcceleration:!0}),fB={layout:{ProjectionNode:VA,MeasureLayout:LA}},mB={...YO,...u6,...nB,...fB},po=_F((e,t)=>YF(e,t,mB,pB));var t0="focusScope.autoFocusOnMount",n0="focusScope.autoFocusOnUnmount",lT={bubbles:!1,cancelable:!0},gB="FocusScope",GA=Z.forwardRef((e,t)=>{const{loop:i=!1,trapped:o=!1,onMountAutoFocus:u,onUnmountAutoFocus:p,...y}=e,[l,S]=Z.useState(null),b=Ps(u),I=Ps(p),M=Z.useRef(null),k=Si(t,O=>S(O)),j=Z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Z.useEffect(()=>{if(o){let O=function(q){if(j.paused||!l)return;const ne=q.target;l.contains(ne)?M.current=ne:ka(M.current,{select:!0})},X=function(q){if(j.paused||!l)return;const ne=q.relatedTarget;ne!==null&&(l.contains(ne)||ka(M.current,{select:!0}))},B=function(q){if(document.activeElement===document.body)for(const he of q)he.removedNodes.length>0&&ka(l)};document.addEventListener("focusin",O),document.addEventListener("focusout",X);const V=new MutationObserver(B);return l&&V.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",O),document.removeEventListener("focusout",X),V.disconnect()}}},[o,l,j.paused]),Z.useEffect(()=>{if(l){uT.add(j);const O=document.activeElement;if(!l.contains(O)){const B=new CustomEvent(t0,lT);l.addEventListener(t0,b),l.dispatchEvent(B),B.defaultPrevented||(yB(bB(qA(l)),{select:!0}),document.activeElement===O&&ka(l))}return()=>{l.removeEventListener(t0,b),setTimeout(()=>{const B=new CustomEvent(n0,lT);l.addEventListener(n0,I),l.dispatchEvent(B),B.defaultPrevented||ka(O??document.body,{select:!0}),l.removeEventListener(n0,I),uT.remove(j)},0)}}},[l,b,I,j]);const K=Z.useCallback(O=>{if(!i&&!o||j.paused)return;const X=O.key==="Tab"&&!O.altKey&&!O.ctrlKey&&!O.metaKey,B=document.activeElement;if(X&&B){const V=O.currentTarget,[q,ne]=vB(V);q&&ne?!O.shiftKey&&B===ne?(O.preventDefault(),i&&ka(q,{select:!0})):O.shiftKey&&B===q&&(O.preventDefault(),i&&ka(ne,{select:!0})):B===V&&O.preventDefault()}},[i,o,j.paused]);return de.jsx(ar.div,{tabIndex:-1,...y,ref:k,onKeyDown:K})});GA.displayName=gB;function yB(e,{select:t=!1}={}){const i=document.activeElement;for(const o of e)if(ka(o,{select:t}),document.activeElement!==i)return}function vB(e){const t=qA(e),i=cT(t,e),o=cT(t.reverse(),e);return[i,o]}function qA(e){const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const u=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||u?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t}function cT(e,t){for(const i of e)if(!_B(i,{upTo:t}))return i}function _B(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function xB(e){return e instanceof HTMLInputElement&&"select"in e}function ka(e,{select:t=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&xB(e)&&t&&e.select()}}var uT=wB();function wB(){let e=[];return{add(t){const i=e[0];t!==i&&(i==null||i.pause()),e=hT(e,t),e.unshift(t)},remove(t){var i;e=hT(e,t),(i=e[0])==null||i.resume()}}}function hT(e,t){const i=[...e],o=i.indexOf(t);return o!==-1&&i.splice(o,1),i}function bB(e){return e.filter(t=>t.tagName!=="A")}var r0=0;function SB(){Z.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dT()),document.body.insertAdjacentElement("beforeend",e[1]??dT()),r0++,()=>{r0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),r0--}},[])}function dT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fo=function(){return fo=Object.assign||function(t){for(var i,o=1,u=arguments.length;o<u;o++){i=arguments[o];for(var p in i)Object.prototype.hasOwnProperty.call(i,p)&&(t[p]=i[p])}return t},fo.apply(this,arguments)};function ZA(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)t.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(i[o[u]]=e[o[u]]);return i}function TB(e,t,i){if(i||arguments.length===2)for(var o=0,u=t.length,p;o<u;o++)(p||!(o in t))&&(p||(p=Array.prototype.slice.call(t,0,o)),p[o]=t[o]);return e.concat(p||Array.prototype.slice.call(t))}var Am="right-scroll-bar-position",Mm="width-before-scroll-bar",CB="with-scroll-bars-hidden",EB="--removed-body-scroll-bar-size";function i0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function PB(e,t){var i=Z.useState(function(){return{value:e,callback:t,facade:{get current(){return i.value},set current(o){var u=i.value;u!==o&&(i.value=o,i.callback(o,u))}}}})[0];return i.callback=t,i.facade}var kB=typeof window<"u"?Z.useLayoutEffect:Z.useEffect,pT=new WeakMap;function AB(e,t){var i=PB(null,function(o){return e.forEach(function(u){return i0(u,o)})});return kB(function(){var o=pT.get(i);if(o){var u=new Set(o),p=new Set(e),y=i.current;u.forEach(function(l){p.has(l)||i0(l,null)}),p.forEach(function(l){u.has(l)||i0(l,y)})}pT.set(i,e)},[e]),i}function MB(e){return e}function IB(e,t){t===void 0&&(t=MB);var i=[],o=!1,u={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(p){var y=t(p,o);return i.push(y),function(){i=i.filter(function(l){return l!==y})}},assignSyncMedium:function(p){for(o=!0;i.length;){var y=i;i=[],y.forEach(p)}i={push:function(l){return p(l)},filter:function(){return i}}},assignMedium:function(p){o=!0;var y=[];if(i.length){var l=i;i=[],l.forEach(p),y=i}var S=function(){var I=y;y=[],I.forEach(p)},b=function(){return Promise.resolve().then(S)};b(),i={push:function(I){y.push(I),b()},filter:function(I){return y=y.filter(I),i}}}};return u}function DB(e){e===void 0&&(e={});var t=IB(null);return t.options=fo({async:!0,ssr:!1},e),t}var WA=function(e){var t=e.sideCar,i=ZA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return Z.createElement(o,fo({},i))};WA.isSideCarExport=!0;function LB(e,t){return e.useMedium(t),WA}var HA=DB(),s0=function(){},ey=Z.forwardRef(function(e,t){var i=Z.useRef(null),o=Z.useState({onScrollCapture:s0,onWheelCapture:s0,onTouchMoveCapture:s0}),u=o[0],p=o[1],y=e.forwardProps,l=e.children,S=e.className,b=e.removeScrollBar,I=e.enabled,M=e.shards,k=e.sideCar,j=e.noIsolation,K=e.inert,O=e.allowPinchZoom,X=e.as,B=X===void 0?"div":X,V=e.gapMode,q=ZA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=k,he=AB([i,t]),Se=fo(fo({},q),u);return Z.createElement(Z.Fragment,null,I&&Z.createElement(ne,{sideCar:HA,removeScrollBar:b,shards:M,noIsolation:j,inert:K,setCallbacks:p,allowPinchZoom:!!O,lockRef:i,gapMode:V}),y?Z.cloneElement(Z.Children.only(l),fo(fo({},Se),{ref:he})):Z.createElement(B,fo({},Se,{className:S,ref:he}),l))});ey.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ey.classNames={fullWidth:Mm,zeroRight:Am};var zB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=zB();return t&&e.setAttribute("nonce",t),e}function FB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function OB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var BB=function(){var e=0,t=null;return{add:function(i){e==0&&(t=RB())&&(FB(t,i),OB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},NB=function(){var e=BB();return function(t,i){Z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&i])}},KA=function(){var e=NB(),t=function(i){var o=i.styles,u=i.dynamic;return e(o,u),null};return t},VB={left:0,top:0,right:0,gap:0},o0=function(e){return parseInt(e||"",10)||0},jB=function(e){var t=window.getComputedStyle(document.body),i=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],u=t[e==="padding"?"paddingRight":"marginRight"];return[o0(i),o0(o),o0(u)]},UB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return VB;var t=jB(e),i=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-i+t[2]-t[0])}},$B=KA(),Cu="data-scroll-locked",GB=function(e,t,i,o){var u=e.left,p=e.top,y=e.right,l=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(CB,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(l,"px ").concat(o,`;
  }
  body[`).concat(Cu,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),i==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(p,`px;
    padding-right: `).concat(y,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(o,`;
    `),i==="padding"&&"padding-right: ".concat(l,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Am,` {
    right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(Mm,` {
    margin-right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(Am," .").concat(Am,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Mm," .").concat(Mm,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Cu,`] {
    `).concat(EB,": ").concat(l,`px;
  }
`)},fT=function(){var e=parseInt(document.body.getAttribute(Cu)||"0",10);return isFinite(e)?e:0},qB=function(){Z.useEffect(function(){return document.body.setAttribute(Cu,(fT()+1).toString()),function(){var e=fT()-1;e<=0?document.body.removeAttribute(Cu):document.body.setAttribute(Cu,e.toString())}},[])},ZB=function(e){var t=e.noRelative,i=e.noImportant,o=e.gapMode,u=o===void 0?"margin":o;qB();var p=Z.useMemo(function(){return UB(u)},[u]);return Z.createElement($B,{styles:GB(p,!t,u,i?"":"!important")})},D_=!1;if(typeof window<"u")try{var am=Object.defineProperty({},"passive",{get:function(){return D_=!0,!0}});window.addEventListener("test",am,am),window.removeEventListener("test",am,am)}catch{D_=!1}var Yc=D_?{passive:!1}:!1,WB=function(e){return e.tagName==="TEXTAREA"},XA=function(e,t){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[t]!=="hidden"&&!(i.overflowY===i.overflowX&&!WB(e)&&i[t]==="visible")},HB=function(e){return XA(e,"overflowY")},KB=function(e){return XA(e,"overflowX")},mT=function(e,t){var i=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var u=YA(e,o);if(u){var p=QA(e,o),y=p[1],l=p[2];if(y>l)return!0}o=o.parentNode}while(o&&o!==i.body);return!1},XB=function(e){var t=e.scrollTop,i=e.scrollHeight,o=e.clientHeight;return[t,i,o]},YB=function(e){var t=e.scrollLeft,i=e.scrollWidth,o=e.clientWidth;return[t,i,o]},YA=function(e,t){return e==="v"?HB(t):KB(t)},QA=function(e,t){return e==="v"?XB(t):YB(t)},QB=function(e,t){return e==="h"&&t==="rtl"?-1:1},JB=function(e,t,i,o,u){var p=QB(e,window.getComputedStyle(t).direction),y=p*o,l=i.target,S=t.contains(l),b=!1,I=y>0,M=0,k=0;do{var j=QA(e,l),K=j[0],O=j[1],X=j[2],B=O-X-p*K;(K||B)&&YA(e,l)&&(M+=B,k+=K),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!S&&l!==document.body||S&&(t.contains(l)||t===l));return(I&&(Math.abs(M)<1||!u)||!I&&(Math.abs(k)<1||!u))&&(b=!0),b},lm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gT=function(e){return[e.deltaX,e.deltaY]},yT=function(e){return e&&"current"in e?e.current:e},eN=function(e,t){return e[0]===t[0]&&e[1]===t[1]},tN=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},nN=0,Qc=[];function rN(e){var t=Z.useRef([]),i=Z.useRef([0,0]),o=Z.useRef(),u=Z.useState(nN++)[0],p=Z.useState(KA)[0],y=Z.useRef(e);Z.useEffect(function(){y.current=e},[e]),Z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var O=TB([e.lockRef.current],(e.shards||[]).map(yT),!0).filter(Boolean);return O.forEach(function(X){return X.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),O.forEach(function(X){return X.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var l=Z.useCallback(function(O,X){if("touches"in O&&O.touches.length===2||O.type==="wheel"&&O.ctrlKey)return!y.current.allowPinchZoom;var B=lm(O),V=i.current,q="deltaX"in O?O.deltaX:V[0]-B[0],ne="deltaY"in O?O.deltaY:V[1]-B[1],he,Se=O.target,ke=Math.abs(q)>Math.abs(ne)?"h":"v";if("touches"in O&&ke==="h"&&Se.type==="range")return!1;var we=mT(ke,Se);if(!we)return!0;if(we?he=ke:(he=ke==="v"?"h":"v",we=mT(ke,Se)),!we)return!1;if(!o.current&&"changedTouches"in O&&(q||ne)&&(o.current=he),!he)return!0;var We=o.current||he;return JB(We,X,O,We==="h"?q:ne,!0)},[]),S=Z.useCallback(function(O){var X=O;if(!(!Qc.length||Qc[Qc.length-1]!==p)){var B="deltaY"in X?gT(X):lm(X),V=t.current.filter(function(he){return he.name===X.type&&(he.target===X.target||X.target===he.shadowParent)&&eN(he.delta,B)})[0];if(V&&V.should){X.cancelable&&X.preventDefault();return}if(!V){var q=(y.current.shards||[]).map(yT).filter(Boolean).filter(function(he){return he.contains(X.target)}),ne=q.length>0?l(X,q[0]):!y.current.noIsolation;ne&&X.cancelable&&X.preventDefault()}}},[]),b=Z.useCallback(function(O,X,B,V){var q={name:O,delta:X,target:B,should:V,shadowParent:iN(B)};t.current.push(q),setTimeout(function(){t.current=t.current.filter(function(ne){return ne!==q})},1)},[]),I=Z.useCallback(function(O){i.current=lm(O),o.current=void 0},[]),M=Z.useCallback(function(O){b(O.type,gT(O),O.target,l(O,e.lockRef.current))},[]),k=Z.useCallback(function(O){b(O.type,lm(O),O.target,l(O,e.lockRef.current))},[]);Z.useEffect(function(){return Qc.push(p),e.setCallbacks({onScrollCapture:M,onWheelCapture:M,onTouchMoveCapture:k}),document.addEventListener("wheel",S,Yc),document.addEventListener("touchmove",S,Yc),document.addEventListener("touchstart",I,Yc),function(){Qc=Qc.filter(function(O){return O!==p}),document.removeEventListener("wheel",S,Yc),document.removeEventListener("touchmove",S,Yc),document.removeEventListener("touchstart",I,Yc)}},[]);var j=e.removeScrollBar,K=e.inert;return Z.createElement(Z.Fragment,null,K?Z.createElement(p,{styles:tN(u)}):null,j?Z.createElement(ZB,{gapMode:e.gapMode}):null)}function iN(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sN=LB(HA,rN);var JA=Z.forwardRef(function(e,t){return Z.createElement(ey,fo({},e,{ref:t,sideCar:sN}))});JA.classNames=ey.classNames;var oN=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Jc=new WeakMap,cm=new WeakMap,um={},a0=0,eM=function(e){return e&&(e.host||eM(e.parentNode))},aN=function(e,t){return t.map(function(i){if(e.contains(i))return i;var o=eM(i);return o&&e.contains(o)?o:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},lN=function(e,t,i,o){var u=aN(t,Array.isArray(e)?e:[e]);um[i]||(um[i]=new WeakMap);var p=um[i],y=[],l=new Set,S=new Set(u),b=function(M){!M||l.has(M)||(l.add(M),b(M.parentNode))};u.forEach(b);var I=function(M){!M||S.has(M)||Array.prototype.forEach.call(M.children,function(k){if(l.has(k))I(k);else try{var j=k.getAttribute(o),K=j!==null&&j!=="false",O=(Jc.get(k)||0)+1,X=(p.get(k)||0)+1;Jc.set(k,O),p.set(k,X),y.push(k),O===1&&K&&cm.set(k,!0),X===1&&k.setAttribute(i,"true"),K||k.setAttribute(o,"true")}catch(B){console.error("aria-hidden: cannot operate on ",k,B)}})};return I(t),l.clear(),a0++,function(){y.forEach(function(M){var k=Jc.get(M)-1,j=p.get(M)-1;Jc.set(M,k),p.set(M,j),k||(cm.has(M)||M.removeAttribute(o),cm.delete(M)),j||M.removeAttribute(i)}),a0--,a0||(Jc=new WeakMap,Jc=new WeakMap,cm=new WeakMap,um={})}},cN=function(e,t,i){i===void 0&&(i="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),u=oN(e);return u?(o.push.apply(o,Array.from(u.querySelectorAll("[aria-live]"))),lN(o,u,i,"aria-hidden")):function(){return null}},v1="Dialog",[tM,QN]=kx(v1),[uN,Xs]=tM(v1),nM=e=>{const{__scopeDialog:t,children:i,open:o,defaultOpen:u,onOpenChange:p,modal:y=!0}=e,l=Z.useRef(null),S=Z.useRef(null),[b=!1,I]=HE({prop:o,defaultProp:u,onChange:p});return de.jsx(uN,{scope:t,triggerRef:l,contentRef:S,contentId:Vv(),titleId:Vv(),descriptionId:Vv(),open:b,onOpenChange:I,onOpenToggle:Z.useCallback(()=>I(M=>!M),[I]),modal:y,children:i})};nM.displayName=v1;var rM="DialogTrigger",hN=Z.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Xs(rM,i),p=Si(t,u.triggerRef);return de.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":w1(u.open),...o,ref:p,onClick:In(e.onClick,u.onOpenToggle)})});hN.displayName=rM;var _1="DialogPortal",[dN,iM]=tM(_1,{forceMount:void 0}),sM=e=>{const{__scopeDialog:t,forceMount:i,children:o,container:u}=e,p=Xs(_1,t);return de.jsx(dN,{scope:t,forceMount:i,children:Z.Children.map(o,y=>de.jsx(Ku,{present:i||p.open,children:de.jsx(Ax,{asChild:!0,container:u,children:y})}))})};sM.displayName=_1;var gg="DialogOverlay",oM=Z.forwardRef((e,t)=>{const i=iM(gg,e.__scopeDialog),{forceMount:o=i.forceMount,...u}=e,p=Xs(gg,e.__scopeDialog);return p.modal?de.jsx(Ku,{present:o||p.open,children:de.jsx(pN,{...u,ref:t})}):null});oM.displayName=gg;var pN=Z.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Xs(gg,i);return de.jsx(JA,{as:Uu,allowPinchZoom:!0,shards:[u.contentRef],children:de.jsx(ar.div,{"data-state":w1(u.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),oc="DialogContent",aM=Z.forwardRef((e,t)=>{const i=iM(oc,e.__scopeDialog),{forceMount:o=i.forceMount,...u}=e,p=Xs(oc,e.__scopeDialog);return de.jsx(Ku,{present:o||p.open,children:p.modal?de.jsx(fN,{...u,ref:t}):de.jsx(mN,{...u,ref:t})})});aM.displayName=oc;var fN=Z.forwardRef((e,t)=>{const i=Xs(oc,e.__scopeDialog),o=Z.useRef(null),u=Si(t,i.contentRef,o);return Z.useEffect(()=>{const p=o.current;if(p)return cN(p)},[]),de.jsx(lM,{...e,ref:u,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:In(e.onCloseAutoFocus,p=>{var y;p.preventDefault(),(y=i.triggerRef.current)==null||y.focus()}),onPointerDownOutside:In(e.onPointerDownOutside,p=>{const y=p.detail.originalEvent,l=y.button===0&&y.ctrlKey===!0;(y.button===2||l)&&p.preventDefault()}),onFocusOutside:In(e.onFocusOutside,p=>p.preventDefault())})}),mN=Z.forwardRef((e,t)=>{const i=Xs(oc,e.__scopeDialog),o=Z.useRef(!1),u=Z.useRef(!1);return de.jsx(lM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:p=>{var y,l;(y=e.onCloseAutoFocus)==null||y.call(e,p),p.defaultPrevented||(o.current||(l=i.triggerRef.current)==null||l.focus(),p.preventDefault()),o.current=!1,u.current=!1},onInteractOutside:p=>{var S,b;(S=e.onInteractOutside)==null||S.call(e,p),p.defaultPrevented||(o.current=!0,p.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const y=p.target;((b=i.triggerRef.current)==null?void 0:b.contains(y))&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&u.current&&p.preventDefault()}})}),lM=Z.forwardRef((e,t)=>{const{__scopeDialog:i,trapFocus:o,onOpenAutoFocus:u,onCloseAutoFocus:p,...y}=e,l=Xs(oc,i),S=Z.useRef(null),b=Si(t,S);return SB(),de.jsxs(de.Fragment,{children:[de.jsx(GA,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:u,onUnmountAutoFocus:p,children:de.jsx(Lg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":w1(l.open),...y,ref:b,onDismiss:()=>l.onOpenChange(!1)})}),de.jsxs(de.Fragment,{children:[de.jsx(yN,{titleId:l.titleId}),de.jsx(_N,{contentRef:S,descriptionId:l.descriptionId})]})]})}),x1="DialogTitle",cM=Z.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Xs(x1,i);return de.jsx(ar.h2,{id:u.titleId,...o,ref:t})});cM.displayName=x1;var uM="DialogDescription",hM=Z.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Xs(uM,i);return de.jsx(ar.p,{id:u.descriptionId,...o,ref:t})});hM.displayName=uM;var dM="DialogClose",gN=Z.forwardRef((e,t)=>{const{__scopeDialog:i,...o}=e,u=Xs(dM,i);return de.jsx(ar.button,{type:"button",...o,ref:t,onClick:In(e.onClick,()=>u.onOpenChange(!1))})});gN.displayName=dM;function w1(e){return e?"open":"closed"}var pM="DialogTitleWarning",[JN,fM]=r4(pM,{contentName:oc,titleName:x1,docsSlug:"dialog"}),yN=({titleId:e})=>{const t=fM(pM),i=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Z.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},vN="DialogDescriptionWarning",_N=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fM(vN).contentName}}.`;return Z.useEffect(()=>{var p;const u=(p=e.current)==null?void 0:p.getAttribute("aria-describedby");t&&u&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null},xN=nM,wN=sM,mM=oM,gM=aM,yM=cM,vM=hM;const bN=()=>{const[e,t]=Z.useState(!1);return Z.useEffect(()=>{const i=()=>{if(!window.visualViewport)return;const o=window.visualViewport.height<window.innerHeight*.8;t(o)};return window.visualViewport&&(window.visualViewport.addEventListener("resize",i),window.visualViewport.addEventListener("scroll",i)),window.addEventListener("resize",i),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",i),window.visualViewport.removeEventListener("scroll",i)),window.removeEventListener("resize",i)}},[]),e},ty=xN,SN=wN,_M=Z.forwardRef(({className:e,...t},i)=>de.jsx(mM,{ref:i,className:Ei("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));_M.displayName=mM.displayName;const bp=Z.forwardRef(({className:e,children:t,...i},o)=>{const u=bN();return de.jsxs(SN,{children:[de.jsx(_M,{}),de.jsx(gM,{ref:o,className:Ei("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 rounded-3xl sm:w-full",e),style:{background:"hsl(167 49% 7% / 0.95)",backdropFilter:"blur(12px)",transition:"all 0.2s ease-out",maxHeight:u?"50vh":"85vh",overflowY:"auto",margin:"auto",transform:u?"translate(-50%, -85%)":"translate(-50%, -50%)",position:"fixed"},...i,children:t})]})});bp.displayName=gM.displayName;const Sp=({className:e,...t})=>de.jsx("div",{className:Ei("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Sp.displayName="DialogHeader";const Tp=Z.forwardRef(({className:e,...t},i)=>de.jsx(yM,{ref:i,className:Ei("text-lg font-semibold leading-none tracking-tight",e),...t}));Tp.displayName=yM.displayName;const TN=Z.forwardRef(({className:e,...t},i)=>de.jsx(vM,{ref:i,className:Ei("text-sm text-muted-foreground",e),...t}));TN.displayName=vM.displayName;const xM=Z.forwardRef(({className:e,...t},i)=>de.jsx("textarea",{className:Ei("flex min-h-[80px] w-full rounded-3xl border border-input bg-background px-4 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[0.5px] focus-visible:ring-primary/50 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));xM.displayName="Textarea";const b1=Z.forwardRef(({className:e,type:t,...i},o)=>de.jsx("input",{type:t,className:Ei("flex h-10 w-full rounded-full border border-input bg-background px-4 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-[0.5px] focus-visible:ring-primary/50 focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...i}));b1.displayName="Input";const CN=({isOpen:e,onClose:t,capturedLocation:i})=>{const[o,u]=Z.useState(""),[p,y]=Z.useState(""),{addPOI:l}=dl(),S=()=>{o.trim()&&(l({coordinates:i,name:o.trim(),comment:p.trim()}),u(""),y(""),t())};return de.jsx(ty,{open:e,modal:!0,children:de.jsxs(bp,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[de.jsx(Sp,{children:de.jsx(Tp,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Ajouter un Point d'Intrt"})}),de.jsxs(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[de.jsx(b1,{placeholder:"Nom du point d'intrt",value:o,onChange:b=>u(b.target.value),className:"h-12 text-base md:text-lg placeholder:text-foreground/50"}),de.jsx(xM,{placeholder:"Description (optionnel)",value:p,onChange:b=>y(b.target.value),className:"resize-none h-24 text-base md:text-lg placeholder:text-foreground/50"}),de.jsxs("div",{className:"flex justify-end gap-3",children:[de.jsx(_o,{variant:"outline",onClick:t,className:"bg-background/50 text-foreground hover:bg-accent/50 h-12",children:"Annuler"}),de.jsx(_o,{onClick:S,disabled:!o.trim(),className:"bg-primary text-primary-foreground hover:bg-primary/90 h-12 button-primary",children:"Ajouter"})]})]})]})})},EN=(e,t,i)=>{const o=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="QROSS Tracker"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t}</name>
    <time>${new Date().toISOString()}</time>
  </metadata>`,u=i.map(({coordinates:[S,b],name:I,comment:M})=>`  <wpt lat="${b.toFixed(6)}" lon="${S.toFixed(6)}">
    <name>${I}</name>
    <desc>${M}</desc>
    <sym>Flag, Blue</sym>
  </wpt>`).join(`
`),p=e.map(({coordinates:[S,b],altitude:I,timestamp:M})=>`      <trkpt lat="${b.toFixed(6)}" lon="${S.toFixed(6)}">
        ${I!==null?`<ele>${I.toFixed(1)}</ele>`:""}
        <time>${new Date(M).toISOString()}</time>
      </trkpt>`).join(`
`),y=`
  <trk>
    <name>${t}</name>
    <desc>Track recorded by QROSS Tracker</desc>
    <trkseg>
${p}
    </trkseg>
  </trk>`;return`${o}
${u}
${y}
</gpx>`},PN=(e,t,i=[])=>{const o=EN(e,t,i),u=new Blob([o],{type:"application/gpx+xml"}),p=URL.createObjectURL(u),y=document.createElement("a"),l=new Date().toISOString().split("T")[0],S=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();y.href=p,y.download=`${S}_${l}.gpx`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p)},kN=({isOpen:e,onClose:t,onNewTrack:i})=>{const{currentPath:o,trackName:u,pois:p}=dl(),y=()=>{o.length>0&&(PN(o,u,p),ja.success("Parcours enregistr au format GPX",{className:"bg-background/95 border-border/50 text-foreground"}),t(),i())},l=()=>{t(),i()};return de.jsx(ty,{open:e,modal:!0,children:de.jsxs(bp,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[de.jsx(Sp,{className:"mb-4",children:de.jsx(Tp,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Enregistrement Termin"})}),de.jsx(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:de.jsxs("div",{className:"flex flex-col gap-4",children:[de.jsxs(_o,{onClick:y,className:"h-12 bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:[de.jsx(U4,{className:"mr-2 h-5 w-5"}),"Tlcharger le GPX"]}),de.jsxs(_o,{onClick:l,className:"h-12 text-white hover:bg-muted/90 button-primary",style:{background:"hsl(167 37% 16%)"},children:[de.jsx(yP,{className:"mr-2 h-5 w-5"}),"Nouveau Parcours"]})]})})]})})},AN=({onClose:e})=>{const[t,i]=Z.useState(""),{startTracking:o}=dl(),[u,p]=Z.useState(!0),y=()=>{t.trim()&&(o(t.trim()),p(!1),e==null||e())};return de.jsx(ty,{open:u,modal:!0,children:de.jsxs(bp,{className:"w-[90vw] max-w-md mx-auto dialog-content-top",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[de.jsx(Sp,{className:"mb-2",children:de.jsx(Tp,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Crer un nouveau parcours"})}),de.jsxs(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[de.jsx("p",{className:"text-sm md:text-base text-foreground/80 leading-relaxed -mt-1",children:"Pour crer un nouveau parcours, entrez le nom de votre parcours ci-dessous et autorisez la golocalisation."}),de.jsx("div",{children:de.jsx(b1,{placeholder:"Nom du parcours",value:t,onChange:l=>i(l.target.value),className:"h-12 text-base md:text-lg placeholder:text-foreground/50"})}),de.jsx("div",{className:"flex justify-center",children:de.jsx(_o,{onClick:y,disabled:!t.trim(),className:"w-full md:w-auto h-14 md:h-16 px-6 md:px-12 text-base md:text-xl font-bold bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:"Dmarrer l'enregistrement"})})]})]})})},MN=({isOpen:e,onClose:t,onStop:i})=>{const{resumeTracking:o}=dl(),u=()=>{o(),t()},p=()=>{i(),t()};return de.jsx(ty,{open:e,modal:!0,children:de.jsxs(bp,{className:"w-[90vw] max-w-md mx-auto",style:{background:"hsl(167 49% 7% / 0.8)",backdropFilter:"blur(12px)"},children:[de.jsx(Sp,{className:"mb-4",children:de.jsx(Tp,{className:"text-xl md:text-2xl font-bold tracking-tight text-foreground",children:"Enregistrement en pause"})}),de.jsxs(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[de.jsxs(_o,{onClick:u,className:"w-full h-12 bg-primary text-primary-foreground hover:bg-primary/90 button-primary",children:[de.jsx(yP,{className:"mr-2 h-5 w-5"}),"Reprendre l'enregistrement"]}),de.jsxs(_o,{onClick:p,className:"w-full h-12 text-white hover:bg-muted/90 button-primary",style:{background:"hsl(167 37% 16%)"},children:[de.jsx(q4,{className:"mr-2 h-5 w-5"}),"Arrter l'enregistrement"]})]})]})})},IN=()=>{const{isTracking:e,stopTracking:t,pauseTracking:i,currentLocation:o}=dl(),[u,p]=Z.useState(!1),[y,l]=Z.useState(!1),[S,b]=Z.useState(!0),[I,M]=Z.useState(!1),[k,j]=Z.useState(null),K=()=>{i(),M(!0)},O=()=>{t(),M(!1),l(!0)},X=()=>{b(!0)},B=()=>{o&&(j(o),p(!0))};return de.jsxs(de.Fragment,{children:[e&&de.jsx(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-[25px] left-0 right-0 p-4 flex justify-center items-center gap-4 z-50 pointer-events-none",children:de.jsxs("div",{className:"flex gap-4 pointer-events-auto",children:[de.jsx(_o,{onClick:K,className:"button-control button-primary",style:{background:"#343f3c",width:"128px",height:"64px"},children:de.jsx(G4,{style:{color:"#ace47c",width:"40px",height:"40px"}})}),de.jsx(_o,{onClick:B,className:"button-control button-primary",style:{background:"#343f3c",width:"128px",height:"64px"},children:de.jsx($4,{style:{color:"#ace47c",width:"40px",height:"40px"}})})]})}),k&&de.jsx(CN,{isOpen:u,onClose:()=>{p(!1),j(null)},capturedLocation:k}),de.jsx(MN,{isOpen:I,onClose:()=>M(!1),onStop:O}),de.jsx(kN,{isOpen:y,onClose:()=>l(!1),onNewTrack:X}),S&&de.jsx(AN,{onClose:()=>b(!1)})]})},DN=e=>e.length<2?0:X7(xk(e),{units:"kilometers"}),LN=e=>{if(e.length<2)return 0;let t=0;for(let i=1;i<e.length;i++){const o=e[i-1].altitude,u=e[i].altitude;if(o!==null&&u!==null){const p=u-o;p>0&&(t+=p)}}return t},vT=e=>e<1?`${Math.round(e*1e3)} m`:`${e.toFixed(2)} km`,zN=e=>e===null?"-- m":`${Math.round(e)} m`,RN=e=>`${Math.round(e)}`,FN=()=>{const{isTracking:e,currentPath:t,currentAltitude:i,trackName:o}=dl();if(!e||t.length===0)return null;const u=DN(t.map(y=>y.coordinates)),p=LN(t);return de.jsxs(po.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"fixed top-24 -left-2 z-10 flex flex-col gap-1.5",children:[de.jsx(po.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-auto min-w-[90px] mb-1",children:de.jsxs("div",{className:"flex flex-col items-center",children:[de.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Parcours"}),de.jsx("p",{className:"text-base font-bold text-center",style:{color:"#ace47c"},children:o})]})}),de.jsx(po.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:de.jsxs("div",{className:"flex flex-col items-center",children:[de.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Altitude"}),de.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[de.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:zN(i).split(" ")[0]}),de.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:"m"})]})]})}),de.jsx(po.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:de.jsxs("div",{className:"flex flex-col items-center",children:[de.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Distance"}),de.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[de.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:vT(u).split(" ")[0]}),de.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:vT(u).split(" ")[1]})]})]})}),de.jsx(po.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-[#343f3c]/90 backdrop-blur-sm px-3 py-1.5 rounded-2xl shadow-lg border border-[#ace47c]/10 w-[90px]",children:de.jsxs("div",{className:"flex flex-col items-center",children:[de.jsx("p",{className:"text-[9px] font-medium text-foreground/70 uppercase tracking-wider",children:"Dnivel +"}),de.jsxs("div",{className:"flex items-baseline justify-center w-full",children:[de.jsx("p",{className:"text-base font-bold tabular-nums text-center",style:{color:"#ace47c"},children:RN(p)}),de.jsx("span",{className:"ml-0.5 text-xs font-bold",style:{color:"#ace47c"},children:"m"})]})]})})]})},ON=()=>de.jsxs("svg",{width:"125",height:"31",viewBox:"0 0 125 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-10 md:h-12 w-auto",children:[de.jsx("path",{d:"M27.7573 28.4275C24.6873 28.4275 23.0073 25.9575 21.5173 23.7675C20.0973 21.6875 19.1373 20.4275 17.7573 20.4275C16.9273 20.4275 16.2573 19.7575 16.2573 18.9275C16.2573 18.0975 16.9273 17.4275 17.7573 17.4275C20.8273 17.4275 22.5073 19.8975 23.9973 22.0875C25.4173 24.1675 26.3773 25.4275 27.7573 25.4275C28.5873 25.4275 29.2573 26.0975 29.2573 26.9275C29.2573 27.7575 28.5873 28.4275 27.7573 28.4275Z",fill:"#DEAD78"}),de.jsx("path",{d:"M19.4475 25.1775C19.7375 25.5975 20.0475 26.0575 20.4075 26.5375L17.1275 29.8175C16.6175 30.3175 15.9475 30.5775 15.2875 30.5775C14.6275 30.5775 13.9575 30.3175 13.4475 29.8175L8.4975 24.8675L10.7575 22.5975L15.2875 27.1275L18.5275 23.8875C18.8575 24.3175 19.1875 24.7975 19.4475 25.1775Z",fill:"#324540"}),de.jsx("path",{d:"M30.5775 15.2875C30.5775 15.9775 30.3075 16.6375 29.8175 17.1275L26.1475 20.7975C26.1475 20.7975 26.0875 20.7075 26.0575 20.6675C25.5475 19.9075 24.9475 19.0375 24.2175 18.1975L27.1275 15.2875L22.5975 10.7575L24.8675 8.4975L29.8175 13.4475C30.3075 13.9375 30.5775 14.5875 30.5775 15.2875Z",fill:"#324540"}),de.jsx("path",{d:"M19.8175 7.9675L15.2875 3.4375L10.7575 7.9675L8.4975 5.7075L13.4475 0.7575C14.4575 -0.2525 16.1075 -0.2525 17.1275 0.7575L22.0775 5.7075L19.8175 7.9675Z",fill:"#324540"}),de.jsx("path",{d:"M5.7075 22.0775L0.7575 17.1275C-0.2525 16.1175 -0.2525 14.4675 0.7575 13.4475L5.7075 8.4975L7.9675 10.7575L3.4375 15.2875L7.9675 19.8175L5.7075 22.0775Z",fill:"#324540"}),de.jsx("path",{d:"M55.7274 17.8287C55.0974 19.0487 54.2074 20.0487 53.0774 20.8287C51.9374 21.6087 50.6474 22.1087 49.1874 22.3187V25.4387H46.0674V22.3187C44.6074 22.1087 43.3174 21.6187 42.1774 20.8287C41.0374 20.0487 40.1574 19.0487 39.5274 17.8287C38.8974 16.6087 38.5774 15.2687 38.5774 13.7987C38.5774 12.1687 38.9674 10.6887 39.7574 9.36867C40.5374 8.04867 41.6174 7.01867 42.9974 6.26867C44.3774 5.51867 45.9174 5.14867 47.6274 5.14867C49.3374 5.14867 50.8874 5.51867 52.2574 6.26867C53.6374 7.00867 54.7174 8.03867 55.4974 9.34867C56.2774 10.6587 56.6774 12.1387 56.6774 13.7887C56.6774 15.2587 56.3574 16.6087 55.7274 17.8187V17.8287ZM52.3074 17.5387C53.1274 16.4987 53.5274 15.2487 53.5274 13.7987C53.5274 12.6787 53.2674 11.6687 52.7574 10.7587C52.2474 9.85867 51.5374 9.14867 50.6474 8.64867C49.7474 8.14867 48.7474 7.88867 47.6274 7.88867C46.5074 7.88867 45.4974 8.13867 44.6074 8.64867C43.7074 9.14867 43.0074 9.85867 42.4974 10.7587C41.9874 11.6587 41.7274 12.6787 41.7274 13.7987C41.7274 15.2587 42.1374 16.4987 42.9474 17.5287C43.7674 18.5587 44.8374 19.2287 46.1674 19.5287V15.8287H49.0674V19.5487C50.4074 19.2487 51.4874 18.5687 52.3074 17.5287V17.5387Z",fill:"#324540"}),de.jsx("path",{d:"M70.9774 22.1987L67.5474 17.2787C67.4074 17.2987 67.1874 17.2987 66.8974 17.2987H63.1074V22.1987H59.9874V5.39867H66.8974C68.3574 5.39867 69.6174 5.63867 70.6974 6.11867C71.7774 6.59867 72.6074 7.28867 73.1774 8.17867C73.7574 9.07867 74.0374 10.1387 74.0374 11.3687C74.0374 12.5987 73.7274 13.7187 73.1174 14.6287C72.4974 15.5387 71.6174 16.2187 70.4674 16.6687L74.3274 22.1887H70.9674L70.9774 22.1987ZM69.8474 8.89867C69.1474 8.31867 68.1074 8.03867 66.7474 8.03867H63.0974V14.7387H66.7474C68.1074 14.7387 69.1374 14.4487 69.8474 13.8587C70.5574 13.2687 70.9074 12.4487 70.9074 11.3787C70.9074 10.3087 70.5574 9.47867 69.8474 8.90867V8.89867Z",fill:"#324540"}),de.jsx("path",{d:"M80.7474 21.3187C79.3674 20.5787 78.2874 19.5387 77.5074 18.2187C76.7274 16.8987 76.3274 15.4187 76.3274 13.7887C76.3274 12.1587 76.7174 10.6787 77.5074 9.35867C78.2874 8.03867 79.3674 7.00867 80.7474 6.25867C82.1274 5.50867 83.6674 5.13867 85.3774 5.13867C87.0874 5.13867 88.6374 5.50867 90.0074 6.25867C91.3874 6.99867 92.4674 8.02867 93.2474 9.33867C94.0274 10.6487 94.4274 12.1287 94.4274 13.7787C94.4274 15.4287 94.0374 16.9087 93.2474 18.2187C92.4674 19.5287 91.3874 20.5587 90.0074 21.2987C88.6274 22.0387 87.0874 22.4187 85.3774 22.4187C83.6674 22.4187 82.1174 22.0487 80.7474 21.2987V21.3187ZM88.4074 18.9387C89.3074 18.4387 90.0074 17.7287 90.5174 16.8287C91.0274 15.9287 91.2874 14.9087 91.2874 13.7887C91.2874 12.6687 91.0274 11.6587 90.5174 10.7487C90.0074 9.84867 89.2974 9.13867 88.4074 8.63867C87.5074 8.13867 86.5074 7.87867 85.3874 7.87867C84.2674 7.87867 83.2574 8.12867 82.3674 8.63867C81.4674 9.13867 80.7674 9.84867 80.2574 10.7487C79.7474 11.6487 79.4874 12.6687 79.4874 13.7887C79.4874 14.9087 79.7474 15.9187 80.2574 16.8287C80.7674 17.7287 81.4774 18.4387 82.3674 18.9387C83.2674 19.4387 84.2674 19.6987 85.3874 19.6987C86.5074 19.6987 87.5174 19.4487 88.4074 18.9387Z",fill:"#324540"}),de.jsx("path",{d:"M99.1874 21.8887C97.9774 21.5187 97.0274 21.0287 96.3174 20.4287L97.3974 18.0087C98.0874 18.5487 98.9274 18.9987 99.9274 19.3387C100.927 19.6787 101.927 19.8587 102.937 19.8587C104.187 19.8587 105.117 19.6587 105.737 19.2587C106.357 18.8587 106.657 18.3287 106.657 17.6787C106.657 17.1987 106.487 16.7987 106.137 16.4887C105.797 16.1787 105.357 15.9287 104.827 15.7587C104.297 15.5787 103.577 15.3787 102.667 15.1587C101.387 14.8587 100.347 14.5487 99.5574 14.2487C98.7674 13.9487 98.0874 13.4687 97.5174 12.8187C96.9474 12.1687 96.6674 11.2987 96.6674 10.1887C96.6674 9.25867 96.9174 8.41867 97.4274 7.65867C97.9374 6.89867 98.6874 6.29867 99.7074 5.84867C100.727 5.39867 101.967 5.17867 103.437 5.17867C104.457 5.17867 105.467 5.30867 106.457 5.55867C107.447 5.81867 108.307 6.17867 109.027 6.65867L108.047 9.07867C107.307 8.64867 106.547 8.31867 105.747 8.09867C104.947 7.87867 104.167 7.75867 103.417 7.75867C102.187 7.75867 101.267 7.96867 100.667 8.37867C100.067 8.79867 99.7674 9.34867 99.7674 10.0387C99.7674 10.5187 99.9374 10.9087 100.287 11.2187C100.627 11.5187 101.067 11.7587 101.597 11.9387C102.127 12.1187 102.847 12.3187 103.757 12.5387C105.007 12.8287 106.027 13.1287 106.827 13.4387C107.627 13.7487 108.307 14.2287 108.877 14.8687C109.447 15.5087 109.727 16.3687 109.727 17.4587C109.727 18.3887 109.477 19.2287 108.967 19.9787C108.467 20.7287 107.697 21.3287 106.677 21.7787C105.657 22.2287 104.407 22.4487 102.937 22.4487C101.637 22.4487 100.387 22.2687 99.1774 21.8987L99.1874 21.8887Z",fill:"#324540"}),de.jsx("path",{d:"M114.287 21.8887C113.077 21.5187 112.127 21.0287 111.417 20.4287L112.497 18.0087C113.187 18.5487 114.027 18.9987 115.027 19.3387C116.027 19.6787 117.027 19.8587 118.037 19.8587C119.287 19.8587 120.217 19.6587 120.837 19.2587C121.457 18.8587 121.757 18.3287 121.757 17.6787C121.757 17.1987 121.587 16.7987 121.237 16.4887C120.897 16.1787 120.457 15.9287 119.927 15.7587C119.397 15.5787 118.677 15.3787 117.767 15.1587C116.487 14.8587 115.447 14.5487 114.657 14.2487C113.867 13.9487 113.187 13.4687 112.617 12.8187C112.047 12.1687 111.767 11.2987 111.767 10.1887C111.767 9.25867 112.017 8.41867 112.527 7.65867C113.037 6.89867 113.787 6.29867 114.807 5.84867C115.827 5.39867 117.067 5.17867 118.537 5.17867C119.557 5.17867 120.567 5.30867 121.557 5.55867C122.547 5.81867 123.407 6.17867 124.127 6.65867L123.147 9.07867C122.407 8.64867 121.647 8.31867 120.847 8.09867C120.047 7.87867 119.267 7.75867 118.517 7.75867C117.287 7.75867 116.367 7.96867 115.767 8.37867C115.167 8.79867 114.867 9.34867 114.867 10.0387C114.867 10.5187 115.037 10.9087 115.387 11.2187C115.727 11.5187 116.167 11.7587 116.697 11.9387C117.227 12.1187 117.947 12.3187 118.857 12.5387C120.107 12.8287 121.127 13.1287 121.927 13.4387C122.727 13.7487 123.407 14.2287 123.977 14.8687C124.547 15.5087 124.827 16.3687 124.827 17.4587C124.827 18.3887 124.577 19.2287 124.067 19.9787C123.567 20.7287 122.797 21.3287 121.777 21.7787C120.757 22.2287 119.507 22.4487 118.037 22.4487C116.737 22.4487 115.487 22.2687 114.277 21.8987L114.287 21.8887Z",fill:"#324540"})]}),BN=(e=!1)=>{const[t,i]=Z.useState(null),o=async()=>{try{if("wakeLock"in navigator){const p=await navigator.wakeLock.request("screen");i(p)}}catch(p){console.error("Wake Lock error:",p),ja.error("Impossible de garder l'cran allum",{className:"bg-background/95 border-border/50 text-foreground"})}},u=async()=>{if(t)try{await t.release(),i(null)}catch(p){console.error("Wake Lock release error:",p)}};return Z.useEffect(()=>{e?o():u();const p=()=>{document.visibilityState==="visible"&&e&&o()};return document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p),u()}},[e]),{wakeLock:t}},NN=()=>{const{isTracking:e}=dl();return BN(e),de.jsxs("div",{className:"fixed inset-0 overflow-hidden",children:[de.jsx("div",{className:"absolute top-4 left-0 right-0 z-10 flex justify-center pointer-events-none",children:de.jsx(ON,{})}),de.jsx(iF,{}),de.jsx(FN,{}),de.jsx(IN,{})]})},VN=()=>de.jsx(nF,{children:de.jsx(NN,{})}),jN=()=>{const e=gk();return Z.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),de.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:de.jsxs("div",{className:"text-center",children:[de.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),de.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),de.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},UN=new Y3({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1,onError:e=>{ta(e)||console.error("Query error:",e)},useErrorBoundary:!0},mutations:{onError:e=>{ta(e)||console.error("Mutation error:",e)},useErrorBoundary:!0}}}),$N=()=>de.jsx(N7,{children:de.jsx(J3,{client:UN,children:de.jsxs(k3,{children:[de.jsx(kz,{}),de.jsx(Jz,{}),de.jsx(O7,{children:de.jsxs(z7,{children:[de.jsx(m_,{path:"/",element:de.jsx(VN,{})}),de.jsx(m_,{path:"*",element:de.jsx(jN,{})})]})})]})})});window.onerror=(e,t,i,o,u)=>{ta(u)||Wg("GlobalError",u,{message:e,source:t,lineno:i,colno:o})};window.addEventListener("unhandledrejection",e=>{ta(e.reason)||Wg("UnhandledRejection",e.reason)});window.addEventListener("error",e=>{ta(e.error)||Wg("UncaughtException",e.error,{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno})});jE(document.getElementById("root")).render(de.jsx($N,{}));
